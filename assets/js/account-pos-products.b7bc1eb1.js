(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account-pos-products"],{"1e3c":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("4e82"),c("99af");var r=c("f2bf"),o=function(e){return Object(r["pushScopeId"])("data-v-3d098886"),e=e(),Object(r["popScopeId"])(),e},n={class:"card"},a=o((function(){return Object(r["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1)})),l={class:"body"},s={class:"flex items-center justify-end mb-3 flex-col lg:flex-row"},i=o((function(){return Object(r["createElementVNode"])("option",{value:""},"Select Category",-1)})),u=["value"],d={class:"relative mb-3 lg:mb-0 ml-0 lg:ml-3 w-full lg:w-auto"},m={key:0,class:"mx-auto mb-3 w-40"},b={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},p={class:"table-sm mb-2"},j=o((function(){return Object(r["createElementVNode"])("th",null,"Category",-1)})),O=o((function(){return Object(r["createElementVNode"])("th",null,"Image",-1)})),f={class:"flex items-center"},v=Object(r["createTextVNode"])(" Name "),g=o((function(){return Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"SKU / EAN / Barcode / QR",-1)})),y=o((function(){return Object(r["createElementVNode"])("th",null,"Quantity",-1)})),k={class:"flex items-center"},E=Object(r["createTextVNode"])(" Price "),N=o((function(){return Object(r["createElementVNode"])("th",null,"Actions",-1)})),h=["onClick"],V={class:"w-12 h-12 rounded-full overflow-hidden"},w=["src","onClick"],x=["onClick"],C={class:"break-all"},B=["onClick"],I=["onClick"],S=["onClick"],D={class:"flex items-center space-x-1"},P=["onClick"],M=["onClick"],A={key:0,class:"flex items-center space-x-1"},q=["onClick"],U=["onClick"],R={key:1},T={colspan:"7",class:"text-center"};function F(e,t,c,o,F,K){var L=Object(r["resolveComponent"])("nav-tabs"),J=Object(r["resolveComponent"])("icon"),H=Object(r["resolveComponent"])("j-button"),z=Object(r["resolveComponent"])("StreamBarcodeReader"),W=Object(r["resolveComponent"])("pagination"),X=Object(r["resolveComponent"])("pos-layout"),Q=Object(r["resolveComponent"])("save-product-modal"),Y=Object(r["resolveComponent"])("add-to-cart-modal");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(X,null,{content:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",n,[Object(r["createVNode"])(L),a,Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("span",{class:"hover:text-blue-500 mb-3 lg:mb-0 ml-0 lg:ml-3 cursor-pointer w-full lg:w-auto",onClick:t[0]||(t[0]=function(t){return e.isBarcodeScanner=!e.isBarcodeScanner})},[Object(r["createVNode"])(J,{name:"barcode"})]),Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"aria-label":"Select Category",class:"form-select w-full mb-3 lg:mb-0 ml-0 lg:ml-3 w-full lg:w-72","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.categoryId=t})},[i,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(o.categories,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t,value:e.id},Object(r["toDisplayString"])(e.name),9,u)})),128))],512),[[r["vModelSelect"],e.categoryId]]),Object(r["createElementVNode"])("div",d,[Object(r["createVNode"])(J,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.keyword=t}),"aria-label":"Search...",class:"form-input px-10 w-full lg:w-auto",type:"text"},null,512),[[r["vModelText"],e.keyword]]),""!==e.keyword?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[3]||(t[3]=function(t){return e.keyword=""})},[Object(r["createVNode"])(J,{classes:"w-5 h-5",name:"close"})])):Object(r["createCommentVNode"])("",!0)]),e.employee&&"true"===e.employee.isParentUser?(Object(r["openBlock"])(),Object(r["createBlock"])(H,{key:0,class:"ml-3",type:"button",onClick:t[4]||(t[4]=function(e){return o.launchSaveProductModal()})},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(o.translate("pos.products.btn_add")),1)]})),_:1})):Object(r["createCommentVNode"])("",!0)]),e.isBarcodeScanner?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",m,[Object(r["createVNode"])(z,{onDecode:o.onDecode,onError:o.onError},null,8,["onDecode","onError"])])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("table",p,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[j,O,Object(r["createElementVNode"])("th",{onClick:t[5]||(t[5]=function(e){return o.sort("itemName")}),class:"cursor-pointer",style:{"max-width":"150px"}},[Object(r["createElementVNode"])("div",f,[v,"itemName"===e.sortKey?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:0,class:Object(r["normalizeClass"])("ml-4 transform transition-all ".concat("asc"===e.order?"rotate-180":""))},[Object(r["createVNode"])(J,{name:"sort",classes:"w-4 h-4"})],2)):Object(r["createCommentVNode"])("",!0)])]),g,y,Object(r["createElementVNode"])("th",{onClick:t[6]||(t[6]=function(e){return o.sort("price")}),class:"cursor-pointer"},[Object(r["createElementVNode"])("div",k,[E,"price"===e.sortKey?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:0,class:Object(r["normalizeClass"])("ml-4 transform transition-all ".concat("asc"===e.order?"rotate-180":""))},[Object(r["createVNode"])(J,{name:"sort",classes:"w-4 h-4"})],2)):Object(r["createCommentVNode"])("",!0)])]),N])]),Object(r["createElementVNode"])("tbody",null,[o.filteredProducts.length>0?(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],{key:0},Object(r["renderList"])(o.paginatedProducts,(function(t,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:c},[Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("div",{onClick:function(c){return e.categoryId=t.categoryID},class:"cursor-pointer flex items-center"},[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])("background: #"+o.getCategoryColorCode(t.categoryID)),class:"inline-block w-5 h-5 rounded-full mr-3"},null,4),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(o.getCategoryName(t.categoryID)),1)],8,h)]),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("div",V,[Object(r["createElementVNode"])("img",{src:t.imageUri,alt:"",class:"w-12 h-12 object-cover",onClick:function(e){return o.fancyBox(t.imageUri)}},null,8,w)])]),Object(r["createElementVNode"])("td",{onClick:function(e){return o.launchAddToCartModal(t)},class:"cursor-pointer whitespace-normal",style:{width:"150px"}},[Object(r["createElementVNode"])("p",C,Object(r["toDisplayString"])(t.itemName),1)],8,x),Object(r["createElementVNode"])("td",{onClick:function(e){return o.launchAddToCartModal(t)},class:"cursor-pointer"},Object(r["toDisplayString"])(t.sku),9,B),Object(r["createElementVNode"])("td",{onClick:function(e){return o.launchAddToCartModal(t)},class:"cursor-pointer"},Object(r["toDisplayString"])(t.stock),9,I),Object(r["createElementVNode"])("td",{onClick:function(e){return o.launchAddToCartModal(t)},class:"cursor-pointer"},Object(r["toDisplayString"])("".concat(t.price," ").concat(o.currency)),9,S),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("div",D,[Object(r["createElementVNode"])("button",{onClick:function(e){return o.launchAddToCartModal(t)},class:"hover:text-blue-500",type:"button"},[Object(r["createVNode"])(J,{name:"shopping-cart"})],8,P),Object(r["createElementVNode"])("button",{onClick:function(e){return o.markFavourite(t,c)}},[Object(r["createVNode"])(J,{name:"heart",classes:"w-6 h-6 hover:text-red-500 ".concat(o.isFavourite(t)?"text-red-500":"")},null,8,["classes"])],8,M),e.employee&&"true"===e.employee.isParentUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",A,[Object(r["createElementVNode"])("button",{onClick:function(e){return o.launchSaveProductModal(t)},class:"hover:text-blue-500"},[Object(r["createVNode"])(J,{name:"edit"})],8,q),Object(r["createElementVNode"])("button",{onClick:function(e){return o.deleteProduct(t.id)},class:"hover:text-red-500"},[Object(r["createVNode"])(J,{name:"trash"})],8,U)])):Object(r["createCommentVNode"])("",!0)])])])})),128)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",R,[Object(r["createElementVNode"])("td",T,Object(r["toDisplayString"])(o.translate("address_book.empty")),1)]))])])]),o.filteredProducts.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(W,{key:1,meta:e.meta,onPage:o.updatePage},null,8,["meta","onPage"])):Object(r["createCommentVNode"])("",!0)])])]})),_:1}),Object(r["createVNode"])(Q),Object(r["createVNode"])(Y)],64)}var K=c("5530"),L=(c("498a"),c("4de4"),c("d3b7"),c("a4d3"),c("e01a"),c("a9e3"),c("d81d"),c("c35a"),c("fb6a"),c("a434"),c("b64b"),c("66c3")),J=c("edc4"),H=c("cdae"),z=c("4032"),W=c("d529"),X={class:"flex items-center justify-between"},Q={class:"mb-2"},Y={class:"flex items-center justify-between mb-1"},G={class:"text-red-500 text-sm"},_=Object(r["createElementVNode"])("option",{value:""},"Select Category",-1),Z=["value"],$={class:"mb-2"},ee={class:"flex items-center justify-between mb-1"},te={class:"text-red-500 text-sm"},ce={class:"mb-2"},re={class:"flex items-center justify-between mb-1"},oe={class:"text-red-500 text-sm"},ne={class:"mb-2"},ae={class:"grid grid-cols-2 gap-1 md:gap-4"},le={class:"col-span-1"},se={class:"flex items-center justify-between mb-1"},ie={class:"text-red-500 text-sm"},ue={class:"col-span-1"},de={class:"flex items-center justify-between mb-1"},me={class:"text-red-500 text-sm"},be={class:"mb-4"},pe={class:"flex items-center justify-between mb-1"},je={class:"text-red-500 text-sm"},Oe={class:"flex items-center justify-between"},fe={class:"mb-2"},ve={class:"grid grid-cols-2 gap-1 md:gap-4"},ge={class:"col-span-1"},ye={class:"w-28 h-28 overflow-hidden mx-auto"},ke={for:"file",class:"cursor-pointer"},Ee=["src"],Ne={class:"col-span-1"},he={key:0,class:"mx-auto w-40"},Ve={class:"mt-4 text-right"},we={key:0,class:"mr-3"};function xe(e,t,c,o,n,a){var l=Object(r["resolveComponent"])("icon"),s=Object(r["resolveComponent"])("StreamBarcodeReader"),i=Object(r["resolveComponent"])("j-button"),u=Object(r["resolveComponent"])("modal"),d=Object(r["resolveDirective"])("tippy");return Object(r["openBlock"])(),Object(r["createBlock"])(u,{maxWidth:e.maxWidth,show:e.show,onClose:t[10]||(t[10]=function(e){return o.closeModal()})},{title:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",X,[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(o.translate("pos.products.title")),1),Object(r["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=function(e){return o.closeModal()})},[Object(r["createVNode"])(l,{name:"close"})])])]})),content:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("form",{onSubmit:t[9]||(t[9]=Object(r["withModifiers"])((function(e){return o.submit()}),["prevent"]))},[Object(r["createElementVNode"])("div",Q,[Object(r["createElementVNode"])("div",Y,[Object(r["createElementVNode"])("label",null,Object(r["toDisplayString"])(o.translate("pos.products.select_category")),1),Object(r["createElementVNode"])("div",G,Object(r["toDisplayString"])(o.showError(e.errorBag,"categoryId")),1)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{class:"form-select w-full","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.categoryId=t})},[_,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(o.categories,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t,value:e.id},Object(r["toDisplayString"])(e.name),9,Z)})),128))],512),[[r["vModelSelect"],e.form.categoryId]])]),Object(r["createElementVNode"])("div",$,[Object(r["createElementVNode"])("div",ee,[Object(r["createElementVNode"])("label",null,Object(r["toDisplayString"])(o.translate("pos.products.name")),1),Object(r["createElementVNode"])("div",te,Object(r["toDisplayString"])(o.showError(e.errorBag,"name")),1)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.name=t})},null,512),[[r["vModelText"],e.form.name]])]),Object(r["createElementVNode"])("div",ce,[Object(r["createElementVNode"])("div",re,[Object(r["createElementVNode"])("label",null,Object(r["toDisplayString"])(o.translate("pos.products.description")),1),Object(r["createElementVNode"])("div",oe,Object(r["toDisplayString"])(o.showError(e.errorBag,"description")),1)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{class:"form-input w-full",rows:"4","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.description=t})},null,512),[[r["vModelText"],e.form.description]])]),Object(r["createElementVNode"])("div",ne,[Object(r["createElementVNode"])("div",ae,[Object(r["createElementVNode"])("div",le,[Object(r["createElementVNode"])("div",se,[Object(r["createElementVNode"])("label",null,Object(r["toDisplayString"])(o.translate("pos.products.quantity")),1),Object(r["createElementVNode"])("div",ie,Object(r["toDisplayString"])(o.showError(e.errorBag,"quantity")),1)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.quantity=t})},null,512),[[r["vModelText"],e.form.quantity]])]),Object(r["createElementVNode"])("div",ue,[Object(r["createElementVNode"])("div",de,[Object(r["createElementVNode"])("label",null,Object(r["toDisplayString"])(o.translate("pos.products.price"))+" ("+Object(r["toDisplayString"])(e.currency)+")",1),Object(r["createElementVNode"])("div",me,Object(r["toDisplayString"])(o.showError(e.errorBag,"price")),1)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.price=t})},null,512),[[r["vModelText"],e.form.price]])])])]),Object(r["createElementVNode"])("div",be,[Object(r["createElementVNode"])("div",pe,[Object(r["createElementVNode"])("label",null,Object(r["toDisplayString"])(o.translate("pos.products.sku")),1),Object(r["createElementVNode"])("div",je,Object(r["toDisplayString"])(o.showError(e.errorBag,"sku")),1)]),Object(r["createElementVNode"])("div",Oe,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.sku=t})},null,512),[[r["vModelText"],e.form.sku]]),Object(r["createElementVNode"])("span",{class:"hover:text-blue-500 ml-3 cursor-pointer",onClick:t[7]||(t[7]=function(t){return e.isBarcodeScanner=!e.isBarcodeScanner})},[Object(r["createVNode"])(l,{name:"barcode"})])])]),Object(r["createElementVNode"])("div",fe,[Object(r["createElementVNode"])("div",ve,[Object(r["createElementVNode"])("div",ge,[Object(r["createElementVNode"])("div",ye,[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("label",ke,[Object(r["createElementVNode"])("img",{class:"w-28 h-28 object-cover",src:o.getImageUrl,alt:""},null,8,Ee)])),[[d,"Click here to upload"]]),Object(r["createElementVNode"])("input",{onChange:t[8]||(t[8]=function(e){return o.upload(e)}),class:"hidden",id:"file",type:"file",ref:"featuredImg"},null,544)])]),Object(r["createElementVNode"])("div",Ne,[e.isBarcodeScanner?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",he,[Object(r["createVNode"])(s,{onDecode:o.onDecode,onError:o.onError},null,8,["onDecode","onError"])])):Object(r["createCommentVNode"])("",!0)])])]),Object(r["createElementVNode"])("div",Ve,[Object(r["createVNode"])(i,{disabled:e.isProcessing},{default:Object(r["withCtx"])((function(){return[e.isProcessing?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",we,[Object(r["createVNode"])(l,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(o.translate("pos.products.btn_save")),1)]})),_:1},8,["disabled"])])],32)]})),_:1},8,["maxWidth","show"])}c("25f0"),c("2ca0");var Ce=c("714b"),Be=c("ea45"),Ie=c("5502"),Se=c("2ef0"),De=c("8923"),Pe=c("f337"),Me={name:"SaveProductModal",components:{Modal:Ce["a"],Icon:H["a"],JButton:z["a"],StreamBarcodeReader:Pe["a"]},setup:function(){var e=Object(r["inject"])("translate"),t=Object(r["inject"])("emitter"),o=Object(r["inject"])("http"),n=Object(r["inject"])("toast"),a=Object(Ie["b"])(),l=Object(Be["a"])(),s=l.showError,i=l.validate,u=Object(r["ref"])(null),d=Object(r["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,product:null,currency:null,form:{categoryId:"",name:"",description:"",imageUrl:"",quantity:"",price:"",sku:""},errorBag:{},rules:{categoryId:["required"],name:["required"],description:["required"],sku:["required"],quantity:["required","minValue:1","maxValue:9999999"],price:["required","minValue:0.1","regex:/^[0-9]{1,8}([,.][0-9]{1,8})?$/"]},messages:{categoryId:{required:"Please select category"},name:{required:"Product name is required"},description:{required:"Product description is required"},sku:{required:"Product sku is required"},quantity:{required:"Product stock level is required",minValue:"Product stock should be between 1 and 9999999",maxValue:"Product stock should be between 1 and 9999999"},price:{required:"Product price is required",regex:"Please enter a valid price value",minValue:"Price should be greater than 0"}},isProcessing:!1,isBarcodeScanner:!1}),m=Object(r["computed"])((function(){return a.state.user})),b=Object(r["computed"])((function(){return a.state.pos})),p=Object(r["computed"])((function(){return a.state.posCalls})),j=Object(r["computed"])((function(){return d.form.imageUrl?d.form.imageUrl:c("f144")}));Object(r["watch"])((function(){return Object(K["a"])({},d.form)}),(function(e,t){Object.keys(d.errorBag).length>0&&(d.errorBag=i(d.form,d.rules,d.messages))}));var O=function(){d.show=!1},f=function(e){e&&(d.form.sku=e,d.isBarcodeScanner=!1)},v=function(e){console.log(e)},g=function(){var e=Se["cloneDeep"](b.value.products);if(e.length>0){var t=Se["maxBy"](e,(function(e){return Number(e.id)}));return(Number(t.id)+1).toString()}return"1"},y=function(e){var t=e.target.files;if(t.length>0){var c=t[0];if(c.type.startsWith("image/")){var r=new FormData;r.append("file123",c),r.append("MerchantID",m.value.ID);var a="https://app.cointopay.com";o.post("".concat(a,"/MarketAPI?POSBLOB"),r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200===e.status&&(d.form.imageUrl=e.data,u.value.value="")})).catch((function(e){console.log(e)}))}else u.value.value="",n.error("Please provide a valid image file")}},k=function(){if(d.errorBag=i(d.form,d.rules,d.messages),0===Object.keys(d.errorBag).length){d.isProcessing=!0;var e=d.form,t=Se["cloneDeep"](b.value.products),c=!0;if(d.product){var r=Se["findIndex"](t,(function(t){return t.sku===e.sku&&d.product.id!==t.id}));-1===r?(r=Se["findIndex"](t,{id:d.product.id}),t.splice(r,1,{id:d.product.id,categoryID:e.categoryId,itemName:e.name,description:e.description,imageUri:e.imageUrl,sku:e.sku,stock:e.quantity,price:e.price})):(c=!1,d.isProcessing=!1,n.error("Product with this sku already exists!"))}else-1===Se["findIndex"](t,{sku:e.sku})?t.push({id:g(),categoryID:e.categoryId,itemName:e.name,description:e.description,imageUri:e.imageUrl,sku:e.sku,stock:e.quantity,price:e.price}):(c=!1,d.isProcessing=!1,n.error("Product with this sku already exists!"));c&&a.dispatch(De["v"],{call:p.value.products,data:t}).then((function(){d.isProcessing=!1;var e=d.product?"Product updated successfully":"Product added successfully";n.success(e),O()})).catch((function(e){console.log(e),d.isProcessing=!1,n.error("Internal Server Error")}))}};return Object(r["onBeforeMount"])((function(){t.on("saveProductModal",(function(e){d.product=e.product||null,d.currency=e.currency,u.value&&(u.value.value=""),d.form={categoryId:d.product?d.product.categoryID:"",name:d.product?d.product.itemName:"",description:d.product?d.product.description:"",imageUrl:d.product?d.product.imageUri:"",quantity:d.product?d.product.stock:"",price:d.product?d.product.price:"",sku:d.product?d.product.sku:""},d.show=!0}))})),Object(K["a"])(Object(K["a"])({translate:e},Object(r["toRefs"])(d)),{},{featuredImg:u,categories:b.value.categories,showError:s,closeModal:O,getImageUrl:j,onDecode:f,onError:v,upload:y,submit:k})}},Ae=c("6b0d"),qe=c.n(Ae);const Ue=qe()(Me,[["render",xe]]);var Re=Ue,Te=c("19ee"),Fe=c("6c02"),Ke=c("2e13"),Le={name:"Products",components:{NavTabs:J["a"],"pos-layout":L["a"],Icon:H["a"],JButton:z["a"],Pagination:W["a"],StreamBarcodeReader:Pe["a"],SaveProductModal:Re,AddToCartModal:Te["a"]},setup:function(){var e=Object(r["inject"])("translate"),t=Object(r["inject"])("toast"),c=Object(r["inject"])("swal"),o=Object(r["inject"])("emitter"),n=Object(Ie["b"])(),a=Object(Fe["d"])(),l=Object(Ke["a"])(),s=l.fancyBox,i=Object(r["reactive"])({employee:null,keyword:"",categoryId:"",sortKey:null,order:"asc",meta:{currentPage:1,totalPages:0,limit:25,offset:0},isBarcodeScanner:!1}),u=Object(r["computed"])((function(){return n.state.accountInfo})),d=Object(r["computed"])((function(){return n.state.altCoins})),m=Object(r["computed"])((function(){return n.state.pos})),b=Object(r["computed"])((function(){return n.state.posCalls})),p=Object(r["computed"])((function(){if(i.keyword||i.categoryId){var e=i.keyword.trim().toLowerCase();return m.value.products.filter((function(t){return i.categoryId&&e?t.categoryID===i.categoryId&&(Se["includes"](t.itemName.toLowerCase(),e)||Se["includes"](t.sku.toLowerCase(),e)||Se["includes"](t.description.toLowerCase(),e)||Number(t.price)===Number(e)):i.categoryId?t.categoryID===i.categoryId:e?Se["includes"](t.itemName.toLowerCase(),e)||Se["includes"](t.sku.toLowerCase(),e)||Se["includes"](t.description.toLowerCase(),e)||Number(t.price)===Number(e):void 0}))}return m.value.products})),j=Object(r["computed"])((function(){if(p.value&&p.value.length>0){var e=Se["cloneDeep"](p.value);return e=e.map((function(e){return Object(K["a"])(Object(K["a"])({},e),{},{price:Number.parseFloat(e.price)})})),e=Se["orderBy"](e,i.sortKey,i.order),e.slice(i.meta.offset,i.meta.currentPage*i.meta.limit)}return p.value})),O=Object(r["computed"])((function(){var e="EUR";if(u.value){e=u.value.PayoutCurrencyShortName;var t=Se["find"](d.value,{ShortName:u.value.PayoutCurrencyShortName});t&&(e=t.LongName)}return e}));Object(r["watch"])((function(){return i.keyword}),(function(e,t){i.meta=Object(K["a"])(Object(K["a"])({},i.meta),{},{currentPage:1,totalPages:Math.ceil(p.value.length/i.meta.limit),offset:0})}));var f=function(e){e===i.sortKey&&(i.order="asc"===i.order?"desc":"asc"),i.sortKey=e},v=function(e){var t=Se["find"](m.value.categories,{id:e});return t?t.name:""},g=function(e){var t=Se["find"](m.value.categories,{id:e});return t?t.categoryColourCode:""},y=function(e){return e.sku?-1!==Se["findIndex"](m.value.favourites,{sku:e.sku}):!!e.id&&-1!==Se["findIndex"](m.value.favourites,{id:e.id})},k=function(e){i.meta=Object(K["a"])(Object(K["a"])({},i.meta),{},{currentPage:e,offset:(e-1)*i.meta.limit})},E=function(e){var c=Se["cloneDeep"](m.value.favourites),r=-1;e.sku?r=Se["findIndex"](c,{sku:e.sku}):e.id&&(r=Se["findIndex"](c,{id:e.id})),-1===r?(c.push(e),t.success("Product marked favourite successfully")):(c.splice(r,1),t.success("Product unmarked favourite successfully"));var o=Se["cloneDeep"](m.value);o.favourites=c,n.commit(De["R"],o)},N=function(e){var r=Se["findIndex"](m.value.products,{id:e});-1!==r&&c.fire({title:"Product",text:"Are you sure you want to remove this product?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then((function(e){var c=e.value;if(c&&!0===c){var o=Se["cloneDeep"](m.value.products);o.splice(r,1),n.dispatch(De["v"],{call:b.value.products,data:o}).then((function(e){t.success("Product deleted successfully")})).catch((function(e){console.log(e),t.error("Internal Server Error")}))}}))},h=function(e){i.keyword=e,i.isBarcodeScanner=!1;var t=Se["find"](m.value.products,{sku:e});t&&w(t)},V=function(e){console.log(e)},w=function(e){Number(e.stock)>0?o.emit("addToCartModal",{product:e,currency:O.value,employee:i.employee}):t.warning("Product out of stock")},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o.emit("saveProductModal",{product:e,currency:O.value})};return Object(r["onBeforeMount"])((function(){i.employee=Se["find"](m.value.users,{isLoggedIn:"true"}),i.meta=Object(K["a"])(Object(K["a"])({},i.meta),{},{currentPage:1,totalPages:Math.ceil(p.value.length/i.meta.limit),offset:0})})),Object(r["onMounted"])((function(){Object.keys(a.query).length>0&&"undefined"!==typeof a.query.category_id&&(i.categoryId=a.query.category_id)})),Object(K["a"])(Object(K["a"])({translate:e},Object(r["toRefs"])(i)),{},{filteredProducts:p,paginatedProducts:j,categories:m.value.categories,sort:f,updatePage:k,getCategoryName:v,getCategoryColorCode:g,isFavourite:y,currency:O,markFavourite:E,deleteProduct:N,onDecode:h,onError:V,launchAddToCartModal:w,launchSaveProductModal:x,fancyBox:s})}};c("7115");const Je=qe()(Le,[["render",F],["__scopeId","data-v-3d098886"]]);t["default"]=Je},"36ac":function(e,t,c){},7115:function(e,t,c){"use strict";c("36ac")},f144:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAVFBMVEXp7vG6vsHn7fDr8PO3u761uLuxtbju8/bO09bx9vnv9PfDx8qvsrXKz9K9wcTh5eiws7bg5um5vcCzt7rW2t3t8vXS19rBxMfk6u3Z3uHz+PvHy863ukFnAAACm0lEQVR42u3a23KiQBSF4b3X7m4EMWOak4f3f88RLCqHjpmJXNCk1neRS6t+45KmRIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiCZYSvIAKcoFqsqyKIFcTof9EleUsj6I7WvvlvD1AJOVQWTwulQzyOqs91EXC323+k5enKo71s87Ti9wWTsER1U3wJ43vRX1yVYoSUIOJeRZKHdeNbzmEVItCCkyDIHcYeMhEBNg+rvpEBj6wTduaGHYcAjspI2L0bkwnAybDYEUwemdc91m/yOQSp3O/EuJrYbY2UWdxVoeDB7Zh1Q7r2/8l4cnmBhyD+mu7n3IF9dIoOzDxZB5SPGvEEjXB+fFcg/58NFq2g6fO8q+iepeToasQ+zs9Luxo2pDVL2ViCHnkO+/foGy9VFHzl8M+YbIrST4dxfEdB9z5biTjEOmI4p37u2IkuxjNu0k35Dk0JjuYzLvJN+Q5Bif7mMy7yTfkOTGKt3H+51kHJJI9vFxJ9mHAA/28XknmYegqwRf7SPdSdYhKPrp3U73ke4k5xBUbRMGM6T7SHeScQiqc+O02Zth3sdDzSHfkFvHtAl/K5n38ZA/WK4h6NrGzT8VFOM+thky7iPqXbM/N3GjIfd9zJyLus2QeR+zqNsMmffxZpsh931sP+S+j+2HwMZrxi8IEds7/RUh3ZUhDGHItyF7736qyTHEDvryU3GX4/0InpD3Pfu2n3x4Wl4hF3veZQw5rh8SVKOeX/886/WPRtUaAlnX4FRdExYYXyBcVu6AjTchS8XQrv7JErmGuLjjuvpTpgIp+jr4JUK9W79DBCiq826JtiokC4AVS1g2D8cL/kvuz/gTEREREREREREREREREREREREREREREREREdHa/gKrrUWVgnSBWwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=account-pos-products.b7bc1eb1.js.map