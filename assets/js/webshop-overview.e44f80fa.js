(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["webshop-overview"],{2403:function(e,t,a){"use strict";a.r(t);var r=a("f2bf");const o={class:"flex items-center justify-between flex-col md:flex-row mb-3"},c={class:"flex items-center space-x-2 flex-col md:flex-row"},n=Object(r["createElementVNode"])("label",{class:"whitespace-nowrap mb-1 md:mb-0"},"From Date",-1),l=Object(r["createElementVNode"])("label",{class:"whitespace-nowrap mb-1 md:mb-0"},"To Date",-1),s={class:"relative w-full md:w-auto"},d=Object(r["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),i={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},m={class:"table-sm mb-2"},b=Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,"ID"),Object(r["createElementVNode"])("th",{style:{"min-width":"180px"}},"Direction"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Created On"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Confirmed On"),Object(r["createElementVNode"])("th",{style:{"min-width":"70px"}},"Time"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Customer Reference Nr"),Object(r["createElementVNode"])("th",null,"Original"),Object(r["createElementVNode"])("th",null,"Received"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Fee Paid"),Object(r["createElementVNode"])("th",{style:{"min-width":"70px"}},"Input"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Crypto Amount"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Crypto Name"),Object(r["createElementVNode"])("th",{class:"whitespace-nowrap"},"Coin Address Used")])],-1),u={class:"whitespace-nowrap"},p={class:"whitespace-nowrap"},g={class:"break-all whitespace-normal",style:{"max-width":"600px"}},O={class:"flex items-center"},j=["onClick"],h={class:"flex items-center"},y=["onClick"],v={class:"whitespace-nowrap"},f={class:"break-all"},k={key:0},C=Object(r["createElementVNode"])("td",{colspan:"13"},"No record found!",-1),w=[C];function N(e,t,a,C,N,x){const V=Object(r["resolveComponent"])("j-button"),E=Object(r["resolveComponent"])("litepie-datepicker"),D=Object(r["resolveComponent"])("icon"),P=Object(r["resolveComponent"])("pagination"),B=Object(r["resolveComponent"])("pulse-skeleton"),I=Object(r["resolveComponent"])("centered-layout");return Object(r["openBlock"])(),Object(r["createBlock"])(I,null,{default:Object(r["withCtx"])(()=>[e.isProcessing?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createElementVNode"])("div",o,[Object(r["createVNode"])(V,{onClick:C.exportToCSV,class:"mb-3 md:mb-0"},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])("Export to CSV")]),_:1},8,["onClick"]),Object(r["createElementVNode"])("div",c,[n,Object(r["createVNode"])(E,{"as-single":"",modelValue:e.searchForm.fromDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchForm.fromDate=t),class:"mb-3 md:mb-0",formatter:{date:"YYYY-MM-DD",month:"MMM"}},null,8,["modelValue"]),l,Object(r["createVNode"])(E,{"as-single":"",modelValue:e.searchForm.toDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchForm.toDate=t),class:"mb-3 md:mb-0",formatter:{date:"YYYY-MM-DD",month:"MMM"}},null,8,["modelValue"]),Object(r["createElementVNode"])("div",s,[Object(r["createVNode"])(D,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.keyword=t),"aria-label":"Search...",class:"form-input w-full px-10",type:"text",style:{"min-width":"220px"}},null,512),[[r["vModelText"],e.keyword]]),""!==e.keyword?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[3]||(t[3]=t=>e.keyword="")},[Object(r["createVNode"])(D,{classes:"w-5 h-5",name:"close"})])):Object(r["createCommentVNode"])("",!0)])])]),d,Object(r["createElementVNode"])("div",i,[Object(r["createElementVNode"])("table",m,[b,Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(C.paginatedReports,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:t},[Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.ID),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.Incoming),1),Object(r["createElementVNode"])("td",u,Object(r["toDisplayString"])(C.formatDT(e.CreatedOn)),1),Object(r["createElementVNode"])("td",p,Object(r["toDisplayString"])(C.formatDT(e.ConfirmedOn)),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.ConfirmationTime),1),Object(r["createElementVNode"])("td",g,Object(r["toDisplayString"])(e.CustomerReferenceNr),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.OriginalAmount),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("span",O,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.AmountReceived)+" ",1),Object(r["createElementVNode"])("span",{class:"ml-3 cursor-pointer hover:text-blue-500",onClick:t=>C.toConverter(e,"ic")},[Object(r["createVNode"])(D,{name:"clipboard",classes:"w-5 h-5"})],8,j)])]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.FeePaidByCustomer),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.InputCurrency),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("span",h,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.CryptoCurrencyAmount)+" ",1),Object(r["createElementVNode"])("span",{class:"ml-3 cursor-pointer hover:text-blue-500",onClick:t=>C.toConverter(e,"c")},[Object(r["createVNode"])(D,{name:"clipboard",classes:"w-5 h-5"})],8,y)])]),Object(r["createElementVNode"])("td",v,Object(r["toDisplayString"])(e.Name),1),Object(r["createElementVNode"])("td",f,Object(r["toDisplayString"])(e.CoinAddressUsed),1)]))),128)),0===C.paginatedReports.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",k,w)):Object(r["createCommentVNode"])("",!0)])])]),C.filteredReports.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(P,{key:0,meta:e.meta,onPage:C.updatePage},null,8,["meta","onPage"])):Object(r["createCommentVNode"])("",!0)],64)),e.isProcessing?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createVNode"])(B),Object(r["createVNode"])(B)],64)):Object(r["createCommentVNode"])("",!0)]),_:1})}a("14d9");var x=a("9e55"),V=a("bf2e"),E=a("cdae"),D=a("4032"),P=a("d529"),B=a("8527"),I=a("2e13"),A=a("5502"),S=a("2ef0"),F=a("8923"),R=a("c1df"),T={name:"WebshopOverview",components:{CenteredLayout:x["a"],PulseSkeleton:V["a"],Icon:E["a"],JButton:D["a"],Pagination:P["a"],LitepieDatepicker:B["a"]},setup(){const e=Object(r["inject"])("http"),t=Object(r["inject"])("toast"),a=Object(A["b"])(),{formatDT:o,copyToClipboard:c}=Object(I["a"])(),n=Object(r["reactive"])({reports:[],isProcessing:!1,keyword:"",searchForm:{fromDate:"",toDate:""},meta:{currentPage:1,totalPages:0,limit:25,offset:0}}),l=Object(r["computed"])(()=>a.state.user),s=Object(r["computed"])(()=>a.state.converter),d=Object(r["computed"])(()=>n.reports.filter(e=>{let t=n.keyword?n.keyword.toString().trim():"";return!t||(t=t.toLowerCase(),S["includes"](e.ID.toLowerCase(),t)||S["includes"](e.CustomerReferenceNr.toLowerCase(),t)||S["includes"](e.InputCurrency&&e.InputCurrency.toLowerCase(),t)||S["includes"](e.Incoming.toLowerCase(),t)||S["includes"](e.Name.toLowerCase(),t)||S["includes"](e.CreatedOn,t)||S["includes"](e.ConfirmedOn,t)||S["includes"](e.CoinAddressUsed.toLowerCase(),t))})),i=Object(r["computed"])(()=>d.value.length>0?[...d.value].slice(n.meta.offset,n.meta.offset+n.meta.limit):[...d.value]),m=Object(r["computed"])(()=>a.state.allAltCoins);Object(r["watch"])(()=>({...n.searchForm}),(e,a)=>{const r=n.searchForm.fromDate,o=n.searchForm.toDate;let c=!0;new Date(r).getTime()>(new Date).getTime()?(c=!1,n.searchForm.fromDate="",t.error("From date cannot be greater than today")):""!==r&&""!==o?new Date(r).getTime()>new Date(o).getTime()&&(c=!1,n.searchForm.fromDate="",t.error("From date should be less than to date")):""===n.searchForm.toDate&&(n.searchForm.toDate=R().format("YYYY-MM-DD")),!c||""===n.searchForm.fromDate&&""===n.searchForm.toDate||setTimeout(()=>{u(n.searchForm)},50)}),Object(r["watch"])(()=>n.keyword,(e,t)=>{n.meta={...n.meta,currentPage:1,totalPages:Math.ceil(d.value.length/n.meta.limit),offset:0}});const b="https://app.cointopay.com",u=(t=null)=>{n.isProcessing=!0;const a={MerchantID:l.value.ID,APIKey:l.value.APIKey};null!==t&&(""!==t.fromDate&&Object.assign(a,{fromdate:t.fromDate}),""!==t.todate&&Object.assign(a,{todate:t.toDate})),e.get(b+"/V2Processor?WebShopReport",{params:a}).then(e=>{n.isProcessing=!1,n.reports=[],200===e.status&&Object.keys(e.data.data[0]).length>0&&(n.reports=e.data.data,n.meta={...n.meta,currentPage:1,totalPages:Math.ceil(n.reports.length/n.meta.limit),offset:0})}).catch(e=>{n.isProcessing=!1,console.log(e)})},p=(e,t)=>{if("ic"===t){const t=S["find"](m.value,{ShortName:e.InputCurrency}),r=S["find"](m.value,{Name:e.Name.split(" ")[0]});if(t){const o=t.ID,c={...s.value,source:e.AmountReceived,sourceAltCoinId:o};r&&(c.targetAltCoinId=r.ID),a.commit(F["G"],c)}c(e.AmountReceived)}else{const t=S["find"](m.value,{Name:e.Name.split(" ")[0]}),r=S["find"](m.value,{ShortName:e.InputCurrency});if(t){const o=t.ID,c={...s.value,source:e.CryptoCurrencyAmount,sourceAltCoinId:o};r&&(c.targetAltCoinId=r.ID),a.commit(F["G"],c)}c(e.CryptoCurrencyAmount)}},g=e=>{n.meta={...n.meta,currentPage:e,offset:(e-1)*n.meta.limit}},O=()=>{const e=[["ID","Direction","CreatedOn","ConfirmedOn","ConfirmationTime","CustomerReferenceNr","OriginalAmount","AmountReceived","FeePaidByCustomer","InputCurrency","CryptoAmount","CryptoName","CoinAddressUsed"]];n.reports.length>0&&n.reports.forEach(t=>{e.push([t.ID,t.Incoming,o(t.CreatedOn),o(t.ConfirmedOn),t.ConfirmationTime,t.CustomerReferenceNr,t.OriginalAmount,t.AmountReceived,t.FeePaidByCustomer,t.InputCurrency,t.CryptoCurrencyAmount,t.Name,t.CoinAddressUsed])});const t=e.map(e=>e.join(";")).join("\n"),a=encodeURIComponent(t),r=document.createElement("a");r.setAttribute("href","data:text/csv;charset=utf-8,"+a),r.setAttribute("download","webshop-overview.csv"),document.body.appendChild(r),r.click()};return Object(r["onBeforeMount"])(()=>{u()}),{...Object(r["toRefs"])(n),filteredReports:d,paginatedReports:i,formatDT:o,toConverter:p,updatePage:g,exportToCSV:O}}},M=a("6b0d"),L=a.n(M);const Y=L()(T,[["render",N]]);t["default"]=Y},"9e55":function(e,t,a){"use strict";var r=a("f2bf");const o={class:"p-4"},c={class:"max-w-7xl 3xl:max-w-8xl mx-auto"},n={class:"flex flex-col md:flex-row space-x-0 md:space-x-4"},l={class:"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4",style:{"min-height":"calc(100vh - 351px)"}};function s(e,t,a,s,d,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("div",l,[Object(r["renderSlot"])(e.$slots,"default")])])])])}var d={name:"CenteredLayout"},i=a("6b0d"),m=a.n(i);const b=m()(d,[["render",s]]);t["a"]=b},bf2e:function(e,t,a){"use strict";var r=a("f2bf");const o=Object(r["createStaticVNode"])('<div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div><div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div>',2);function c(e,t,a,r,c,n){return o}var n={name:"PulseSkeleton"},l=a("6b0d"),s=a.n(l);const d=s()(n,[["render",c]]);t["a"]=d},d529:function(e,t,a){"use strict";var r=a("f2bf");const o={key:0,"aria-label":"pagination",class:"mt-3"},c={class:"inline-flex -space-x-px text-sm md:text-base"},n=Object(r["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),l=[n],s={key:0,class:"px-1 py-2 md:px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500",href:"javascript:void(0)"},d=["onClick"],i={key:0,class:"sr-only"},m=Object(r["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),b=[m];function u(e,t,a,n,m,u){return a.meta.totalPages>1?(Object(r["openBlock"])(),Object(r["createElementBlock"])("nav",o,[Object(r["createElementVNode"])("ul",c,[Object(r["createElementVNode"])("li",null,[Object(r["createElementVNode"])("a",{class:Object(r["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:text-gray-400":!e.isPrev},"px-2 py-2 md:px-3 ml-0 leading-tight text-gray-500 dark:text-gray-400 bg-white rounded-l border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[0]||(t[0]=e=>n.prev())},l,2)]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(n.pageRange,(t,a)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:a},["..."===t?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",s,Object(r["toDisplayString"])(t),1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:1,class:Object(r["normalizeClass"])(`px-2 py-2 md:px-3 leading-tight bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 ${t===e.currentPage?"text-blue-500 font-semibold":"text-gray-500 dark:text-gray-400"} hover:text-blue-500 dark:hover:text-blue-500`),href:"javascript:void(0)",onClick:e=>n.updatePage(t)},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t)+" ",1),t===e.currentPage?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",i,"(current)")):Object(r["createCommentVNode"])("",!0)],10,d))]))),128)),Object(r["createElementVNode"])("li",null,[Object(r["createElementVNode"])("a",{class:Object(r["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:bg-text-400":!e.isNext},"px-2 py-2 md:px-3 leading-tight text-gray-500 bg-white rounded-r border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[1]||(t[1]=e=>n.next())},b,2)])])])):Object(r["createCommentVNode"])("",!0)}a("14d9");var p={name:"Pagination",props:["meta"],emits:["page"],setup(e,{emit:t}){const a=Object(r["reactive"])({isPrev:!1,isNext:!1,pagesLimit:5,currentPage:e.meta.currentPage,delta:3}),o=Object(r["computed"])(()=>{const t=e.meta.currentPage,r=e.meta.totalPages,o=t-a.delta,c=t+a.delta+1,n=[],l=[];let s;for(let e=1;e<=r;e++)(1===e||e===r||e>=o&&e<c)&&n.push(e);return n.forEach((function(e){s&&(e-s===2?l.push(s+1):e-s!==1&&l.push("...")),l.push(e),s=e})),l}),c=e=>{e!==a.currentPage&&(a.currentPage=e,s(),t("page",a.currentPage))},n=()=>{a.currentPage>1?a.currentPage--:a.currentPage=1,s(),t("page",a.currentPage)},l=()=>{a.currentPage<e.meta.totalPages?a.currentPage++:a.currentPage=e.meta.totalPages,s(),t("page",a.currentPage)},s=()=>{a.isPrev=a.currentPage>1,a.isNext=a.currentPage<e.meta.totalPages},d=()=>{a.delta=3,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(a.delta=1)};return Object(r["onBeforeMount"])(()=>{s(),window.addEventListener("resize",d)}),Object(r["onBeforeUnmount"])(()=>{window.removeEventListener("resize",d)}),{...Object(r["toRefs"])(a),pageRange:o,prev:n,next:l,updatePage:c}}},g=a("6b0d"),O=a.n(g);const j=O()(p,[["render",u]]);t["a"]=j}}]);
//# sourceMappingURL=webshop-overview.e44f80fa.js.map