{"version":3,"sources":["webpack:///./src/views/pos/Products.vue","webpack:///./src/components/account/pos/modals/products/SaveProductModal.vue","webpack:///./src/components/account/pos/modals/products/SaveProductModal.vue?dacd","webpack:///./src/views/pos/Products.vue?47d0","webpack:///./src/views/pos/Products.vue?6f5d","webpack:///./src/assets/images/pos/placeholder.png"],"names":["class","_createElementVNode","value","colspan","_createVNode","_component_pos_layout","content","_hoisted_1","_component_nav_tabs","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_ctx","_component_icon","name","aria-label","_hoisted_5","_createElementBlock","_Fragment","$setup","category","index","key","id","_hoisted_7","classes","type","isParentUser","_createBlock","_component_j_button","_hoisted_8","_component_StreamBarcodeReader","onDecode","onError","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","style","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","length","product","categoryID","_hoisted_19","src","imageUri","alt","_hoisted_22","itemName","sku","stock","price","_hoisted_26","_hoisted_29","_hoisted_33","_component_pagination","meta","onPage","_component_save_product_modal","_component_add_to_cart_modal","for","_component_modal","maxWidth","show","onClose","title","onSubmit","_component_router_link","to","categoryId","_hoisted_6","rows","description","_hoisted_18","quantity","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_30","onChange","$event","ref","_hoisted_32","_hoisted_34","disabled","_hoisted_35","components","Modal","Icon","JButton","StreamBarcodeReader","setup","translate","inject","emitter","http","toast","store","useStore","showError","validate","validator","featuredImg","state","reactive","closeable","currency","form","imageUrl","errorBag","rules","messages","required","minValue","maxValue","regex","isProcessing","isBarcodeScanner","user","computed","pos","posCalls","getImageUrl","require","watch","newVal","oldVal","Object","keys","closeModal","result","error","console","log","generateId","products","_","Number","toString","upload","evt","files","target","file","startsWith","fd","FormData","append","ID","apiBaseUrl","process","post","headers","then","response","status","data","catch","submit","formData","isValid","splice","push","dispatch","SAVE_PRODUCTS","call","message","success","onBeforeMount","on","args","toRefs","categories","__exports__","NavTabs","POSLayout","Pagination","SaveProductModal","AddToCartModal","swal","route","useRoute","fancyBox","compositionUtils","employee","keyword","sortKey","order","currentPage","totalPages","limit","offset","accountInfo","altCoins","filteredProducts","trim","toLowerCase","filter","paginatedProducts","filteredProductsList","map","p","parseFloat","slice","PayoutCurrencyShortName","altCoin","ShortName","LongName","Math","ceil","sort","getCategoryName","getCategoryColorCode","categoryColourCode","isFavourite","favourites","updatePage","page","markFavourite","posData","commit","SET_POS","deleteProduct","fire","text","icon","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","focusCancel","customClass","container","launchAddToCartModal","emit","warning","launchSaveProductModal","users","isLoggedIn","onMounted","query","category_id","render","module","exports"],"mappings":"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","file":"assets/js/account-pos-products.146f5372.js","sourcesContent":["<template>\r\n  <pos-layout>\r\n    <template v-slot:content>\r\n      <div class=\"card\">\r\n        <nav-tabs></nav-tabs>\r\n        <hr class=\"border-gray-300 dark:border-gray-600\"/>\r\n        <div class=\"body\">\r\n          <div class=\"flex items-center justify-end mb-3 flex-col lg:flex-row\">\r\n            <span\r\n              class=\"hover:text-blue-500 mb-3 lg:mb-0 ml-0 lg:ml-3 cursor-pointer w-full lg:w-auto\"\r\n              @click=\"isBarcodeScanner = !isBarcodeScanner\">\r\n              <icon name=\"barcode\"></icon>\r\n            </span>\r\n            <select aria-label=\"Select Category\" class=\"form-select w-full mb-3 lg:mb-0 ml-0 lg:ml-3 w-full lg:w-72\"\r\n                    v-model=\"categoryId\">\r\n              <option value>Select Category</option>\r\n              <option :key=\"index\" :value=\"category.id\" v-for=\"(category, index) in categories\">\r\n                {{ category.name }}\r\n              </option>\r\n            </select>\r\n            <div class=\"relative mb-3 lg:mb-0 ml-0 lg:ml-3 w-full lg:w-auto\">\r\n              <icon classes=\"absolute w-5 h-5 top-3 left-3 dark:text-gray-300\" name=\"search\"></icon>\r\n              <input v-model=\"keyword\" aria-label=\"Search...\" class=\"form-input px-10 w-full lg:w-auto\" type=\"text\"/>\r\n              <span v-if=\"keyword !== ''\" class=\"absolute top-3 right-3 dark:text-gray-400 cursor-pointer\"\r\n                    @click=\"keyword = ''\">\r\n                <icon classes=\"w-5 h-5\" name=\"close\"></icon>\r\n              </span>\r\n            </div>\r\n            <j-button v-if=\"employee && employee.isParentUser === 'true'\" class=\"ml-3\"\r\n                      type=\"button\" @click=\"launchSaveProductModal()\">\r\n              {{ translate('pos.products.btn_add') }}\r\n            </j-button>\r\n          </div>\r\n          <div class=\"mx-auto mb-3 w-40\" v-if=\"isBarcodeScanner\">\r\n            <StreamBarcodeReader @decode=\"onDecode\" @error=\"onError\"></StreamBarcodeReader>\r\n          </div>\r\n          <div\r\n            class=\"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600\">\r\n            <table class=\"table-sm mb-2\">\r\n              <thead>\r\n              <tr>\r\n                <th>Category</th>\r\n                <th>Image</th>\r\n                <th @click=\"sort('itemName')\" class=\"cursor-pointer\" style=\"max-width: 150px;\">\r\n                  <div class=\"flex items-center\">\r\n                    Name\r\n                    <span :class=\"`ml-4 transform transition-all ${order === 'asc' ? 'rotate-180' : ''}`\"\r\n                          v-if=\"sortKey === 'itemName'\">\r\n                      <icon name=\"sort\" classes=\"w-4 h-4\"></icon>\r\n                    </span>\r\n                  </div>\r\n                </th>\r\n                <th class=\"whitespace-nowrap\">SKU / EAN / Barcode / QR</th>\r\n                <th>Quantity</th>\r\n                <th @click=\"sort('price')\" class=\"cursor-pointer\">\r\n                  <div class=\"flex items-center\">\r\n                    Price\r\n                    <span :class=\"`ml-4 transform transition-all ${order === 'asc' ? 'rotate-180' : ''}`\"\r\n                          v-if=\"sortKey === 'price'\">\r\n                      <icon name=\"sort\" classes=\"w-4 h-4\"></icon>\r\n                    </span>\r\n                  </div>\r\n                </th>\r\n                <th>Actions</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <template v-if=\"filteredProducts.length > 0\">\r\n                <tr :key=\"index\" v-for=\"(product, index) in paginatedProducts\">\r\n                  <td>\r\n                    <div @click=\"categoryId = product.categoryID\" class=\"cursor-pointer flex items-center\">\r\n                      <div :style=\"'background: #' + getCategoryColorCode(product.categoryID)\"\r\n                           class=\"inline-block w-5 h-5 rounded-full mr-3\"></div>\r\n                      {{ getCategoryName(product.categoryID) }}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"w-12 h-12 rounded-full overflow-hidden\">\r\n                      <img :src=\"product.imageUri\" alt=\"\" class=\"w-12 h-12 object-cover\"\r\n                           @click=\"fancyBox(product.imageUri)\"/>\r\n                    </div>\r\n                  </td>\r\n                  <td @click=\"launchAddToCartModal(product)\" class=\"cursor-pointer whitespace-normal\"\r\n                      style=\"width: 150px;\">\r\n                    <p class=\"break-all\">{{ product.itemName }}</p>\r\n                  </td>\r\n                  <td @click=\"launchAddToCartModal(product)\" class=\"cursor-pointer\">{{ product.sku }}</td>\r\n                  <td @click=\"launchAddToCartModal(product)\" class=\"cursor-pointer\">{{ product.stock }}</td>\r\n                  <td @click=\"launchAddToCartModal(product)\" class=\"cursor-pointer\">\r\n                    {{ `${product.price} ${currency}` }}\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"flex items-center space-x-1\">\r\n                      <button @click=\"launchAddToCartModal(product)\"\r\n                              class=\"hover:text-blue-500\" type=\"button\">\r\n                        <icon name=\"shopping-cart\"></icon>\r\n                      </button>\r\n                      <button @click=\"markFavourite(product, index)\">\r\n                        <icon name=\"heart\"\r\n                              :classes=\"`w-6 h-6 hover:text-red-500 ${isFavourite(product) ? 'text-red-500' : ''}`\"></icon>\r\n                      </button>\r\n                      <div v-if=\"employee && employee.isParentUser === 'true'\" class=\"flex items-center space-x-1\">\r\n                        <button @click=\"launchSaveProductModal(product)\"\r\n                                class=\"hover:text-blue-500\">\r\n                          <icon name=\"edit\"></icon>\r\n                        </button>\r\n                        <button @click=\"deleteProduct(product.id)\"\r\n                                class=\"hover:text-red-500\">\r\n                          <icon name=\"trash\"></icon>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </template>\r\n              <template v-else>\r\n                <tr>\r\n                  <td colspan=\"7\" class=\"text-center\">{{ translate('address_book.empty') }}</td>\r\n                </tr>\r\n              </template>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <template v-if=\"filteredProducts.length > 0\">\r\n            <pagination :meta=\"meta\" @page=\"updatePage\"></pagination>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </pos-layout>\r\n  <!-- Save Product Modal -->\r\n  <save-product-modal></save-product-modal>\r\n  <!-- Add To Cart Modal -->\r\n  <add-to-cart-modal></add-to-cart-modal>\r\n</template>\r\n\r\n<script>\r\nimport POSLayout from '@/components/layouts/POSLayout'\r\nimport NavTabs from '@/components/account/pos/NavTabs'\r\nimport Icon from '@/components/Icon'\r\nimport JButton from '@/templates/Button'\r\nimport Pagination from '@/components/common/Pagination'\r\nimport SaveProductModal from '@/components/account/pos/modals/products/SaveProductModal'\r\nimport AddToCartModal from '@/components/account/pos/modals/products/AddToCartModal'\r\nimport { StreamBarcodeReader } from 'vue-barcode-reader'\r\nimport { computed, inject, onBeforeMount, onMounted, reactive, toRefs, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport { SAVE_PRODUCTS, SET_POS } from '@/store/keys'\r\nimport { useRoute } from 'vue-router'\r\nimport compositionUtils from '@/compositionUtils'\r\n\r\nexport default {\r\n  name: 'Products',\r\n  components: {\r\n    NavTabs,\r\n    'pos-layout': POSLayout,\r\n    Icon,\r\n    JButton,\r\n    Pagination,\r\n    StreamBarcodeReader,\r\n    SaveProductModal,\r\n    AddToCartModal\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const toast = inject('toast')\r\n    const swal = inject('swal')\r\n    const emitter = inject('emitter')\r\n    // Store\r\n    const store = useStore()\r\n    const route = useRoute()\r\n\r\n    const { fancyBox } = compositionUtils()\r\n\r\n    // State\r\n    const state = reactive({\r\n      employee: null,\r\n      keyword: '',\r\n      categoryId: '',\r\n      sortKey: null,\r\n      order: 'asc',\r\n      meta: {\r\n        currentPage: 1,\r\n        totalPages: 0,\r\n        limit: 25,\r\n        offset: 0\r\n      },\r\n      isBarcodeScanner: false\r\n    })\r\n\r\n    // Computed\r\n    const accountInfo = computed(() => store.state.accountInfo)\r\n    const altCoins = computed(() => store.state.altCoins)\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n    const filteredProducts = computed(() => {\r\n      if (state.keyword || state.categoryId) {\r\n        const keyword = state.keyword.trim().toLowerCase()\r\n        return pos.value.products.filter(product => {\r\n          if (state.categoryId && keyword) {\r\n            return (product.categoryID === state.categoryId &&\r\n              (_.includes(product.itemName.toLowerCase(), keyword) ||\r\n                _.includes(product.sku.toLowerCase(), keyword) ||\r\n                _.includes(product.description.toLowerCase(), keyword) ||\r\n                Number(product.price) === Number(keyword)\r\n              )\r\n            )\r\n          } else if (state.categoryId) {\r\n            return product.categoryID === state.categoryId\r\n          } else if (keyword) {\r\n            if(product.itemName){\r\n              return (\r\n                _.includes(product.itemName?.toLowerCase(), keyword) ||\r\n                _.includes(product.sku?.toLowerCase(), keyword) ||\r\n                _.includes(product.description?.toLowerCase(), keyword) ||\r\n                Number(product.price) === Number(keyword)\r\n              )\r\n            }\r\n          }\r\n        })\r\n      }\r\n      return pos.value.products\r\n    })\r\n    const paginatedProducts = computed(() => {\r\n      if (filteredProducts.value && filteredProducts.value.length > 0) {\r\n        let filteredProductsList = _.cloneDeep(filteredProducts.value)\r\n        filteredProductsList = filteredProductsList.map(p => {\r\n          return {\r\n            ...p,\r\n            price: Number.parseFloat(p.price)\r\n          }\r\n        })\r\n        filteredProductsList = _.orderBy(filteredProductsList, state.sortKey, state.order)\r\n        return filteredProductsList.slice(state.meta.offset, state.meta.currentPage * state.meta.limit)\r\n      }\r\n      return filteredProducts.value\r\n    })\r\n\r\n\r\n    const currency = computed(() => {\r\n      let currency = 'EUR'\r\n      if (accountInfo.value) {\r\n        currency = accountInfo.value.PayoutCurrencyShortName\r\n        // Convert short name to long name\r\n        const altCoin = _.find(altCoins.value, { ShortName: accountInfo.value.PayoutCurrencyShortName })\r\n        if (altCoin) {\r\n          currency = altCoin.LongName\r\n        }\r\n      }\r\n      return currency\r\n    })\r\n\r\n    // Watch\r\n    watch(() => state.keyword,\r\n      (newVal, oldVal) => {\r\n        state.meta = {\r\n          ...state.meta,\r\n          currentPage: 1,\r\n          totalPages: Math.ceil(filteredProducts.value.length / state.meta.limit),\r\n          offset: 0\r\n        }\r\n      })\r\n\r\n    // Methods\r\n    const sort = (key) => {\r\n      if (key === state.sortKey) {\r\n        state.order = state.order === 'asc' ? 'desc' : 'asc'\r\n      }\r\n      state.sortKey = key\r\n    }\r\n    const getCategoryName = (id) => {\r\n      const category = _.find(pos.value.categories, { id: id })\r\n      return category ? category.name : ''\r\n    }\r\n    const getCategoryColorCode = (id) => {\r\n      const category = _.find(pos.value.categories, { id: id })\r\n      return category ? category.categoryColourCode : ''\r\n    }\r\n    const isFavourite = (product) => {\r\n      if (product.sku) {\r\n        return _.findIndex(pos.value.favourites, { sku: product.sku }) !== -1\r\n      } else if (product.id) {\r\n        return _.findIndex(pos.value.favourites, { id: product.id }) !== -1\r\n      }\r\n      return false\r\n    }\r\n    const updatePage = (page) => {\r\n      state.meta = {\r\n        ...state.meta,\r\n        currentPage: page,\r\n        offset: (page - 1) * state.meta.limit\r\n      }\r\n    }\r\n    // Mark favourite\r\n    const markFavourite = (product) => {\r\n      const favourites = _.cloneDeep(pos.value.favourites)\r\n      let index = -1\r\n      if (product.sku) {\r\n        index = _.findIndex(favourites, { sku: product.sku })\r\n      } else if (product.id) {\r\n        index = _.findIndex(favourites, { id: product.id })\r\n      }\r\n      if (index === -1) {\r\n        favourites.push(product)\r\n        toast.success('Product marked favourite successfully')\r\n      } else {\r\n        favourites.splice(index, 1)\r\n        toast.success('Product unmarked favourite successfully')\r\n      }\r\n      const posData = _.cloneDeep(pos.value)\r\n      posData.favourites = favourites\r\n      store.commit(SET_POS, posData)\r\n    }\r\n    // Delete product\r\n    const deleteProduct = (id) => {\r\n      const index = _.findIndex(pos.value.products, { id: id })\r\n      if (index !== -1) {\r\n        swal.fire({\r\n          title: 'Product',\r\n          text: 'Are you sure you want to remove this product?',\r\n          icon: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#d33',\r\n          confirmButtonText: 'Yes',\r\n          cancelButtonText: 'No',\r\n          focusCancel: true,\r\n          customClass: {\r\n            container: 'swal2-tailwind'\r\n          }\r\n        }).then(({ value }) => {\r\n          if (value && value === true) {\r\n            const products = _.cloneDeep(pos.value.products)\r\n            products.splice(index, 1)\r\n            store.dispatch(SAVE_PRODUCTS, {\r\n              call: posCalls.value.products,\r\n              data: products\r\n            }).then(response => {\r\n              toast.success('Product deleted successfully')\r\n            }).catch(error => {\r\n              console.log(error)\r\n              toast.error('Internal Server Error')\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n    const onDecode = (result) => {\r\n      state.keyword = result\r\n      state.isBarcodeScanner = false\r\n      const product = _.find(pos.value.products, { sku: result })\r\n      if (product) {\r\n        launchAddToCartModal(product)\r\n      }\r\n    }\r\n    const onError = (error) => {\r\n      console.log(error)\r\n    }\r\n    const launchAddToCartModal = (product) => {\r\n      if (Number(product.stock) > 0) {\r\n        emitter.emit('addToCartModal', {\r\n          product: product,\r\n          currency: currency.value,\r\n          employee: state.employee\r\n        })\r\n      } else {\r\n        toast.warning('Product out of stock')\r\n      }\r\n    }\r\n    const launchSaveProductModal = (product = null) => {\r\n      emitter.emit('saveProductModal', {\r\n        product: product,\r\n        currency: currency.value\r\n      })\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      state.employee = _.find(pos.value.users, { isLoggedIn: 'true' })\r\n      state.meta = {\r\n        ...state.meta,\r\n        currentPage: 1,\r\n        totalPages: Math.ceil(filteredProducts.value.length / state.meta.limit),\r\n        offset: 0\r\n      }\r\n    })\r\n\r\n    onMounted(() => {\r\n      if (Object.keys(route.query).length > 0 && typeof route.query.category_id !== 'undefined') {\r\n        state.categoryId = route.query.category_id\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      filteredProducts,\r\n      paginatedProducts,\r\n      categories: pos.value.categories,\r\n      sort,\r\n      updatePage,\r\n      getCategoryName,\r\n      getCategoryColorCode,\r\n      isFavourite,\r\n      currency,\r\n      markFavourite,\r\n      deleteProduct,\r\n      onDecode,\r\n      onError,\r\n      launchAddToCartModal,\r\n      launchSaveProductModal,\r\n      fancyBox\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.table-sm {\r\n  thead {\r\n    tr {\r\n      th:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n\r\n  tbody {\r\n    tr {\r\n      td:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <modal :maxWidth=\"maxWidth\" :show=\"show\" @close=\"closeModal()\">\r\n    <template #title>\r\n      <div class=\"flex items-center justify-between\">\r\n        <span>{{ translate('pos.products.title') }}</span>\r\n        <span class=\"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer\"\r\n              @click=\"closeModal()\">\r\n          <icon name=\"close\"></icon>\r\n        </span>\r\n      </div>\r\n    </template>\r\n    <template #content>\r\n      <form @submit.prevent=\"submit()\">\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <div class=\"flex items-center justify-between mb-1\" style=\"width: 100%;\">\r\n              <label>{{ translate('pos.products.select_category') }}</label>\r\n              <router-link to=\"/account/pos/categories\">Add Categry</router-link>\r\n            </div>\r\n            <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'categoryId') }}</div>\r\n          </div>\r\n          <select class=\"form-select w-full\" v-model=\"form.categoryId\">\r\n            <option value>Select Category</option>\r\n            <option :key=\"index\" :value=\"category.id\" v-for=\"(category, index) in categories\">\r\n              {{ category.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.products.name') }}</label>\r\n            <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'name') }}</div>\r\n          </div>\r\n          <input class=\"form-input w-full\" type=\"text\" v-model=\"form.name\"/>\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.products.description') }}</label>\r\n            <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'description') }}</div>\r\n          </div>\r\n          <textarea class=\"form-input w-full\" rows=\"4\" v-model=\"form.description\"></textarea>\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <div class=\"grid grid-cols-2 gap-1 md:gap-4\">\r\n            <div class=\"col-span-1\">\r\n              <div class=\"flex items-center justify-between mb-1\">\r\n                <label>{{ translate('pos.products.quantity') }}</label>\r\n                <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'quantity') }}</div>\r\n              </div>\r\n              <input class=\"form-input w-full\" type=\"text\" v-model=\"form.quantity\"/>\r\n            </div>\r\n            <div class=\"col-span-1\">\r\n              <div class=\"flex items-center justify-between mb-1\">\r\n                <label>{{ translate('pos.products.price') }}&nbsp;({{ currency }})</label>\r\n                <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'price') }}</div>\r\n              </div>\r\n              <input class=\"form-input w-full\" type=\"text\" v-model=\"form.price\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-4\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.products.sku') }}</label>\r\n            <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'sku') }}</div>\r\n          </div>\r\n          <div class=\"flex items-center justify-between\">\r\n            <input class=\"form-input w-full\" type=\"text\" v-model=\"form.sku\"/>\r\n            <span class=\"hover:text-blue-500 ml-3 cursor-pointer\"\r\n                  @click=\"isBarcodeScanner = !isBarcodeScanner\">\r\n               <icon name=\"barcode\"></icon>\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-2\">\r\n          <div class=\"grid grid-cols-2 gap-1 md:gap-4\">\r\n            <div class=\"col-span-1\">\r\n              <div class=\"w-28 h-28 overflow-hidden mx-auto\">\r\n                <label for=\"file\" class=\"cursor-pointer\" v-tippy=\"'Click here to upload'\">\r\n                  <img class=\"w-28 h-28 object-cover\" :src=\"getImageUrl\" alt=\"\"/>\r\n                </label>\r\n                <input @change=\"upload($event)\" class=\"hidden\" id=\"file\" type=\"file\" ref=\"featuredImg\"/>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-span-1\">\r\n              <div class=\"mx-auto w-40\" v-if=\"isBarcodeScanner\">\r\n                <StreamBarcodeReader @decode=\"onDecode\" @error=\"onError\"></StreamBarcodeReader>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mt-4 text-right\">\r\n          <j-button :disabled=\"isProcessing\">\r\n            <div v-if=\"isProcessing\" class=\"mr-3\">\r\n              <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n            </div>\r\n            <span>{{ translate('pos.products.btn_save') }}</span>\r\n          </j-button>\r\n        </div>\r\n      </form>\r\n    </template>\r\n  </modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from '@/components/Modal'\r\nimport Icon from '@/components/Icon'\r\nimport JButton from '@/templates/Button'\r\nimport { computed, inject, onBeforeMount, reactive, ref, toRefs, watch } from 'vue'\r\nimport validator from '@/validator'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport { SAVE_PRODUCTS } from '@/store/keys'\r\nimport { StreamBarcodeReader } from 'vue-barcode-reader'\r\n\r\nexport default {\r\n  name: 'SaveProductModal',\r\n  components: {\r\n    Modal,\r\n    Icon,\r\n    JButton,\r\n    StreamBarcodeReader\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const emitter = inject('emitter')\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n\r\n    // Store\r\n    const store = useStore()\r\n\r\n    const {\r\n      showError,\r\n      validate\r\n    } = validator()\r\n\r\n    // State\r\n    const featuredImg = ref(null)\r\n    const state = reactive({\r\n      show: false,\r\n      maxWidth: '2xl',\r\n      closeable: true,\r\n      product: null,\r\n      currency: null,\r\n      form: {\r\n        categoryId: '',\r\n        name: '',\r\n        description: '',\r\n        imageUrl: '',\r\n        quantity: '',\r\n        price: '',\r\n        sku: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        categoryId: ['required'],\r\n        name: ['required'],\r\n        description: ['required'],\r\n        sku: ['required'],\r\n        quantity: ['required', 'minValue:1', 'maxValue:9999999'],\r\n        price: ['required', 'minValue:0.1', 'regex:/^[0-9]{1,8}([,.][0-9]{1,8})?$/']\r\n      },\r\n      messages: {\r\n        categoryId: {\r\n          required: 'Please select category'\r\n        },\r\n        name: {\r\n          required: 'Product name is required'\r\n        },\r\n        description: {\r\n          required: 'Product description is required'\r\n        },\r\n        sku: {\r\n          required: 'Product sku is required'\r\n        },\r\n        quantity: {\r\n          required: 'Product stock level is required',\r\n          minValue: 'Product stock should be between 1 and 9999999',\r\n          maxValue: 'Product stock should be between 1 and 9999999'\r\n        },\r\n        price: {\r\n          required: 'Product price is required',\r\n          regex: 'Please enter a valid price value',\r\n          minValue: 'Price should be greater than 0'\r\n        }\r\n      },\r\n      isProcessing: false,\r\n      isBarcodeScanner: false\r\n    })\r\n\r\n    // Computed\r\n    const user = computed(() => store.state.user)\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n    const getImageUrl = computed(() => {\r\n      if (state.form.imageUrl) {\r\n        return state.form.imageUrl\r\n      }\r\n      return require('@/assets/images/pos/placeholder.png')\r\n    })\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(state.form, state.rules, state.messages)\r\n        }\r\n      })\r\n\r\n    // Methods\r\n    const closeModal = () => {\r\n      state.show = false\r\n    }\r\n    const onDecode = (result) => {\r\n      if (result) {\r\n        state.form.sku = result\r\n        state.isBarcodeScanner = false\r\n      }\r\n    }\r\n    const onError = (error) => {\r\n      console.log(error)\r\n    }\r\n    const generateId = () => {\r\n      const products = _.cloneDeep(pos.value.products)\r\n      if (products.length > 0) {\r\n        const product = _.maxBy(products, product => {\r\n          return Number(product.id)\r\n        })\r\n        return (Number(product.id) + 1).toString()\r\n      }\r\n      return '1'\r\n    }\r\n    // Upload file\r\n    const upload = (evt) => {\r\n      const files = evt.target.files\r\n      if (files.length > 0) {\r\n        const file = files[0]\r\n        if (file.type.startsWith('image/')) {\r\n          const fd = new FormData()\r\n          fd.append('file123', file)\r\n          fd.append('MerchantID', user.value.ID)\r\n          // Upload it to amazon S3\r\n          const apiBaseUrl = process.env.VUE_APP_API_URL\r\n          http.post(`${apiBaseUrl}/MarketAPI?POSBLOB`, fd, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          }).then(response => {\r\n            if (response.status === 200) {\r\n              state.form.imageUrl = response.data\r\n              // Clear file\r\n              featuredImg.value.value = ''\r\n            }\r\n          }).catch(error => {\r\n            console.log(error)\r\n          })\r\n        } else {\r\n          // Clear file\r\n          featuredImg.value.value = ''\r\n          toast.error('Please provide a valid image file')\r\n        }\r\n      }\r\n    }\r\n    // Create or Update Product\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.isProcessing = true\r\n        const formData = state.form\r\n        const products = _.cloneDeep(pos.value.products)\r\n        let isValid = true\r\n        if (state.product) {\r\n          let index = _.findIndex(products, product => {\r\n            return (product.sku === formData.sku && state.product.id !== product.id)\r\n          })\r\n          if (index === -1) {\r\n            index = _.findIndex(products, { id: state.product.id })\r\n            products.splice(index, 1, {\r\n              id: state.product.id,\r\n              categoryID: formData.categoryId,\r\n              itemName: formData.name,\r\n              description: formData.description,\r\n              imageUri: formData.imageUrl,\r\n              sku: formData.sku,\r\n              stock: formData.quantity,\r\n              price: formData.price\r\n            })\r\n          } else {\r\n            isValid = false\r\n            state.isProcessing = false\r\n            toast.error('Product with this sku already exists!')\r\n          }\r\n        } else {\r\n          if (_.findIndex(products, { sku: formData.sku }) === -1) {\r\n            products.push({\r\n              id: generateId(),\r\n              categoryID: formData.categoryId,\r\n              itemName: formData.name,\r\n              description: formData.description,\r\n              imageUri: formData.imageUrl,\r\n              sku: formData.sku,\r\n              stock: formData.quantity,\r\n              price: formData.price\r\n            })\r\n          } else {\r\n            isValid = false\r\n            state.isProcessing = false\r\n            toast.error('Product with this sku already exists!')\r\n          }\r\n        }\r\n        if (isValid) {\r\n          store.dispatch(SAVE_PRODUCTS, {\r\n            call: posCalls.value.products,\r\n            data: products\r\n          }).then(() => {\r\n            state.isProcessing = false\r\n            const message = state.product ? 'Product updated successfully' : 'Product added successfully'\r\n            toast.success(message)\r\n            closeModal()\r\n          }).catch(error => {\r\n            console.log(error)\r\n            state.isProcessing = false\r\n            toast.error('Internal Server Error')\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      emitter.on('saveProductModal', (args) => {\r\n        state.product = args.product || null\r\n        state.currency = args.currency\r\n        // Reset\r\n        if (featuredImg.value) {\r\n          featuredImg.value.value = ''\r\n        }\r\n        state.form = {\r\n          categoryId: state.product ? state.product.categoryID : '',\r\n          name: state.product ? state.product.itemName : '',\r\n          description: state.product ? state.product.description : '',\r\n          imageUrl: state.product ? state.product.imageUri : '',\r\n          quantity: state.product ? state.product.stock : '',\r\n          price: state.product ? state.product.price : '',\r\n          sku: state.product ? state.product.sku : ''\r\n        }\r\n        state.show = true\r\n      })\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      featuredImg,\r\n      categories: pos.value.categories,\r\n      showError,\r\n      closeModal,\r\n      getImageUrl,\r\n      onDecode,\r\n      onError,\r\n      upload,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./SaveProductModal.vue?vue&type=template&id=9d2d3d40\"\nimport script from \"./SaveProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./SaveProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=2d2692d4&scoped=true\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=2d2692d4&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2d2692d4\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Products.vue?vue&type=style&index=0&id=2d2692d4&scoped=true&lang=scss\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAVFBMVEXp7vG6vsHn7fDr8PO3u761uLuxtbju8/bO09bx9vnv9PfDx8qvsrXKz9K9wcTh5eiws7bg5um5vcCzt7rW2t3t8vXS19rBxMfk6u3Z3uHz+PvHy863ukFnAAACm0lEQVR42u3a23KiQBSF4b3X7m4EMWOak4f3f88RLCqHjpmJXNCk1neRS6t+45KmRIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiCZYSvIAKcoFqsqyKIFcTof9EleUsj6I7WvvlvD1AJOVQWTwulQzyOqs91EXC323+k5enKo71s87Ti9wWTsER1U3wJ43vRX1yVYoSUIOJeRZKHdeNbzmEVItCCkyDIHcYeMhEBNg+rvpEBj6wTduaGHYcAjspI2L0bkwnAybDYEUwemdc91m/yOQSp3O/EuJrYbY2UWdxVoeDB7Zh1Q7r2/8l4cnmBhyD+mu7n3IF9dIoOzDxZB5SPGvEEjXB+fFcg/58NFq2g6fO8q+iepeToasQ+zs9Luxo2pDVL2ViCHnkO+/foGy9VFHzl8M+YbIrST4dxfEdB9z5biTjEOmI4p37u2IkuxjNu0k35Dk0JjuYzLvJN+Q5Bif7mMy7yTfkOTGKt3H+51kHJJI9vFxJ9mHAA/28XknmYegqwRf7SPdSdYhKPrp3U73ke4k5xBUbRMGM6T7SHeScQiqc+O02Zth3sdDzSHfkFvHtAl/K5n38ZA/WK4h6NrGzT8VFOM+thky7iPqXbM/N3GjIfd9zJyLus2QeR+zqNsMmffxZpsh931sP+S+j+2HwMZrxi8IEds7/RUh3ZUhDGHItyF7736qyTHEDvryU3GX4/0InpD3Pfu2n3x4Wl4hF3veZQw5rh8SVKOeX/886/WPRtUaAlnX4FRdExYYXyBcVu6AjTchS8XQrv7JErmGuLjjuvpTpgIp+jr4JUK9W79DBCiq826JtiokC4AVS1g2D8cL/kvuz/gTEREREREREREREREREREREREREREREREREdHa/gKrrUWVgnSBWwAAAABJRU5ErkJggg==\""],"sourceRoot":""}