{"version":3,"sources":["webpack:///./src/views/pos/Employees.vue?f57c","webpack:///./src/views/pos/Employees.vue","webpack:///./src/components/account/pos/modals/employees/SaveEmployeeModal.vue","webpack:///./src/components/account/pos/modals/employees/SaveEmployeeModal.vue?8f3c","webpack:///./src/components/account/pos/modals/employees/PosLoginModal.vue","webpack:///./src/components/account/pos/modals/employees/PosLoginModal.vue?49dd","webpack:///./src/views/pos/Employees.vue?c9a0"],"names":["class","_createVNode","_component_pos_layout","content","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_component_j_button","onClick","$setup","type","_hoisted_4","_createElementBlock","_Fragment","employee","i","key","_component_icon","name","classes","_createBlock","_hoisted_6","USERNAME","_hoisted_7","isParentUser","_hoisted_8","_component_save_employee_modal","_component_pos_login_modal","_component_modal","maxWidth","_ctx","show","onClose","title","onSubmit","username","_hoisted_5","placeholder","password","disabled","_hoisted_9","components","Modal","Icon","JButton","setup","translate","inject","emitter","toast","store","useStore","showError","validate","validator","generateId","compositionUtils","state","reactive","closeable","index","form","errorBag","rules","messages","isProcessing","pos","computed","posCalls","watch","newVal","oldVal","Object","keys","length","closeModal","submit","formData","users","_","value","isValid","user","ID","PIN","error","push","isLoggedIn","dispatch","SAVE_EMPLOYEES","call","data","then","response","message","success","catch","console","log","onBeforeMount","on","args","required","regex","toRefs","__exports__","readonly","_hoisted_10","loggedInEmployee","filter","POSLayout","SaveEmployeeModal","PosLoginModal","swal","employees","login","emit","launchSaveEmployeeModal","deleteEmployee","fire","text","icon","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","focusCancel","customClass","container","splice","render"],"mappings":"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","file":"assets/js/account-pos-employees.bc72f4fd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Employees.vue?vue&type=style&index=0&id=6453e10f&scoped=true&lang=scss\"","<template>\r\n  <pos-layout>\r\n    <template v-slot:content>\r\n      <div class=\"card\">\r\n        <div class=\"body\">\r\n          <div class=\"text-right mb-3\">\r\n            <j-button @click=\"launchSaveEmployeeModal()\" type=\"button\">\r\n              {{ translate('pos.employees.btn_add') }}\r\n            </j-button>\r\n          </div>\r\n          <table class=\"table-sm\">\r\n            <tbody>\r\n            <tr v-for=\"(employee, i) in employees\" :key=\"i\">\r\n              <td>\r\n                <div class=\"flex items-center cursor-pointer\" @click=\"login(i)\">\r\n\r\n                  <icon name=\"user-circle\"\r\n                  :classes=\"`w-8 h-8 ${isLoggedIn(employee) ? 'text-blue-500' : ''}`\"></icon>\r\n                  <icon name=\"check-circle\" v-if=\"isLoggedIn(employee)\"></icon>\r\n                  <span class=\"cursor-pointer ml-3 text-base\">{{ employee.USERNAME }}</span>\r\n                </div>\r\n              </td>\r\n              <td class=\"text-right\">\r\n                <div class=\"pr-3\" v-if=\"employee.isParentUser === 'false'\">\r\n                  <button @click=\"launchSaveEmployeeModal(employee, i)\"\r\n                          class=\"mr-2 hover:text-blue-500\"\r\n                          v-if=\"loggedInEmployee && loggedInEmployee.isParentUser === 'true'\">\r\n                    <icon name=\"edit\"></icon>\r\n                  </button>\r\n                  <button @click=\"deleteEmployee(i)\" class=\"hover:text-red-500\"\r\n                          v-if=\"loggedInEmployee && loggedInEmployee.isParentUser === 'true'\">\r\n                    <icon name=\"trash\"></icon>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </pos-layout>\r\n  <!-- Save Employee Modal -->\r\n  <save-employee-modal></save-employee-modal>\r\n  <!-- Employee Login Modal -->\r\n  <pos-login-modal></pos-login-modal>\r\n</template>\r\n\r\n<script>\r\nimport POSLayout from '@/components/layouts/POSLayout'\r\nimport JButton from '@/templates/Button'\r\nimport Icon from '@/components/Icon'\r\nimport SaveEmployeeModal from '@/components/account/pos/modals/employees/SaveEmployeeModal'\r\nimport PosLoginModal from '@/components/account/pos/modals/employees/PosLoginModal'\r\nimport { computed, inject } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport { SAVE_EMPLOYEES } from '@/store/keys'\r\n\r\nexport default {\r\n  name: 'Employees',\r\n  components: {\r\n    'pos-layout': POSLayout,\r\n    JButton,\r\n    Icon,\r\n    SaveEmployeeModal,\r\n    PosLoginModal\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const emitter = inject('emitter')\r\n    const swal = inject('swal')\r\n    const toast = inject('toast')\r\n\r\n    // Store\r\n    const store = useStore()\r\n\r\n    // Computed\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n    const employees = computed(() => pos.value.users)\r\n    const loggedInEmployee = computed(() => {\r\n      return _.find(pos.value.users, { isLoggedIn: 'true' })\r\n    })\r\n\r\n    // Methods\r\n    const isLoggedIn = (employee) => {\r\n      return loggedInEmployee.value && employee.ID === loggedInEmployee.value.ID\r\n    }\r\n    const login = (index) => {\r\n      const users = _.cloneDeep(pos.value.users)\r\n      const employee = users[index]\r\n      const type = employee.isParentUser === 'true' ? 'password' : 'pin'\r\n      if (employee.isLoggedIn === 'false' || employee.ID !== loggedInEmployee.value.ID) {\r\n        emitter.emit('posLoginModal', {\r\n          employee: employee,\r\n          type: type,\r\n          loggedInEmployee: loggedInEmployee.value,\r\n          index: index\r\n        })\r\n      }\r\n    }\r\n    const launchSaveEmployeeModal = (employee = null, i = null) => {\r\n      emitter.emit('saveEmployeeModal', {\r\n        employee: employee,\r\n        index: i\r\n      })\r\n    }\r\n    const deleteEmployee = (index) => {\r\n      swal.fire({\r\n        title: 'Employee',\r\n        text: 'Are you sure, want to delete this employee?',\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#d33',\r\n        confirmButtonText: 'Yes',\r\n        cancelButtonText: 'No',\r\n        focusCancel: true,\r\n        customClass: {\r\n          container: 'swal2-tailwind'\r\n        }\r\n      }).then(({ value }) => {\r\n        if (value && value === true) {\r\n          const users = _.cloneDeep(pos.value.users)\r\n          users.splice(index, 1)\r\n          store.dispatch(SAVE_EMPLOYEES, {\r\n            call: posCalls.value.users,\r\n            data: users\r\n          }).then(response => {\r\n            toast.success('Employee deleted successfully')\r\n          }).catch(error => {\r\n            console.log(error)\r\n            toast.error('Internal Server Error')\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    return {\r\n      translate,\r\n      employees,\r\n      loggedInEmployee,\r\n      isLoggedIn,\r\n      login,\r\n      launchSaveEmployeeModal,\r\n      deleteEmployee\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.table-sm {\r\n  tbody {\r\n    tr {\r\n      td:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <modal :maxWidth=\"maxWidth\" :show=\"show\" @close=\"closeModal()\">\r\n    <template #title>\r\n      <div class=\"flex items-center justify-between\">\r\n        <span>{{ translate('pos.employees.title') }}</span>\r\n        <span class=\"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer\"\r\n              @click=\"closeModal()\">\r\n          <icon name=\"close\"></icon>\r\n        </span>\r\n      </div>\r\n    </template>\r\n    <template #content>\r\n      <form @submit.prevent=\"submit()\">\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.employees.username') }}</label>\r\n            <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'username') }}</div>\r\n          </div>\r\n          <input class=\"form-input w-full\" type=\"text\" v-model=\"form.username\"/>\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.employees.password') }}</label>\r\n            <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'password') }}</div>\r\n          </div>\r\n          <input class=\"form-input w-full\" placeholder=\"000000\" type=\"text\" v-model=\"form.password\"/>\r\n        </div>\r\n        <div class=\"mt-4 text-right\">\r\n          <j-button :disabled=\"isProcessing\">\r\n            <div v-if=\"isProcessing\" class=\"mr-3\">\r\n              <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n            </div>\r\n            <span>{{ translate('pos.employees.btn_save') }}</span>\r\n          </j-button>\r\n        </div>\r\n      </form>\r\n    </template>\r\n  </modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from '@/components/Modal'\r\nimport Icon from '@/components/Icon'\r\nimport JButton from '@/templates/Button'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport validator from '@/validator'\r\nimport * as _ from 'lodash'\r\nimport { useStore } from 'vuex'\r\nimport { SAVE_EMPLOYEES } from '@/store/keys'\r\nimport compositionUtils from '@/compositionUtils'\r\n\r\nexport default {\r\n  name: 'SaveEmployeeModal',\r\n  components: {\r\n    Modal,\r\n    Icon,\r\n    JButton\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const emitter = inject('emitter')\r\n    const toast = inject('toast')\r\n\r\n    // Store\r\n    const store = useStore()\r\n\r\n    const {\r\n      showError,\r\n      validate\r\n    } = validator()\r\n    const { generateId } = compositionUtils()\r\n\r\n    const state = reactive({\r\n      show: false,\r\n      maxWidth: '2xl',\r\n      closeable: true,\r\n      employee: null,\r\n      type: 'pin',\r\n      index: -1,\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {},\r\n      messages: null,\r\n      isProcessing: false\r\n    })\r\n    // Computed\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(newVal, state.rules, state.messages)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Methods\r\n    const closeModal = () => {\r\n      state.show = false\r\n    }\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.isProcessing = true\r\n        const formData = state.form\r\n        const users = _.cloneDeep(pos.value.users)\r\n        let isValid = true\r\n        if (state.employee) {\r\n          if (_.findIndex(users, user => {\r\n            return (user.USERNAME === formData.username && user.ID !== state.employee.ID)\r\n          }) === -1) {\r\n            users[state.index].USERNAME = formData.username\r\n            users[state.index].PIN = formData.password\r\n          } else {\r\n            isValid = false\r\n            state.isProcessing = false\r\n            toast.error('Username already exists!')\r\n          }\r\n        } else {\r\n          if (_.findIndex(users, { USERNAME: formData.username }) === -1) {\r\n            users.push({\r\n              ID: generateId(pos.value.users),\r\n              PIN: formData.password,\r\n              USERNAME: formData.username,\r\n              isLoggedIn: 'false',\r\n              isParentUser: 'false'\r\n            })\r\n          } else {\r\n            isValid = false\r\n            state.isProcessing = false\r\n            toast.error('Username already exists!')\r\n          }\r\n        }\r\n        if (isValid) {\r\n          store.dispatch(SAVE_EMPLOYEES, {\r\n            call: posCalls.value.users,\r\n            data: users\r\n          }).then(response => {\r\n            state.isProcessing = false\r\n            const message = state.employee ? 'Employee updated successfully' : 'Employee added successfully'\r\n            toast.success(message)\r\n            closeModal()\r\n          }).catch(error => {\r\n            console.log(error)\r\n            state.isProcessing = false\r\n            toast.error('Internal Server Error')\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      emitter.on('saveEmployeeModal', (args) => {\r\n        state.employee = args.employee || null\r\n        state.index = args.index || -1\r\n        state.type = state.employee && state.employee.isParentUser === 'true' ? 'password' : 'pin'\r\n        state.form = {\r\n          username: state.employee ? state.employee.USERNAME : '',\r\n          password: ''\r\n        }\r\n        state.rules = {\r\n          username: ['required'],\r\n          password: state.type === 'password' ? ['required'] : ['required', 'regex:/^[0-9]{6}$/']\r\n        }\r\n        state.messages = {\r\n          username: {\r\n            required: 'Username is required'\r\n          },\r\n          password: {\r\n            required: state.type === 'password' ? 'Password is required' : 'PIN is required',\r\n            regex: 'Please enter a 6 digit pin'\r\n          }\r\n        }\r\n        state.show = true\r\n      })\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      closeModal,\r\n      showError,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./SaveEmployeeModal.vue?vue&type=template&id=3c3ef805\"\nimport script from \"./SaveEmployeeModal.vue?vue&type=script&lang=js\"\nexport * from \"./SaveEmployeeModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <modal :maxWidth=\"maxWidth\" :show=\"show\" @close=\"closeModal()\">\r\n    <template #title>\r\n      <div class=\"flex items-center justify-between\">\r\n        <span>{{ translate('pos.employees.title') }}</span>\r\n        <span class=\"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer\"\r\n              @click=\"closeModal()\">\r\n          <icon name=\"close\"></icon>\r\n        </span>\r\n      </div>\r\n    </template>\r\n    <template #content>\r\n      <form @submit.prevent=\"submit()\">\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.employees.username') }}</label>\r\n            <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'username') }}</div>\r\n          </div>\r\n          <input class=\"form-input w-full\" readonly type=\"text\" v-model=\"form.username\"/>\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.employees.password') }}</label>\r\n            <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'password') }}</div>\r\n          </div>\r\n          <input class=\"form-input w-full\" type=\"password\" v-model=\"form.password\"/>\r\n          <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'password') }}</div>\r\n        </div>\r\n        <div class=\"mt-4 text-right\">\r\n          <j-button :disabled=\"isProcessing\">\r\n            <div v-if=\"isProcessing\" class=\"mr-3\">\r\n              <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n            </div>\r\n            <span>{{ translate('pos.employees.btn_login') }}</span>\r\n          </j-button>\r\n        </div>\r\n      </form>\r\n    </template>\r\n  </modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from '@/components/Modal'\r\nimport Icon from '@/components/Icon'\r\nimport JButton from '@/templates/Button'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport validator from '@/validator'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport { SAVE_EMPLOYEES } from '@/store/keys'\r\n\r\nexport default {\r\n  name: 'PosLoginModal',\r\n  components: {\r\n    Modal,\r\n    Icon,\r\n    JButton\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const emitter = inject('emitter')\r\n    const toast = inject('toast')\r\n\r\n    const store = useStore()\r\n\r\n    const {\r\n      showError,\r\n      validate\r\n    } = validator()\r\n    const state = reactive({\r\n      show: false,\r\n      maxWidth: '2xl',\r\n      closeable: true,\r\n      index: -1,\r\n      loggedInEmployee: null,\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {},\r\n      messages: {},\r\n      isProcessing: false\r\n    })\r\n\r\n    // Computed\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(newVal, state.rules, state.messages)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Methods\r\n    const closeModal = () => {\r\n      state.show = false\r\n    }\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        const formData = state.form\r\n        const users = _.cloneDeep(pos.value.users)\r\n        const user = users[state.index]\r\n        if (user.USERNAME === formData.username && user.PIN === formData.password) {\r\n          if (state.loggedInEmployee) {\r\n            users.filter(user => {\r\n              if (user.ID === state.loggedInEmployee.ID && user.USERNAME === state.loggedInEmployee.USERNAME) {\r\n                user.isLoggedIn = 'false'\r\n              }\r\n            })\r\n          }\r\n          users[state.index].isLoggedIn = 'true'\r\n          store.dispatch(SAVE_EMPLOYEES, {\r\n            call: posCalls.value.users,\r\n            data: users\r\n          }).catch(error => {\r\n            console.log(error)\r\n          })\r\n          closeModal()\r\n        } else {\r\n          toast.error('Please provide a valid password/pin')\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      emitter.on('posLoginModal', (args) => {\r\n        state.loggedInEmployee = args.loggedInEmployee\r\n        state.index = args.index\r\n        state.type = args.type\r\n        state.form = {\r\n          username: args.employee ? args.employee.USERNAME : '',\r\n          password: ''\r\n        }\r\n        state.rules = {\r\n          username: ['required'],\r\n          password: state.type === 'password' ? ['required'] : ['required', 'regex:/^[0-9]{6}$/']\r\n        }\r\n        state.messages = {\r\n          username: {\r\n            required: 'Username is required'\r\n          },\r\n          password: {\r\n            required: state.type === 'password' ? 'Password is required' : 'PIN is required',\r\n            regex: 'Please enter a 6 digit pin'\r\n          }\r\n        }\r\n        state.show = true\r\n      })\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      showError,\r\n      closeModal,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./PosLoginModal.vue?vue&type=template&id=e4518bb6\"\nimport script from \"./PosLoginModal.vue?vue&type=script&lang=js\"\nexport * from \"./PosLoginModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Employees.vue?vue&type=template&id=6453e10f&scoped=true\"\nimport script from \"./Employees.vue?vue&type=script&lang=js\"\nexport * from \"./Employees.vue?vue&type=script&lang=js\"\n\nimport \"./Employees.vue?vue&type=style&index=0&id=6453e10f&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6453e10f\"]])\n\nexport default __exports__"],"sourceRoot":""}