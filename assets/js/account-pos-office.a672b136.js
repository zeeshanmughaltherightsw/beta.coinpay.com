(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account-pos-office"],{"0c6f":function(e,t,o){"use strict";o("84a0")},"365a":function(e,t,o){},6262:function(e,t,o){},"6eda":function(e,t,o){"use strict";o("6262")},"75a9":function(e,t,o){"use strict";o.r(t);var c=o("f2bf"),a=o("52f9"),r=o.n(a),n=o("e74e"),s=o.n(n);const l={class:"card"},i={class:"title"},d=Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),p={class:"body"},b={class:"text-center w-full md:w-4/5 3xl:w-3/5 mx-auto"},u=Object(c["createElementVNode"])("a",{href:"https://cointopay.com/examplePOS_CSV.csv",target:"_blank",class:"text-blue-500 hover:underline"},"Example Import Data",-1),m={class:"flex items-center justify-center my-2"},j={class:"btn btn-success w-32 lbl-file",for:"importCSV"},g={key:0,class:"mr-3"},O={class:"mb-2"},h={class:"flex items-center"},y=["placeholder"],f={key:0,class:"mr-3"},v=Object(c["createElementVNode"])("p",{class:"mt-2 text-left text-gray-500 text-sm"},"https://3sixteen.myshopify.com/products.json?limit=1000",-1),N={key:0,class:"card"},E={class:"title"},V=Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),C={class:"body"},k={class:"text-center"},x={class:"card"},w={class:"title"},P=Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),S={class:"body"},D={class:"row"},B={class:"col-md-12 text-center"},M={key:0,class:"w-full rounded shadow px-4 py-3 bg-yellow-500 mb-4 text-yellow-900 font-semibold"},I={key:1,class:"mt-3"},_=Object(c["createElementVNode"])("h5",{class:"font-bold text-lg mb-3"},"Shop Link",-1),T={class:"flex items-center justify-center"},A={key:2,class:"mt-3"},U={class:"card"},L={class:"title"},K=Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),R={class:"body"},q={class:"card"},W={class:"title"},F=Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),z={class:"body"},J={class:"card"},Y={class:"title"},$=Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),H={class:"body"},Z=Object(c["createElementVNode"])("div",{class:"card"},[Object(c["createElementVNode"])("div",{class:"title"},"POS Apps"),Object(c["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"}),Object(c["createElementVNode"])("div",{class:"body"},[Object(c["createElementVNode"])("div",{class:"flex items-center justify-center"},[Object(c["createElementVNode"])("a",{href:"https://play.google.com/store/apps/details?id=com.cointopay.pos",target:"_blank"},[Object(c["createElementVNode"])("img",{alt:"Play store",src:r.a,class:"h-10"})]),Object(c["createElementVNode"])("a",{href:"https://apps.apple.com/us/app/c-pos/id1459100341",target:"_blank"},[Object(c["createElementVNode"])("img",{alt:"App store",src:s.a,class:"h-10 ml-2"})])])])],-1);function G(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("icon"),G=Object(c["resolveComponent"])("j-button"),Q=Object(c["resolveComponent"])("router-link"),X=Object(c["resolveComponent"])("Categories"),ee=Object(c["resolveComponent"])("Coupons"),te=Object(c["resolveComponent"])("Shipping-methods"),oe=Object(c["resolveComponent"])("pos-layout"),ce=Object(c["resolveDirective"])("tippy");return Object(c["openBlock"])(),Object(c["createBlock"])(oe,null,{content:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(a.translate("pos.office.product_catalog")),1)]),d,Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",b,[u,Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("input",{onChange:t[0]||(t[0]=e=>a.importFromCSV(e)),class:"hidden",id:"importCSV",type:"file"},null,32),Object(c["createElementVNode"])("label",j,[e.isProcessing?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",g,[Object(c["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.office.import")),1)]),Object(c["createVNode"])(G,{onClick:t[1]||(t[1]=e=>a.exportToCSV()),buttonStyle:"success",size:"w-32",class:"ml-3"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a.translate("pos.office.export")),1)]),_:1})]),Object(c["createElementVNode"])("p",O,Object(c["toDisplayString"])(a.translate("pos.office.import_from_shopify")),1),Object(c["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(c["withModifiers"])(e=>a.importFromShopify(),["prevent"])),class:"flex-space-between"},[Object(c["createElementVNode"])("div",h,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{placeholder:a.translate("pos.office.shopify_link"),"aria-label":"url",class:"form-input w-full",type:"url","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.url=t)},null,8,y),[[c["vModelText"],e.form.url]]),Object(c["createVNode"])(G,{disabled:e.isProcessing||!a.isValidShopifyURL(e.form.url),buttonStyle:"success",size:"w-32",class:"ml-3"},{default:Object(c["withCtx"])(()=>[e.isProcessing?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",f,[Object(c["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.office.import")),1)]),_:1},8,["disabled"])])],32),v])])]),a.products.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",N,[Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(a.translate("pos.delete_catalog")),1)]),V,Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("div",k,[Object(c["createVNode"])(G,{onClick:t[4]||(t[4]=e=>a.deleteAllProducts()),buttonStyle:"danger"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a.translate("pos.btn_delete_all_products")),1)]),_:1})])])])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(a.translate("pos.e_commerce")),1)]),P,Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("div",B,[a.showShippingWarning?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",M,Object(c["toDisplayString"])(a.translate("pos.shipping_warning_msg")),1)):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(G,{onClick:t[5]||(t[5]=t=>a.togglePOS(e.isPosEnabled?0:1)),buttonStyle:""+(e.isPosEnabled?"danger":"success"),class:"mr-2"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a.translate(""+(e.isPosEnabled?"pos.btn_disable":"pos.btn_enable"))),1)]),_:1},8,["buttonStyle"]),e.isPosEnabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",I,[_,Object(c["createElementVNode"])("div",T,[Object(c["createVNode"])(Q,{to:{name:"shop-detail",params:{id:a.user.ID}},class:"mr-3",tag:"a"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.siteUrl+"/shop/"+a.user.ID),1)]),_:1},8,["to"]),Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("button",null,[Object(c["createVNode"])(s,{name:"question-mark",classes:"w-6 h-6 text-yellow-500"})])),[[ce,{content:a.translate("pos.office.help")}]])])])):Object(c["createCommentVNode"])("",!0),e.isPosEnabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",A,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-input w-full md:w-3/5",rows:"4",readonly:"","aria-label":"","onUpdate:modelValue":t[6]||(t[6]=e=>a.iframe=e)},null,512),[[c["vModelText"],a.iframe]])])):Object(c["createCommentVNode"])("",!0)])])])]),Object(c["createElementVNode"])("div",U,[Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(a.translate("pos.categories.title")),1)]),K,Object(c["createElementVNode"])("div",R,[Object(c["createVNode"])(X)])]),Object(c["createElementVNode"])("div",q,[Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(a.translate("pos.coupons.list_title")),1)]),F,Object(c["createElementVNode"])("div",z,[Object(c["createVNode"])(ee)])]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("div",Y,[Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(a.translate("pos.shipping.title")),1)]),$,Object(c["createElementVNode"])("div",H,[Object(c["createVNode"])(te)])]),Z]),_:1})}o("14d9");var Q=o("66c3"),X=o("4032"),ee=o("cdae");const te={class:"text-right mb-3"},oe={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},ce={class:"table-sm"},ae={class:"whitespace-nowrap"},re={class:"w-32"},ne=["onClick"],se=["onClick"],le={key:0},ie={colspan:"3"};function de(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("j-button"),l=Object(c["resolveComponent"])("icon"),i=Object(c["resolveComponent"])("save-coupon-modal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",te,[Object(c["createVNode"])(s,{onClick:t[0]||(t[0]=e=>a.launchSaveCouponModal())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a.translate("pos.coupons.btn_add")),1)]),_:1})]),Object(c["createElementVNode"])("div",oe,[Object(c["createElementVNode"])("table",ce,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",ae,Object(c["toDisplayString"])(a.translate("pos.coupons.headings.coupon_code")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(a.translate("pos.coupons.headings.discount")),1),Object(c["createElementVNode"])("th",re,Object(c["toDisplayString"])(a.translate("pos.coupons.headings.actions")),1)])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.coupons,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.formatCode(e.KeyData)),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.ValueData+"%"),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{onClick:t=>a.launchSaveCouponModal(e),class:"hover:text-blue-500 mr-2"},[Object(c["createVNode"])(l,{name:"edit"})],8,ne),Object(c["createElementVNode"])("button",{onClick:t=>a.deleteCoupon(e),class:"hover:text-red-500",type:"button"},[Object(c["createVNode"])(l,{name:"trash"})],8,se)])]))),128)),0===a.coupons.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",le,[Object(c["createElementVNode"])("td",ie,Object(c["toDisplayString"])(a.translate("pos.coupons.no_data")),1)])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createVNode"])(i)],64)}const pe={class:"flex items-center justify-between"},be={class:"mb-2"},ue={class:"flex items-center justify-between mb-1"},me={class:"text-red-700 dark:text-red-400 text-sm"},je=["readonly"],ge={class:"mb-2"},Oe={class:"flex items-center justify-between mb-1"},he={class:"text-red-700 dark:text-red-400 text-sm"},ye={class:"mt-4 text-right"},fe={key:0,class:"mr-3"};function ve(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("icon"),l=Object(c["resolveComponent"])("j-button"),i=Object(c["resolveComponent"])("modal");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[4]||(t[4]=e=>a.closeModal())},{title:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",pe,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.coupons.title")),1),Object(c["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[Object(c["createVNode"])(s,{name:"close"})])])]),content:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(c["withModifiers"])(e=>a.submit(),["prevent"]))},[Object(c["createElementVNode"])("div",be,[Object(c["createElementVNode"])("div",ue,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.coupons.coupon_code")),1),Object(c["createElementVNode"])("div",me,Object(c["toDisplayString"])(a.showError(e.errorBag,"couponCode")),1)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-input w-full",readonly:e.coupon,type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.form.couponCode=t)},null,8,je),[[c["vModelText"],e.form.couponCode]])]),Object(c["createElementVNode"])("div",ge,[Object(c["createElementVNode"])("div",Oe,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.coupons.discount")+" (%)"),1),Object(c["createElementVNode"])("div",he,Object(c["toDisplayString"])(a.showError(e.errorBag,"discount")),1)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.discount=t)},null,512),[[c["vModelText"],e.form.discount]])]),Object(c["createElementVNode"])("div",ye,[Object(c["createVNode"])(l,{disabled:e.isProcessing},{default:Object(c["withCtx"])(()=>[e.isProcessing?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",fe,[Object(c["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.coupons.btn_save")),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["maxWidth","show"])}var Ne=o("714b"),Ee=o("ea45"),Ve=o("5502"),Ce=o("2ef0"),ke=o("2e13"),xe=o("8923"),we={name:"SaveCouponModal",components:{Modal:Ne["a"],Icon:ee["a"],JButton:X["a"]},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("emitter"),o=Object(c["inject"])("toast"),a=Object(c["inject"])("http"),r=Object(Ve["b"])(),{showError:n,validate:s}=Object(Ee["a"])(),{saveNotification:l}=Object(ke["a"])(),i=Object(c["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,coupon:null,form:{couponCode:"",discount:""},errorBag:{},rules:{couponCode:["required","regex:/^[a-zA-Z0-9]+$/"],discount:["required","between:1,60"]},messages:{couponCode:{required:"Coupon code is required",regex:"Only alphabets and numbers are allowed"},discount:{required:"Please enter a valid discount",between:"Discount should be a number between 1 and 60"}},isProcessing:!1}),d=Object(c["computed"])(()=>r.state.user),p=Object(c["computed"])(()=>r.state.coupons);Object(c["watch"])(()=>({...i.form}),(e,t)=>{Object.keys(i.errorBag).length>0&&(i.errorBag=s(e,i.rules,i.messages))});const b="https://app.cointopay.com",u=()=>{i.show=!1},m=()=>{if(i.errorBag=s(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length){i.isProcessing=!0;const e=i.form;let t=!0,c=null;const n=`${d.value.ID}_coupon${e.couponCode}`;if(i.coupon?-1===Ce["findIndex"](p.value,e=>e.KeyData.toLowerCase()===n.toLowerCase()&&e.ID.toString()!==i.coupon.ID.toString())?c={...i.coupon,KeyData:n,ValueData:e.discount}:(t=!1,i.isProcessing=!1,o.error("Coupon code already exists!"),l("Coupon code already exists!")):-1===Ce["findIndex"](p.value,{KeyData:n})?c={KeyData:n,ValueData:e.discount}:(t=!1,i.isProcessing=!1,o.error("Coupon code already exists!"),l("Coupon code already exists!")),t){const e={POSDATA:"",Call:i.coupon?"UPDATE":"INSERT",KeyData:c.KeyData,ValueData:c.ValueData,MerchantID:d.value.ID,APIKey:d.value.APIKey,output:"json"};a.get(b+"/MarketAPI",{params:e}).then(e=>{if(i.isProcessing=!1,200===e.status){r.dispatch(xe["f"],{MerchantID:d.value.ID,APIKey:d.value.APIKey});const e=i.coupon?"Coupon updated successfully":"Coupon added successfully";o.success(e),l(e),u()}}).catch(e=>{i.isProcessing=!1,console.log(e)})}}};return Object(c["onBeforeMount"])(()=>{t.on("saveCouponModal",e=>{i.coupon=e.coupon||null,i.form={couponCode:i.coupon?i.coupon.KeyData.split("coupon")[1]:"",discount:i.coupon?Number(i.coupon.ValueData):""},i.show=!0})}),{translate:e,...Object(c["toRefs"])(i),showError:n,closeModal:u,submit:m}}},Pe=o("6b0d"),Se=o.n(Pe);const De=Se()(we,[["render",ve]]);var Be=De,Me={name:"Coupons",components:{Icon:ee["a"],JButton:X["a"],SaveCouponModal:Be},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("http"),o=Object(c["inject"])("swal"),a=Object(c["inject"])("toast"),r=Object(c["inject"])("emitter"),n=Object(Ve["b"])(),s=Object(c["computed"])(()=>n.state.user),l=Object(c["computed"])(()=>n.state.coupons),i="https://app.cointopay.com",d=e=>e?e.split("coupon")[1]:"",p=e=>{o.fire({title:"Coupon",text:"Are you sure, want to delete this coupon?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then(({value:o})=>{o&&!0===o&&t.get(i+"/MarketAPI",{params:{POSDATA:"",Call:"DELETE",KeyData:e.KeyData,MerchantID:s.value.ID,APIKey:s.value.APIKey,output:"json"}}).then(e=>{200===e.status&&(a.success("Coupon deleted successfully"),n.dispatch(xe["f"],{MerchantID:s.value.ID,APIKey:s.value.APIKey}))}).catch(e=>{console.log(e)})})},b=(e=null)=>{r.emit("saveCouponModal",{coupon:e})};return Object(c["onBeforeMount"])(()=>{n.dispatch(xe["f"],{MerchantID:s.value.ID,APIKey:s.value.APIKey})}),{translate:e,coupons:l,formatCode:d,deleteCoupon:p,launchSaveCouponModal:b}}};o("0c6f");const Ie=Se()(Me,[["render",de],["__scopeId","data-v-2a086b86"]]);var _e=Ie;const Te={class:"text-right mb-3"},Ae={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},Ue={class:"table-sm"},Le={class:"whitespace-nowrap"},Ke={class:"whitespace-nowrap"},Re={class:"whitespace-nowrap"},qe={class:"w-32"},We=["onClick"],Fe=["onClick"],ze={key:0},Je={colspan:"4"};function Ye(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("j-button"),l=Object(c["resolveComponent"])("icon"),i=Object(c["resolveComponent"])("pagination"),d=Object(c["resolveComponent"])("save-shipping-method-modal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",Te,[Object(c["createVNode"])(s,{onClick:t[0]||(t[0]=e=>a.launchSaveShippingMethodModal())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a.translate("pos.shipping.btn_add")),1)]),_:1})]),Object(c["createElementVNode"])("div",Ae,[Object(c["createElementVNode"])("table",Ue,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",Le,Object(c["toDisplayString"])(a.translate("pos.shipping.headings.country")),1),Object(c["createElementVNode"])("th",Ke,Object(c["toDisplayString"])(a.translate("pos.shipping.headings.shipping_method")),1),Object(c["createElementVNode"])("th",Re,Object(c["toDisplayString"])(a.translate("pos.shipping.headings.shipping_cost")),1),Object(c["createElementVNode"])("th",qe,Object(c["toDisplayString"])(a.translate("pos.shipping.headings.actions")),1)])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.paginatedShippingMethods,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.countryName),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.shippingMethod),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.formatPrice(e.shippingCost,a.currency)),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{onClick:t=>a.launchSaveShippingMethodModal(e),class:"hover:text-blue-500 mr-2"},[Object(c["createVNode"])(l,{name:"edit"})],8,We),Object(c["createElementVNode"])("button",{onClick:e=>a.deleteShippingMethod(t),class:"hover:text-red-500",type:"button"},[Object(c["createVNode"])(l,{name:"trash"})],8,Fe)])]))),128)),0===a.shippingMethods.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",ze,[Object(c["createElementVNode"])("td",Je,Object(c["toDisplayString"])(a.translate("pos.shipping.no_data")),1)])):Object(c["createCommentVNode"])("",!0)])])]),a.shippingMethods.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,meta:e.meta,onPage:a.updatePage},null,8,["meta","onPage"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(d)],64)}var $e=o("d529");const He={class:"flex items-center justify-between"},Ze={class:"mb-2"},Ge={class:"flex items-center justify-between mb-1"},Qe={class:"text-red-700 dark:text-red-400 text-sm"},Xe=["value"],et={class:"mb-2"},tt={class:"flex items-center justify-between mb-1"},ot={class:"text-red-700 dark:text-red-400 text-sm"},ct={class:"mb-2"},at={class:"flex items-center justify-between mb-1"},rt={class:"text-red-700 dark:text-red-400 text-sm"},nt={class:"mt-4 text-right"},st={key:0,class:"mr-3"};function lt(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("icon"),l=Object(c["resolveComponent"])("j-button"),i=Object(c["resolveComponent"])("modal");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[6]||(t[6]=e=>a.closeModal())},{title:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",He,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.shipping.title")),1),Object(c["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[Object(c["createVNode"])(s,{name:"close"})])])]),content:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("form",{onSubmit:t[5]||(t[5]=Object(c["withModifiers"])(e=>a.submit(),["prevent"]))},[Object(c["createElementVNode"])("div",Ze,[Object(c["createElementVNode"])("div",Ge,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.shipping.country")),1),Object(c["createElementVNode"])("div",Qe,Object(c["toDisplayString"])(a.showError(e.errorBag,"countryId")),1)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{onChange:t[1]||(t[1]=e=>a.updateCountryName()),class:"form-select w-full","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.countryId=t)},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.countries,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:t,value:e.id},Object(c["toDisplayString"])(e.name),9,Xe))),128))],544),[[c["vModelSelect"],e.form.countryId]])]),Object(c["createElementVNode"])("div",et,[Object(c["createElementVNode"])("div",tt,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.shipping.shipping_method")),1),Object(c["createElementVNode"])("div",ot,Object(c["toDisplayString"])(a.showError(e.errorBag,"shippingMethod")),1)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.form.shippingMethod=t)},null,512),[[c["vModelText"],e.form.shippingMethod]])]),Object(c["createElementVNode"])("div",ct,[Object(c["createElementVNode"])("div",at,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.shipping.shipping_cost")),1),Object(c["createElementVNode"])("div",rt,Object(c["toDisplayString"])(a.showError(e.errorBag,"shippingCost")),1)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-input w-full",type:"number","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.shippingCost=t)},null,512),[[c["vModelText"],e.form.shippingCost]])]),Object(c["createElementVNode"])("div",nt,[Object(c["createVNode"])(l,{disabled:e.isProcessing},{default:Object(c["withCtx"])(()=>[e.isProcessing?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",st,[Object(c["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.shipping.btn_save")),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["maxWidth","show"])}var it={name:"SaveShippingMethodModal",components:{Modal:Ne["a"],Icon:ee["a"],JButton:X["a"]},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("emitter"),o=Object(c["inject"])("toast"),a=Object(Ve["b"])(),{showError:r,validate:n}=Object(Ee["a"])(),{generateId:s}=Object(ke["a"])(),l=Object(c["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,shippingMethod:null,form:{countryId:"",countryName:"",shippingCost:"",shippingMethod:""},errorBag:{},rules:{countryId:["required"],countryName:["required"],shippingCost:["required"],shippingMethod:["required"]},messages:{countryId:{required:"Please select country"},countryName:{required:"Please select country"},shippingCost:{required:"Please provide a shipping cost"},shippingMethod:{required:"Please provide a shipping method"}},isProcessing:!1}),i=Object(c["computed"])(()=>a.state.countries),d=Object(c["computed"])(()=>a.state.shippingMethods);Object(c["watch"])(()=>({...l.form}),(e,t)=>{Object.keys(l.errorBag).length>0&&(l.errorBag=n(e,l.rules,l.messages))});const p=()=>{l.show=!1},b=()=>{const e=Ce["find"](i.value,{id:Number(l.form.countryId)});e&&(l.form.countryName=e.name)},u=()=>{if(l.errorBag=n(l.form,l.rules,l.messages),0===Object.keys(l.errorBag).length){l.isProcessing=!0;const e=l.form,t=Ce["cloneDeep"](d.value);let c="INSERT";if(t.length>0&&(c="UPDATE"),l.shippingMethod){const o=Ce["findIndex"](d.value,{id:l.shippingMethod.id});t[o]={id:t[o].id,...e}}else t.push({id:s(t,"id"),...e});a.dispatch(xe["z"],{action:c,data:t}).then(e=>{l.isProcessing=!1,o.success("Shipping options saved successfully"),p()}).catch(e=>{l.isProcessing=!1})}};return Object(c["onBeforeMount"])(()=>{t.on("saveShippingMethodModal",e=>{l.shippingMethod=e.shippingMethod||null,l.form={countryId:l.shippingMethod?l.shippingMethod.countryId:"",countryName:l.shippingMethod?l.shippingMethod.countryName:"",shippingCost:l.shippingMethod?l.shippingMethod.shippingCost:"",shippingMethod:l.shippingMethod?l.shippingMethod.shippingMethod:""},l.show=!0})}),{translate:e,...Object(c["toRefs"])(l),countries:i,showError:r,closeModal:p,updateCountryName:b,submit:u}}};const dt=Se()(it,[["render",lt]]);var pt=dt,bt={name:"ShippingMethods",components:{Icon:ee["a"],JButton:X["a"],Pagination:$e["a"],SaveShippingMethodModal:pt},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("swal"),o=Object(c["inject"])("toast"),a=Object(c["inject"])("emitter"),r=Object(Ve["b"])(),{formatPrice:n}=Object(ke["a"])(),s=Object(c["reactive"])({meta:{currentPage:1,totalPages:0,limit:25,offset:0}}),l=Object(c["computed"])(()=>r.state.accountInfo),i=Object(c["computed"])(()=>r.state.altCoins),d=Object(c["computed"])(()=>r.state.shippingMethods),p=Object(c["computed"])(()=>{let e="EUR";if(l.value){e=l.value.PayoutCurrencyShortName;const t=Ce["find"](i.value,{ShortName:l.value.PayoutCurrencyShortName});t&&(e=t.LongName)}return e}),b=Object(c["computed"])(()=>d.value.length>0?d.value.slice(s.meta.offset,s.meta.currentPage*s.meta.limit):d.value),u=e=>{s.meta={...s.meta,currentPage:e,offset:(e-1)*s.meta.limit}},m=e=>{t.fire({title:"Delivery Option",text:"Are you sure, want to delete this delivery option?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then(({value:t})=>{if(t&&!0===t){const t=Ce["cloneDeep"](d.value);t.splice(e,1),console.log(d.value),console.log(t);let c="UPDATE";0==t.length&&(c="DELETE"),r.dispatch(xe["z"],{action:c,data:t}).then(e=>{o.success("Shipping options deleted successfully")}).catch(e=>{o.warning("Internal Server Error")})}})},j=(e=null)=>{a.emit("saveShippingMethodModal",{shippingMethod:e})};return Object(c["onBeforeMount"])(()=>{r.dispatch(xe["k"])}),{translate:e,...Object(c["toRefs"])(s),currency:p,shippingMethods:d,paginatedShippingMethods:b,formatPrice:n,updatePage:u,deleteShippingMethod:m,launchSaveShippingMethodModal:j}}};o("7ff6");const ut=Se()(bt,[["render",Ye],["__scopeId","data-v-7b9f8697"]]);var mt=ut,jt=o("c1df"),gt=o("bc3a"),Ot=o.n(gt);const ht=e=>(Object(c["pushScopeId"])("data-v-b1aacce6"),e=e(),Object(c["popScopeId"])(),e),yt={class:"text-right mb-3"},ft={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},vt={class:"table-sm"},Nt={class:"whitespace-nowrap"},Et={class:"whitespace-nowrap"},Vt={class:"w-32"},Ct=ht(()=>Object(c["createElementVNode"])("label",null,null,-1)),kt=[Ct],xt=["onClick"],wt=["onClick"],Pt={key:0},St={colspan:"4"};function Dt(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("j-button"),l=Object(c["resolveComponent"])("icon"),i=Object(c["resolveComponent"])("pagination"),d=Object(c["resolveComponent"])("save-category-modal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",yt,[Object(c["createVNode"])(s,{onClick:t[0]||(t[0]=e=>a.launchSaveCategoryModal())},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a.translate("pos.products.categories.btn_add")),1)]),_:1})]),Object(c["createElementVNode"])("div",ft,[Object(c["createElementVNode"])("table",vt,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",Nt,Object(c["toDisplayString"])(a.translate("pos.products.categories.category_name")),1),Object(c["createElementVNode"])("th",Et,Object(c["toDisplayString"])(a.translate("pos.products.categories.color")),1),Object(c["createElementVNode"])("th",Vt,Object(c["toDisplayString"])(a.translate("pos.shipping.headings.actions")),1)])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.paginatedCategories,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.categoryName),1),Object(c["createElementVNode"])("td",{style:Object(c["normalizeStyle"])("background-color: "+e.categoryColor)},kt,4),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{onClick:t=>a.launchSaveCategoryModal(e),class:"hover:text-blue-500 mr-2"},[Object(c["createVNode"])(l,{name:"edit"})],8,xt),Object(c["createElementVNode"])("button",{onClick:e=>a.deleteCategory(t),class:"hover:text-red-500",type:"button"},[Object(c["createVNode"])(l,{name:"trash"})],8,wt)])]))),128)),0===a.categoriesList.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",Pt,[Object(c["createElementVNode"])("td",St,Object(c["toDisplayString"])(a.translate("pos.shipping.no_data")),1)])):Object(c["createCommentVNode"])("",!0)])])]),a.categoriesList.length>0?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,meta:e.meta,onPage:a.updatePage},null,8,["meta","onPage"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(d)],64)}const Bt={class:"flex items-center justify-between"},Mt={class:"mb-2"},It={class:"flex items-center justify-between mb-1"},_t={class:"text-red-700 dark:text-red-400 text-sm"},Tt={class:"mb-2",style:{width:"88px"}},At={class:"flex items-center justify-between mb-1"},Ut={class:"text-red-700 dark:text-red-400 text-sm"},Lt={class:"mt-4 text-right"},Kt={key:0,class:"mr-3"};function Rt(e,t,o,a,r,n){const s=Object(c["resolveComponent"])("icon"),l=Object(c["resolveComponent"])("j-button"),i=Object(c["resolveComponent"])("modal");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[4]||(t[4]=e=>a.closeModal())},{title:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",Bt,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.products.categories.title")),1),Object(c["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[Object(c["createVNode"])(s,{name:"close"})])])]),content:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(c["withModifiers"])(e=>a.submit(),["prevent"]))},[Object(c["createElementVNode"])("div",Mt,[Object(c["createElementVNode"])("div",It,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.products.categories.category_name")),1),Object(c["createElementVNode"])("div",_t,Object(c["toDisplayString"])(a.showError(e.errorBag,"categoryName")),1)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.form.categoryName=t)},null,512),[[c["vModelText"],e.form.categoryName]])]),Object(c["createElementVNode"])("div",Tt,[Object(c["createElementVNode"])("div",At,[Object(c["createElementVNode"])("label",null,Object(c["toDisplayString"])(a.translate("pos.products.categories.select_color")),1),Object(c["createElementVNode"])("div",Ut,Object(c["toDisplayString"])(a.showError(e.errorBag,"categoryColor")),1)]),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.form.categoryColor)+" ",1),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-input w-full",type:"color","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.categoryColor=t)},null,512),[[c["vModelText"],e.form.categoryColor]])]),Object(c["createElementVNode"])("div",Lt,[Object(c["createVNode"])(l,{disabled:e.isProcessing},{default:Object(c["withCtx"])(()=>[e.isProcessing?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Kt,[Object(c["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.translate("pos.products.categories.btn_save")),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["maxWidth","show"])}var qt={name:"SaveCategoryModal",components:{Modal:Ne["a"],Icon:ee["a"],JButton:X["a"]},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("emitter"),o=Object(c["inject"])("toast"),a=Object(Ve["b"])(),{showError:r,validate:n}=Object(Ee["a"])(),{generateId:s}=Object(ke["a"])(),l=Object(c["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,category:null,form:{categoryName:"",categoryColor:"#000000"},errorBag:{},rules:{categoryName:["required"],categoryColor:["required"]},messages:{categoryName:{required:"Please select category"},categoryColor:{required:"Please select a color"}},isProcessing:!1}),i=Object(c["computed"])(()=>a.state.pos.categories);Object(c["watch"])(()=>({...l.form}),(e,t)=>{Object.keys(l.errorBag).length>0&&(l.errorBag=n(e,l.rules,l.messages))});const d=()=>{l.show=!1},p=()=>{if(l.errorBag=n(l.form,l.rules,l.messages),0===Object.keys(l.errorBag).length){l.isProcessing=!0;const e=l.form,t=Ce["cloneDeep"](i.value);let c="INSERT";if(t.length>0&&(c="UPDATE"),l.category){const o=Ce["findIndex"](i.value,{id:l.category.id});t[o]={id:t[o].id,...e}}else t.push({id:s(t,"id"),...e});a.dispatch(xe["u"],{call:c,data:t}).then(e=>{l.isProcessing=!1,o.success("Category saved successfully"),d()}).catch(e=>{l.isProcessing=!1})}};return Object(c["onBeforeMount"])(()=>{t.on("saveCategoryModal",e=>{l.category=e.category||null,l.form={categoryName:l.category?l.category.categoryName:"",categoryColor:l.category?l.category.categoryColor:"#000000"},l.show=!0})}),{translate:e,...Object(c["toRefs"])(l),showError:r,closeModal:d,submit:p}}};const Wt=Se()(qt,[["render",Rt]]);var Ft=Wt,zt={name:"Categories",components:{Icon:ee["a"],JButton:X["a"],Pagination:$e["a"],SaveCategoryModal:Ft},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("swal"),o=Object(c["inject"])("toast"),a=Object(c["inject"])("emitter"),r=Object(Ve["b"])(),{formatPrice:n}=Object(ke["a"])(),s=Object(c["reactive"])({meta:{currentPage:1,totalPages:0,limit:25,offset:0}}),l=(Object(c["computed"])(()=>r.state.accountInfo),Object(c["computed"])(()=>r.state.pos.categories)),i=Object(c["computed"])(()=>l.value.length>0?l.value.slice(s.meta.offset,s.meta.currentPage*s.meta.limit):l.value),d=e=>{s.meta={...s.meta,currentPage:e,offset:(e-1)*s.meta.limit}},p=e=>{t.fire({title:"Category",text:"Are you sure, want to delete this Category?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then(({value:t})=>{if(t&&!0===t){const t=Ce["cloneDeep"](l.value);t.splice(e,1);let c="UPDATE";0==t.length&&(c="DELETE"),r.dispatch(xe["u"],{call:c,data:t}).then(e=>{o.success("Category deleted successfully")}).catch(e=>{o.warning("Internal Server Error")})}})},b=(e=null)=>{a.emit("saveCategoryModal",{category:e})};return Object(c["onBeforeMount"])(()=>{}),{translate:e,...Object(c["toRefs"])(s),categoriesList:l,paginatedCategories:i,formatPrice:n,updatePage:d,deleteCategory:p,launchSaveCategoryModal:b}}};o("6eda");const Jt=Se()(zt,[["render",Dt],["__scopeId","data-v-b1aacce6"]]);var Yt=Jt,$t={name:"Office",components:{"pos-layout":Q["a"],Icon:ee["a"],JButton:X["a"],Coupons:_e,ShippingMethods:mt,Categories:Yt},setup(){const e=Object(c["inject"])("translate"),t=Object(c["inject"])("toast"),o=Object(c["inject"])("http"),a=Object(c["inject"])("swal"),r=Object(Ve["b"])(),{saveNotification:n,generateId:s}=Object(ke["a"])(),l=Object(c["reactive"])({form:{url:""},siteUrl:window.location.protocol+"//"+window.location.host,isProcessing:!1,isPosEnabled:!1}),i=Object(c["computed"])(()=>r.state.shippingMethods),d=Object(c["computed"])(()=>r.state.pos),p=Object(c["computed"])(()=>r.state.posCalls),b=Object(c["computed"])(()=>r.state.user),u=Object(c["computed"])(()=>d.value.products),m=Object(c["computed"])(()=>0===i.value.length&&!0===l.isPosEnabled),j=Object(c["computed"])(()=>`<iframe src="${l.siteUrl}/shop/${b.value.ID}" frameborder="0" height="550" name="Framename" scrolling="yes" style="width: 100%;" width="550"></iframe>`),g="https://app.cointopay.com",O=e=>{l.isProcessing=!0;const o=e.target.files[0];if(o&&Ce["endsWith"](o.name,".csv")){const e=new FileReader;e.readAsText(o,"UTF-8"),e.onload=e=>{const o=e.target.result,c=o.split(/\r\n|\n/);let a=[],s="categories";if(c.map(e=>{0;const t=e.split(",");if("categories"==t[0].toLowerCase().trim())s="categories";else if("products"==t[0].toLowerCase().trim())s="products";else if(t.length>1){if("categories"===s.toLowerCase())console.log("Pushing categories"),console.log(t),a.push({id:t[0],name:t[1],categoryColourCode:t[2]});else if(a&&(a=JSON.parse(JSON.stringify(a)),t[2])){const e=Ce["findIndex"](a,{id:t[2]});-1!=e&&("undefined"===typeof a[e].products&&(a[e].products=[]),a[e].products.push({id:t[0],itemName:t[1],categoryID:t[2],description:t[3],stock:t[4],sku:t[5],price:t[6],imageUri:t[7]}))}}else{const e=t[0].toLowerCase();"products"!==e&&"categories"!==e||(s=t[0])}}),a.length>0){const e=Ce["cloneDeep"](d.value.categories),o=Ce["cloneDeep"](d.value.products);a.map(t=>{const c=Ce["findIndex"](e,{id:t.id}),a={id:t.id,name:t.name,categoryColourCode:t.categoryColourCode};-1===c?e.push(a):e.splice(c,1,a),t.products&&t.products.length>0&&t.products.map(e=>{const t=Ce["findIndex"](o,{sku:e.sku});-1===t?o.push(e):o.splice(t,1,e)})}),r.dispatch(xe["u"],{call:p.value.categories,data:e}),r.dispatch(xe["w"],{call:p.value.products,data:o}),l.isProcessing=!1,t.success("Products imported successfully!"),n("Products imported successfully!")}else l.isProcessing=!1,t.error("Please provide a valid csv file"),n("Please provide a valid csv file")},e.onerror=e=>{l.isProcessing=!1,console.log(e)}}else l.isProcessing=!1,t.error("Please provide a valid csv file"),n("Please provide a valid csv file")},h=()=>{const e=jt().format("DD-MM-YYYY_H_m_A")+"_Cointopay_"+b.value.ID+"_catalog_export.csv",t=[];d.value.categories.length>0&&(t.push(["Categories"]),d.value.categories.forEach(e=>{t.push([e.id,e.name,e.categoryColourCode])})),d.value.products.length>0&&(t.push(["Products"]),d.value.products.forEach(e=>{t.push([e.id,e.itemName,e.categoryID,e.description,e.stock,e.sku,e.price,e.imageUri])}));const o="data:text/csv;charset=utf-8,"+t.map(e=>e.join(",")).join("\n"),c=encodeURI(o),a=document.createElement("a");a.setAttribute("href",c),a.setAttribute("download",e),document.body.appendChild(a),a.click()},y=()=>{const e=l.form.url;e&&(l.isProcessing=!0,Ot.a.get(""+e).then(e=>{const o=e.data.products,c=Ce["cloneDeep"](d.value.categories),a=Ce["find"](c,{name:"Shopify"});let i=null,p=Ce["cloneDeep"](d.value.products);a?i=a.id:(i=s(c),c.push({id:i,name:"Shopify",categoryColourCode:Math.floor(16777215*Math.random()).toString(16)}),r.dispatch(xe["u"],{call:"INSERT",data:c}));const b=[];o.map(e=>{e.variants&&e.variants.map(t=>{const o=e.images[0];b.push({id:t.id.toString(),categoryID:i,itemName:e.title,description:"",sku:t.sku,price:t.price,stock:"9999999",imageUri:o?o.src:""})})}),p.length>0?b.map(e=>{const t=Ce["findIndex"](p,{sku:e.sku});-1!==t?p[t]=e:p.push(e)}):p=b,r.dispatch(xe["w"],{call:"UPDATE",data:p}).then(e=>{l.isProcessing=!1,l.form.url="",t.success("Products imported successfully!"),n("Products imported successfully!")}).catch(e=>{l.isProcessing=!1,"update failed"===e.toLowerCase()&&(t.warning("Import failed due to unsupported encoding"),n("Import failed due to unsupported encoding"))})},e=>{l.isProcessing=!1,console.log(e)}))},f=e=>{const t=e.match(/(http(s)?):\/\/[^.\s]+(.myshopify)?\.com\/products.json/);return null!==t},v=()=>{a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{container:"swal2-tailwind"}}).then(e=>{e.value&&(r.dispatch(xe["w"],{call:p.value.products,data:[]}),r.dispatch(xe["u"],{call:"DELETE",data:[]}),t.success("Products deleted successfully"),n("Products deleted successfully"))})},N=e=>{const c={Call:"SHOWPOS",MerchantID:b.value.ID,APIKey:b.value.APIKey,showpos:e,output:"json"};o.get(g+"/v2REAPI",{params:c}).then(o=>{200===o.data.status_code?(t.success(1===e?"POS enabled successfully":"POS disabled successfully"),l.isPosEnabled=1===e):(t.warning(o.data.message),n(o.data.message))}).catch(e=>{t.warning(e.message),n(e.message)})};return Object(c["onBeforeMount"])(()=>{r.dispatch(xe["m"],{shopId:b.value.ID}).then(e=>{"nothing found"!==e.products&&(l.isPosEnabled=!0)}).catch(e=>{console.log(e)}),r.dispatch(xe["k"])}),{translate:e,...Object(c["toRefs"])(l),isValidShopifyURL:f,user:b,importFromCSV:O,exportToCSV:h,importFromShopify:y,deleteAllProducts:v,products:u,showShippingWarning:m,togglePOS:N,iframe:j}}};const Ht=Se()($t,[["render",G]]);t["default"]=Ht},"7ff6":function(e,t,o){"use strict";o("365a")},"84a0":function(e,t,o){},d529:function(e,t,o){"use strict";var c=o("f2bf");const a={key:0,"aria-label":"pagination",class:"mt-3"},r={class:"inline-flex -space-x-px text-sm md:text-base"},n=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),s=[n],l={key:0,class:"px-1 py-2 md:px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500",href:"javascript:void(0)"},i=["onClick"],d={key:0,class:"sr-only"},p=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),b=[p];function u(e,t,o,n,p,u){return o.meta.totalPages>1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",a,[Object(c["createElementVNode"])("ul",r,[Object(c["createElementVNode"])("li",null,[Object(c["createElementVNode"])("a",{class:Object(c["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:text-gray-400":!e.isPrev},"px-2 py-2 md:px-3 ml-0 leading-tight text-gray-500 dark:text-gray-400 bg-white rounded-l border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[0]||(t[0]=e=>n.prev())},s,2)]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.pageRange,(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:o},["..."===t?(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",l,Object(c["toDisplayString"])(t),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:1,class:Object(c["normalizeClass"])(`px-2 py-2 md:px-3 leading-tight bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 ${t===e.currentPage?"text-blue-500 font-semibold":"text-gray-500 dark:text-gray-400"} hover:text-blue-500 dark:hover:text-blue-500`),href:"javascript:void(0)",onClick:e=>n.updatePage(t)},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t)+" ",1),t===e.currentPage?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",d,"(current)")):Object(c["createCommentVNode"])("",!0)],10,i))]))),128)),Object(c["createElementVNode"])("li",null,[Object(c["createElementVNode"])("a",{class:Object(c["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:bg-text-400":!e.isNext},"px-2 py-2 md:px-3 leading-tight text-gray-500 bg-white rounded-r border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[1]||(t[1]=e=>n.next())},b,2)])])])):Object(c["createCommentVNode"])("",!0)}o("14d9");var m={name:"Pagination",props:["meta"],emits:["page"],setup(e,{emit:t}){const o=Object(c["reactive"])({isPrev:!1,isNext:!1,pagesLimit:5,currentPage:e.meta.currentPage,delta:3}),a=Object(c["computed"])(()=>{const t=e.meta.currentPage,c=e.meta.totalPages,a=t-o.delta,r=t+o.delta+1,n=[],s=[];let l;for(let e=1;e<=c;e++)(1===e||e===c||e>=a&&e<r)&&n.push(e);return n.forEach((function(e){l&&(e-l===2?s.push(l+1):e-l!==1&&s.push("...")),s.push(e),l=e})),s}),r=e=>{e!==o.currentPage&&(o.currentPage=e,l(),t("page",o.currentPage))},n=()=>{o.currentPage>1?o.currentPage--:o.currentPage=1,l(),t("page",o.currentPage)},s=()=>{o.currentPage<e.meta.totalPages?o.currentPage++:o.currentPage=e.meta.totalPages,l(),t("page",o.currentPage)},l=()=>{o.isPrev=o.currentPage>1,o.isNext=o.currentPage<e.meta.totalPages},i=()=>{o.delta=3,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(o.delta=1)};return Object(c["onBeforeMount"])(()=>{l(),window.addEventListener("resize",i)}),Object(c["onBeforeUnmount"])(()=>{window.removeEventListener("resize",i)}),{...Object(c["toRefs"])(o),pageRange:a,prev:n,next:s,updatePage:r}}},j=o("6b0d"),g=o.n(j);const O=g()(m,[["render",u]]);t["a"]=O}}]);
//# sourceMappingURL=account-pos-office.a672b136.js.map