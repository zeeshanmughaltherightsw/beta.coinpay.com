(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["recover-password"],{f243:function(e,t,r){"use strict";r.r(t);var a=r("f2bf");const c={class:"max-w-xl w-full space-y-4 rounded bg-white dark:bg-gray-800 dark:text-gray-400 shadow p-4"},o={class:"text-xl font-bold mb-4 text-center"},s={class:"mb-2"},n={class:"flex items-center justify-between mb-1"},l={class:"text-blue-500 text-sm"},i={class:"text-red-500 text-sm"},d={class:"mt-4"},b={key:0,class:"mr-3"};function p(e,t,r,p,u,m){const j=Object(a["resolveComponent"])("vue-recaptcha"),O=Object(a["resolveComponent"])("icon"),h=Object(a["resolveComponent"])("j-button"),f=Object(a["resolveComponent"])("auth-layout");return Object(a["openBlock"])(),Object(a["createBlock"])(f,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("h1",o,Object(a["toDisplayString"])(p.translate("login.recover")),1),Object(a["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(a["withModifiers"])(e=>p.submit(),["prevent"]))},[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("label",null,Object(a["toDisplayString"])(p.translate("login.username")),1),Object(a["createElementVNode"])("div",l,Object(a["toDisplayString"])(p.showError(e.errorBag,"User")),1)]),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",autofocus:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.User=t),class:"form-input w-full",autocomplete:"off"},null,512),[[a["vModelText"],e.form.User]])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(j,{ref:"vueRecaptcha",siteKey:e.reCaptchaAPIKey,size:"normal",onExpire:p.recaptchaExpired,theme:p.mode,onFail:p.recaptchaFailed,onVerify:p.recaptchaVerified},null,8,["siteKey","onExpire","theme","onFail","onVerify"]),Object(a["createElementVNode"])("div",i,Object(a["toDisplayString"])(p.showError(e.errorBag,"reCaptcha")),1)]),Object(a["createElementVNode"])("div",d,[Object(a["createVNode"])(h,{disabled:e.isProcessing,size:"w-full"},{default:Object(a["withCtx"])(()=>[e.isProcessing?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[Object(a["createVNode"])(O,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(p.translate("login.recover")),1)]),_:1},8,["disabled"])])],32)])]),_:1})}r("14d9");var u=r("227c"),m=r("d4df"),j=r.n(m),O=r("4032"),h=r("cdae"),f=r("ea45"),g=r("6605"),v=r("5502"),w={name:"ForgotPassword",components:{AuthLayout:u["a"],vueRecaptcha:j.a,JButton:O["a"],Icon:h["a"]},setup(){const e=Object(a["ref"])(null),t=Object(a["inject"])("http"),r=Object(a["inject"])("toast"),c=Object(a["inject"])("translate"),o=Object(v["b"])(),s=Object(g["e"])(),{validate:n,showError:l}=Object(f["a"])(),i=Object(a["reactive"])({reCaptchaAPIKey:"6LdOLTEUAAAAAGDKKH5DMUQbW8PtXjimV6ZDrBKr",form:{User:"",reCaptcha:"",output:"json"},errorBag:{},rules:{User:["required"],reCaptcha:["required"]},messages:{User:{required:"Username is required"},reCaptcha:{required:"Verify you are not a robot"}},isProcessing:!1}),d=Object(a["computed"])(()=>o.state.mode),b=Object(a["computed"])(()=>o.state.isLoggedIn);Object(a["watch"])(()=>({...i.form}),(e,t)=>{Object.keys(i.errorBag).length>0&&(i.errorBag=n(i.form,i.rules,i.messages))});const p="https://app.cointopay.com",u=e=>{i.form.reCaptcha=e},m=()=>{e.value.reset(),i.form.reCaptcha=""},j=()=>{},O=()=>{if(i.errorBag=n(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length){i.isProcessing=!0;let a=i.form;a=Object.assign(a,{"g-recaptcha-response":a.reCaptcha}),delete a.reCaptcha,t.get(p+"/RecoverPassword",{params:a}).then(e=>{i.isProcessing=!1,200===e.status&&(400===e.data.status_code?r.error(e.data.reason):(r.success(e.data.data[0]),s.push("/login")))}).catch(t=>{i.isProcessing=!1,t.response?r.error(t.response.data):t.data&&t.data.reason&&r.error(t.data.reason),e.value.reset(),i.form.reCaptcha=""})}};return Object(a["onBeforeMount"])(()=>{if(b.value){const e=o.state.currentRoute;s.push(e)}}),{translate:c,...Object(a["toRefs"])(i),vueRecaptcha:e,showError:l,mode:d,recaptchaVerified:u,recaptchaExpired:m,recaptchaFailed:j,submit:O}}},y=r("6b0d"),V=r.n(y);const E=V()(w,[["render",p]]);t["default"]=E}}]);
//# sourceMappingURL=recover-password.8dfa0c7e.js.map