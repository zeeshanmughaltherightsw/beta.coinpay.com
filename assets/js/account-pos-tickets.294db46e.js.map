{"version":3,"file":"assets/js/account-pos-tickets.294db46e.js","mappings":"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","sources":["webpack://cointopay/./src/views/pos/Tickets.vue","webpack://cointopay/./src/components/account/pos/modals/tickets/SaveTicketModal.vue","webpack://cointopay/./src/components/account/pos/modals/tickets/SaveTicketModal.vue?f453","webpack://cointopay/./src/views/pos/Tickets.vue?64fd"],"sourcesContent":["<template>\r\n  <pos-layout>\r\n    <template v-slot:content>\r\n      <div class=\"card\">\r\n        <div class=\"body\">\r\n          <div class=\"flex items-center justify-end flex-col lg:flex-row mb-3\">\r\n            <div class=\"mb-4 lg:mb-0 mr-3\">\r\n              <select v-model=\"status\" aria-label=\"\" class=\"form-select w-72\">\r\n                <option value=\"\">All Tickets</option>\r\n                <option value=\"waiting\">Active</option>\r\n                <option value=\"paid\">Processed</option>\r\n              </select>\r\n            </div>\r\n            <div class=\"mb-3 lg:mb-0 mr-3\">\r\n              <div class=\"relative flex-1\">\r\n                <icon classes=\"absolute w-5 h-5 top-3 left-3 dark:text-gray-300\" name=\"search\"></icon>\r\n                <input v-model=\"keyword\" aria-label=\"Search...\" class=\"form-input px-10 w-full\" type=\"text\"/>\r\n                <span v-if=\"keyword !== ''\" class=\"absolute top-3 right-3 dark:text-gray-400 cursor-pointer\"\r\n                      @click=\"keyword = ''\">\r\n                  <icon classes=\"w-5 h-5\" name=\"close\"></icon>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"text-right\">\r\n              <j-button type=\"button\" @click=\"launchSaveTicketModal()\">{{ translate('pos.tickets.add') }}</j-button>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600\">\r\n            <table class=\"table-sm mb-2\">\r\n              <thead>\r\n              <tr>\r\n                <th class=\"whitespace-nowrap\">Ticket Number</th>\r\n                <th class=\"whitespace-nowrap\">Ticket Name</th>\r\n                <th>Note</th>\r\n                <th>Cashier</th>\r\n                <th>Currency</th>\r\n                <th class=\"whitespace-nowrap\">Total Products</th>\r\n                <th class=\"whitespace-nowrap\">Total Amount</th>\r\n                <th style=\"min-width:200px;width:200px;\">Actions</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(ticket, index) in filteredTickets\" :key=\"index\" :data-ticket=\"index\"\r\n                  @dblclick=\"addProductsToTicket(ticket)\">\r\n                <td>{{ `#${ticket.ticketId}` }}</td>\r\n                <td>\r\n                  <div class=\"flex items-center\">\r\n                    <span class=\"mr-2\">{{ ticket.name }}</span>\r\n                    <span\r\n                      v-if=\"ticket.isActive === 'true' && employee && ticket.cashier.toLowerCase() === employee.USERNAME.toLowerCase()\">\r\n                      <icon classes=\"w-5 h-5 text-blue-500\" name=\"shopping-cart\"></icon>\r\n                    </span>\r\n                    <span\r\n                      v-if=\"ticket.isActive === 'false' && ticket.status !== 'paid' && employee && ticket.cashier === employee.USERNAME.toLowerCase()\"\r\n                      class=\"cursor-pointer\"\r\n                      @click=\"updateSelectedTicket(ticket)\">\r\n                      <icon classes=\"w-5 h-5 text-gray-500\" name=\"shopping-cart\"></icon>\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td>{{ ticket.notes }}</td>\r\n                <td>{{ ticket.cashier }}</td>\r\n                <td>{{ ticket.currency }}</td>\r\n                <td>{{ ticket.ticketProducts.length }}</td>\r\n                <td>{{ totalAmount(ticket) + ' ' + currency }}\r\n                </td>\r\n                <td class=\"pr-3\">\r\n                  <router-link v-if=\"ticket.status === 'inprogress' && ticket.paymentRequest !== null\"\r\n                               v-tippy=\"'View Invoice'\"\r\n                               :to=\"{name: 'account-pos-invoice', params: { confirmCode: ticket.paymentRequest.Security }}\"\r\n                               class=\"hover:text-blue-500 mr-2 inline-block\" tag=\"a\">\r\n                    <icon name=\"clock\"></icon>\r\n                  </router-link>\r\n                  <router-link :to=\"{name: 'account-pos-ticket', params: { ticketId: ticket.ticketId }}\"\r\n                               v-tippy=\"'View Detail'\"\r\n                               class=\"hover:text-green-500 mr-2 inline-block\" tag=\"a\">\r\n                    <icon name=\"eye\"></icon>\r\n                  </router-link>\r\n                  <template v-if=\"employee && employee.USERNAME.toLowerCase() === ticket.cashier.toLowerCase()\">\r\n                    <button v-if=\"ticket.status !== 'paid'\" class=\"hover:text-green-500 mr-2\"\r\n                            v-tippy=\"'Add Product(s)'\" @click=\"continueShopping(ticket)\">\r\n                      <icon name=\"plus-circle\"></icon>\r\n                    </button>\r\n\r\n                    <template v-if=\"employee && ticket.status !== 'paid'\">\r\n                      <button class=\"hover:text-green-500 mr-2\" v-tippy=\"'Update Ticket'\"\r\n                              @click=\"launchSaveTicketModal(ticket)\">\r\n                        <icon name=\"edit\"></icon>\r\n                      </button>\r\n                      <button class=\"hover:text-red-500\" v-tippy=\"'Delete Ticket'\"\r\n                              @click=\"deleteTicket(ticket.ticketId)\">\r\n                        <icon name=\"trash\"></icon>\r\n                      </button>\r\n                    </template>\r\n\r\n                  </template>\r\n                </td>\r\n              </tr>\r\n              <tr v-if=\"filteredTickets.length === 0\">\r\n                <td colspan=\"8\">No ticket available</td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </pos-layout>\r\n  <!-- Save Ticket -->\r\n  <save-ticket-modal></save-ticket-modal>\r\n</template>\r\n\r\n<script>\r\nimport POSLayout from '@/components/layouts/POSLayout'\r\nimport JButton from '@/templates/Button'\r\nimport Icon from '@/components/Icon'\r\nimport SaveTicketModal from '@/components/account/pos/modals/tickets/SaveTicketModal'\r\nimport { computed, inject, onBeforeMount, onBeforeUnmount, reactive, toRefs } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport { FETCH_POS_DATA, SAVE_PRODUCTS, SAVE_TICKETS } from '@/store/keys'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'Tickets',\r\n  components: {\r\n    SaveTicketModal,\r\n    'pos-layout': POSLayout,\r\n    JButton,\r\n    Icon\r\n  },\r\n  setup () {\r\n    const translate = inject('translate')\r\n    const swal = inject('swal')\r\n    const toast = inject('toast')\r\n    const emitter = inject('emitter')\r\n\r\n    const store = useStore()\r\n    const router = useRouter()\r\n\r\n    const { toFixed } = compositionUtils()\r\n\r\n    // Status\r\n    const state = reactive({\r\n      status: '',\r\n      keyword: '',\r\n      employee: null,\r\n      socket: null,\r\n      isSocketClosed: false\r\n    })\r\n\r\n    // Computed\r\n    const user = computed(() => store.state.user)\r\n    const accountInfo = computed(() => store.state.accountInfo)\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n    const filteredTickets = computed(() => {\r\n      let tickets = []\r\n      if (state.employee) {\r\n        tickets = pos.value.tickets.filter(ticket => ticket.isActive === 'true' && ticket.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase())\r\n      }\r\n      if (tickets.length > 1) {\r\n        let counter = 0\r\n        pos.value.tickets.map(ticket => {\r\n          if (ticket.isActive === 'true') {\r\n            if (ticket.status === 'paid') {\r\n              ticket.isActive = 'false'\r\n            } else {\r\n              counter++\r\n            }\r\n          }\r\n          if (counter > 1) {\r\n            ticket.isActive = 'false'\r\n          }\r\n          return ticket\r\n        })\r\n        if (counter > 1) {\r\n          store.dispatch(SAVE_TICKETS, {\r\n            call: posCalls.value.tickets,\r\n            data: pos.value.tickets\r\n          })\r\n        }\r\n      }\r\n      if (state.keyword && state.status) {\r\n        const keyword = state.keyword.trim().toLowerCase()\r\n        tickets = pos.value.tickets.filter(ticket => {\r\n          if (state.status.toString() === 'waiting') {\r\n            return (typeof ticket.status === 'undefined' || ['waiting', 'inprogress'].indexOf(ticket.status.toLowerCase()) !== -1) &&\r\n              (_.includes(ticket.name.toLowerCase(), keyword) ||\r\n                _.includes(ticket.notes.toLowerCase(), keyword)\r\n              ) && ticket.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase()\r\n          } else {\r\n            return ticket.status && ticket.status.toString() === state.status.toString() && (_.includes(ticket.name.toLowerCase(), keyword) ||\r\n              _.includes(ticket.notes.toLowerCase(), keyword)\r\n            ) && ticket.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase()\r\n          }\r\n        })\r\n      } else if (state.keyword) {\r\n        const keyword = state.keyword.trim().toLowerCase()\r\n        tickets = pos.value.tickets.filter(ticket => {\r\n          return (_.includes(ticket.name.toLowerCase(), keyword) ||\r\n            _.includes(ticket.notes.toLowerCase(), keyword)\r\n          )\r\n        })\r\n      } else if (state.status) {\r\n        tickets = pos.value.tickets.filter(ticket => {\r\n          if (state.status.toString() === 'waiting') {\r\n            return (typeof ticket.status === 'undefined' ||\r\n                ['waiting', 'inprogress'].indexOf(ticket.status.toLowerCase()) !== -1) &&\r\n              ticket.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase()\r\n          } else {\r\n            return ticket.status && ticket.status.toString() === state.status.toString() &&\r\n              ticket.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase()\r\n          }\r\n        })\r\n      } else {\r\n        tickets = pos.value.tickets\r\n      }\r\n      return _.orderBy(tickets, 'isActive', 'desc')\r\n    })\r\n    const currency = computed(() => {\r\n      return accountInfo.value ? accountInfo.value.PayoutCurrencyShortName : 'EUR'\r\n    })\r\n\r\n    // Methods\r\n    const totalAmount = (ticket) => {\r\n      let totalAmount = 0\r\n      ticket.ticketProducts.map(product => {\r\n        totalAmount = Number(totalAmount) + Number(product.productQuantity) * Number(product.productPrice)\r\n      })\r\n      return toFixed(totalAmount)\r\n    }\r\n    const updateSelectedTicket = (ticket, isRedirect = false) => {\r\n      const tickets = _.cloneDeep(pos.value.tickets)\r\n      if (state.employee && ticket.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase()) {\r\n        tickets.map(t => {\r\n          if (t.cashier.toLowerCase() === state.employee.USERNAME.toLowerCase()) {\r\n            t.isActive = t.ticketId.toString() === ticket.ticketId.toString() && t.status !== 'paid' ? 'true' : 'false'\r\n          }\r\n        })\r\n        store.dispatch(SAVE_TICKETS, {\r\n          call: posCalls.value.tickets,\r\n          data: tickets\r\n        })\r\n        toast.success('Ticket selected successfully')\r\n        if (isRedirect) {\r\n          router.push({ name: 'account-pos-products' })\r\n        }\r\n      }\r\n    }\r\n    const continueShopping = (ticket) => {\r\n      // this.index = null\r\n      updateSelectedTicket(ticket, true)\r\n    }\r\n    const addProductsToTicket = (ticket) => {\r\n      if (ticket.status !== 'paid' && state.employee && state.employee.USERNAME.toLowerCase() === ticket.cashier.toLowerCase()) {\r\n        continueShopping(ticket)\r\n      }\r\n    }\r\n    const deleteTicket = (id) => {\r\n      const index = _.findIndex(pos.value.tickets, { ticketId: id })\r\n      if (index !== -1) {\r\n        swal.fire({\r\n          title: 'Ticket',\r\n          text: 'Are you sure, want to delete this ticket?',\r\n          icon: 'warning',\r\n          showCancelButton: true,\r\n          confirmButtonColor: '#d33',\r\n          confirmButtonText: 'Yes',\r\n          cancelButtonText: 'No',\r\n          focusCancel: true,\r\n          customClass: {\r\n            container: 'swal2-tailwind'\r\n          }\r\n        }).then(({ value }) => {\r\n          if (value && value === true) {\r\n            const posData = _.cloneDeep(pos.value)\r\n            const tickets = posData.tickets\r\n            const ticket = tickets[index]\r\n            const products = posData.products\r\n            const isSelected = ticket.isActive\r\n            if (ticket.ticketProducts.length > 0) {\r\n              ticket.ticketProducts.map(product => {\r\n                const productIndex = _.findIndex(products, { id: product.productId })\r\n                if (productIndex !== -1) {\r\n                  products[productIndex].stock =\r\n                    Number(products[productIndex].stock) +\r\n                    Number(product.productQuantity)\r\n                }\r\n                const favIndex = _.findIndex(posData.favourites, { id: product.productId })\r\n                if (favIndex !== -1) {\r\n                  posData.favourites[favIndex].stock =\r\n                    Number(posData.favourites[favIndex].stock) + Number(product.productQuantity)\r\n                }\r\n              })\r\n            }\r\n            store.dispatch(SAVE_PRODUCTS, {\r\n              call: posCalls.value.products,\r\n              data: products\r\n            })\r\n            posData.products = products\r\n            tickets.splice(index, 1)\r\n            posData.tickets = tickets\r\n            if (isSelected === 'true' && posData.tickets.length > 0) {\r\n              const ticketIndex = _.findIndex(posData.tickets, (ticket) => {\r\n                return (ticket.status.toLowerCase() === 'waiting' || ticket.status.toLowerCase() === 'inprogress') &&\r\n                  ticket.cashier === state.employee.USERNAME.toLowerCase()\r\n              })\r\n              if (ticketIndex !== -1) {\r\n                posData.tickets[ticketIndex].isActive = 'true'\r\n              }\r\n            }\r\n            store.dispatch(SAVE_TICKETS, {\r\n              call: posCalls.value.tickets,\r\n              data: posData.tickets\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    const launchSaveTicketModal = (ticket = null) => {\r\n      emitter.emit('saveTicketModal', {\r\n        currency: currency.value,\r\n        employee: state.employee,\r\n        ticket: ticket\r\n      })\r\n    }\r\n\r\n    const initSocket = () => {\r\n      state.socket = new WebSocket('wss://wss.cointopay.com/transactions')\r\n      state.socket.onmessage = (event) => {\r\n        if (event && event.data) {\r\n          const parts = event.data.split(':')\r\n          if (parts[0].toLowerCase() === 'pos') {\r\n            const merchantID = parts[1]\r\n            if (user.value && merchantID.toString() === user.value.ID.toString()) {\r\n              store.dispatch(FETCH_POS_DATA, {})\r\n            }\r\n          }\r\n        }\r\n      }\r\n      state.socket.onclose = (event) => {\r\n        if (!state.isSocketClosed) {\r\n          initSocket()\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      state.employee = _.find(pos.value.users, { isLoggedIn: 'true' })\r\n      initSocket()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      state.isSocketClosed = true\r\n      if (state.socket) {\r\n        state.socket.close()\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      filteredTickets,\r\n      currency,\r\n      totalAmount,\r\n      continueShopping,\r\n      updateSelectedTicket,\r\n      addProductsToTicket,\r\n      deleteTicket,\r\n      launchSaveTicketModal\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.table-sm {\r\n  thead {\r\n    tr {\r\n      th:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n\r\n  tbody {\r\n    tr {\r\n      td:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <modal :maxWidth=\"maxWidth\" :show=\"show\" @close=\"closeModal()\">\r\n    <template #title>\r\n      <div class=\"flex items-center justify-between\">\r\n        <span>{{ translate('pos.products.title') }}</span>\r\n        <span class=\"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer\"\r\n              @click=\"closeModal()\">\r\n          <icon name=\"close\"></icon>\r\n        </span>\r\n      </div>\r\n    </template>\r\n    <template #content>\r\n      <form @submit.prevent=\"submit()\">\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.tickets.name') }}</label>\r\n            <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'name') }}</div>\r\n          </div>\r\n          <input v-model=\"form.name\" class=\"form-input w-full\" type=\"text\"/>\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('pos.tickets.note') }}</label>\r\n            <div class=\"text-red-700 dark:text-red-400 text-sm\">{{ showError(errorBag, 'notes') }}</div>\r\n          </div>\r\n          <input v-model=\"form.notes\" class=\"form-input w-full\" type=\"text\"/>\r\n        </div>\r\n\r\n        <div class=\"mt-4 text-right\">\r\n          <j-button :disabled=\"isProcessing\">\r\n            <div v-if=\"isProcessing\" class=\"mr-3\">\r\n              <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n            </div>\r\n            <span>{{ translate('pos.products.btn_save') }}</span>\r\n          </j-button>\r\n        </div>\r\n      </form>\r\n    </template>\r\n  </modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from '@/components/Modal'\r\nimport Icon from '@/components/Icon'\r\nimport JButton from '@/templates/Button'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport validator from '@/validator'\r\nimport * as _ from 'lodash'\r\nimport { SAVE_TICKETS } from '@/store/keys'\r\n\r\nexport default {\r\n  name: 'SaveTicketModal',\r\n  components: {\r\n    Modal,\r\n    Icon,\r\n    JButton\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const emitter = inject('emitter')\r\n    const toast = inject('toast')\r\n\r\n    // Store\r\n    const store = useStore()\r\n\r\n    const {\r\n      showError,\r\n      validate\r\n    } = validator()\r\n\r\n    // State\r\n    const state = reactive({\r\n      show: false,\r\n      maxWidth: '2xl',\r\n      closeable: true,\r\n      ticket: null,\r\n      currency: 'EUR',\r\n      employee: null,\r\n      form: {\r\n        name: '',\r\n        notes: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        name: ['required']\r\n      },\r\n      messages: {\r\n        name: {\r\n          required: 'Ticket name is required'\r\n        }\r\n      },\r\n      isProcessing: false,\r\n      isBarcodeScanner: false\r\n    })\r\n\r\n    // Computed\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n    const allAtlCoins = computed(() => store.state.allAltCoins)\r\n    const currencyLongName = computed(() => {\r\n      const altCoin = _.find(allAtlCoins.value, { ShortName: state.currency })\r\n      return altCoin ? altCoin.Name : ''\r\n    })\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(state.form, state.rules, state.messages)\r\n        }\r\n      })\r\n\r\n    // Methods\r\n    const closeModal = () => {\r\n      state.show = false\r\n    }\r\n    const generateId = () => {\r\n      const tickets = _.cloneDeep(pos.value.tickets)\r\n      if (tickets.length > 0) {\r\n        const ticket = _.maxBy(tickets, ticket => {\r\n          return Number(ticket.id)\r\n        })\r\n        return (Number(ticket.id) + 1).toString()\r\n      }\r\n      return '1'\r\n    }\r\n    // Create or Update Product\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.isProcessing = true\r\n        const formData = state.form\r\n        const tickets = _.cloneDeep(pos.value.tickets)\r\n        let isValid = true\r\n        if (state.ticket) {\r\n          let index = _.findIndex(tickets, ticket => {\r\n            return (ticket.name === formData.name && state.ticket.ticketId !== ticket.ticketId)\r\n          })\r\n          if (index === -1) {\r\n            index = _.findIndex(tickets, { ticketId: state.ticket.ticketId })\r\n            tickets.splice(index, 1, {\r\n              ...state.ticket,\r\n              name: formData.name,\r\n              notes: formData.notes\r\n            })\r\n          } else {\r\n            isValid = false\r\n            state.isProcessing = false\r\n            toast.error('Ticket name already exists!')\r\n          }\r\n        } else {\r\n          if (_.findIndex(tickets, { name: formData.name }) === -1) {\r\n            tickets.push({\r\n              ticketId: generateId(),\r\n              status: 'waiting',\r\n              notes: formData.notes,\r\n              name: formData.name,\r\n              isActive: 'true',\r\n              cashier: state.employee.USERNAME.toLowerCase(),\r\n              currency: currencyLongName.value,\r\n              inputCurrency: state.currency,\r\n              ticketProducts: [],\r\n              paymentRequest: null\r\n            })\r\n          } else {\r\n            isValid = false\r\n            state.isProcessing = false\r\n            toast.error('Product with this sku already exists!')\r\n          }\r\n        }\r\n        if (isValid) {\r\n          store.dispatch(SAVE_TICKETS, {\r\n            call: posCalls.value.tickets,\r\n            data: tickets\r\n          }).then(() => {\r\n            state.isProcessing = false\r\n            const message = state.ticket ? 'Ticket updated successfully' : 'Ticket added successfully'\r\n            toast.success(message)\r\n            closeModal()\r\n          }).catch(error => {\r\n            console.log(error)\r\n            state.isProcessing = false\r\n            toast.error('Internal Server Error')\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      emitter.on('saveTicketModal', (args) => {\r\n        state.currency = args.currency\r\n        state.employee = args.employee\r\n        state.ticket = args.ticket || null\r\n        state.form = {\r\n          name: state.ticket ? state.ticket.name : '',\r\n          notes: state.ticket ? state.ticket.notes : ''\r\n        }\r\n        state.show = true\r\n      })\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      showError,\r\n      closeModal,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./SaveTicketModal.vue?vue&type=template&id=7b045494\"\nimport script from \"./SaveTicketModal.vue?vue&type=script&lang=js\"\nexport * from \"./SaveTicketModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Tickets.vue?vue&type=template&id=4733e418&scoped=true\"\nimport script from \"./Tickets.vue?vue&type=script&lang=js\"\nexport * from \"./Tickets.vue?vue&type=script&lang=js\"\n\nimport \"./Tickets.vue?vue&type=style&index=0&id=4733e418&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4733e418\"]])\n\nexport default __exports__"],"names":["class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_withScopeId","_createElementVNode","value","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","style","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","key","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","colspan","_hoisted_26","render","_component_icon","_component_j_button","_component_router_link","_component_pos_layout","_component_save_ticket_modal","_directive_tippy","_openBlock","_createVNode","content","_hoisted_1","_cache","_ctx","_vModelSelect","classes","name","_withDirectives","type","_vModelText","_createElementBlock","onClick","_createCommentVNode","$setup","default","_withCtx","_createTextVNode","_toDisplayString","_","_Fragment","ticket","index","onDblclick","ticketId","isActive","cashier","toLowerCase","USERNAME","status","notes","currency","ticketProducts","length","paymentRequest","_createBlock","to","params","confirmCode","Security","tag","_component_modal","maxWidth","show","onClose","title","onSubmit","disabled","components","Modal","Icon","JButton","setup","translate","inject","emitter","toast","store","useStore","showError","validate","validator","state","reactive","closeable","employee","form","errorBag","rules","messages","required","isProcessing","isBarcodeScanner","pos","computed","posCalls","allAtlCoins","allAltCoins","currencyLongName","altCoin","ShortName","Name","watch","newVal","oldVal","Object","keys","closeModal","generateId","tickets","Number","id","toString","submit","formData","isValid","splice","error","push","inputCurrency","dispatch","SAVE_TICKETS","call","data","then","message","success","catch","console","log","onBeforeMount","on","args","toRefs","__exports__","SaveTicketModal","POSLayout","swal","router","useRouter","toFixed","compositionUtils","keyword","socket","isSocketClosed","user","accountInfo","filteredTickets","filter","counter","map","trim","indexOf","PayoutCurrencyShortName","totalAmount","product","productQuantity","productPrice","updateSelectedTicket","isRedirect","t","continueShopping","addProductsToTicket","deleteTicket","fire","text","icon","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","focusCancel","customClass","container","posData","products","isSelected","productIndex","productId","stock","favIndex","favourites","SAVE_PRODUCTS","ticketIndex","launchSaveTicketModal","emit","initSocket","WebSocket","onmessage","event","parts","split","merchantID","ID","FETCH_POS_DATA","onclose","users","isLoggedIn","onBeforeUnmount","close"],"sourceRoot":""}