"use strict";(self["webpackChunkcointopay"]=self["webpackChunkcointopay"]||[]).push([[830],{4986:function(e,t,a){a.r(t),a.d(t,{default:function(){return ke}});var o=a(821),l=a(3536);const r=e=>((0,o.pushScopeId)("data-v-280774c2"),e=e(),(0,o.popScopeId)(),e),s={class:"max-w-xl w-full space-y-4 rounded bg-white dark:bg-gray-800 dark:text-gray-400 shadow p-4"},n={class:"text-xl font-bold mb-4 text-center"},c={class:"mb-2"},i={class:"flex items-center justify-between mb-1"},d={class:"text-red-500 text-sm"},m={class:"grid grid-cols-2 gap-1 md:gap-4"},p={class:"col-span-1"},u={class:"mb-2"},w={class:"flex items-center justify-between mb-1"},h={class:"text-red-500 text-sm"},f={class:"flex items-center"},g={class:"ml-3 cursor-pointer"},y={class:"col-span-1"},x={class:"mb-2"},v={class:"flex items-center justify-between mb-1"},V={class:"text-red-500 text-sm"},k={class:"mb-2"},N={class:"card mb-1"},E={class:"title"},b=r((()=>(0,o.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1))),C={class:"body"},S={key:0,class:"flex flex-wrap justify-start gap-x-1 gap-y-1 md:gap-x-2 md:gap-y-2 mb-4"},A=["src"],P={class:"text-right"},B={class:"text-red-500 text-sm"},D={class:"mb-2"},I={class:"flex items-center justify-between mb-1"},L={class:"text-red-500 text-sm"},U=["value"],j={class:"text-red-500 text-sm"},M={class:"mt-4"},Z={key:0,class:"mr-3"},O={class:"text-center"},_={class:"flex items-center"},q={class:"mr-3"},R=r((()=>(0,o.createElementVNode)("div",{class:"text-center font-bold my-4"},[(0,o.createElementVNode)("span",null,"Or...")],-1))),z=r((()=>(0,o.createElementVNode)("img",{class:"w-5 h-5 mr-3",src:l,alt:"facebook"},null,-1))),T=(0,o.createTextVNode)(" Sign Up With Meta Facebook ");function F(e,t,a,l,r,F){const K=(0,o.resolveComponent)("icon"),$=(0,o.resolveComponent)("j-button"),W=(0,o.resolveComponent)("vue-recaptcha"),J=(0,o.resolveComponent)("router-link"),H=(0,o.resolveComponent)("auth-layout"),X=(0,o.resolveComponent)("alt-coins-modal"),Y=(0,o.resolveDirective)("tippy");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(H,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("h1",n,(0,o.toDisplayString)(l.translate("signup.title")),1),(0,o.createElementVNode)("form",{onSubmit:t[5]||(t[5]=(0,o.withModifiers)(((...e)=>l.submit&&l.submit(...e)),["prevent"]))},[(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(l.translate("signup.username")),1),(0,o.createElementVNode)("div",d,(0,o.toDisplayString)(l.showError(e.errorBag,"ownernickname")),1)]),(0,o.withDirectives)((0,o.createElementVNode)("input",{autofocus:"",autocomplete:"off",class:"form-input w-full",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.ownernickname=t)},null,512),[[o.vModelText,e.form.ownernickname]])]),(0,o.createElementVNode)("div",m,[(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("div",w,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(l.translate("signup.password")),1),(0,o.createElementVNode)("div",h,(0,o.toDisplayString)(!0===e.isValidPassword?"":!1===e.isValidPassword?"Password is not Valid":""),1)]),(0,o.createElementVNode)("div",f,[(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-input w-full",onKeyup:t[1]||(t[1]=(...e)=>l.validatePasswordOnKeyup&&l.validatePasswordOnKeyup(...e)),type:"password","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.ownerpassword=t)},null,544),[[o.vModelText,e.form.ownerpassword]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("span",g,[(0,o.createVNode)(K,{name:"exclamation-circle",classes:"w-5 h-5 text-yellow-500"})])),[[Y,{content:l.passwordRules}]])])])]),(0,o.createElementVNode)("div",y,[(0,o.createElementVNode)("div",x,[(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(l.translate("signup.email")),1),(0,o.createElementVNode)("div",V,(0,o.toDisplayString)(l.showError(e.errorBag,"email")),1)]),(0,o.withDirectives)((0,o.createElementVNode)("input",{class:"form-input w-full",type:"email","onUpdate:modelValue":t[3]||(t[3]=t=>e.form.email=t)},null,512),[[o.vModelText,e.form.email]])])])]),(0,o.createElementVNode)("div",k,[(0,o.createElementVNode)("div",N,[(0,o.createElementVNode)("div",E,[(0,o.createElementVNode)("h5",null,(0,o.toDisplayString)(l.translate("signup.wallets")),1)]),b,(0,o.createElementVNode)("div",C,[e.form.selectedaltcoins.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",S,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.form.selectedaltcoins,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:"flex items-center w-40"},[(0,o.createElementVNode)("img",{src:l.generateIconUrl(e.Name),alt:"",class:"w-6 h-6 mr-3"},null,8,A),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.Name),1)])))),128))])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",P,[(0,o.createVNode)($,{type:"button",onClick:l.launchAtlCoinsModal},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(l.translate("signup.wallet_button")),1)])),_:1},8,["onClick"])])])]),(0,o.createElementVNode)("div",B,(0,o.toDisplayString)(l.showError(e.errorBag,"selectedaltcoins")),1)]),(0,o.createElementVNode)("div",D,[(0,o.createElementVNode)("div",I,[(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(l.translate("signup.locale")),1),(0,o.createElementVNode)("div",L,(0,o.toDisplayString)(l.showError(e.errorBag,"locale")),1)]),(0,o.withDirectives)((0,o.createElementVNode)("select",{class:"form-select w-full","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.locale=t)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.languages,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{key:t,value:t},(0,o.toDisplayString)(e.naam),9,U)))),128))],512),[[o.vModelSelect,e.form.locale]])]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(W,{ref:"vueRecaptcha",siteKey:e.reCaptchaAPIKey,size:"normal",onExpire:l.recaptchaExpired,theme:l.mode,onFail:l.recaptchaFailed,onVerify:l.recaptchaVerified},null,8,["siteKey","onExpire","theme","onFail","onVerify"]),(0,o.createElementVNode)("div",j,(0,o.toDisplayString)(l.showError(e.errorBag,"reCaptcha")),1)]),(0,o.createElementVNode)("div",M,[(0,o.createVNode)($,{disabled:e.isProcessing,size:"w-full"},{default:(0,o.withCtx)((()=>[e.isProcessing?((0,o.openBlock)(),(0,o.createElementBlock)("div",Z,[(0,o.createVNode)(K,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(l.translate("signup.button")),1)])),_:1},8,["disabled"])])],32),(0,o.createElementVNode)("div",O,[(0,o.createElementVNode)("div",_,[(0,o.createElementVNode)("p",q,(0,o.toDisplayString)(l.translate("login.forgot")),1),(0,o.createVNode)(J,{class:"link",to:"/recover-password",tag:"a"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(l.translate("login.recover")),1)])),_:1})])]),R,(0,o.createVNode)($,{size:"w-full",buttonStyle:"outline",onClick:t[6]||(t[6]=e=>l.authenticate("facebook"))},{default:(0,o.withCtx)((()=>[z,T])),_:1})])])),_:1}),(0,o.createVNode)(X)],64)}var K=a(9874);const $={class:"flex items-center justify-between"},W={class:"capitalize"},J={class:"flex items-center justify-between flex-col md:flex-row"},H=(0,o.createTextVNode)("Select All"),X=(0,o.createTextVNode)(" Select Popular Only "),Y=(0,o.createTextVNode)(" Unselect All "),G={class:"relative flex-1 my-4"},Q={class:"flex flex-wrap justify-center gap-2"},ee=["onClick"],te=["src"],ae={class:"text-xs font-semibold"};function oe(e,t,a,l,r,s){const n=(0,o.resolveComponent)("icon"),c=(0,o.resolveComponent)("j-button"),i=(0,o.resolveComponent)("modal");return(0,o.openBlock)(),(0,o.createBlock)(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[6]||(t[6]=e=>l.closeModal())},{title:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",$,[(0,o.createElementVNode)("span",W,(0,o.toDisplayString)(l.translate("account.wallet.choose")),1),(0,o.createElementVNode)("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>l.closeModal())},[(0,o.createVNode)(n,{name:"close"})])])])),content:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",J,[(0,o.createVNode)(c,{size:"w-full md:w-auto",class:"mb-2 md:mb-0",type:"button",onClick:t[1]||(t[1]=e=>l.selectAll())},{default:(0,o.withCtx)((()=>[H])),_:1}),(0,o.createVNode)(c,{size:"w-full md:w-auto",class:"mb-2 md:mb-0",type:"button",onClick:t[2]||(t[2]=e=>l.selectPopularOnly())},{default:(0,o.withCtx)((()=>[X])),_:1}),(0,o.createVNode)(c,{size:"w-full md:w-auto",class:"mb-2 md:mb-0",type:"button",onClick:t[3]||(t[3]=e=>l.unSelectAll())},{default:(0,o.withCtx)((()=>[Y])),_:1})]),(0,o.createElementVNode)("div",G,[(0,o.createVNode)(n,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.keyword=t),"aria-label":"Search...",class:"form-input px-10 w-full",type:"text"},null,512),[[o.vModelText,e.keyword]]),""!==e.keyword?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[5]||(t[5]=t=>e.keyword="")},[(0,o.createVNode)(n,{classes:"w-5 h-5",name:"close"})])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",Q,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.altCoinsList,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t,class:(0,o.normalizeClass)("w-24 w-24 p-3 cursor-pointer hover:border-blue-700 dark:hover:border-blue-500 text-center border-2 inline-block rounded-md shadow flex items-center justify-center flex-col "+(l.isSelected(e)?"border-green-500":"border-gray-300 dark:border-gray-500")),onClick:t=>l.toggleAltCoinsSelection(e)},[(0,o.createElementVNode)("img",{src:l.generateIconUrl(e.Name),alt:"",class:"w-10 h-10 mb-2 mx-auto"},null,8,te),(0,o.createElementVNode)("p",ae,(0,o.toDisplayString)(e.Name),1)],10,ee)))),128))])])),_:1},8,["maxWidth","show"])}var le=a(9099),re=a(3164),se=a(7983),ne=a(8637),ce=a(4729),ie=a(6486),de={name:"AltCoinsModal",components:{Modal:le.Z,JButton:re.Z,Icon:se.Z},setup(){const e=(0,o.inject)("translate"),t=(0,o.inject)("emitter"),a=(0,ne.oR)(),{generateIconUrl:l}=(0,ce.Z)(),r=(0,o.reactive)({show:!1,maxWidth:"2xl",closeable:!0,keyword:"",selectedAltCoinsList:[]}),s=(0,o.computed)((()=>a.state.altCoins)),n=(0,o.computed)((()=>{const e=ie.orderBy(s.value,[e=>e.Name.toLowerCase()],"asc");return e.filter((e=>{if(r.keyword&&""!==r.keyword){const t=r.keyword.toLowerCase();return-1!==e.Name.toLowerCase().indexOf(t)||-1!==e.ShortName.toLowerCase().indexOf(t)||-1!==e.LongName.toLowerCase().indexOf(t)}return!0}))})),c=()=>{r.show=!1,r.confirmHook(r.selectedAltCoinsList)},i=e=>-1!==ie.findIndex(r.selectedAltCoinsList,{ID:e.ID}),d=()=>{r.selectedAltCoinsList=s.value},m=()=>{r.selectedAltCoinsList=s.value.filter((e=>1===e.BuyEnabled&&0===e.vFiat))},p=()=>{r.selectedAltCoinsList=[],r.selectedAltCoins="1,8,9,2"},u=e=>{const t=ie.findIndex(r.selectedAltCoinsList,{ID:e.ID});-1!==t?r.selectedAltCoinsList.splice(t,1):r.selectedAltCoinsList.push(e)};return(0,o.onBeforeMount)((()=>{t.on("altCoinsModal",(e=>{r.selectedAltCoinsList=e.selectedAltCoinsList||[],r.confirmHook=e.confirm,r.show=!0}))})),{translate:e,...(0,o.toRefs)(r),closeModal:c,generateIconUrl:l,altCoinsList:n,isSelected:i,toggleAltCoinsSelection:u,selectAll:d,selectPopularOnly:m,unSelectAll:p}}},me=a(3744);const pe=(0,me.Z)(de,[["render",oe]]);var ue=pe,we=a(38),he=a(6232),fe=a(2119),ge=a(9783),ye=a(2665),xe=a(477),ve={name:"Signup",components:{AuthLayout:K.Z,vueRecaptcha:we.Z,JButton:re.Z,Icon:se.Z,AltCoinsModal:ue},setup(){const{cookies:e}=(0,ye.fP)(),t=(0,o.ref)(null),a=(0,o.inject)("http"),l=(0,o.inject)("toast"),r=(0,o.inject)("emitter"),s=(0,o.inject)("translate"),n=(0,ne.oR)(),c=(0,fe.tv)(),{validate:i,showError:d}=(0,he.Z)(),{generateIconUrl:m}=(0,ce.Z)(),p=(0,o.reactive)({reCaptchaAPIKey:"6LdOLTEUAAAAAGDKKH5DMUQbW8PtXjimV6ZDrBKr",form:{ownernickname:"",ownerpassword:"",email:"",selectedaltcoins:[],locale:"EN",totp:"000000",reCaptcha:""},errorBag:{},rules:{ownernickname:["required","regex:/^[a-zA-Z0-9.]{1,60}$/"],email:["required","email"],selectedaltcoins:["required"],locale:["required"],totp:["required"],reCaptcha:["required"]},messages:{ownernickname:{required:"Username is required",regex:"Username should only contain alpha numeric, max 60 characters"},ownerpassword:{required:"Password is required",regex:"Password is not valid"},email:{required:"Email is required",email:"Please provide a valid email"},selectedaltcoins:{required:"Please select at least 1 coin"},locale:{required:"Please select language"},totp:{integer:"Only numeric value is allowed"},reCaptcha:{required:"Verify you are not a robot"}},facebook:null,isSocial:!1,isProcessing:!1,isValidPassword:null}),u=(0,o.computed)((()=>n.state.mode)),w=(0,o.computed)((()=>n.state.isLoggedIn)),h=(0,o.computed)((()=>n.state.languages)),f=(0,o.computed)((()=>"\n            <p>1- Password should be minimal 6 and max 60 characters</p>\n            <p>2. At least one digit 0-9</p>\n            <p>3- At least one lowercase character a-z</p>\n            <p>4- At least one uppercase character A-Z</p>\n            <p>5- At least one allowed special character @$%#?&!*.+_|&#34;%&#39;&#60;&#62;(),/;=[]{}~</p>\n        "));(0,o.watch)((()=>({...p.form})),((e,t)=>{Object.keys(p.errorBag).length>0&&(p.errorBag=i(p.form,p.rules,p.messages))}));const g="https://app.cointopay.com",y=e=>{p.form.reCaptcha=e},x=()=>{t.value.reset(),p.form.reCaptcha=""},v=()=>{},V=()=>{r.emit("altCoinsModal",{selectedAltCoinsList:p.form.selectedaltcoins,confirm:e=>{p.form.selectedaltcoins=e}})},k=e=>{let t=0;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);t=(t<<5)-t+o,t&=t}return t},N=e=>{"facebook"===e&&p.facebook.signIn().then((e=>{e&&(p.isSocial=!0,"undefined"!==typeof e.email?E(e):l.error("Please add email to your Facebook account"))})).catch((e=>{console.log(e)}))},E=e=>{const t=new URL(window.location.href);let o=t.searchParams.get("r");o=null===o?0:o;let r="",s={Call:"CreateAccount",MerchantID:1,APIKey:"_",selectedaltcoins:1,shoptitle:e.name.replace(/ /g,"").toLowerCase(),email:e.email,ownernickname:e.email.replace(/[^a-z0-9]/gi,""),ownerpassword:e.id,locale:"EN",Sticky:1,r:o,output:"json"};a.get(`${g}/v2REAPI`,{params:s}).then((t=>{if(t.data==="The Username "+s.ownernickname+" exists"){r=t.data;const o=s.ownernickname,n=k(o);s={User:o,Password:e.id,totp:"000000",api:n,output:"json"},a.get(`${g}/Login`,{params:s}).then((t=>{if("Session already exists"===t.data)l.error(t.data);else{const a=t.data;a.Username=o,b(a,e.id)}})).catch((e=>{""!==r?l.error(r):l.error(e.response.data)}))}else{const e=t.data;e.Username=s.ownernickname,b(e,s.Password)}})).catch((e=>{p.isSocial&&p.facebook.signOut().then((()=>{})),console.log(e)}))},b=(t,a)=>{delete t.Status,e.set("JSESSIONID",t.SessionID,{expires:"1Y",domain:".cointopay.com"}),n.dispatch(ge.Ff,t).then((()=>{n.dispatch(ge.Z6,{User:t.Username,Password:a}),n.dispatch(ge.XY).then((e=>{n.commit(ge.J$,!0),c.push({name:"wallet"})})).catch((e=>{console.log(e.response)}))}))},C=()=>{if(p.errorBag=i(p.form,p.rules,p.messages),0===Object.keys(p.errorBag).length&&p.isValidPassword){p.isProcessing=!0;const t=new URL(window.location.href);let o=t.searchParams.get("r");o=null===o?0:o;const r={Call:"CreateAccount",MerchantID:1,APIKey:"_",shoptitle:p.form.ownernickname,ownernickname:p.form.ownernickname,ownerpassword:encodeURIComponent(p.form.ownerpassword),email:p.form.email,selectedaltcoins:p.form.selectedaltcoins.map((e=>e.ID)).join(","),locale:p.form.locale,Sticky:1,r:o,output:"json"};a.get(`${g}/v2REAPI`,{params:r}).then((t=>{if(t.data===`The Username ${p.form.ownernickname} exists`)p.isProcessing=!1,l.error("error",t.data);else{const a=t.data;delete a.Status,a.Username=p.form.ownernickname,e.set("JSESSIONID",a.SessionID,"7d","/",".cointopay.com",!0,"None"),n.dispatch(ge.Ff,a).then((()=>{n.dispatch(ge.Z6,{User:a.Username,Password:r.ownerpassword}),n.dispatch(ge.XY).then((e=>{p.isProcessing=!1,c.push({name:"wallet"})})).catch((e=>{p.isProcessing=!1,console.log(e.response)}))}))}})).catch((e=>{p.isProcessing=!1,console.log(e),l.error(e.response.data)}))}},S=()=>{const e=/^(?=.*[A-Z]+)(?=.*[a-z]+)(?=.*[0-9]+)(?=.*[#?!@$%^&*\-.+_<>|%(),\\/;=\[\]`{}~])[A-Za-z0-9#?!@$%^&*\-.+_<>|%(),\\/;=\[\]`{}~]{6,60}$/;return e.test(p.form.ownerpassword)?p.isValidPassword=!0:p.isValidPassword=!1};return(0,o.onBeforeMount)((()=>{if(p.facebook=new xe.Z("1018008431912064"),p.facebook&&p.facebook.initialize().then((e=>{})).catch((e=>{console.log(e)})),w.value){const e=n.state.currentRoute;c.push(e)}})),{translate:s,...(0,o.toRefs)(p),vueRecaptcha:t,showError:d,mode:u,languages:h,passwordRules:f,generateIconUrl:m,recaptchaVerified:y,recaptchaExpired:x,recaptchaFailed:v,launchAtlCoinsModal:V,authenticate:N,submit:C,validatePasswordOnKeyup:S}}};const Ve=(0,me.Z)(ve,[["render",F],["__scopeId","data-v-280774c2"]]);var ke=Ve}}]);
//# sourceMappingURL=signup.3acda729.js.map