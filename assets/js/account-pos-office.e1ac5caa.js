(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account-pos-office"],{"63b0":function(e,t,o){"use strict";o("6eff")},"6eff":function(e,t,o){},"75a9":function(e,t,o){"use strict";o.r(t);var n=o("f2bf"),c=o("52f9"),a=o.n(c),r=o("e74e"),s=o.n(r),l={class:"card"},i={class:"title"},d=Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),u={class:"body"},p={class:"text-center w-full md:w-4/5 3xl:w-3/5 mx-auto"},b=Object(n["createElementVNode"])("a",{href:"https://cointopay.com/examplePOS_CSV.csv",target:"_blank",class:"text-blue-500 hover:underline"},"Example Import Data",-1),m={class:"flex items-center justify-center my-2"},j={class:"btn btn-success w-32 lbl-file",for:"importCSV"},O={key:0,class:"mr-3"},g={class:"mb-2"},h={class:"flex items-center"},f=["placeholder"],v={key:0,class:"mr-3"},y=Object(n["createElementVNode"])("p",{class:"mt-2 text-left text-gray-500 text-sm"},"https://3sixteen.myshopify.com/products.json?limit=1000",-1),N={key:0,class:"card"},V={class:"title"},E=Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),k={class:"body"},x={class:"text-center"},w={class:"card"},C={class:"title"},P=Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),S={class:"body"},D={class:"row"},B={class:"col-md-12 text-center"},M={key:0,class:"w-full rounded shadow px-4 py-3 bg-yellow-500 mb-4 text-yellow-900 font-semibold"},I={key:1,class:"mt-3"},_=Object(n["createElementVNode"])("h5",{class:"font-bold text-lg mb-3"},"Shop Link",-1),A={class:"flex items-center justify-center"},T={key:2,class:"mt-3"},K={class:"card"},U={class:"title"},L=Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),q={class:"body"},R={class:"card"},F={class:"title"},W=Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),J={class:"body"},z=Object(n["createElementVNode"])("div",{class:"card"},[Object(n["createElementVNode"])("div",{class:"title"},"POS Apps"),Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"}),Object(n["createElementVNode"])("div",{class:"body"},[Object(n["createElementVNode"])("div",{class:"flex items-center justify-center"},[Object(n["createElementVNode"])("a",{href:"https://play.google.com/store/apps/details?id=com.cointopay.pos",target:"_blank"},[Object(n["createElementVNode"])("img",{alt:"Play store",src:a.a,class:"h-10"})]),Object(n["createElementVNode"])("a",{href:"https://apps.apple.com/us/app/c-pos/id1459100341",target:"_blank"},[Object(n["createElementVNode"])("img",{alt:"App store",src:s.a,class:"h-10 ml-2"})])])])],-1);function Y(e,t,o,c,a,r){var s=Object(n["resolveComponent"])("icon"),Y=Object(n["resolveComponent"])("j-button"),H=Object(n["resolveComponent"])("router-link"),Z=Object(n["resolveComponent"])("Coupons"),$=Object(n["resolveComponent"])("Shipping-methods"),G=Object(n["resolveComponent"])("pos-layout"),Q=Object(n["resolveDirective"])("tippy");return Object(n["openBlock"])(),Object(n["createBlock"])(G,null,{content:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(c.translate("pos.office.product_catalog")),1)]),d,Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",p,[b,Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("input",{onChange:t[0]||(t[0]=function(e){return c.importFromCSV(e)}),class:"hidden",id:"importCSV",type:"file"},null,32),Object(n["createElementVNode"])("label",j,[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",O,[Object(n["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(c.translate("pos.office.import")),1)]),Object(n["createVNode"])(Y,{onClick:t[1]||(t[1]=function(e){return c.exportToCSV()}),buttonStyle:"success",size:"w-32",class:"ml-3"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.translate("pos.office.export")),1)]})),_:1})]),Object(n["createElementVNode"])("p",g,Object(n["toDisplayString"])(c.translate("pos.office.import_from_shopify")),1),Object(n["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return c.importFromShopify()}),["prevent"])),class:"flex-space-between"},[Object(n["createElementVNode"])("div",h,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{placeholder:c.translate("pos.office.shopify_link"),"aria-label":"url",class:"form-input w-full",type:"url","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.url=t})},null,8,f),[[n["vModelText"],e.form.url]]),Object(n["createVNode"])(Y,{disabled:e.isProcessing||!c.isValidShopifyURL(e.form.url),buttonStyle:"success",size:"w-32",class:"ml-3"},{default:Object(n["withCtx"])((function(){return[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",v,[Object(n["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(c.translate("pos.office.import")),1)]})),_:1},8,["disabled"])])],32),y])])]),c.products.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",N,[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(c.translate("pos.delete_catalog")),1)]),E,Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",x,[Object(n["createVNode"])(Y,{onClick:t[4]||(t[4]=function(e){return c.deleteAllProducts()}),buttonStyle:"danger"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.translate("pos.btn_delete_all_products")),1)]})),_:1})])])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("div",C,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(c.translate("pos.e_commerce")),1)]),P,Object(n["createElementVNode"])("div",S,[Object(n["createElementVNode"])("div",D,[Object(n["createElementVNode"])("div",B,[c.showShippingWarning?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",M,Object(n["toDisplayString"])(c.translate("pos.shipping_warning_msg")),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(Y,{onClick:t[5]||(t[5]=function(t){return c.togglePOS(e.isPosEnabled?0:1)}),buttonStyle:"".concat(e.isPosEnabled?"danger":"success"),class:"mr-2"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.translate("".concat(e.isPosEnabled?"pos.btn_disable":"pos.btn_enable"))),1)]})),_:1},8,["buttonStyle"]),e.isPosEnabled?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[_,Object(n["createElementVNode"])("div",A,[Object(n["createVNode"])(H,{to:{name:"shop",params:{id:c.user.ID}},class:"mr-3",tag:"a"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.siteUrl+"/shop/"+c.user.ID),1)]})),_:1},8,["to"]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("button",null,[Object(n["createVNode"])(s,{name:"question-mark",classes:"w-6 h-6 text-yellow-500"})])),[[Q,{content:c.translate("pos.office.help")}]])])])):Object(n["createCommentVNode"])("",!0),e.isPosEnabled?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",T,[Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{class:"form-input w-full md:w-3/5",rows:"4",readonly:"","aria-label":"","onUpdate:modelValue":t[6]||(t[6]=function(e){return c.iframe=e})},null,512),[[n["vModelText"],c.iframe]])])):Object(n["createCommentVNode"])("",!0)])])])]),Object(n["createElementVNode"])("div",K,[Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(c.translate("pos.coupons.list_title")),1)]),L,Object(n["createElementVNode"])("div",q,[Object(n["createVNode"])(Z)])]),Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("div",F,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(c.translate("pos.shipping.title")),1)]),W,Object(n["createElementVNode"])("div",J,[Object(n["createVNode"])($)])]),z]})),_:1})}var H=o("5530"),Z=(o("b0c0"),o("ac1f"),o("1276"),o("d81d"),o("e9c4"),o("a434"),o("d3b7"),o("159b"),o("a4d3"),o("e01a"),o("a15b"),o("25f0"),o("466d"),o("66c3")),$=o("4032"),G=o("cdae"),Q={class:"text-right mb-3"},X={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},ee={class:"table-sm"},te={class:"whitespace-nowrap"},oe={class:"w-32"},ne=["onClick"],ce=["onClick"],ae={key:0},re={colspan:"3"};function se(e,t,o,c,a,r){var s=Object(n["resolveComponent"])("j-button"),l=Object(n["resolveComponent"])("icon"),i=Object(n["resolveComponent"])("save-coupon-modal");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",Q,[Object(n["createVNode"])(s,{onClick:t[0]||(t[0]=function(e){return c.launchSaveCouponModal()})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.translate("pos.coupons.btn_add")),1)]})),_:1})]),Object(n["createElementVNode"])("div",X,[Object(n["createElementVNode"])("table",ee,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",te,Object(n["toDisplayString"])(c.translate("pos.coupons.headings.coupon_code")),1),Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(c.translate("pos.coupons.headings.discount")),1),Object(n["createElementVNode"])("th",oe,Object(n["toDisplayString"])(c.translate("pos.coupons.headings.actions")),1)])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.coupons,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(c.formatCode(e.KeyData)),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])("".concat(e.ValueData,"%")),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{onClick:function(t){return c.launchSaveCouponModal(e)},class:"hover:text-blue-500 mr-2"},[Object(n["createVNode"])(l,{name:"edit"})],8,ne),Object(n["createElementVNode"])("button",{onClick:function(t){return c.deleteCoupon(e)},class:"hover:text-red-500",type:"button"},[Object(n["createVNode"])(l,{name:"trash"})],8,ce)])])})),128)),0===c.coupons.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",ae,[Object(n["createElementVNode"])("td",re,Object(n["toDisplayString"])(c.translate("pos.coupons.no_data")),1)])):Object(n["createCommentVNode"])("",!0)])])]),Object(n["createVNode"])(i)],64)}var le={class:"flex items-center justify-between"},ie={class:"mb-2"},de={class:"flex items-center justify-between mb-1"},ue={class:"text-red-700 dark:text-red-400 text-sm"},pe=["readonly"],be={class:"mb-2"},me={class:"flex items-center justify-between mb-1"},je={class:"text-red-700 dark:text-red-400 text-sm"},Oe={class:"mt-4 text-right"},ge={key:0,class:"mr-3"};function he(e,t,o,c,a,r){var s=Object(n["resolveComponent"])("icon"),l=Object(n["resolveComponent"])("j-button"),i=Object(n["resolveComponent"])("modal");return Object(n["openBlock"])(),Object(n["createBlock"])(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[4]||(t[4]=function(e){return c.closeModal()})},{title:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(c.translate("pos.coupons.title")),1),Object(n["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=function(e){return c.closeModal()})},[Object(n["createVNode"])(s,{name:"close"})])])]})),content:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("form",{onSubmit:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return c.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",ie,[Object(n["createElementVNode"])("div",de,[Object(n["createElementVNode"])("label",null,Object(n["toDisplayString"])(c.translate("pos.coupons.coupon_code")),1),Object(n["createElementVNode"])("div",ue,Object(n["toDisplayString"])(c.showError(e.errorBag,"couponCode")),1)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-input w-full",readonly:e.coupon,type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.couponCode=t})},null,8,pe),[[n["vModelText"],e.form.couponCode]])]),Object(n["createElementVNode"])("div",be,[Object(n["createElementVNode"])("div",me,[Object(n["createElementVNode"])("label",null,Object(n["toDisplayString"])(c.translate("pos.coupons.discount")+" (%)"),1),Object(n["createElementVNode"])("div",je,Object(n["toDisplayString"])(c.showError(e.errorBag,"discount")),1)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.discount=t})},null,512),[[n["vModelText"],e.form.discount]])]),Object(n["createElementVNode"])("div",Oe,[Object(n["createVNode"])(l,{disabled:e.isProcessing},{default:Object(n["withCtx"])((function(){return[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ge,[Object(n["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(c.translate("pos.coupons.btn_save")),1)]})),_:1},8,["disabled"])])],32)]})),_:1},8,["maxWidth","show"])}o("b64b"),o("99af"),o("a9e3");var fe=o("714b"),ve=o("ea45"),ye=o("5502"),Ne=o("2ef0"),Ve=o("2e13"),Ee=o("8923"),ke={name:"SaveCouponModal",components:{Modal:fe["a"],Icon:G["a"],JButton:$["a"]},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("emitter"),o=Object(n["inject"])("toast"),c=Object(n["inject"])("http"),a=Object(ye["b"])(),r=Object(ve["a"])(),s=r.showError,l=r.validate,i=Object(Ve["a"])(),d=i.saveNotification,u=Object(n["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,coupon:null,form:{couponCode:"",discount:""},errorBag:{},rules:{couponCode:["required","regex:/^[a-zA-Z0-9]+$/"],discount:["required","between:1,60"]},messages:{couponCode:{required:"Coupon code is required",regex:"Only alphabets and numbers are allowed"},discount:{required:"Please enter a valid discount",between:"Discount should be a number between 1 and 60"}},isProcessing:!1}),p=Object(n["computed"])((function(){return a.state.user})),b=Object(n["computed"])((function(){return a.state.coupons}));Object(n["watch"])((function(){return Object(H["a"])({},u.form)}),(function(e,t){Object.keys(u.errorBag).length>0&&(u.errorBag=l(e,u.rules,u.messages))}));var m="https://app.cointopay.com",j=function(){u.show=!1},O=function(){if(u.errorBag=l(u.form,u.rules,u.messages),0===Object.keys(u.errorBag).length){u.isProcessing=!0;var e=u.form,t=!0,n=null,r="".concat(p.value.ID,"_coupon").concat(e.couponCode);if(u.coupon?-1===Ne["findIndex"](b.value,(function(e){return e.KeyData.toLowerCase()===r.toLowerCase()&&e.ID.toString()!==u.coupon.ID.toString()}))?n=Object(H["a"])(Object(H["a"])({},u.coupon),{},{KeyData:r,ValueData:e.discount}):(t=!1,u.isProcessing=!1,o.error("Coupon code already exists!"),d("Coupon code already exists!")):-1===Ne["findIndex"](b.value,{KeyData:r})?n={KeyData:r,ValueData:e.discount}:(t=!1,u.isProcessing=!1,o.error("Coupon code already exists!"),d("Coupon code already exists!")),t){var s={POSDATA:"",Call:u.coupon?"UPDATE":"INSERT",KeyData:n.KeyData,ValueData:n.ValueData,MerchantID:p.value.ID,APIKey:p.value.APIKey,output:"json"};c.get("".concat(m,"/MarketAPI"),{params:s}).then((function(e){if(u.isProcessing=!1,200===e.status){a.dispatch(Ee["f"],{MerchantID:p.value.ID,APIKey:p.value.APIKey});var t=u.coupon?"Coupon updated successfully":"Coupon added successfully";o.success(t),d(t),j()}})).catch((function(e){u.isProcessing=!1,console.log(e)}))}}};return Object(n["onBeforeMount"])((function(){t.on("saveCouponModal",(function(e){u.coupon=e.coupon||null,u.form={couponCode:u.coupon?u.coupon.KeyData.split("coupon")[1]:"",discount:u.coupon?Number(u.coupon.ValueData):""},u.show=!0}))})),Object(H["a"])(Object(H["a"])({translate:e},Object(n["toRefs"])(u)),{},{showError:s,closeModal:j,submit:O})}},xe=o("6b0d"),we=o.n(xe);const Ce=we()(ke,[["render",he]]);var Pe=Ce,Se={name:"Coupons",components:{Icon:G["a"],JButton:$["a"],SaveCouponModal:Pe},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("http"),o=Object(n["inject"])("swal"),c=Object(n["inject"])("toast"),a=Object(n["inject"])("emitter"),r=Object(ye["b"])(),s=Object(n["computed"])((function(){return r.state.user})),l=Object(n["computed"])((function(){return r.state.coupons})),i="https://app.cointopay.com",d=function(e){return e.split("coupon")[1]},u=function(e){o.fire({title:"Coupon",text:"Are you sure, want to delete this coupon?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then((function(o){var n=o.value;n&&!0===n&&t.get("".concat(i,"/MarketAPI"),{params:{POSDATA:"",Call:"DELETE",KeyData:e.KeyData,MerchantID:s.value.ID,APIKey:s.value.APIKey,output:"json"}}).then((function(e){200===e.status&&(c.success("Coupon deleted successfully"),r.dispatch(Ee["f"],{MerchantID:s.value.ID,APIKey:s.value.APIKey}))})).catch((function(e){console.log(e)}))}))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.emit("saveCouponModal",{coupon:e})};return Object(n["onBeforeMount"])((function(){r.dispatch(Ee["f"],{MerchantID:s.value.ID,APIKey:s.value.APIKey})})),{translate:e,coupons:l,formatCode:d,deleteCoupon:u,launchSaveCouponModal:p}}};o("9836");const De=we()(Se,[["render",se],["__scopeId","data-v-4c952beb"]]);var Be=De,Me={class:"text-right mb-3"},Ie={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},_e={class:"table-sm"},Ae={class:"whitespace-nowrap"},Te={class:"whitespace-nowrap"},Ke={class:"whitespace-nowrap"},Ue={class:"w-32"},Le=["onClick"],qe=["onClick"],Re={key:0},Fe={colspan:"4"};function We(e,t,o,c,a,r){var s=Object(n["resolveComponent"])("j-button"),l=Object(n["resolveComponent"])("icon"),i=Object(n["resolveComponent"])("pagination"),d=Object(n["resolveComponent"])("save-shipping-method-modal");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",Me,[Object(n["createVNode"])(s,{onClick:t[0]||(t[0]=function(e){return c.launchSaveShippingMethodModal()})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.translate("pos.shipping.btn_add")),1)]})),_:1})]),Object(n["createElementVNode"])("div",Ie,[Object(n["createElementVNode"])("table",_e,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",Ae,Object(n["toDisplayString"])(c.translate("pos.shipping.headings.country")),1),Object(n["createElementVNode"])("th",Te,Object(n["toDisplayString"])(c.translate("pos.shipping.headings.shipping_method")),1),Object(n["createElementVNode"])("th",Ke,Object(n["toDisplayString"])(c.translate("pos.shipping.headings.shipping_cost")),1),Object(n["createElementVNode"])("th",Ue,Object(n["toDisplayString"])(c.translate("pos.shipping.headings.actions")),1)])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.paginatedShippingMethods,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.countryName),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.shippingMethod),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(c.formatPrice(e.shippingCost,c.currency)),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{onClick:function(t){return c.launchSaveShippingMethodModal(e)},class:"hover:text-blue-500 mr-2"},[Object(n["createVNode"])(l,{name:"edit"})],8,Le),Object(n["createElementVNode"])("button",{onClick:function(e){return c.deleteShippingMethod(t)},class:"hover:text-red-500",type:"button"},[Object(n["createVNode"])(l,{name:"trash"})],8,qe)])])})),128)),0===c.shippingMethods.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",Re,[Object(n["createElementVNode"])("td",Fe,Object(n["toDisplayString"])(c.translate("pos.shipping.no_data")),1)])):Object(n["createCommentVNode"])("",!0)])])]),c.shippingMethods.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,meta:e.meta,onPage:c.updatePage},null,8,["meta","onPage"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(d)],64)}o("fb6a");var Je=o("d529"),ze={class:"flex items-center justify-between"},Ye={class:"mb-2"},He={class:"flex items-center justify-between mb-1"},Ze={class:"text-red-700 dark:text-red-400 text-sm"},$e=["value"],Ge={class:"mb-2"},Qe={class:"flex items-center justify-between mb-1"},Xe={class:"text-red-700 dark:text-red-400 text-sm"},et={class:"mb-2"},tt={class:"flex items-center justify-between mb-1"},ot={class:"text-red-700 dark:text-red-400 text-sm"},nt={class:"mt-4 text-right"},ct={key:0,class:"mr-3"};function at(e,t,o,c,a,r){var s=Object(n["resolveComponent"])("icon"),l=Object(n["resolveComponent"])("j-button"),i=Object(n["resolveComponent"])("modal");return Object(n["openBlock"])(),Object(n["createBlock"])(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[6]||(t[6]=function(e){return c.closeModal()})},{title:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ze,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(c.translate("pos.shipping.title")),1),Object(n["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=function(e){return c.closeModal()})},[Object(n["createVNode"])(s,{name:"close"})])])]})),content:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("form",{onSubmit:t[5]||(t[5]=Object(n["withModifiers"])((function(e){return c.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",Ye,[Object(n["createElementVNode"])("div",He,[Object(n["createElementVNode"])("label",null,Object(n["toDisplayString"])(c.translate("pos.shipping.country")),1),Object(n["createElementVNode"])("div",Ze,Object(n["toDisplayString"])(c.showError(e.errorBag,"countryId")),1)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{onChange:t[1]||(t[1]=function(e){return c.updateCountryName()}),class:"form-select w-full","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.countryId=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.countries,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:t,value:e.id},Object(n["toDisplayString"])(e.name),9,$e)})),128))],544),[[n["vModelSelect"],e.form.countryId]])]),Object(n["createElementVNode"])("div",Ge,[Object(n["createElementVNode"])("div",Qe,[Object(n["createElementVNode"])("label",null,Object(n["toDisplayString"])(c.translate("pos.shipping.shipping_method")),1),Object(n["createElementVNode"])("div",Xe,Object(n["toDisplayString"])(c.showError(e.errorBag,"shippingMethod")),1)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.shippingMethod=t})},null,512),[[n["vModelText"],e.form.shippingMethod]])]),Object(n["createElementVNode"])("div",et,[Object(n["createElementVNode"])("div",tt,[Object(n["createElementVNode"])("label",null,Object(n["toDisplayString"])(c.translate("pos.shipping.shipping_cost")),1),Object(n["createElementVNode"])("div",ot,Object(n["toDisplayString"])(c.showError(e.errorBag,"shippingCost")),1)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.shippingCost=t})},null,512),[[n["vModelText"],e.form.shippingCost]])]),Object(n["createElementVNode"])("div",nt,[Object(n["createVNode"])(l,{disabled:e.isProcessing},{default:Object(n["withCtx"])((function(){return[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ct,[Object(n["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(c.translate("pos.shipping.btn_save")),1)]})),_:1},8,["disabled"])])],32)]})),_:1},8,["maxWidth","show"])}var rt={name:"SaveShippingMethodModal",components:{Modal:fe["a"],Icon:G["a"],JButton:$["a"]},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("emitter"),o=Object(n["inject"])("toast"),c=Object(ye["b"])(),a=Object(ve["a"])(),r=a.showError,s=a.validate,l=Object(Ve["a"])(),i=l.generateId,d=Object(n["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,shippingMethod:null,form:{countryId:"",countryName:"",shippingCost:"",shippingMethod:""},errorBag:{},rules:{countryId:["required"],countryName:["required"],shippingCost:["required"],shippingMethod:["required"]},messages:{countryId:{required:"Please select country"},countryName:{required:"Please select country"},shippingCost:{required:"Please provide a shipping cost"},shippingMethod:{required:"Please provide a shipping method"}},isProcessing:!1}),u=Object(n["computed"])((function(){return c.state.countries})),p=Object(n["computed"])((function(){return c.state.shippingMethods}));Object(n["watch"])((function(){return Object(H["a"])({},d.form)}),(function(e,t){Object.keys(d.errorBag).length>0&&(d.errorBag=s(e,d.rules,d.messages))}));var b=function(){d.show=!1},m=function(){var e=Ne["find"](u.value,{id:Number(d.form.countryId)});e&&(d.form.countryName=e.name)},j=function(){if(d.errorBag=s(d.form,d.rules,d.messages),0===Object.keys(d.errorBag).length){d.isProcessing=!0;var e=d.form,t=Ne["cloneDeep"](p.value);if(d.shippingMethod){var n=Ne["findIndex"](p.value,{id:d.shippingMethod.id});t[n]=Object(H["a"])({id:t[n].id},e)}else t.push(Object(H["a"])({id:i(t,"id")},e));c.dispatch(Ee["y"],t).then((function(e){d.isProcessing=!1,o.success("Shipping options saved successfully"),b()})).catch((function(e){d.isProcessing=!1}))}};return Object(n["onBeforeMount"])((function(){t.on("saveShippingMethodModal",(function(e){d.shippingMethod=e.shippingMethod||null,d.form={countryId:d.shippingMethod?d.shippingMethod.countryId:"",countryName:d.shippingMethod?d.shippingMethod.countryName:"",shippingCost:d.shippingMethod?d.shippingMethod.shippingCost:"",shippingMethod:d.shippingMethod?d.shippingMethod.shippingMethod:""},d.show=!0}))})),Object(H["a"])(Object(H["a"])({translate:e},Object(n["toRefs"])(d)),{},{countries:u,showError:r,closeModal:b,updateCountryName:m,submit:j})}};const st=we()(rt,[["render",at]]);var lt=st,it={name:"ShippingMethods",components:{Icon:G["a"],JButton:$["a"],Pagination:Je["a"],SaveShippingMethodModal:lt},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("swal"),o=Object(n["inject"])("toast"),c=Object(n["inject"])("emitter"),a=Object(ye["b"])(),r=Object(Ve["a"])(),s=r.formatPrice,l=Object(n["reactive"])({meta:{currentPage:1,totalPages:0,limit:25,offset:0}}),i=Object(n["computed"])((function(){return a.state.accountInfo})),d=Object(n["computed"])((function(){return a.state.altCoins})),u=Object(n["computed"])((function(){return a.state.shippingMethods})),p=Object(n["computed"])((function(){var e="EUR";if(i.value){e=i.value.PayoutCurrencyShortName;var t=Ne["find"](d.value,{ShortName:i.value.PayoutCurrencyShortName});t&&(e=t.LongName)}return e})),b=Object(n["computed"])((function(){return u.value.length>0?u.value.slice(l.meta.offset,l.meta.currentPage*l.meta.limit):u.value})),m=function(e){l.meta=Object(H["a"])(Object(H["a"])({},l.meta),{},{currentPage:e,offset:(e-1)*l.meta.limit})},j=function(e){t.fire({title:"Delivery Option",text:"Are you sure, want to delete this delivery option?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then((function(t){var n=t.value;if(n&&!0===n){var c=Ne["cloneDeep"](u.value);c.splice(e,1),a.dispatch(Ee["y"],c).then((function(e){o.success("Shipping options deleted successfully")})).catch((function(e){o.warning("Internal Server Error")}))}}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c.emit("saveShippingMethodModal",{shippingMethod:e})};return Object(n["onBeforeMount"])((function(){a.dispatch(Ee["k"])})),Object(H["a"])(Object(H["a"])({translate:e},Object(n["toRefs"])(l)),{},{currency:p,shippingMethods:u,paginatedShippingMethods:b,formatPrice:s,updatePage:m,deleteShippingMethod:j,launchSaveShippingMethodModal:O})}};o("63b0");const dt=we()(it,[["render",We],["__scopeId","data-v-80a5e5b0"]]);var ut=dt,pt=o("c1df"),bt=o("bc3a"),mt=o.n(bt),jt={name:"Office",components:{"pos-layout":Z["a"],Icon:G["a"],JButton:$["a"],Coupons:Be,ShippingMethods:ut},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("toast"),o=Object(n["inject"])("http"),c=Object(n["inject"])("swal"),a=Object(ye["b"])(),r=Object(Ve["a"])(),s=r.saveNotification,l=r.generateId,i=Object(n["reactive"])({form:{url:""},siteUrl:window.location.protocol+"//"+window.location.host,isProcessing:!1,isPosEnabled:!1}),d=Object(n["computed"])((function(){return a.state.shippingMethods})),u=Object(n["computed"])((function(){return a.state.pos})),p=Object(n["computed"])((function(){return a.state.posCalls})),b=Object(n["computed"])((function(){return a.state.user})),m=Object(n["computed"])((function(){return u.value.products})),j=Object(n["computed"])((function(){return 0===d.value.length&&!0===i.isPosEnabled})),O=Object(n["computed"])((function(){return'<iframe src="https://cointopay.com/shop/17170" frameborder="0" height="550" name="Framename" scrolling="yes" style="width: 100%;" width="550"></iframe>'})),g="https://app.cointopay.com",h=function(e){i.isProcessing=!0;var o=e.target.files[0];if(o&&Ne["endsWith"](o.name,".csv")){var n=new FileReader;n.readAsText(o,"UTF-8"),n.onload=function(e){var o=e.target.result,n=o.split(/\r\n|\n/),c=[],r=null;if(n.map((function(e){var t=e.split(",");if(t.length>1){if("categories"===r.toLowerCase())c.push({id:t[0],name:t[1],categoryColourCode:t[2]});else if(c){c=JSON.parse(JSON.stringify(c));var o=Ne["findIndex"](c,{id:t[2]});"undefined"===typeof c[o].products&&(c[o].products=[]),c[o].products.push({id:t[0],itemName:t[1],categoryID:t[2],description:t[3],stock:t[4],sku:t[5],price:t[6],imageUri:t[7]})}}else{var n=t[0].toLowerCase();"products"!==n&&"categories"!==n||(r=t[0])}})),c.length>0){var l=Ne["cloneDeep"](u.value.categories),d=Ne["cloneDeep"](u.value.products);c.map((function(e){var t=Ne["findIndex"](l,{id:e.id}),o={id:e.id,name:e.name,categoryColourCode:e.categoryColourCode};-1===t?l.push(o):l.splice(t,1,o),e.products&&e.products.length>0&&e.products.map((function(e){var t=Ne["findIndex"](d,{sku:e.sku});-1===t?d.push(e):d.splice(t,1,e)}))})),a.dispatch(Ee["t"],{call:p.value.categories,data:l}),a.dispatch(Ee["v"],{call:p.value.products,data:d}),i.isProcessing=!1,t.success("Products imported successfully!"),s("Products imported successfully!")}else i.isProcessing=!1,t.error("Please provide a valid csv file"),s("Please provide a valid csv file")},n.onerror=function(e){i.isProcessing=!1,console.log(e)}}else i.isProcessing=!1,t.error("Please provide a valid csv file"),s("Please provide a valid csv file")},f=function(){var e=pt().format("DD-MM-YYYY_H_m_A")+"_Cointopay_"+b.value.ID+"_catalog_export.csv",t=[];u.value.categories.length>0&&(t.push(["Categories"]),u.value.categories.forEach((function(e){t.push([e.id,e.name,e.categoryColourCode])}))),u.value.products.length>0&&(t.push(["Products"]),u.value.products.forEach((function(e){t.push([e.id,e.itemName,e.categoryID,e.description,e.stock,e.sku,e.price,e.imageUri])})));var o="data:text/csv;charset=utf-8,"+t.map((function(e){return e.join(",")})).join("\n"),n=encodeURI(o),c=document.createElement("a");c.setAttribute("href",n),c.setAttribute("download",e),document.body.appendChild(c),c.click()},v=function(){var e=i.form.url;e&&(i.isProcessing=!0,mt.a.get("".concat(e)).then((function(e){var o=e.data.products,n=Ne["cloneDeep"](u.value.categories),c=Ne["find"](n,{name:"Shopify"}),r=null,d=Ne["cloneDeep"](u.value.products);c?r=c.id:(r=l(n),n.push({id:r,name:"Shopify",categoryColourCode:Math.floor(16777215*Math.random()).toString(16)}),a.dispatch(Ee["t"],{call:"UPDATE",data:n}));var p=[];o.map((function(e){e.variants&&e.variants.map((function(t){var o=e.images[0];p.push({id:t.id.toString(),categoryID:r,itemName:e.title,description:"",sku:t.sku,price:t.price,stock:"9999999",imageUri:o?o.src:""})}))})),d.length>0?p.map((function(e){var t=Ne["findIndex"](d,{sku:e.sku});-1!==t?d[t]=e:d.push(e)})):d=p,a.dispatch(Ee["v"],{call:"UPDATE",data:d}).then((function(e){i.isProcessing=!1,i.form.url="",t.success("Products imported successfully!"),s("Products imported successfully!")})).catch((function(e){i.isProcessing=!1,"update failed"===e.toLowerCase()&&(t.warning("Import failed due to unsupported encoding"),s("Import failed due to unsupported encoding"))}))}),(function(e){i.isProcessing=!1,console.log(e)})))},y=function(e){var t=e.match(/(http(s)?):\/\/[^.\s]+(.myshopify)?\.com\/products.json/);return null!==t},N=function(){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{container:"swal2-tailwind"}}).then((function(e){e.value&&(a.dispatch(Ee["v"],{call:p.value.products,data:[]}),t.success("Products deleted successfully"),s("Products deleted successfully"))}))},V=function(e){var n={Call:"SHOWPOS",MerchantID:b.value.ID,APIKey:b.value.APIKey,showpos:e,output:"json"};o.get("".concat(g,"/v2REAPI"),{params:n}).then((function(o){200===o.data.status_code?(t.success(1===e?"POS enabled successfully":"POS disabled successfully"),i.isPosEnabled=1===e):(t.warning(o.data.message),s(o.data.message))})).catch((function(e){t.warning(e.message),s(e.message)}))};return Object(n["onBeforeMount"])((function(){a.dispatch(Ee["m"],{shopId:b.value.ID}).then((function(e){"nothing found"!==e.categories&&(i.isPosEnabled=!0)})).catch((function(e){console.log(e)})),a.dispatch(Ee["k"])})),Object(H["a"])(Object(H["a"])({translate:e},Object(n["toRefs"])(i)),{},{isValidShopifyURL:y,user:b,importFromCSV:h,exportToCSV:f,importFromShopify:v,deleteAllProducts:N,products:m,showShippingWarning:j,togglePOS:V,iframe:O})}};const Ot=we()(jt,[["render",Y]]);t["default"]=Ot},9836:function(e,t,o){"use strict";o("b716")},b716:function(e,t,o){},d529:function(e,t,o){"use strict";var n=o("f2bf"),c={key:0,"aria-label":"pagination",class:"mt-3"},a={class:"inline-flex -space-x-px text-sm md:text-base"},r=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),s=[r],l={key:0,class:"px-1 py-2 md:px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500",href:"javascript:void(0)"},i=["onClick"],d={key:0,class:"sr-only"},u=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),p=[u];function b(e,t,o,r,u,b){return o.meta.totalPages>1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("nav",c,[Object(n["createElementVNode"])("ul",a,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:text-gray-400":!e.isPrev},"px-2 py-2 md:px-3 ml-0 leading-tight text-gray-500 dark:text-gray-400 bg-white rounded-l border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[0]||(t[0]=function(e){return r.prev()})},s,2)]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.pageRange,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:o},["..."===t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",l,Object(n["toDisplayString"])(t),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:1,class:Object(n["normalizeClass"])("px-2 py-2 md:px-3 leading-tight bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 ".concat(t===e.currentPage?"text-blue-500 font-semibold":"text-gray-500 dark:text-gray-400"," hover:text-blue-500 dark:hover:text-blue-500")),href:"javascript:void(0)",onClick:function(e){return r.updatePage(t)}},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t)+" ",1),t===e.currentPage?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",d,"(current)")):Object(n["createCommentVNode"])("",!0)],10,i))])})),128)),Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("a",{class:Object(n["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:bg-text-400":!e.isNext},"px-2 py-2 md:px-3 leading-tight text-gray-500 bg-white rounded-r border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[1]||(t[1]=function(e){return r.next()})},p,2)])])])):Object(n["createCommentVNode"])("",!0)}var m=o("5530"),j=(o("d3b7"),o("ac1f"),o("00b4"),{name:"Pagination",props:["meta"],emits:["page"],setup:function(e,t){var o=t.emit,c=Object(n["reactive"])({isPrev:!1,isNext:!1,pagesLimit:5,currentPage:e.meta.currentPage,delta:3}),a=Object(n["computed"])((function(){for(var t,o=e.meta.currentPage,n=e.meta.totalPages,a=o-c.delta,r=o+c.delta+1,s=[],l=[],i=1;i<=n;i++)(1===i||i===n||i>=a&&i<r)&&s.push(i);return s.forEach((function(e){t&&(e-t===2?l.push(t+1):e-t!==1&&l.push("...")),l.push(e),t=e})),l})),r=function(e){e!==c.currentPage&&(c.currentPage=e,i(),o("page",c.currentPage))},s=function(){c.currentPage>1?c.currentPage--:c.currentPage=1,i(),o("page",c.currentPage)},l=function(){c.currentPage<e.meta.totalPages?c.currentPage++:c.currentPage=e.meta.totalPages,i(),o("page",c.currentPage)},i=function(){c.isPrev=c.currentPage>1,c.isNext=c.currentPage<e.meta.totalPages},d=function(){c.delta=3,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(c.delta=1)};return Object(n["onBeforeMount"])((function(){i(),window.addEventListener("resize",d)})),Object(n["onBeforeUnmount"])((function(){window.removeEventListener("resize",d)})),Object(m["a"])(Object(m["a"])({},Object(n["toRefs"])(c)),{},{pageRange:a,prev:s,next:l,updatePage:r})}}),O=o("6b0d"),g=o.n(O);const h=g()(j,[["render",b]]);t["a"]=h}}]);
//# sourceMappingURL=account-pos-office.e1ac5caa.js.map