(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account-pos-favourites"],{"63bf":function(e,t,c){"use strict";c("bf53")},a926:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("4e82"),c("99af");var o=c("f2bf"),r=function(e){return Object(o["pushScopeId"])("data-v-231d94e3"),e=e(),Object(o["popScopeId"])(),e},a={class:"card"},n=r((function(){return Object(o["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1)})),l={class:"body"},u={class:"flex items-center justify-end mb-3 flex-col lg:flex-row"},s=r((function(){return Object(o["createElementVNode"])("option",{value:""},"Select Category",-1)})),i=["value"],d={class:"relative mb-3 lg:mb-0 ml-0 lg:ml-3 w-full lg:w-auto"},b={key:0,class:"mx-auto mb-3 w-40"},m={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},j={class:"table-sm mb-2"},f=r((function(){return Object(o["createElementVNode"])("th",null,"Category",-1)})),O=r((function(){return Object(o["createElementVNode"])("th",null,"Image",-1)})),p={class:"flex items-center"},y=Object(o["createTextVNode"])(" Name "),g=r((function(){return Object(o["createElementVNode"])("th",{class:"whitespace-nowrap"},"SKU / EAN / Barcode / QR",-1)})),v=r((function(){return Object(o["createElementVNode"])("th",null,"Quantity",-1)})),k={class:"flex items-center"},N=Object(o["createTextVNode"])(" Price "),C=r((function(){return Object(o["createElementVNode"])("th",null,"Actions",-1)})),V=["onClick"],h={class:"w-12 h-12 rounded-full overflow-hidden"},E=["src","onClick"],w=["onClick"],B={class:"break-all"},x=["onClick"],I=["onClick"],S=["onClick"],D={class:"flex items-center space-x-1"},P=["onClick"],F=["onClick"],M={key:1},T={colspan:"7",class:"text-center"};function L(e,t,c,r,L,A){var K=Object(o["resolveComponent"])("nav-tabs"),R=Object(o["resolveComponent"])("icon"),U=Object(o["resolveComponent"])("StreamBarcodeReader"),_=Object(o["resolveComponent"])("pagination"),q=Object(o["resolveComponent"])("pos-layout"),z=Object(o["resolveComponent"])("add-to-cart-modal");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(q,null,{content:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(K),n,Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("span",{class:"hover:text-blue-500 mb-3 lg:mb-0 ml-0 lg:ml-3 cursor-pointer w-full lg:w-auto",onClick:t[0]||(t[0]=function(t){return e.isBarcodeScanner=!e.isBarcodeScanner})},[Object(o["createVNode"])(R,{name:"barcode"})]),Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"aria-label":"Select Category",class:"form-select w-full mb-3 lg:mb-0 ml-0 lg:ml-3 w-full lg:w-72","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.categoryId=t})},[s,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.categories,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:t,value:e.id},Object(o["toDisplayString"])(e.name),9,i)})),128))],512),[[o["vModelSelect"],e.categoryId]]),Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(R,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.keyword=t}),"aria-label":"Search...",class:"form-input px-10 w-full lg:w-auto",type:"text"},null,512),[[o["vModelText"],e.keyword]]),""!==e.keyword?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[3]||(t[3]=function(t){return e.keyword=""})},[Object(o["createVNode"])(R,{classes:"w-5 h-5",name:"close"})])):Object(o["createCommentVNode"])("",!0)])]),e.isBarcodeScanner?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,[Object(o["createVNode"])(U,{onDecode:r.onDecode,onError:r.onError},null,8,["onDecode","onError"])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("table",j,[Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[f,O,Object(o["createElementVNode"])("th",{onClick:t[4]||(t[4]=function(e){return r.sort("itemName")}),class:"cursor-pointer",style:{"max-width":"150px"}},[Object(o["createElementVNode"])("div",p,[y,"itemName"===e.sortKey?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:Object(o["normalizeClass"])("ml-4 transform transition-all ".concat("asc"===e.order?"rotate-180":""))},[Object(o["createVNode"])(R,{name:"sort",classes:"w-4 h-4"})],2)):Object(o["createCommentVNode"])("",!0)])]),g,v,Object(o["createElementVNode"])("th",{onClick:t[5]||(t[5]=function(e){return r.sort("price")}),class:"cursor-pointer"},[Object(o["createElementVNode"])("div",k,[N,"price"===e.sortKey?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:Object(o["normalizeClass"])("ml-4 transform transition-all ".concat("asc"===e.order?"rotate-180":""))},[Object(o["createVNode"])(R,{name:"sort",classes:"w-4 h-4"})],2)):Object(o["createCommentVNode"])("",!0)])]),C])]),Object(o["createElementVNode"])("tbody",null,[r.filteredFavourites.length>0?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(r.paginatedFavourites,(function(t,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:c},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",{onClick:function(c){return e.categoryId=t.categoryID},class:"cursor-pointer flex items-center"},[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])("background: #"+r.getCategoryColorCode(t.categoryID)),class:"inline-block w-5 h-5 rounded-full mr-3"},null,4),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r.getCategoryName(t.categoryID)),1)],8,V)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("img",{src:t.imageUri,alt:"",class:"w-12 h-12 object-cover",onClick:function(e){return r.fancyBox(t.imageUri)}},null,8,E)])]),Object(o["createElementVNode"])("td",{onClick:function(e){return r.launchAddToCartModal(t)},class:"cursor-pointer whitespace-normal",style:{width:"150px"}},[Object(o["createElementVNode"])("p",B,Object(o["toDisplayString"])(t.itemName),1)],8,w),Object(o["createElementVNode"])("td",{onClick:function(e){return r.launchAddToCartModal(t)},class:"cursor-pointer"},Object(o["toDisplayString"])(t.sku),9,x),Object(o["createElementVNode"])("td",{onClick:function(e){return r.launchAddToCartModal(t)},class:"cursor-pointer"},Object(o["toDisplayString"])(t.stock),9,I),Object(o["createElementVNode"])("td",{onClick:function(e){return r.launchAddToCartModal(t)},class:"cursor-pointer"},Object(o["toDisplayString"])("".concat(t.price," ").concat(r.currency)),9,S),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("button",{onClick:function(e){return r.launchAddToCartModal(t)},class:"hover:text-blue-500",type:"button"},[Object(o["createVNode"])(R,{name:"shopping-cart"})],8,P),Object(o["createElementVNode"])("button",{onClick:function(e){return r.markFavourite(t,c)}},[Object(o["createVNode"])(R,{name:"heart",classes:"w-6 h-6 hover:text-red-500 ".concat(r.isFavourite(t)?"text-red-500":"")},null,8,["classes"])],8,F)])])])})),128)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",M,[Object(o["createElementVNode"])("td",T,Object(o["toDisplayString"])(r.translate("address_book.empty")),1)]))])])]),r.filteredFavourites.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:1,meta:e.meta,onPage:r.updatePage},null,8,["meta","onPage"])):Object(o["createCommentVNode"])("",!0)])])]})),_:1}),Object(o["createVNode"])(z)],64)}var A=c("5530"),K=(c("498a"),c("4de4"),c("d3b7"),c("a4d3"),c("e01a"),c("a9e3"),c("d81d"),c("c35a"),c("fb6a"),c("a434"),c("b64b"),c("66c3")),R=c("edc4"),U=c("cdae"),_=c("d529"),q=c("19ee"),z=c("f337"),J=c("5502"),Q=c("2ef0"),G=c("8923"),H=c("6c02"),W=c("2e13"),X={name:"Favourites",components:{NavTabs:R["a"],"pos-layout":K["a"],Icon:U["a"],Pagination:_["a"],StreamBarcodeReader:z["a"],AddToCartModal:q["a"]},setup:function(){var e=Object(o["inject"])("translate"),t=Object(o["inject"])("toast"),c=Object(o["inject"])("emitter"),r=Object(J["b"])(),a=Object(H["d"])(),n=Object(W["a"])(),l=n.fancyBox,u=Object(o["reactive"])({employee:null,keyword:"",categoryId:"",sortKey:null,order:"asc",meta:{currentPage:1,totalPages:0,limit:25,offset:0},isBarcodeScanner:!1}),s=Object(o["computed"])((function(){return r.state.accountInfo})),i=Object(o["computed"])((function(){return r.state.altCoins})),d=Object(o["computed"])((function(){return r.state.pos})),b=Object(o["computed"])((function(){if(u.keyword||u.categoryId){var e=u.keyword.trim().toLowerCase();return d.value.favourites.filter((function(t){return u.categoryId&&e?t.categoryID===u.categoryId&&(Q["includes"](t.itemName.toLowerCase(),e)||Q["includes"](t.sku.toLowerCase(),e)||Q["includes"](t.description.toLowerCase(),e)||Number(t.price)===Number(e)):u.categoryId?t.categoryID===u.categoryId:e?Q["includes"](t.itemName.toLowerCase(),e)||Q["includes"](t.sku.toLowerCase(),e)||Q["includes"](t.description.toLowerCase(),e)||Number(t.price)===Number(e):void 0}))}return d.value.favourites})),m=Object(o["computed"])((function(){if(b.value&&b.value.length>0){var e=Q["cloneDeep"](b.value);return e=e.map((function(e){return Object(A["a"])(Object(A["a"])({},e),{},{price:Number.parseFloat(e.price)})})),e=Q["orderBy"](e,u.sortKey,u.order),e.slice(u.meta.offset,u.meta.currentPage*u.meta.limit)}return b.value})),j=Object(o["computed"])((function(){var e="EUR";if(s.value){e=s.value.PayoutCurrencyShortName;var t=Q["find"](i.value,{ShortName:s.value.PayoutCurrencyShortName});t&&(e=t.LongName)}return e}));Object(o["watch"])((function(){return u.keyword}),(function(e,t){u.meta=Object(A["a"])(Object(A["a"])({},u.meta),{},{currentPage:1,totalPages:Math.ceil(b.value.length/u.meta.limit),offset:0})}));var f=function(e){e===u.sortKey&&(u.order="asc"===u.order?"desc":"asc"),u.sortKey=e},O=function(e){var t=Q["find"](d.value.categories,{id:e});return t?t.name:""},p=function(e){var t=Q["find"](d.value.categories,{id:e});return t?t.categoryColourCode:""},y=function(e){return e.sku?-1!==Q["findIndex"](d.value.favourites,{sku:e.sku}):!!e.id&&-1!==Q["findIndex"](d.value.favourites,{id:e.id})},g=function(e){u.meta=Object(A["a"])(Object(A["a"])({},u.meta),{},{currentPage:e,offset:(e-1)*u.meta.limit})},v=function(e){var c=Q["cloneDeep"](d.value.favourites),o=-1;e.sku?o=Q["findIndex"](c,{sku:e.sku}):e.id&&(o=Q["findIndex"](c,{id:e.id})),-1===o?(c.push(e),t.success("Product marked favourite successfully")):(c.splice(o,1),t.success("Product unmarked favourite successfully"));var a=Q["cloneDeep"](d.value);a.favourites=c,r.commit(G["R"],a)},k=function(e){u.keyword=e,u.isBarcodeScanner=!1;var t=Q["find"](d.value.favourites,{sku:e});t&&C(t)},N=function(e){console.log(e)},C=function(e){Number(e.stock)>0?c.emit("addToCartModal",{product:e,currency:j.value,employee:u.employee}):t.warning("Product out of stock")};return Object(o["onBeforeMount"])((function(){u.employee=Q["find"](d.value.users,{isLoggedIn:"true"}),u.meta=Object(A["a"])(Object(A["a"])({},u.meta),{},{currentPage:1,totalPages:Math.ceil(b.value.length/u.meta.limit),offset:0})})),Object(o["onMounted"])((function(){Object.keys(a.query).length>0&&"undefined"!==typeof a.query.category_id&&(u.categoryId=a.query.category_id)})),Object(A["a"])(Object(A["a"])({translate:e},Object(o["toRefs"])(u)),{},{filteredFavourites:b,paginatedFavourites:m,categories:d.value.categories,sort:f,updatePage:g,getCategoryName:O,getCategoryColorCode:p,isFavourite:y,currency:j,markFavourite:v,onDecode:k,onError:N,launchAddToCartModal:C,fancyBox:l})}},Y=(c("63bf"),c("6b0d")),Z=c.n(Y);const $=Z()(X,[["render",L],["__scopeId","data-v-231d94e3"]]);t["default"]=$},bf53:function(e,t,c){}}]);
//# sourceMappingURL=account-pos-favourites.45417a97.js.map