{"version":3,"sources":["webpack:///./src/views/pos/Invoice.vue","webpack:///./src/views/pos/Invoice.vue?81e0","webpack:///./src/components/PulseSkeleton.vue","webpack:///./src/components/PulseSkeleton.vue?5d19"],"names":["class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","key","_hoisted_16","_hoisted_17","_hoisted_18","_createElementVNode","style","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","colspan","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","render","_ctx","_cache","$props","$setup","_component_QRCodeVue3","_component_icon","_resolveComponent","_component_tab","_component_tab_set","_component_pulse_skeleton","_component_pos_layout","_openBlock","_createBlock","content","_createElementBlock","_toDisplayString","ShopTitle","TransactionID","_createVNode","default","name","background-options","backgroundOptions","corners-dot-options","cornersDotOptions","corners-square-options","cornersSquareOptions","dots-options","dotsOptions","height","qr-options","qrOptions","value","coinAddress","width","imgclass","decodeURIComponent","readonly","type","onClick","classes","_","selected","_withCtx","TZERO","Amount","LongName","items","length","_Fragment","_renderList","item","index","src","url","alt","sku","price","qty","shipping","method","cost","_createCommentVNode","coupon","discount","href","paymentRequest","RedirectURL","target","components","PulseSkeleton","POSLayout","TabSet","Tab","QRCodeVue3","Icon","setup","translate","inject","http","store","useStore","route","useRoute","router","useRouter","compositionUtils","generateId","copyToClipboard","formatPrice","qrCodeOptions","state","reactive","invoice","ticket","order","invoiceStatus","timer","interval","transactionInterval","socket","isCloseSocket","isProcessing","pos","computed","posCalls","cryptoLink","CoinName","toLowerCase","currency","inputCurrency","cartTotal","total","map","Number","isInvoiceComplete","indexOf","apiBaseUrl","process","fetchTransaction","confirmCode","isLoading","payload","Call","MerchantID","APIKey","ConfirmCode","output","get","params","then","response","status","data","result","tickets","ticketIndex","Security","extractOrderData","Status","isActive","receipt","receipts","TICKETNUMBER","id","toString","generateReceipts","dispatch","SAVE_TICKETS","call","clearInterval","push","ticketId","startTimer","catch","error","console","log","date","moment","CreatedOn","add","ExpiryTime","setInterval","now","valueOf","diff","days","Math","floor","hours","minutes","seconds","transaction","decoded","CustomerReferenceNr","elm","document","createElement","innerHTML","trim","split","filter","Boolean","orderItem","code","posData","ID","CASHIER","cashier","CURRENCY","DATE","Date","getTime","TRANSACTION_ID","TOTAL","OriginalAmount","SAVE_RECEIPTS","receiptItems","ticketProducts","forEach","product","receiptItem","ITEM_NAME","productName","ITEM_PRICE","productPrice","ITEM_SKU","productSku","QUANTITY","productQuantity","RECIEPT_ID","SAVE_RECEIPT_ITEMS","formatStatus","initSocket","WebSocket","onmessage","event","parts","invoiceData","activeTicket","splice","onclose","onBeforeMount","onBeforeUnmount","close","toRefs","__exports__","_hoisted_1"],"mappings":"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","file":"assets/js/account-pos-invoice.b17bf70e.js","sourcesContent":["<template>\r\n  <pos-layout>\r\n    <template v-slot:content>\r\n      <template v-if=\"ticket && invoice && !isInvoiceComplete && !isProcessing\">\r\n        <div class=\"mb-4 text-center\">\r\n          <p>{{ translate('pos.invoice.message') }}</p>\r\n          <p>\r\n            <span class=\"font-bold mr-2\">{{ translate('pos.invoice.merchant') }}:</span>\r\n            <span>{{ invoice.ShopTitle }}</span>\r\n          </p>\r\n          <p>\r\n            <span class=\"font-bold mr-2\">{{ translate('pos.invoice.invoice_number') }}</span>\r\n            <span>{{ invoice.TransactionID }}</span>\r\n          </p>\r\n        </div>\r\n        <tab-set>\r\n          <tab :name=\"translate('invoice.address_only')\">\r\n            <div class=\"mb-4 flex items-center flex-col\">\r\n              <QRCodeVue3 :background-options=\"qrOptions.backgroundOptions\"\r\n                          :corners-dot-options=\"qrOptions.cornersDotOptions\"\r\n                          :corners-square-options=\"qrOptions.cornersSquareOptions\"\r\n                          :dots-options=\"qrOptions.dotsOptions\"\r\n                          :height=\"qrOptions.height\"\r\n                          :qr-options=\"qrOptions.qrOptions\"\r\n                          :value=\"invoice.coinAddress\"\r\n                          :width=\"qrOptions.width\"\r\n                          imgclass=\"mx-auto mb-4\"></QRCodeVue3>\r\n              <div class=\"flex flex-wrap justify-center items-stretch w-full relative\">\r\n                <input :value=\"decodeURIComponent(invoice.coinAddress)\"\r\n                       class=\"form-input flex-1 md:flex-none md:w-2/3 rounded-r-none\"\r\n                       readonly type=\"text\"/>\r\n                <div class=\"flex -mr-px\">\r\n                  <span\r\n                    class=\"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-500 px-3 whitespace-no-wrap text-sm\"\r\n                    @click=\"copyToClipboard(decodeURIComponent(invoice.coinAddress))\">\r\n                    <icon classes=\"w-5 h-5\" name=\"clipboard\"></icon>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </tab>\r\n\r\n          <tab :name=\"translate('invoice.full_crypto_link')\" :selected=\"true\">\r\n            <div class=\"mb-4 flex items-center flex-col\">\r\n              <QRCodeVue3 :background-options=\"qrOptions.backgroundOptions\"\r\n                          :corners-dot-options=\"qrOptions.cornersDotOptions\"\r\n                          :corners-square-options=\"qrOptions.cornersSquareOptions\"\r\n                          :dots-options=\"qrOptions.dotsOptions\"\r\n                          :height=\"qrOptions.height\"\r\n                          :qr-options=\"qrOptions.qrOptions\"\r\n                          :value=\"cryptoLink\"\r\n                          :width=\"qrOptions.width\"\r\n                          imgclass=\"mx-auto mb-4\"></QRCodeVue3>\r\n              <div class=\"flex flex-wrap justify-center items-stretch w-full relative\">\r\n                <input :value=\"decodeURIComponent(invoice.coinAddress)\"\r\n                       class=\"form-input flex-1 md:flex-none md:w-2/3 rounded-r-none\"\r\n                       readonly type=\"text\"/>\r\n                <div class=\"flex -mr-px\">\r\n                  <span\r\n                    class=\"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-500 px-3 whitespace-no-wrap text-sm\"\r\n                    @click=\"copyToClipboard(decodeURIComponent(invoice.coinAddress))\">\r\n                    <icon classes=\"w-5 h-5\" name=\"clipboard\"></icon>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </tab>\r\n          <tab :name=\"translate('invoice.tzero')\">\r\n            <div class=\"mb-4 flex items-center justify-between flex-col\">\r\n              <QRCodeVue3 :background-options=\"qrOptions.backgroundOptions\"\r\n                          :corners-dot-options=\"qrOptions.cornersDotOptions\"\r\n                          :corners-square-options=\"qrOptions.cornersSquareOptions\"\r\n                          :dots-options=\"qrOptions.dotsOptions\"\r\n                          :height=\"qrOptions.height\"\r\n                          :qr-options=\"qrOptions.qrOptions\"\r\n                          :value=\"invoice.TZERO\"\r\n                          :width=\"qrOptions.width\"\r\n                          imgclass=\"mx-auto\"></QRCodeVue3>\r\n            </div>\r\n          </tab>\r\n        </tab-set>\r\n        <p class=\"text-center\">\r\n          {{ translate('pos.invoice.amount') }}: {{ `${invoice.Amount} ${invoice.LongName}` }}\r\n        </p>\r\n        <p class=\"text-2xl font-bold text-blue-500 text-center capitalize\">\r\n          {{ timer }}\r\n        </p>\r\n        <div v-if=\"order.items.length > 0\" class=\"mt-4\">\r\n          <div\r\n            class=\"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600\">\r\n            <table class=\"table-md\">\r\n              <thead>\r\n              <tr>\r\n                <th style=\"min-width: 250px;\">Item</th>\r\n                <th>SKU</th>\r\n                <th>Price</th>\r\n                <th>Quantity</th>\r\n                <th>Subtotal</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody>\r\n              <tr v-for=\"(item, index) of order.items\" :key=\"index\">\r\n                <td>\r\n                  <div class=\"\">\r\n                    <img :src=\"item.url\" alt=\"\" style=\"width: 100px\"/>\r\n                    <p class=\"mb-0 ml-1\">{{ item.name }}</p>\r\n                  </div>\r\n                </td>\r\n                <td>{{ item.sku }}</td>\r\n                <td>{{ formatPrice(item.price, currency) }}</td>\r\n                <td>{{ `x ${item.qty}` }}</td>\r\n                <td>{{ formatPrice(item.price * item.qty, currency) }}</td>\r\n              </tr>\r\n              <tr v-if=\"order.shipping\">\r\n                <td class=\"text-right\" colspan=\"3\">\r\n                  {{ translate('invoice.shipping_cost') }}\r\n                </td>\r\n                <td colspan=\"2\">{{ order.shipping.method + ' ' + formatPrice(order.shipping.cost, currency) }}</td>\r\n              </tr>\r\n              <tr v-if=\"order.coupon\">\r\n                <td class=\"text-right\" colspan=\"3\">\r\n                  {{ translate('invoice.discount') }}\r\n                </td>\r\n                <td class=\"text-blue-500\" colspan=\"2\">\r\n                  {{ `-${formatPrice(order.coupon.discount, currency)}` }}\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td class=\"text-right\" colspan=\"3\">\r\n                  <span class=\"font-bold\">Total:</span></td>\r\n                <td colspan=\"2\"><span class=\"font-bold\">{{ cartTotal }}</span></td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-2 text-center\">\r\n          <a :href=\"ticket.paymentRequest.RedirectURL\" class=\"btn btn-primary\" target=\"_blank\">Invoice Detail</a>\r\n        </div>\r\n      </template>\r\n      <template v-if=\"isProcessing\">\r\n        <pulse-skeleton></pulse-skeleton>\r\n        <pulse-skeleton></pulse-skeleton>\r\n      </template>\r\n    </template>\r\n  </pos-layout>\r\n</template>\r\n\r\n<script>\r\nimport POSLayout from '@/components/layouts/POSLayout'\r\nimport { computed, inject, onBeforeMount, onBeforeUnmount, reactive, toRefs } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport { SAVE_RECEIPT_ITEMS, SAVE_RECEIPTS, SAVE_TICKETS } from '@/store/keys'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport * as moment from 'moment-timezone'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport PulseSkeleton from '@/components/PulseSkeleton'\r\nimport TabSet from '@/components/common/TabSet'\r\nimport Tab from '@/components/common/Tab'\r\nimport QRCodeVue3 from 'qrcode-vue3'\r\nimport qrCodeOptions from '@/qrOptions'\r\nimport Icon from '@/components/Icon'\r\n\r\nexport default {\r\n  name: 'Invoice',\r\n  components: {\r\n    PulseSkeleton,\r\n    'pos-layout': POSLayout,\r\n    TabSet,\r\n    Tab,\r\n    QRCodeVue3,\r\n    Icon\r\n  },\r\n  setup () {\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n\r\n    const {\r\n      generateId,\r\n      copyToClipboard,\r\n      formatPrice\r\n    } = compositionUtils()\r\n    const { qrOptions } = qrCodeOptions()\r\n\r\n    // State\r\n    const state = reactive({\r\n      invoice: null,\r\n      ticket: null,\r\n      order: {\r\n        items: [],\r\n        shipping: null,\r\n        coupon: null\r\n      },\r\n      invoiceStatus: null,\r\n      timer: null,\r\n      interval: null,\r\n      transactionInterval: null,\r\n      socket: null,\r\n      isCloseSocket: false,\r\n      isProcessing: false\r\n    })\r\n\r\n    // Computed\r\n    const pos = computed(() => store.state.pos)\r\n    const posCalls = computed(() => store.state.posCalls)\r\n    const cryptoLink = computed(() => {\r\n      return `${state.invoice.CoinName.toLowerCase()}:${state.invoice.coinAddress}?amount=${state.invoice.Amount}`\r\n    })\r\n    const currency = computed(() => {\r\n      return state.ticket.paymentRequest ? state.ticket.paymentRequest.inputCurrency : 'EUR'\r\n    })\r\n    const cartTotal = computed(() => {\r\n      let total = 0\r\n      if (state.order.items.length > 0) {\r\n        state.order.items.map(item => {\r\n          total += Number(item.qty) * Number(item.price)\r\n        })\r\n      }\r\n      if (state.order.shipping) {\r\n        total += Number(state.order.shipping.cost)\r\n      }\r\n      if (state.order.coupon) {\r\n        total -= Number(state.order.coupon.discount)\r\n      }\r\n      return formatPrice(total, currency.value)\r\n    })\r\n    const isInvoiceComplete = computed(() => {\r\n      if (state.invoiceStatus) {\r\n        return ['paid', 'underpaid', 'complete'].indexOf(state.invoiceStatus) !== -1\r\n      }\r\n      return false\r\n    })\r\n\r\n    // Methods\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const fetchTransaction = (confirmCode, isLoading = true) => {\r\n      state.isProcessing = isLoading\r\n      const payload = {\r\n        Call: 'Transactiondetail',\r\n        MerchantID: 0,\r\n        APIKey: '_',\r\n        ConfirmCode: confirmCode,\r\n        output: 'json'\r\n      }\r\n      http.get(`${apiBaseUrl}/v2REAPI`, {\r\n        params: payload\r\n      }).then(response => {\r\n        state.isProcessing = false\r\n        if (response.status === 200) {\r\n          if (response.data.result !== 'failed') {\r\n            state.invoice = response.data.data\r\n            if (state.invoice) {\r\n              const tickets = _.cloneDeep(pos.value.tickets)\r\n              const ticketIndex = _.findIndex(tickets, (ticket) => {\r\n                return (ticket.paymentRequest && ticket.paymentRequest.Security === confirmCode)\r\n              })\r\n              if (ticketIndex !== -1) {\r\n                state.ticket = tickets[ticketIndex]\r\n                if (state.ticket) {\r\n                  extractOrderData(state.ticket.paymentRequest)\r\n                  const status = state.invoice.Status.toLowerCase()\r\n                  if (status === 'paid' || status === 'underpaid') {\r\n                    tickets[ticketIndex].status = 'paid'\r\n                  } else if (status === 'waiting') {\r\n                    tickets[ticketIndex].status = 'inprogress'\r\n                  } else if (status === 'expired') {\r\n                    tickets[ticketIndex].status = 'waiting'\r\n                  }\r\n                  if (state.ticket.status === 'waiting') {\r\n                    tickets[ticketIndex].paymentRequest = null\r\n                  } else if (state.ticket.status === 'paid') {\r\n                    tickets[ticketIndex].isActive = false\r\n                    // Check if receipt not already exists\r\n                    const receipt = _.find(pos.value.receipts, {\r\n                      TICKETNUMBER: state.ticket.id.toString()\r\n                    })\r\n                    if (!receipt) {\r\n                      generateReceipts(state.ticket)\r\n                    }\r\n                  }\r\n                }\r\n                tickets[ticketIndex].paymentRequest = state.invoice\r\n                store.dispatch(SAVE_TICKETS, {\r\n                  call: posCalls.value.tickets,\r\n                  data: tickets\r\n                })\r\n                const status = state.invoice.Status.toLowerCase()\r\n                state.invoiceStatus = status\r\n                if (status === 'paid' || status === 'underpaid' || status === 'expired') {\r\n                  state.timer = state.invoice.Status\r\n                  if (state.transactionInterval) {\r\n                    clearInterval(state.transactionInterval)\r\n                  }\r\n                  if (state.interval) {\r\n                    clearInterval(state.interval)\r\n                    state.timer = status\r\n                  }\r\n                  // Redirect\r\n                  if (state.ticket.status === 'paid') {\r\n                    return router.push({\r\n                      name: 'account-pos-invoice-success',\r\n                      params: { ticketId: state.ticket.ticketId }\r\n                    })\r\n                  } else if (state.ticket.status === 'waiting') {\r\n                    return router.push({ name: 'account-pos-tickets' })\r\n                  }\r\n                }\r\n                if (status === 'waiting' || status === 'awaiting-fiat') {\r\n                  startTimer()\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }).catch(error => {\r\n        state.isProcessing = false\r\n        console.log(error)\r\n      })\r\n    }\r\n    const startTimer = () => {\r\n      if (!state.timer) {\r\n        const date = moment.tz(state.invoice.CreatedOn, 'Atlantic/Azores')\r\n          .add(state.invoice.ExpiryTime, 'minutes')\r\n\r\n        state.interval = setInterval(() => {\r\n          const now = moment.tz('Atlantic/Azores').valueOf()\r\n          const diff = date.valueOf() - now\r\n          // Time calculations for days, hours, minutes and seconds\r\n          const days = Math.floor(diff / (1000 * 60 * 60 * 24))\r\n          const hours = Math.floor(\r\n            (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\r\n          )\r\n          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))\r\n          const seconds = Math.floor((diff % (1000 * 60)) / 1000)\r\n          state.timer = `${days}d ${hours}h ${minutes}m ${seconds}s`\r\n          if (diff < 0) {\r\n            clearInterval(state.interval)\r\n            state.timer = 'Expired'\r\n          }\r\n        }, 1000)\r\n      }\r\n    }\r\n    const extractOrderData = (transaction) => {\r\n      const decoded = decodeURIComponent(transaction.CustomerReferenceNr)\r\n      const elm = document.createElement('div')\r\n      elm.innerHTML = decoded\r\n      let items = elm.innerHTML.trim()\r\n      state.order = {\r\n        items: [],\r\n        shipping: null,\r\n        coupon: null\r\n      }\r\n      if (items) {\r\n        items = items.split(':::').filter(Boolean)\r\n        items.map(orderItem => {\r\n          orderItem = orderItem.split('|').filter(Boolean)\r\n          if (orderItem.length === 6) {\r\n            state.order.items.push({\r\n              id: orderItem[0],\r\n              sku: orderItem[1],\r\n              name: orderItem[2],\r\n              url: orderItem[3],\r\n              price: Number(orderItem[4]),\r\n              qty: Number(orderItem[5])\r\n            })\r\n          } else if (orderItem.length === 5) {\r\n            state.order.items.push({\r\n              id: orderItem[0],\r\n              name: orderItem[1],\r\n              url: orderItem[2],\r\n              price: Number(orderItem[3]),\r\n              qty: Number(orderItem[4])\r\n            })\r\n          } else if (orderItem.length === 2) {\r\n            state.order.shipping = {\r\n              method: orderItem[0],\r\n              cost: orderItem[1]\r\n            }\r\n          } else if (orderItem.length === 3) {\r\n            state.order.coupon = {\r\n              code: orderItem[0],\r\n              value: orderItem[1],\r\n              discount: orderItem[2]\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }\r\n    const generateReceipts = (ticket) => {\r\n      const posData = _.cloneDeep(pos.value)\r\n      // Generate receipt and receipt items\r\n      const receipts = posData.receipts\r\n      const receipt = {\r\n        ID: generateId(receipts),\r\n        CASHIER: ticket.cashier,\r\n        CURRENCY: ticket.inputCurrency,\r\n        DATE: new Date().getTime().toString(),\r\n        TRANSACTION_ID: ticket.paymentRequest.TransactionID.toString(),\r\n        TICKETNUMBER: ticket.ticketId.toString(),\r\n        TOTAL: `Total Price: ${ticket.paymentRequest.OriginalAmount}`\r\n      }\r\n      receipts.push(receipt)\r\n      store.dispatch(SAVE_RECEIPTS, {\r\n        call: posCalls.value.receipts,\r\n        data: receipts\r\n      })\r\n      const receiptItems = posData.receiptItems\r\n      ticket.ticketProducts.forEach(product => {\r\n        const receiptItem = {\r\n          ID: generateId(receiptItems),\r\n          ITEM_NAME: product.productName,\r\n          ITEM_PRICE: product.productPrice.toString(),\r\n          ITEM_SKU: product.productSku,\r\n          QUANTITY: product.productQuantity.toString(),\r\n          CURRENCY: product.currency,\r\n          RECIEPT_ID: receipt.ID,\r\n          DATE: new Date().getTime()\r\n        }\r\n        receiptItems.push(receiptItem)\r\n      })\r\n      store.dispatch(SAVE_RECEIPT_ITEMS, {\r\n        call: posCalls.value.receiptItems,\r\n        data: receiptItems\r\n      })\r\n    }\r\n    const formatStatus = (status) => {\r\n      status = status.toLowerCase()\r\n      if (status === 'complete') {\r\n        return 'paid'\r\n      } else if (status === 'failed') {\r\n        return 'waiting'\r\n      }\r\n    }\r\n    const initSocket = () => {\r\n      state.socket = new WebSocket('wss://wss.cointopay.com/transactions')\r\n      state.socket.onmessage = event => {\r\n        if (event && event.data) {\r\n          const parts = event.data.split(':')\r\n          if (state.invoice) {\r\n            const invoiceData = _.cloneDeep(state.invoice)\r\n            const posData = _.cloneDeep(pos.value)\r\n            const tickets = posData.tickets\r\n            if (parts[0] === 'TZERO') {\r\n              if (invoiceData && Number(invoiceData.TransactionID) === Number(parts[1])) {\r\n                const activeTicket = _.cloneDeep(state.ticket)\r\n                if (parts.length === 4) {\r\n                  // not enough balance\r\n                  activeTicket.status = 'waiting'\r\n                  activeTicket.paymentRequest = null\r\n                } else {\r\n                  if (activeTicket && activeTicket.status.toLowerCase() === 'inprogress') {\r\n                    activeTicket.status = formatStatus(parts[2])\r\n                    if (activeTicket.status === 'waiting') {\r\n                      activeTicket.paymentRequest = null\r\n                    } else if (activeTicket.status === 'paid') {\r\n                      activeTicket.isActive = false\r\n                      generateReceipts(activeTicket)\r\n                    }\r\n                  }\r\n                }\r\n                const ticketIndex = _.findIndex(tickets, ticket => {\r\n                  if (ticket.paymentRequest) {\r\n                    return ticket.paymentRequest.Security === state.invoice.Security\r\n                  }\r\n                })\r\n                if (ticketIndex !== -1) {\r\n                  if (state.interval) {\r\n                    clearInterval(state.interval)\r\n                  }\r\n                  state.invoiceStatus = invoiceData.Status\r\n                  posData.tickets.splice(ticketIndex, 1, activeTicket)\r\n                  store.dispatch(SAVE_TICKETS, {\r\n                    call: posCalls.value.tickets,\r\n                    data: posData.tickets\r\n                  })\r\n                  if (activeTicket.status === 'paid') {\r\n                    return router.push({\r\n                      name: 'account-pos-invoice-success',\r\n                      params: { ticketId: activeTicket.ticketId }\r\n                    })\r\n                  } else if (activeTicket.status === 'waiting') {\r\n                    return router.push({ name: 'account-pos-tickets' })\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      state.socket.onclose = event => {\r\n        if (!state.isCloseSocket) {\r\n          initSocket()\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      if (route.params.confirmCode) {\r\n        fetchTransaction(route.params.confirmCode)\r\n        initSocket()\r\n      }\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      if (state.interval) {\r\n        clearInterval(state.interval)\r\n      }\r\n      if (state.transactionInterval) {\r\n        clearInterval(state.transactionInterval)\r\n      }\r\n      state.isCloseSocket = true\r\n      state.socket.close()\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      cryptoLink,\r\n      copyToClipboard,\r\n      qrOptions,\r\n      currency,\r\n      formatPrice,\r\n      cartTotal,\r\n      isInvoiceComplete\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./Invoice.vue?vue&type=template&id=36aad186\"\nimport script from \"./Invoice.vue?vue&type=script&lang=js\"\nexport * from \"./Invoice.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"p-2 w-full mx-auto\">\r\n    <div class=\"animate-pulse\">\r\n      <div class=\"flex-1 space-y-3 py-1\">\r\n        <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded\"></div>\r\n        <div class=\"space-y-3\">\r\n          <div class=\"grid grid-cols-3 gap-4\">\r\n            <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2\"></div>\r\n            <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1\"></div>\r\n          </div>\r\n          <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"p-2 w-full mx-auto\">\r\n    <div class=\"animate-pulse\">\r\n      <div class=\"flex-1 space-y-3 py-1\">\r\n        <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded\"></div>\r\n        <div class=\"space-y-3\">\r\n          <div class=\"grid grid-cols-3 gap-4\">\r\n            <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1\"></div>\r\n            <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2\"></div>\r\n          </div>\r\n          <div class=\"h-2 bg-gray-200 dark:bg-gray-500 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PulseSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./PulseSkeleton.vue?vue&type=template&id=3485e4e1\"\nimport script from \"./PulseSkeleton.vue?vue&type=script&lang=js\"\nexport * from \"./PulseSkeleton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}