"use strict";(self["webpackChunkcointopay"]=self["webpackChunkcointopay"]||[]).push([[149],{9069:function(e,t,o){o.d(t,{Z:function(){return l}});var n=o(821);const a=(0,n.createStaticVNode)('<div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div><div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div>',2);function r(e,t,o,n,r,i){return a}var i={name:"PulseSkeleton"},c=o(3744);const s=(0,c.Z)(i,[["render",r]]);var l=s},784:function(e,t,o){o.d(t,{Z:function(){return p}});var n=o(821);const a={class:"p-4"},r={class:"max-w-7xl 3xl:max-w-8xl mx-auto"},i={class:"flex flex-col md:flex-row space-x-0 md:space-x-4"},c={class:"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4",style:{"min-height":"calc(100vh - 351px)"}};function s(e,t,o,s,l,d){return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",c,[(0,n.renderSlot)(e.$slots,"default")])])])])}var l={name:"CenteredLayout"},d=o(3744);const m=(0,d.Z)(l,[["render",s]]);var p=m},2887:function(e,t,o){o.r(t),o.d(t,{default:function(){return Zo}});var n=o(821);const a=e=>((0,n.pushScopeId)("data-v-0f41bacc"),e=e(),(0,n.popScopeId)(),e),r={class:"grid grid-cols-3 gap-0 md:gap-4"},i={key:0,class:"col-span-3"},c=a((()=>(0,n.createElementVNode)("img",{alt:"",src:"https://s3-eu-west-1.amazonaws.com/cointopay/pics/wojak.png",class:"mx-auto",style:{"max-width":"100%"}},null,-1))),s=[c],l={class:"col-span-3 md:col-span-2"},d={class:"text-sm md:text-base whitespace-nowrap mb-4 md:mb-0 scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},m={class:"flex items-center justify-between mb-4"},p={class:"flex items-center"},u={key:0},v=["src"],g=(0,n.createTextVNode)(),h={class:"font-semibold text-xl"},f={key:1},y=["src"],k=(0,n.createTextVNode)(),w={class:"font-semibold text-xl"},E={class:"mb-4"},C={class:"grid grid-cols-5 gap-0.5 md:gap-4"},V={class:"col-span-5 md:col-span-2"},N={class:"col-span-5 md:col-span-3 font-semibold"},x={class:"grid grid-cols-5 gap-0.5 md:gap-4"},b={class:"col-span-5 md:col-span-2"},B={class:"col-span-5 md:col-span-3 font-semibold"},A={class:"flex items-center"},I={key:0},D={key:1},S=a((()=>(0,n.createElementVNode)("span",{class:"inline-block mx-2"},"-",-1))),M={key:0,class:"mr-3"},O=a((()=>(0,n.createElementVNode)("span",null,"Recheck balance",-1))),j={key:0,class:"text-red-500 grid grid-cols-5 gap-0.5 md:gap-4"},R=a((()=>(0,n.createElementVNode)("div",{class:"col-span-5 md:col-span-2"},"Missing amount",-1))),T={class:"col-span-5 md:col-span-3 font-semibold"},P={class:"grid grid-cols-5 gap-0.5 md:gap-4"},L={class:"col-span-5 md:col-span-2"},F={class:"col-span-5 md:col-span-3 font-semibold"},U={class:"flex items-center"},q=["href"],K={class:"grid grid-cols-5 gap-0.5 md:gap-4"},Y=a((()=>(0,n.createElementVNode)("div",{class:"col-span-5 md:col-span-2"},"Master Transaction ID",-1))),Q={class:"col-span-5 md:col-span-3 font-semibold"},H={class:"grid grid-cols-5 gap-0.5 md:gap-4"},Z={class:"col-span-5 md:col-span-2"},X={class:"col-span-5 md:col-span-3 font-semibold"},G={class:"grid grid-cols-5 gap-0.5 md:gap-4"},W={class:"col-span-5 md:col-span-2"},J={class:"col-span-5 md:col-span-3 font-semibold"},z={class:"grid grid-cols-5 gap-0.5 md:gap-4"},$={class:"col-span-5 md:col-span-2"},_={class:"col-span-5 md:col-span-3 font-semibold"},ee=["innerHTML"],te={key:0,class:"grid grid-cols-5 gap-0.5 md:gap-4"},oe={class:"col-span-5 md:col-span-2"},ne={class:"col-span-5 md:col-span-3 font-semibold"},ae={class:"grid grid-cols-5 gap-0.5 md:gap-4"},re={class:"col-span-5 md:col-span-2"},ie={class:"col-span-5 md:col-span-3 font-semibold"},ce={class:"mt-4 flex items-center justify-center"},se={class:"text-center"},le={class:"mb-4"},de={class:"flex items-center justify-center"},me={class:"text-2xl font-bold text-blue-500 text-center capitalize"},pe=["href"],ue=a((()=>(0,n.createElementVNode)("span",{class:"mr-2"},"Click to Redirect",-1))),ve={key:0},ge={key:1,class:"flex items-center justify-center mt-3"},he={class:"cursor-pointer text-red-500 mr-4 animate-pulse"},fe={key:2,class:"mt-4"},ye={class:"flex flex-wrap justify-center items-stretch w-full mb-4 relative"},ke={class:"flex -mr-px"},we={key:3,class:"flex items-center justify-center"},Ee=["href"],Ce={class:"text-center"},Ve={class:"mb-4"},Ne={class:"flex items-center justify-center"},xe={class:"text-2xl font-bold text-blue-500 text-center capitalize"},be=["href"],Be=a((()=>(0,n.createElementVNode)("span",{class:"mr-2"},"Click to Redirect",-1))),Ae={key:0,class:"mb-3"},Ie=["href"],De=a((()=>(0,n.createElementVNode)("img",{class:"h-16",src:"https://s3-eu-west-1.amazonaws.com/cointopay/img/cointopay_checkout.png",alt:""},null,-1))),Se=[De],Me={class:"text-center"},Oe={class:"mb-4"},je={class:"flex items-center justify-center"},Re={class:"text-2xl font-bold text-blue-500 text-center capitalize"},Te=["href"],Pe=a((()=>(0,n.createElementVNode)("span",{class:"mr-2"},"Click to Redirect",-1))),Le={key:0},Fe=["innerHTML"],Ue=["href"],qe={class:"grid grid-cols-2 gap-0 md:gap-4"},Ke={class:"col-span-2 md:col-span-1"},Ye={key:0,class:"card"},Qe={class:"text-center body"},He={class:"col-span-2 md:col-span-1"},Ze={key:0,class:"card"},Xe={class:"body text-center"},Ge=["href"],We={class:"col-span-3 md:col-span-1"},Je={key:0,class:"card"},ze={class:"title"},$e={class:"flex items-center justify-between"},_e=a((()=>(0,n.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1))),et={class:"body"},tt={class:"mb-4 flex items-center justify-between flex-col"},ot={class:"flex flex-wrap items-stretch w-full mb-4 relative"},nt={class:"flex -mr-px"},at={class:"text-center text-red-500"};function rt(e,t,o,a,c,De){const rt=(0,n.resolveComponent)("icon"),it=(0,n.resolveComponent)("j-button"),ct=(0,n.resolveComponent)("status-icon"),st=(0,n.resolveComponent)("QRCodeVue3"),lt=(0,n.resolveComponent)("refund-invoice"),dt=(0,n.resolveComponent)("Tab"),mt=(0,n.resolveComponent)("TabSet"),pt=(0,n.resolveComponent)("forward-invoice"),ut=(0,n.resolveComponent)("pulse-skeleton"),vt=(0,n.resolveComponent)("centered-layout"),gt=(0,n.resolveComponent)("pay-with-different-currency-modal"),ht=(0,n.resolveComponent)("payment-notification-modal"),ft=(0,n.resolveComponent)("redirect-timer-modal"),yt=(0,n.resolveDirective)("tippy");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(vt,null,{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",r,[e.loader||e.invoice?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",i,s)),(0,n.createElementVNode)("div",l,["main"!==e.loader&&e.invoice?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("div",p,[e.isSimpleView?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[(0,n.createElementVNode)("img",{src:a.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,v),g,(0,n.createElementVNode)("h2",h,(0,n.toDisplayString)(`${a.translate("invoice.invoice")} #${e.invoice.TransactionID}`),1)])):((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[(0,n.createElementVNode)("img",{src:a.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,y),k,(0,n.createElementVNode)("h2",w,(0,n.toDisplayString)(`${a.translate("invoice.invoice")} #${e.invoice.TransactionID}`),1)]))]),(0,n.createElementVNode)("span",{class:"cursor-pointer hover:text-blue-500",onClick:t[0]||(t[0]=t=>e.isShowUrl=!e.isShowUrl)},[(0,n.createVNode)(rt,{name:"qr-code"})])]),(0,n.createElementVNode)("div",E,[(0,n.createElementVNode)("div",C,[(0,n.createElementVNode)("div",V,(0,n.toDisplayString)(a.translate("invoice.merchant")),1),(0,n.createElementVNode)("div",N,(0,n.toDisplayString)(e.invoice.ShopTitle),1)]),(0,n.createElementVNode)("div",x,[(0,n.createElementVNode)("div",b,(0,n.toDisplayString)(a.translate("invoice.amount")),1),(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("div",A,[e.isSimpleView?((0,n.openBlock)(),(0,n.createElementBlock)("div",I,(0,n.toDisplayString)(`${e.invoice.Amount} ${e.invoice.LongName}`),1)):((0,n.openBlock)(),(0,n.createElementBlock)("div",D,[(0,n.createTextVNode)((0,n.toDisplayString)(`${e.invoice.Amount} ${e.invoice.LongName} `)+" ",1),S,(0,n.createTextVNode)(" "+(0,n.toDisplayString)(` ${e.invoice.OriginalAmount} ${a.inputCurrency}`),1)])),a.isWaiting||1!==e.invoice.Reopenable||1!==e.invoice.NotEnough?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(it,{key:2,disabled:"reOpenInvoice"===e.loader,class:"ml-3",onClick:t[1]||(t[1]=e=>a.reOpenInvoice())},{default:(0,n.withCtx)((()=>["reOpenInvoice"===e.loader?((0,n.openBlock)(),(0,n.createElementBlock)("div",M,[(0,n.createVNode)(rt,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),O])),_:1},8,["disabled"])),[[yt,"Please pay the missing amount, once confirmed, click the recheck balance button. Thanks."]])])])]),"underpaid"===e.invoice.Status.toLowerCase()?((0,n.openBlock)(),(0,n.createElementBlock)("div",j,[R,(0,n.createElementVNode)("div",T,(0,n.toDisplayString)(`${a.toFixed(e.invoice.InitialAmount-e.invoice.Amount)} ${a.inputCurrency}`),1)])):(0,n.createCommentVNode)("",!0),e.isSimpleView?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createElementVNode)("div",P,[(0,n.createElementVNode)("div",L,(0,n.toDisplayString)(a.translate("invoice.fee")),1),(0,n.createElementVNode)("div",F,[(0,n.createElementVNode)("div",U,[(0,n.createElementVNode)("span",null,"Service % + Fixed Network "+(0,n.toDisplayString)(e.invoice.MinerFee)+" "+(0,n.toDisplayString)(e.invoice.LongName),1),(0,n.createElementVNode)("a",{class:"ml-3",href:e.termsLink,target:"_blank"},[(0,n.createVNode)(rt,{name:"question-mark",classes:"w-5 h-5 text-yellow-500 dark:text-yellow-400"})],8,q)])])]),(0,n.createElementVNode)("div",K,[Y,(0,n.createElementVNode)("div",Q,(0,n.toDisplayString)(e.invoice.MasterTransactionID),1)]),(0,n.createElementVNode)("div",H,[(0,n.createElementVNode)("div",Z,(0,n.toDisplayString)(a.translate("invoice.transaction_id")),1),(0,n.createElementVNode)("div",X,(0,n.toDisplayString)(e.invoice.TransactionID),1)]),(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",W,(0,n.toDisplayString)(a.translate("invoice.status")),1),(0,n.createElementVNode)("div",J,(0,n.toDisplayString)(e.invoice.Status),1)])],64)),(0,n.createElementVNode)("div",z,[(0,n.createElementVNode)("div",$,(0,n.toDisplayString)(a.translate("invoice.reference")),1),(0,n.createElementVNode)("div",_,[(0,n.createElementVNode)("div",{class:"break-all whitespace-normal",innerHTML:e.invoice.CustomerReferenceNr},null,8,ee)])]),e.isSimpleView?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:2},[a.reOpenable?((0,n.openBlock)(),(0,n.createElementBlock)("div",te,[(0,n.createElementVNode)("div",oe,(0,n.toDisplayString)(a.translate("invoice.address")),1),(0,n.createElementVNode)("div",ne,(0,n.toDisplayString)(e.invoice.coinAddress),1)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",ae,[(0,n.createElementVNode)("div",re,(0,n.toDisplayString)(a.translate("invoice.created_on")),1),(0,n.createElementVNode)("div",ie,(0,n.toDisplayString)(a.formatDT(e.invoice.CreatedOn)),1)])],64)),(0,n.createElementVNode)("div",ce,[(0,n.createElementVNode)("span",{onClick:t[2]||(t[2]=t=>e.isSimpleView=!e.isSimpleView),class:(0,n.normalizeClass)(["cursor-pointer mx-auto inline-block transform transition-transform",{"rotate-180":!e.isSimpleView}])},[(0,n.createVNode)(rt,{name:"chevron-double",classes:"w-5 h-5"})],2)])])]),(0,n.createVNode)(mt,null,{default:(0,n.withCtx)((()=>[a.isPaymentMethodAvailable("crypto")?((0,n.openBlock)(),(0,n.createBlock)(dt,{key:0,name:a.translate("invoice.crypto"),selected:null===e.isFiat||0===e.isFiat||a.isOnlyPaymentMethod("crypto")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",se,[(0,n.createElementVNode)("div",le,[(0,n.createElementVNode)("div",de,[(0,n.createVNode)(ct,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("p",me,(0,n.toDisplayString)(e.timer),1)]),a.isPaid||a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center animate-pulse text-2xl text-blue-500 font-bold"},[ue,(0,n.createVNode)(rt,{name:"arrow-right",classes:"w-5 h-5"})],8,pe)):(0,n.createCommentVNode)("",!0)]),a.isPaid||a.isExpired?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",ve,[(0,n.createVNode)(st,{imgclass:"mx-auto",width:a.qrOptions.width,height:a.qrOptions.height,"qr-options":a.qrOptions.qrOptions,"background-options":a.qrOptions.backgroundOptions,"dots-options":a.qrOptions.dotsOptions,"corners-dot-options":a.qrOptions.cornersDotOptions,"corners-square-options":a.qrOptions.cornersSquareOptions,value:e.isCryptoLink?e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress+"?amount="+e.invoice.Amount:e.invoice.coinAddress},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),e.invoice.Tag?((0,n.openBlock)(),(0,n.createElementBlock)("div",ge,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",he,[(0,n.createVNode)(rt,{name:"exclamation-circle"})])),[[yt,"Please use this Memo/Tag, otherwise you risk losing your funds."]]),(0,n.createElementVNode)("span",null,"Memo/Tag: "+(0,n.toDisplayString)(e.invoice.Tag),1)])):(0,n.createCommentVNode)("",!0),"none"!==e.invoice.coinAddress?((0,n.openBlock)(),(0,n.createElementBlock)("div",fe,[(0,n.createElementVNode)("div",ye,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.invoice.coinAddress=t),readonly:"",class:"form-input flex-1 md:flex-none md:w-2/3 rounded-r-none"},null,512),[[n.vModelText,e.invoice.coinAddress]]),(0,n.createElementVNode)("div",ke,[(0,n.createElementVNode)("span",{onClick:t[4]||(t[4]=t=>a.copyToClipboard(decodeURIComponent(e.invoice.coinAddress))),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[(0,n.createVNode)(rt,{name:"clipboard",classes:"w-5 h-5"})])])])])):(0,n.createCommentVNode)("",!0),a.isPaid||a.isExpired?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",we,[(0,n.createVNode)(it,{class:"mr-3",onClick:t[5]||(t[5]=t=>e.isCryptoLink=!e.isCryptoLink)},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.isCryptoLink?a.translate("invoice.full_crypto_link"):a.translate("invoice.address_only")),1)])),_:1}),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(it,{disabled:!e.isRefreshable,onClick:t[6]||(t[6]=e=>a.refreshTransaction())},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(rt,{name:"refresh",classes:"w-4 h-4"})])),_:1},8,["disabled"])),[[yt,"Refresh"]])])),a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:4,class:"text-blue-500 hover:underline",href:a.renewTransaction()},"Pay anyway? Click here",8,Ee)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(lt,{invoice:e.invoice},null,8,["invoice"])])])),_:1},8,["name","selected"])):(0,n.createCommentVNode)("",!0),a.isPaymentMethodAvailable("instant")?((0,n.openBlock)(),(0,n.createBlock)(dt,{key:1,name:a.translate("invoice.tzero"),selected:a.isOnlyPaymentMethod("instant")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Ce,[(0,n.createElementVNode)("div",Ve,[(0,n.createElementVNode)("div",Ne,[(0,n.createVNode)(ct,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("p",xe,(0,n.toDisplayString)(e.timer),1)]),a.isPaid||a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[Be,(0,n.createVNode)(rt,{name:"arrow-right",classes:"w-5 h-5"})],8,be)):(0,n.createCommentVNode)("",!0)]),a.isPaid||a.isExpired?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ae,[(0,n.createVNode)(st,{imgclass:"mx-auto",width:a.qrOptions.width,height:a.qrOptions.height,"qr-options":a.qrOptions.qrOptions,"background-options":a.qrOptions.backgroundOptions,"dots-options":a.qrOptions.dotsOptions,"corners-dot-options":a.qrOptions.cornersDotOptions,"corners-square-options":a.qrOptions.cornersSquareOptions,value:e.invoice.TZERO},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:1,class:"text-blue-500 hover:underline",href:a.renewTransaction()},"Pay anyway? Click here",8,Ie)):(0,n.createCommentVNode)("",!0),a.isLoggedIn&&a.isWaiting?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:2,class:"mx-auto inline-block cursor-pointer",onClick:t[7]||(t[7]=e=>a.payViaTZERO())},Se)):(0,n.createCommentVNode)("",!0)])])),_:1},8,["name","selected"])):(0,n.createCommentVNode)("",!0),a.isPaymentMethodAvailable("fiat",e.isFiat)?((0,n.openBlock)(),(0,n.createBlock)(dt,{key:2,name:a.translate("invoice.fiat"),selected:1===e.isFiat||a.isOnlyPaymentMethod("fiat")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Me,[(0,n.createElementVNode)("div",Oe,[(0,n.createElementVNode)("div",je,[(0,n.createVNode)(ct,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("p",Re,(0,n.toDisplayString)(e.timer),1)]),a.isPaid||a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[Pe,(0,n.createVNode)(rt,{name:"arrow-right",classes:"w-5 h-5"})],8,Te)):(0,n.createCommentVNode)("",!0)]),a.isPaid||a.isExpired||!e.invoice.PaymentDetail?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Le,[(0,n.createElementVNode)("div",{class:"content-center",innerHTML:e.invoice.PaymentDetail},null,8,Fe)])),a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:1,class:"text-blue-500 hover:underline",href:a.renewTransaction()},"Pay anyway? Click here",8,Ue)):(0,n.createCommentVNode)("",!0)])])),_:1},8,["name","selected"])):(0,n.createCommentVNode)("",!0)])),_:1}),(0,n.createVNode)(pt,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("div",qe,[(0,n.createElementVNode)("div",Ke,[a.isActive&&e.invoice.inputCurrency&&0===e.invoice.LTR&&(null===e.isFiat||0===e.isFiat)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ye,[(0,n.createElementVNode)("div",Qe,[(0,n.createVNode)(it,{onClick:t[8]||(t[8]=e=>a.launchPayWithOtherCurrencyModal())},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(a.translate("invoice.pay_with_different_currency")),1)])),_:1})])])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",He,[a.isWaiting?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ze,[(0,n.createElementVNode)("div",Xe,[(0,n.createElementVNode)("a",{href:a.generateCancelLink,class:"btn btn-warning"},"Cancel",8,Ge)])])):(0,n.createCommentVNode)("",!0)])])],64)):(0,n.createCommentVNode)("",!0),"main"===e.loader?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createVNode)(ut),(0,n.createVNode)(ut)],64)):(0,n.createCommentVNode)("",!0)]),(0,n.withDirectives)((0,n.createElementVNode)("div",We,["main"!==e.loader?((0,n.openBlock)(),(0,n.createElementBlock)("div",Je,[(0,n.createElementVNode)("div",ze,[(0,n.createElementVNode)("div",$e,[(0,n.createElementVNode)("h5",null,(0,n.toDisplayString)(a.translate("invoice.invoice_url")),1),(0,n.createElementVNode)("span",{onClick:t[9]||(t[9]=t=>e.isShowUrl=!1),class:"cursor-pointer"},[(0,n.createVNode)(rt,{name:"close"})])])]),_e,(0,n.createElementVNode)("div",et,[(0,n.createElementVNode)("div",tt,[(0,n.createVNode)(st,{imgclass:"mb-3",width:a.qrOptions.width,height:a.qrOptions.height,"qr-options":a.qrOptions.qrOptions,"background-options":a.qrOptions.backgroundOptions,"dots-options":a.qrOptions.dotsOptions,"corners-dot-options":a.qrOptions.cornersDotOptions,"corners-square-options":a.qrOptions.cornersSquareOptions,value:e.invoiceUrl},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"]),(0,n.createElementVNode)("div",ot,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.invoiceUrl=t),readonly:"",class:"form-input flex-1 rounded-r-none"},null,512),[[n.vModelText,e.invoiceUrl]]),(0,n.createElementVNode)("div",nt,[(0,n.createElementVNode)("span",{onClick:t[11]||(t[11]=t=>a.copyToClipboard(e.invoiceUrl)),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[(0,n.createVNode)(rt,{name:"clipboard",classes:"w-5 h-5"})])])]),(0,n.createElementVNode)("p",at,(0,n.toDisplayString)(a.translate("invoice.warning")),1)])])])):(0,n.createCommentVNode)("",!0),"main"===e.loader?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createVNode)(ut),(0,n.createVNode)(ut)],64)):(0,n.createCommentVNode)("",!0)],512),[[n.vShow,e.isShowUrl]])])])),_:1}),(0,n.createVNode)(gt),(0,n.createVNode)(ht),(0,n.createVNode)(ft)],64)}var it=o(784),ct=o(2215),st=o.n(ct),lt=o(3164),dt=o(1322),mt=o(7304),pt=o(9069);const ut={class:"card"},vt={class:"body"},gt={class:"flex items-center flex-col md:flex-row"},ht={class:"w-full md:flex-1 mr-0 md:mr-3"},ft={key:0,class:"text-right mb-1"},yt={class:"text-red-500 text-sm"},kt={class:"mt-3 md:mt-0"},wt={key:0,class:"mb-1 block"},Et={key:0,class:"mr-3"};function Ct(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("j-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ut,[(0,n.createElementVNode)("div",vt,[(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)((e=>a.submit()),["prevent"]))},[(0,n.createElementVNode)("div",gt,[(0,n.createElementVNode)("div",ht,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("div",ft,[(0,n.createElementVNode)("div",yt,(0,n.toDisplayString)(a.showError(e.errorBag,"email")),1)])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[n.vModelText,e.form.email]])]),(0,n.createElementVNode)("div",kt,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("label",wt," ")):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(s,{disabled:e.isProcessing},{default:(0,n.withCtx)((()=>[e.isProcessing?((0,n.openBlock)(),(0,n.createElementBlock)("div",Et,[(0,n.createVNode)(c,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.translate("invoice.forward_invoice")),1)])),_:1},8,["disabled"])])])],32)])])}var Vt=o(7983),Nt=o(6232),xt=o(4729),bt={name:"ForwardInvoice",props:["invoice"],components:{JButton:lt.Z,Icon:Vt.Z},setup(e){const t=(0,n.inject)("translate"),o=(0,n.inject)("http"),a=(0,n.inject)("toast"),{showError:r,validate:i}=(0,Nt.Z)(),{saveNotification:c}=(0,xt.Z)(),s=(0,n.reactive)({form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),l=(0,n.computed)((()=>Object.keys(s.errorBag).length>0));(0,n.watch)((()=>({...s.form})),(()=>{Object.keys(s.errorBag).length>0&&(s.errorBag=i(s.form,s.rules))}));const d="https://app.cointopay.com",m=()=>{s.errorBag=i(s.form,s.rules),0===Object.keys(s.errorBag).length&&(s.isProcessing=!0,o.get(`${d}/InvoiceForwarder`,{params:{invoiceAddress:s.form.email,target:!1,shop:e.invoice.ShopTitle,TransactionID:e.invoice.TransactionID,coinAddress:e.invoice.coinAddress,qrcode:e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress,amount:e.invoice.Amount,output:"json"}}).then((e=>{s.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(s.form.email="",s.errorBag={},a.success("Invoice sent successfully"),c("Invoice sent successfully"))})).catch((e=>{s.isProcessing=!1,console.log(e)})))};return{translate:t,...(0,n.toRefs)(s),showError:r,hasErrors:l,submit:m}}},Bt=o(3744);const At=(0,Bt.Z)(bt,[["render",Ct]]);var It=At;const Dt={class:"mt-4"},St={class:"flex items-center flex-col md:flex-row"},Mt={class:"w-full md:flex-1 mr-0 md:mr-3"},Ot={key:0,class:"text-right mb-1"},jt={class:"text-red-500 text-sm"},Rt={class:"mt-3 md:mt-0"},Tt={key:0,class:"mb-1 block"},Pt={key:0,class:"mr-3"};function Lt(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("j-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Dt,[(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)((e=>a.submit()),["prevent"]))},[(0,n.createElementVNode)("div",St,[(0,n.createElementVNode)("div",Mt,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ot,[(0,n.createElementVNode)("div",jt,(0,n.toDisplayString)(a.showError(e.errorBag,"address")),1)])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.address=t),class:"form-input w-full",placeholder:"Refund address (crypto/coin address)",type:"text"},null,512),[[n.vModelText,e.form.address]])]),(0,n.createElementVNode)("div",Rt,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("label",Tt," ")):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(s,{disabled:e.isProcessing},{default:(0,n.withCtx)((()=>[e.isProcessing?((0,n.openBlock)(),(0,n.createElementBlock)("div",Pt,[(0,n.createVNode)(c,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.translate("invoice.add")),1)])),_:1},8,["disabled"])])])],32)])}var Ft={name:"RefundInvoice",props:["invoice"],components:{JButton:lt.Z,Icon:Vt.Z},setup(e){const t=(0,n.inject)("translate"),o=(0,n.inject)("http"),a=(0,n.inject)("toast"),{showError:r,validate:i}=(0,Nt.Z)(),{saveNotification:c}=(0,xt.Z)(),s=(0,n.reactive)({form:{address:""},errorBag:{},rules:{address:["required"]},isProcessing:!1}),l=(0,n.computed)((()=>Object.keys(s.errorBag).length>0));(0,n.watch)((()=>({...s.form})),(()=>{Object.keys(s.errorBag).length>0&&(s.errorBag=i(s.form,s.rules))}));const d="https://app.cointopay.com",m=()=>{if(s.errorBag=i(s.form,s.rules),0===Object.keys(s.errorBag).length){s.isProcessing=!0;const t={Call:"Refund",MerchantID:1,APIKey:"_",RefundAddress:s.form.address,ConfirmCode:e.invoice.Security,output:"json"};o.get(`${d}/v2REAPI`,{params:t}).then((e=>{s.isProcessing=!1,"success"===e.data.result?(a.success("Refund address added successfully"),c("Refund address added successfully")):a.error(e.data.message),s.form.address="",s.errorBag={}})).catch((e=>{s.isProcessing=!1,console.log(e)}))}};return{translate:t,...(0,n.toRefs)(s),showError:r,hasErrors:l,submit:m}}};const Ut=(0,Bt.Z)(Ft,[["render",Lt]]);var qt=Ut;const Kt={class:"flex items-center justify-between"},Yt=(0,n.createElementVNode)("span",null,"Pay with different currency",-1),Qt={class:"relative flex-1"},Ht={class:"flex flex-wrap justify-center gap-2 mt-4"},Zt=["href"],Xt=["src"],Gt={class:"text-xs font-semibold"};function Wt(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("modal");return(0,n.openBlock)(),(0,n.createBlock)(s,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=e=>a.closeModal())},{title:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Kt,[Yt,(0,n.createElementVNode)("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[(0,n.createVNode)(c,{name:"close"})])])])),content:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Qt,[(0,n.createVNode)(c,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.keyword=t),"aria-label":"Search...",class:"form-input px-10 w-full",type:"text"},null,512),[[n.vModelText,e.keyword]]),""!==e.keyword?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[2]||(t[2]=t=>e.keyword="")},[(0,n.createVNode)(c,{classes:"w-5 h-5",name:"close"})])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",Ht,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.coinsList,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"w-24 w-24 p-3 cursor-pointer text-center border-2 border-gray-300 dark:border-gray-500 hover:border-blue-700 dark:hover:border-blue-500 inline-block rounded-md shadow flex items-center justify-center flex-col",key:t},[(0,n.createElementVNode)("a",{href:a.generateUrl(e.id)},[(0,n.createElementVNode)("img",{class:"w-10 h-10 mb-2 mx-auto",src:a.generateIconUrl(e.name),alt:""},null,8,Xt),(0,n.createElementVNode)("p",Gt,(0,n.toDisplayString)(e.name),1)],8,Zt)])))),128))])])),_:1},8,["maxWidth","show"])}var Jt=o(9099),zt={name:"PayWithDifferentCurrencyModal",components:{Modal:Jt.Z,Icon:Vt.Z},setup(){const e=(0,n.inject)("translate"),t=(0,n.inject)("emitter"),{generateIconUrl:o}=(0,xt.Z)(),a=(0,n.reactive)({show:!1,maxWidth:"2xl",closeable:!0,keyword:"",coins:[],invoice:null}),r=(0,n.computed)((()=>a.coins.filter((e=>a.keyword&&""!==a.keyword?-1!==e.name.toLowerCase().indexOf(a.keyword.toLowerCase())&&0!==e.id&&e.id!==a.invoice.AltCoinID:0!==e.id&&e.id!==a.invoice.AltCoinID)))),i=()=>{a.show=!1},c=e=>`https://cointopay.com/CloneMasterTransaction?TargetAltCoinID=${e}&TransactionID=${a.invoice.TransactionID}&MerchantID=${a.invoice.MerchantID}`;return(0,n.onBeforeMount)((()=>{t.on("payWithDifferentCurrencyModal",(e=>{a.coins=e.coins,a.invoice=e.invoice,a.show=!0}))})),{translate:e,...(0,n.toRefs)(a),closeModal:i,coinsList:r,generateUrl:c,generateIconUrl:o}}};const $t=(0,Bt.Z)(zt,[["render",Wt]]);var _t=$t,eo="data:image/png;base64,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",to=o.p+"assets/img/warning.ffae9e3d.svg";const oo={class:"flex items-center justify-between"},no=(0,n.createElementVNode)("span",null,"Notification",-1),ao={key:0},ro={class:"text-center"},io={key:0,class:"w-36 mx-auto",src:eo,alt:""},co={key:1,class:"w-36 mx-auto",src:to,alt:""},so=(0,n.createElementVNode)("p",{class:"mb-2"},"Thank you for making the transfer with your preferred wallet.",-1),lo={key:0},mo={key:1},po=(0,n.createElementVNode)("p",null,"Please enter your email address to receive status update alerts.",-1),uo={class:"flex items-center flex-col md:flex-row mt-4"},vo={class:"w-full md:flex-1 mr-0 md:mr-3"},go={key:0,class:"text-right mb-1"},ho={class:"text-red-500 text-sm"},fo={class:"mt-3 md:mt-0"},yo={key:0,class:"mb-1 block"},ko={key:0,class:"mr-3"},wo=(0,n.createElementVNode)("span",null,"Receive Alerts",-1);function Eo(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("j-button"),l=(0,n.resolveComponent)("modal");return(0,n.openBlock)(),(0,n.createBlock)(l,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=e=>a.closeModal())},{title:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",oo,[no,(0,n.createElementVNode)("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[(0,n.createVNode)(c,{name:"close"})])])])),content:(0,n.withCtx)((()=>[e.invoice?((0,n.openBlock)(),(0,n.createElementBlock)("div",ao,[(0,n.createElementVNode)("div",ro,[e.isFullPayment?((0,n.openBlock)(),(0,n.createElementBlock)("img",io)):((0,n.openBlock)(),(0,n.createElementBlock)("img",co))]),so,e.isFullPayment?((0,n.openBlock)(),(0,n.createElementBlock)("p",lo,"The "+(0,n.toDisplayString)(e.invoice.LongName)+" blockchain can take some time to confirm your payment. Please enter your email address to receive status update alerts for #"+(0,n.toDisplayString)(e.invoice.TransactionID)+".",1)):(0,n.createCommentVNode)("",!0),e.isFullPayment?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("p",mo,"We received your payment, however it is not enough to fulfill the transaction, please make the additional payment of "+(0,n.toDisplayString)(e.amount)+" "+(0,n.toDisplayString)(e.invoice.LongName)+".",1)),po,(0,n.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,n.withModifiers)((e=>a.submit()),["prevent"]))},[(0,n.createElementVNode)("div",uo,[(0,n.createElementVNode)("div",vo,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("div",go,[(0,n.createElementVNode)("div",ho,(0,n.toDisplayString)(a.showError(e.errorBag,"email")),1)])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.email=t),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[n.vModelText,e.form.email]])]),(0,n.createElementVNode)("div",fo,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("label",yo," ")):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(s,{disabled:e.isProcessing},{default:(0,n.withCtx)((()=>[e.isProcessing?((0,n.openBlock)(),(0,n.createElementBlock)("div",ko,[(0,n.createVNode)(c,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),wo])),_:1},8,["disabled"])])])],32)])):(0,n.createCommentVNode)("",!0)])),_:1},8,["maxWidth","show"])}var Co={name:"PaymentNotificationModal",components:{Modal:Jt.Z,Icon:Vt.Z,JButton:lt.Z},setup(){const e=(0,n.inject)("translate"),t=(0,n.inject)("emitter"),o=(0,n.inject)("http"),a=(0,n.inject)("toast"),{saveNotification:r}=(0,xt.Z)(),{validate:i,showError:c}=(0,Nt.Z)(),s="https://app.cointopay.com",l=(0,n.reactive)({show:!1,maxWidth:"2xl",closeable:!0,invoice:null,isFullPayment:!0,amount:0,form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),d=(0,n.computed)((()=>Object.keys(l.errorBag).length>0));(0,n.watch)((()=>({...l.form})),(()=>{Object.keys(l.errorBag).length>0&&(l.errorBag=i(l.form,l.rules))}));const m=()=>{l.show=!1},p=()=>{l.errorBag=i(l.form,l.rules),0===Object.keys(l.errorBag).length&&(l.isProcessing=!0,o.get(`${s}/InvoiceForwarder`,{params:{invoiceAddress:l.form.email,target:!1,shop:l.invoice.ShopTitle,TransactionID:l.invoice.TransactionID,coinAddress:l.invoice.coinAddress,qrcode:l.invoice.CoinName.toLowerCase()+":"+l.invoice.coinAddress,amount:l.invoice.Amount,output:"json"}}).then((e=>{l.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(l.form.email="",l.errorBag={},a.success("Subscribed to alerts successfully"),r("Subscribed to alerts successfully"),m())})).catch((e=>{l.isProcessing=!1,console.log(e)})))};return(0,n.onBeforeMount)((()=>{t.on("paymentNotificationModal",(e=>{e.close&&!0===e.close?l.show=!1:(l.invoice=e.invoice,l.isFullPayment=e.isFullPayment,l.amount=e.amount,l.form={email:""},l.errorBag={},l.show=!0)}))})),{translate:e,...(0,n.toRefs)(l),hasErrors:d,showError:c,closeModal:m,submit:p}}};const Vo=(0,Bt.Z)(Co,[["render",Eo]]);var No=Vo;const xo={class:"text-center"},bo=(0,n.createElementVNode)("img",{class:"w-32 mx-auto",src:eo,alt:""},null,-1),Bo={class:"text-2xl font-semibold text-green-700 dark:text-green-500 text-center mb-3"},Ao=["href"],Io=(0,n.createElementVNode)("span",{class:"mr-2"},"Click here to Redirect",-1);function Do(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("modal");return(0,n.openBlock)(),(0,n.createBlock)(s,{maxWidth:e.maxWidth,header:!1,show:e.show,onClose:t[0]||(t[0]=e=>a.closeModal())},{content:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",xo,[bo,(0,n.createElementVNode)("p",Bo,"Redirecting in "+(0,n.toDisplayString)(e.counter),1),(0,n.createElementVNode)("a",{href:e.invoice.RedirectTargetURL,class:"text-blue-500 hover:underline inline-flex items-center"},[Io,(0,n.createVNode)(c,{name:"arrow-right",classes:"w-5 h-5"})],8,Ao)])])),_:1},8,["maxWidth","show"])}var So={name:"RedirectTimerModal",components:{Modal:Jt.Z,Icon:Vt.Z},setup(){const e=(0,n.inject)("emitter"),t=(0,n.reactive)({show:!1,maxWidth:"sm",closeable:!0,invoice:null,interval:null,timer:null,counter:0}),o=()=>{t.show=!1,t.interval&&clearInterval(t.interval),t.interval=null};return(0,n.onBeforeMount)((()=>{e.on("redirectTimerModal",(e=>{t.invoice=e.invoice,t.counter=20,t.interval=setInterval((()=>{t.counter--,0===t.counter&&(clearInterval(t.interval),window.location.href=t.invoice.RedirectTargetURL)}),1e3),t.show=!0}))})),{...(0,n.toRefs)(t),closeModal:o}}};const Mo=(0,Bt.Z)(So,[["render",Do]]);var Oo=Mo;function jo(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,["waiting"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,name:"spinner",classes:"w-6 h-6 mr-3 text-blue-500"})):(0,n.createCommentVNode)("",!0),"paid"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:1,name:"check-circle",classes:"w-8 h-8 mr-3 text-green-500"})):(0,n.createCommentVNode)("",!0),"underpaid"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:2,name:"check-circle",classes:"w-8 h-8 mr-3 text-yellow-500"})):(0,n.createCommentVNode)("",!0),"expired"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:3,name:"x-circle",classes:"w-8 h-8 mr-3 text-red-500"})):(0,n.createCommentVNode)("",!0)],64)}var Ro={name:"StatusIcon",props:["invoice"],components:{Icon:Vt.Z},setup(e){const t=(0,n.computed)((()=>e.invoice&&e.invoice.Status.toLowerCase()));return{status:t}}};const To=(0,Bt.Z)(Ro,[["render",jo]]);var Po=To,Lo=o(2119),Fo=o(8637),Uo=o(9783),qo=o(9414),Ko=o(6486);const Yo=o(1798);var Qo={name:"Invoice",components:{CenteredLayout:it.Z,QRCodeVue3:st(),PulseSkeleton:pt.Z,JButton:lt.Z,TabSet:dt.Z,Tab:mt.Z,Icon:Vt.Z,ForwardInvoice:It,RefundInvoice:qt,PayWithDifferentCurrencyModal:_t,PaymentNotificationModal:No,RedirectTimerModal:Oo,StatusIcon:Po},setup(){const e=(0,n.inject)("translate"),t=(0,n.inject)("http"),o=(0,n.inject)("toast"),a=(0,n.inject)("swal"),r=(0,n.inject)("emitter"),i=(0,Lo.yj)(),c=(0,Lo.tv)(),s=(0,Fo.oR)(),{generateIconUrl:l,copyToClipboard:d,formatDT:m,saveNotification:p,toFixed:u}=(0,xt.Z)(),{qrOptions:v}=(0,qo.Z)(),g="https://app.cointopay.com",h=(0,n.reactive)({lang:"en",isFiat:null,coins:[],termsLink:window.location.protocol+"//"+window.location.host+"/terms",loader:"",timer:null,interval:null,transactionInterval:null,showRedirectTimer:!1,invoice:null,invoiceUrl:window.location.href,isSimpleView:!0,isCryptoLink:!0,isRefreshable:!1,transactionSocket:null,isClosedTransactionsSocket:!1,balanceSocket:null,isClosedBalanceSocket:!1,isShowUrl:!1}),f=(0,n.computed)((()=>{let e="";if(h.invoice){e=h.invoice.inputCurrency;const t=Ko.find(s.state.altCoins,{ShorName:e});t&&(e=t.LongName)}return e})),y=(0,n.computed)((()=>Ko.find(s.state.altCoins,{ID:h.invoice.AltCoinID}))),k=(0,n.computed)((()=>h.invoice&&"waiting"===h.invoice.Status.toLowerCase())),w=(0,n.computed)((()=>h.invoice&&-1!==["paid","underpaid"].indexOf(h.invoice.Status.toLowerCase()))),E=(0,n.computed)((()=>h.invoice&&"expired"===h.invoice.Status.toLowerCase())),C=(0,n.computed)((()=>h.invoice&&-1!==["waiting","awaiting-fiat"].indexOf(h.invoice.Status.toLowerCase()))),V=(0,n.computed)((()=>h.invoice&&"underpaid"===h.invoice.Status.toLowerCase()&&"1"===h.invoice.Reopenable.toString())),N=(0,n.computed)((()=>`${g}/MerchantAPI?Confirm=true&CustomerReferenceNr=${h.invoice.CustomerReferenceNr}&TransactionID=${h.invoice.TransactionID}&MerchantID=${h.invoice.MerchantID}&coinAddress=${h.invoice.coinAddress}&AltCoinID=${h.invoice.AltCoinID}`)),x=(0,n.computed)((()=>s.state.mode)),b=(0,n.computed)((()=>s.state.user)),B=(0,n.computed)((()=>s.state.isLoggedIn)),A=(e,o="main")=>{h.loader=o;const n={Call:"Transactiondetail",MerchantID:1,APIKey:"_",ConfirmCode:e,output:"json"};t.get(`${g}/v2REAPI`,{params:n}).then((e=>{if(h.loader="",200===e.status&&"failed"!==e.data.result){h.invoice=e.data.data;const t=h.invoice.Status.toLowerCase();h.isFiat=1===h.invoice.Buy||(1===h.isFiat?1:0),-1!==["paid","underpaid","expired"].indexOf(t)&&(h.timer=h.invoice.Status,h.transactionInterval&&clearInterval(h.transactionInterval),h.interval&&(clearInterval(h.interval),h.timer=t),"paid"===t&&h.showRedirectTimer&&(r.emit("paymentNotificationModal",{close:!0}),r.emit("redirectTimerModal",{invoice:h.invoice}))),-1!==["waiting","awaiting-fiat"].indexOf(t)&&D(),"main"===o&&S(h.invoice.MerchantID)}})).catch((e=>{h.loader="",console.log(e)}))},I=()=>{if(Object.keys(i.params).length>0){const e=i.params.confirmCode;A(e),h.transactionInterval&&clearInterval(h.transactionInterval),h.transactionInterval=setInterval((()=>{A(e,!1)}),6e4)}else c.push("/")},D=()=>{if(!h.timer){const e=Yo.tz(h.invoice.CreatedOn,"Europe/Amsterdam").add(Number(h.invoice.ExpiryTime),"minutes");h.interval=setInterval((()=>{const t=Yo().tz("Europe/Amsterdam").valueOf(),o=e.valueOf()-t,n=Math.floor(o/864e5),a=Math.floor(o%864e5/36e5),r=Math.floor(o%36e5/6e4),i=Math.floor(o%6e4/1e3);h.timer=`${n}d ${a}h ${r}m ${i}s`,o<0&&(clearInterval(h.interval),h.timer="Expired",A(h.invoice.ConfirmCode,""))}),1e3)}},S=e=>{const o={MerchantID:e,output:"json",JsonArray:""};t.get(`${g}/CloneMasterTransaction`,{params:o}).then((e=>{h.coins=e.data})).catch((e=>{console.log(e)}))},M=()=>{h.isRefreshable&&(h.isRefreshable=!1,t.get(`${g}/v2REAPI`,{params:{Call:"txcheckcall",MerchantID:h.invoice.MerchantID,APIKey:"_",AltCoinID:h.invoice.AltCoinID,TransactionID:h.invoice.TransactionID,coinAddress:h.invoice.coinAddress,output:"json"}}).then((e=>{setTimeout((()=>{h.isRefreshable=!0}),6e4),e.data&&e.data.message&&o.success(e.data.message)})).catch((e=>{console.log(e)})))},O=()=>{let e=`https://cointopay.com/MerchantAPI?Checkout=true&MerchantID=${h.invoice.MerchantID}&Amount=${h.invoice.OriginalAmount}&AltCoinID=${h.invoice.AltCoinID}&CustomerReferenceNr=${h.invoice.CustomerReferenceNr}&SecurityCode=${h.invoice.SecurityCode}&inputCurrency=${h.invoice.inputCurrency}`;return h.invoice.ConfirmURL&&(e+=`&transactionconfirmurl=${h.invoice.ConfirmURL}`),h.invoice.FailURL&&(e+=`&transactionfailurl=${h.invoice.FailURL}`),e},j=()=>{h.loader="reOpenInvoice",t.get(`${g}/v2REAPI`,{params:{Call:"ReopenNotEnough",MerchantID:h.invoice.MerchantID,APIKey:"_",ConfirmCode:h.invoice.Security,output:"json"}}).then((e=>{h.loader="",200===e.data.status_code?(o.success("Transaction scheduled for re-validation"),p("Transaction scheduled for re-validation"),A(h.invoice.Security,"")):(o.error(e.data.message),p(e.data.message))})).catch((e=>{h.loader="",console.log(e)}))},R=e=>{const t=h.invoice.PaymentOptions.split(",").filter(Boolean);return 1===t.length&&1!==h.isFiat?-1!==t.indexOf(e):-1===t.indexOf("crypto")&&"instant"===e},T=(e,t)=>{const o=h.invoice.PaymentOptions.split(",").filter(Boolean);return-1!==o.indexOf(e)||1===t},P=()=>{r.emit("payWithDifferentCurrencyModal",{coins:h.coins,invoice:h.invoice})},L=()=>{a.fire({title:"Pay Invoice",text:"Do you want to pay this invoice?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then((({value:e})=>{e&&!0===e&&t.get(`${g}/TminusZeroPaymentProcessor`,{params:{MerchantID:h.invoice.MerchantID,AltCoinID:h.invoice.AltCoinID,TransactionID:h.invoice.TransactionID,CustomerReferenceNr:h.invoice.CustomerReferenceNr,coinAddress:h.invoice.coinAddress,apikey:b.value.APIKey,output:"json"}}).then((e=>{200===e.status&&(o.success(e.data),p(e.data))})).catch((e=>{e.data&&o.error(e.data)}))}))},F=()=>{h.balanceSocket=new WebSocket("wss://wss.cointopay.com/balance"),h.balanceSocket.onmessage=function(e){if(e&&e.data){const t=e.data.split(":");if(t.length>=4&&h.invoice){if(h.invoice.TransactionID.toString()===t[1].toString()&&Object.keys(i.params).length>0){const e=i.params.confirmCode;setTimeout((()=>{A(e,"")}),2e3),"paid"===t[2].toLowerCase()&&(h.showRedirectTimer=!0)}}else 3===t.length&&h.invoice&&h.invoice.TransactionID.toString()===t[1].toString()&&setTimeout((()=>{A(h.invoice.Security,"")}),2e3)}},h.balanceSocket.onclose=function(e){h.isClosedBalanceSocket||F()}},U=()=>{h.transactionSocket=new WebSocket("wss://wss.cointopay.com/transactions"),h.transactionSocket.onmessage=function(e){if(e&&e.data){const t=e.data,o=t.split(":");if(o.length>=4&&h.invoice){if(h.invoice.TransactionID.toString()===o[1].toString()&&(setTimeout((()=>{A(h.invoice.Security,"")}),2e3),"blockchain"===o[0].toLowerCase()&&null===window.localStorage.getItem(o[1]))){window.localStorage.setItem(o[1],"true");const e="confirming"===o[3].toLowerCase(),t=e?0:u(Number.parseFloat(h.invoice.Amount)-Number.parseFloat(o[2]));r.emit("paymentNotificationModal",{invoice:h.invoice,isFullPayment:e,amount:t})}}else 3===o.length&&h.invoice&&h.invoice.TransactionID.toString()===o[1].toString()&&setTimeout((()=>{A(h.invoice.Security,"")}),2e3)}},h.transactionSocket.onclose=function(e){h.isClosedTransactionsSocket||U()}};return(0,n.onBeforeMount)((()=>{h.isRefreshable=!0,Object.keys(i.query).length>0&&("undefined"!==typeof i.query.lang&&(h.lang=i.query.lang,s.commit(Uo.lX,h.lang.toUpperCase()),s.dispatch(Uo.Xi)),"undefined"!==typeof i.query.fiat&&(h.isFiat=Number(i.query.fiat)),!0===i.query.t&&(this.isNotice=!0)),I(),U(),F()})),(0,n.onBeforeUnmount)((()=>{h.transactionInterval&&clearInterval(h.transactionInterval),h.interval&&clearInterval(h.interval),null!==h.balanceSocket&&(h.isClosedBalanceSocket=!0,h.balanceSocket.close()),null!==h.transactionSocket&&(h.isClosedTransactionsSocket=!0,h.transactionSocket.close())})),{translate:e,...(0,n.toRefs)(h),isLoggedIn:B,generateIconUrl:l,qrOptions:v,copyToClipboard:d,formatDT:m,toFixed:u,theme:x,inputCurrency:f,altCoin:y,isWaiting:k,isPaid:w,isExpired:E,isActive:C,reOpenable:V,generateCancelLink:N,refreshTransaction:M,renewTransaction:O,reOpenInvoice:j,isOnlyPaymentMethod:R,isPaymentMethodAvailable:T,launchPayWithOtherCurrencyModal:P,payViaTZERO:L}}};const Ho=(0,Bt.Z)(Qo,[["render",rt],["__scopeId","data-v-0f41bacc"]]);var Zo=Ho}}]);
//# sourceMappingURL=invoice.cdf1859a.js.map