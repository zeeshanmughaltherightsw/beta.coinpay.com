(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["invoice"],{"243d":function(e,t,c){},"46e6":function(e,t,c){e.exports=c.p+"assets/img/success.4c1422c7.png"},"7e12":function(e,t,c){var n=c("da84"),o=c("d039"),a=c("e330"),r=c("577e"),i=c("58a8").trim,s=c("5899"),l=a("".charAt),d=n.parseFloat,m=n.Symbol,b=m&&m.iterator,u=1/d(s+"-0")!==-1/0||b&&!o((function(){d(Object(b))}));e.exports=u?function(e){var t=i(r(e)),c=d(t);return 0===c&&"-"==l(t,0)?-0:c}:d},"9f63":function(e,t,c){"use strict";c("243d")},bf2e:function(e,t,c){"use strict";var n=c("f2bf"),o=Object(n["createStaticVNode"])('<div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div><div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div>',2);function a(e,t,c,n,a,r){return o}var r={name:"PulseSkeleton"},i=c("6b0d"),s=c.n(i);const l=s()(r,[["render",a]]);t["a"]=l},c35a:function(e,t,c){var n=c("23e7"),o=c("7e12");n({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},cbf3:function(e,t,c){"use strict";c.r(t);c("99af"),c("b680");var n=c("f2bf"),o=function(e){return Object(n["pushScopeId"])("data-v-0f41bacc"),e=e(),Object(n["popScopeId"])(),e},a={class:"grid grid-cols-3 gap-0 md:gap-4"},r={key:0,class:"col-span-3"},i=o((function(){return Object(n["createElementVNode"])("img",{alt:"",src:"https://s3-eu-west-1.amazonaws.com/cointopay/pics/wojak.png",class:"mx-auto",style:{"max-width":"100%"}},null,-1)})),s=[i],l={class:"col-span-3 md:col-span-2"},d={class:"text-sm md:text-base whitespace-nowrap mb-4 md:mb-0 scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},m={class:"flex items-center justify-between mb-4"},b={class:"flex items-center"},u={key:0},O=["src"],p=Object(n["createTextVNode"])(),j={class:"font-semibold text-xl"},v={key:1},f=["src"],g=Object(n["createTextVNode"])(),h={class:"font-semibold text-xl"},y={class:"mb-4"},k={class:"grid grid-cols-5 gap-0.5 md:gap-4"},N={class:"col-span-5 md:col-span-2"},w={class:"col-span-5 md:col-span-3 font-semibold"},V={class:"grid grid-cols-5 gap-0.5 md:gap-4"},x={class:"col-span-5 md:col-span-2"},E={class:"col-span-5 md:col-span-3 font-semibold"},C={class:"flex items-center"},B={key:0},S={key:1},I=o((function(){return Object(n["createElementVNode"])("span",{class:"inline-block mx-2"},"-",-1)})),D={key:0,class:"mr-3"},T=o((function(){return Object(n["createElementVNode"])("span",null,"Recheck balance",-1)})),M={key:0,class:"text-red-500 grid grid-cols-5 gap-0.5 md:gap-4"},P=o((function(){return Object(n["createElementVNode"])("div",{class:"col-span-5 md:col-span-2"},"Missing amount",-1)})),A={class:"col-span-5 md:col-span-3 font-semibold"},R={class:"grid grid-cols-5 gap-0.5 md:gap-4"},L={class:"col-span-5 md:col-span-2"},q={class:"col-span-5 md:col-span-3 font-semibold"},F={class:"flex items-center"},U=["href"],_={class:"grid grid-cols-5 gap-0.5 md:gap-4"},W=o((function(){return Object(n["createElementVNode"])("div",{class:"col-span-5 md:col-span-2"},"Master Transaction ID",-1)})),z={class:"col-span-5 md:col-span-3 font-semibold"},J={class:"grid grid-cols-5 gap-0.5 md:gap-4"},K={class:"col-span-5 md:col-span-2"},H={class:"col-span-5 md:col-span-3 font-semibold"},Z={class:"grid grid-cols-5 gap-0.5 md:gap-4"},Q={class:"col-span-5 md:col-span-2"},$={class:"col-span-5 md:col-span-3 font-semibold"},Y={class:"grid grid-cols-5 gap-0.5 md:gap-4"},G={class:"col-span-5 md:col-span-2"},X={class:"col-span-5 md:col-span-3 font-semibold"},ee=["innerHTML"],te={key:0,class:"grid grid-cols-5 gap-0.5 md:gap-4"},ce={class:"col-span-5 md:col-span-2"},ne={class:"col-span-5 md:col-span-3 font-semibold"},oe={class:"grid grid-cols-5 gap-0.5 md:gap-4"},ae={class:"col-span-5 md:col-span-2"},re={class:"col-span-5 md:col-span-3 font-semibold"},ie={class:"mt-4 flex items-center justify-center"},se={class:"text-center"},le={class:"mb-4"},de={class:"flex items-center justify-center"},me={class:"text-2xl font-bold text-blue-500 text-center capitalize"},be=["href"],ue=o((function(){return Object(n["createElementVNode"])("span",{class:"mr-2"},"Click to Redirect",-1)})),Oe={key:0},pe={key:1,class:"flex items-center justify-center mt-3"},je={class:"cursor-pointer text-red-500 mr-4 animate-pulse"},ve={key:2,class:"mt-4"},fe={class:"flex flex-wrap justify-center items-stretch w-full mb-4 relative"},ge={class:"flex -mr-px"},he={key:3,class:"flex items-center justify-center"},ye=["href"],ke={class:"text-center"},Ne={class:"mb-4"},we={class:"flex items-center justify-center"},Ve={class:"text-2xl font-bold text-blue-500 text-center capitalize"},xe=["href"],Ee=o((function(){return Object(n["createElementVNode"])("span",{class:"mr-2"},"Click to Redirect",-1)})),Ce={key:0,class:"mb-3"},Be=["href"],Se=o((function(){return Object(n["createElementVNode"])("img",{class:"h-16",src:"https://s3-eu-west-1.amazonaws.com/cointopay/img/cointopay_checkout.png",alt:""},null,-1)})),Ie=[Se],De={class:"text-center"},Te={class:"mb-4"},Me={class:"flex items-center justify-center"},Pe={class:"text-2xl font-bold text-blue-500 text-center capitalize"},Ae=["href"],Re=o((function(){return Object(n["createElementVNode"])("span",{class:"mr-2"},"Click to Redirect",-1)})),Le={key:0},qe=["innerHTML"],Fe=["href"],Ue={class:"grid grid-cols-2 gap-0 md:gap-4"},_e={class:"col-span-2 md:col-span-1"},We={key:0,class:"card"},ze={class:"text-center body"},Je={class:"col-span-2 md:col-span-1"},Ke={key:0,class:"card"},He={class:"body text-center"},Ze=["href"],Qe={class:"col-span-3 md:col-span-1"},$e={key:0,class:"card"},Ye={class:"title"},Ge={class:"flex items-center justify-between"},Xe=o((function(){return Object(n["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1)})),et={class:"body"},tt={class:"mb-4 flex items-center justify-between flex-col"},ct={class:"flex flex-wrap items-stretch w-full mb-4 relative"},nt={class:"flex -mr-px"},ot={class:"text-center text-red-500"};function at(e,t,c,o,i,Se){var at=Object(n["resolveComponent"])("icon"),rt=Object(n["resolveComponent"])("j-button"),it=Object(n["resolveComponent"])("status-icon"),st=Object(n["resolveComponent"])("QRCodeVue3"),lt=Object(n["resolveComponent"])("refund-invoice"),dt=Object(n["resolveComponent"])("Tab"),mt=Object(n["resolveComponent"])("TabSet"),bt=Object(n["resolveComponent"])("forward-invoice"),ut=Object(n["resolveComponent"])("pulse-skeleton"),Ot=Object(n["resolveComponent"])("centered-layout"),pt=Object(n["resolveComponent"])("pay-with-different-currency-modal"),jt=Object(n["resolveComponent"])("payment-notification-modal"),vt=Object(n["resolveComponent"])("redirect-timer-modal"),ft=Object(n["resolveDirective"])("tippy");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(Ot,null,{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",a,[e.loader||e.invoice?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,s)),Object(n["createElementVNode"])("div",l,["main"!==e.loader&&e.invoice?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("div",b,[e.isSimpleView?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[Object(n["createElementVNode"])("img",{src:o.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,O),p,Object(n["createElementVNode"])("h2",j,Object(n["toDisplayString"])("".concat(o.translate("invoice.invoice")," #").concat(e.invoice.TransactionID)),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",v,[Object(n["createElementVNode"])("img",{src:o.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,f),g,Object(n["createElementVNode"])("h2",h,Object(n["toDisplayString"])("".concat(o.translate("invoice.invoice")," #").concat(e.invoice.TransactionID)),1)]))]),Object(n["createElementVNode"])("span",{class:"cursor-pointer hover:text-blue-500",onClick:t[0]||(t[0]=function(t){return e.isShowUrl=!e.isShowUrl})},[Object(n["createVNode"])(at,{name:"qr-code"})])]),Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",N,Object(n["toDisplayString"])(o.translate("invoice.merchant")),1),Object(n["createElementVNode"])("div",w,Object(n["toDisplayString"])(e.invoice.ShopTitle),1)]),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",x,Object(n["toDisplayString"])(o.translate("invoice.amount")),1),Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("div",C,[e.isSimpleView?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",B,Object(n["toDisplayString"])("".concat(e.invoice.Amount," ").concat(e.invoice.LongName)),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",S,[Object(n["createTextVNode"])(Object(n["toDisplayString"])("".concat(e.invoice.Amount," ").concat(e.invoice.LongName," "))+" ",1),I,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(" ".concat(e.invoice.OriginalAmount," ").concat(o.inputCurrency)),1)])),o.isWaiting||1!==e.invoice.Reopenable||1!==e.invoice.NotEnough?Object(n["createCommentVNode"])("",!0):Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(rt,{key:2,disabled:"reOpenInvoice"===e.loader,class:"ml-3",onClick:t[1]||(t[1]=function(e){return o.reOpenInvoice()})},{default:Object(n["withCtx"])((function(){return["reOpenInvoice"===e.loader?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",D,[Object(n["createVNode"])(at,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),T]})),_:1},8,["disabled"])),[[ft,"Please pay the missing amount, once confirmed, click the recheck balance button. Thanks."]])])])]),"underpaid"===e.invoice.Status.toLowerCase()?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",M,[P,Object(n["createElementVNode"])("div",A,Object(n["toDisplayString"])("".concat(o.toFixed(e.invoice.InitialAmount-e.invoice.Amount)," ").concat(o.inputCurrency)),1)])):Object(n["createCommentVNode"])("",!0),e.isSimpleView?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("div",L,Object(n["toDisplayString"])(o.translate("invoice.fee")),1),Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("div",F,[Object(n["createElementVNode"])("span",null,"Service % + Fixed Network "+Object(n["toDisplayString"])(e.invoice.MinerFee)+" "+Object(n["toDisplayString"])(e.invoice.LongName),1),Object(n["createElementVNode"])("a",{class:"ml-3",href:e.termsLink,target:"_blank"},[Object(n["createVNode"])(at,{name:"question-mark",classes:"w-5 h-5 text-yellow-500 dark:text-yellow-400"})],8,U)])])]),Object(n["createElementVNode"])("div",_,[W,Object(n["createElementVNode"])("div",z,Object(n["toDisplayString"])(e.invoice.MasterTransactionID),1)]),Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("div",K,Object(n["toDisplayString"])(o.translate("invoice.transaction_id")),1),Object(n["createElementVNode"])("div",H,Object(n["toDisplayString"])(e.invoice.TransactionID),1)]),Object(n["createElementVNode"])("div",Z,[Object(n["createElementVNode"])("div",Q,Object(n["toDisplayString"])(o.translate("invoice.status")),1),Object(n["createElementVNode"])("div",$,Object(n["toDisplayString"])(e.invoice.Status),1)])],64)),Object(n["createElementVNode"])("div",Y,[Object(n["createElementVNode"])("div",G,Object(n["toDisplayString"])(o.translate("invoice.reference")),1),Object(n["createElementVNode"])("div",X,[Object(n["createElementVNode"])("div",{class:"break-all whitespace-normal",innerHTML:e.invoice.CustomerReferenceNr},null,8,ee)])]),e.isSimpleView?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[o.reOpenable?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",te,[Object(n["createElementVNode"])("div",ce,Object(n["toDisplayString"])(o.translate("invoice.address")),1),Object(n["createElementVNode"])("div",ne,Object(n["toDisplayString"])(e.invoice.coinAddress),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("div",ae,Object(n["toDisplayString"])(o.translate("invoice.created_on")),1),Object(n["createElementVNode"])("div",re,Object(n["toDisplayString"])(o.formatDT(e.invoice.CreatedOn)),1)])],64)),Object(n["createElementVNode"])("div",ie,[Object(n["createElementVNode"])("span",{onClick:t[2]||(t[2]=function(t){return e.isSimpleView=!e.isSimpleView}),class:Object(n["normalizeClass"])(["cursor-pointer mx-auto inline-block transform transition-transform",{"rotate-180":!e.isSimpleView}])},[Object(n["createVNode"])(at,{name:"chevron-double",classes:"w-5 h-5"})],2)])])]),Object(n["createVNode"])(mt,null,{default:Object(n["withCtx"])((function(){return[o.isPaymentMethodAvailable("crypto")?(Object(n["openBlock"])(),Object(n["createBlock"])(dt,{key:0,name:o.translate("invoice.crypto"),selected:null===e.isFiat||0===e.isFiat||o.isOnlyPaymentMethod("crypto")},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",se,[Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("div",de,[Object(n["createVNode"])(it,{invoice:e.invoice},null,8,["invoice"]),Object(n["createElementVNode"])("p",me,Object(n["toDisplayString"])(e.timer),1)]),o.isPaid||o.isExpired?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center animate-pulse text-2xl text-blue-500 font-bold"},[ue,Object(n["createVNode"])(at,{name:"arrow-right",classes:"w-5 h-5"})],8,be)):Object(n["createCommentVNode"])("",!0)]),o.isPaid||o.isExpired?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Oe,[Object(n["createVNode"])(st,{imgclass:"mx-auto",width:o.qrOptions.width,height:o.qrOptions.height,"qr-options":o.qrOptions.qrOptions,"background-options":o.qrOptions.backgroundOptions,"dots-options":o.qrOptions.dotsOptions,"corners-dot-options":o.qrOptions.cornersDotOptions,"corners-square-options":o.qrOptions.cornersSquareOptions,value:e.isCryptoLink?e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress+"?amount="+e.invoice.Amount:e.invoice.coinAddress},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),e.invoice.Tag?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",pe,[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("span",je,[Object(n["createVNode"])(at,{name:"exclamation-circle"})])),[[ft,"Please use this Memo/Tag, otherwise you risk losing your funds."]]),Object(n["createElementVNode"])("span",null,"Memo/Tag: "+Object(n["toDisplayString"])(e.invoice.Tag),1)])):Object(n["createCommentVNode"])("",!0),"none"!==e.invoice.coinAddress?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ve,[Object(n["createElementVNode"])("div",fe,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.invoice.coinAddress=t}),readonly:"",class:"form-input flex-1 md:flex-none md:w-2/3 rounded-r-none"},null,512),[[n["vModelText"],e.invoice.coinAddress]]),Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("span",{onClick:t[4]||(t[4]=function(t){return o.copyToClipboard(decodeURIComponent(e.invoice.coinAddress))}),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[Object(n["createVNode"])(at,{name:"clipboard",classes:"w-5 h-5"})])])])])):Object(n["createCommentVNode"])("",!0),o.isPaid||o.isExpired?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",he,[Object(n["createVNode"])(rt,{class:"mr-3",onClick:t[5]||(t[5]=function(t){return e.isCryptoLink=!e.isCryptoLink})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.isCryptoLink?o.translate("invoice.full_crypto_link"):o.translate("invoice.address_only")),1)]})),_:1}),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(rt,{disabled:!e.isRefreshable,onClick:t[6]||(t[6]=function(e){return o.refreshTransaction()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(at,{name:"refresh",classes:"w-4 h-4"})]})),_:1},8,["disabled"])),[[ft,"Refresh"]])])),o.isExpired?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:4,class:"text-blue-500 hover:underline",href:o.renewTransaction()},"Pay anyway? Click here",8,ye)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(lt,{invoice:e.invoice},null,8,["invoice"])])]})),_:1},8,["name","selected"])):Object(n["createCommentVNode"])("",!0),o.isPaymentMethodAvailable("instant")?(Object(n["openBlock"])(),Object(n["createBlock"])(dt,{key:1,name:o.translate("invoice.tzero"),selected:o.isOnlyPaymentMethod("instant")},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ke,[Object(n["createElementVNode"])("div",Ne,[Object(n["createElementVNode"])("div",we,[Object(n["createVNode"])(it,{invoice:e.invoice},null,8,["invoice"]),Object(n["createElementVNode"])("p",Ve,Object(n["toDisplayString"])(e.timer),1)]),o.isPaid||o.isExpired?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[Ee,Object(n["createVNode"])(at,{name:"arrow-right",classes:"w-5 h-5"})],8,xe)):Object(n["createCommentVNode"])("",!0)]),o.isPaid||o.isExpired?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ce,[Object(n["createVNode"])(st,{imgclass:"mx-auto",width:o.qrOptions.width,height:o.qrOptions.height,"qr-options":o.qrOptions.qrOptions,"background-options":o.qrOptions.backgroundOptions,"dots-options":o.qrOptions.dotsOptions,"corners-dot-options":o.qrOptions.cornersDotOptions,"corners-square-options":o.qrOptions.cornersSquareOptions,value:e.invoice.TZERO},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),o.isExpired?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:1,class:"text-blue-500 hover:underline",href:o.renewTransaction()},"Pay anyway? Click here",8,Be)):Object(n["createCommentVNode"])("",!0),o.isLoggedIn&&o.isWaiting?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:2,class:"mx-auto inline-block cursor-pointer",onClick:t[7]||(t[7]=function(e){return o.payViaTZERO()})},Ie)):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["name","selected"])):Object(n["createCommentVNode"])("",!0),o.isPaymentMethodAvailable("fiat",e.isFiat)?(Object(n["openBlock"])(),Object(n["createBlock"])(dt,{key:2,name:o.translate("invoice.fiat"),selected:1===e.isFiat||o.isOnlyPaymentMethod("fiat")},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",De,[Object(n["createElementVNode"])("div",Te,[Object(n["createElementVNode"])("div",Me,[Object(n["createVNode"])(it,{invoice:e.invoice},null,8,["invoice"]),Object(n["createElementVNode"])("p",Pe,Object(n["toDisplayString"])(e.timer),1)]),o.isPaid||o.isExpired?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[Re,Object(n["createVNode"])(at,{name:"arrow-right",classes:"w-5 h-5"})],8,Ae)):Object(n["createCommentVNode"])("",!0)]),o.isPaid||o.isExpired||!e.invoice.PaymentDetail?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Le,[Object(n["createElementVNode"])("div",{class:"content-center",innerHTML:e.invoice.PaymentDetail},null,8,qe)])),o.isExpired?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:1,class:"text-blue-500 hover:underline",href:o.renewTransaction()},"Pay anyway? Click here",8,Fe)):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["name","selected"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(bt,{invoice:e.invoice},null,8,["invoice"]),Object(n["createElementVNode"])("div",Ue,[Object(n["createElementVNode"])("div",_e,[o.isActive&&e.invoice.inputCurrency&&0===e.invoice.LTR&&(null===e.isFiat||0===e.isFiat)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",We,[Object(n["createElementVNode"])("div",ze,[Object(n["createVNode"])(rt,{onClick:t[8]||(t[8]=function(e){return o.launchPayWithOtherCurrencyModal()})},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(o.translate("invoice.pay_with_different_currency")),1)]})),_:1})])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Je,[o.isWaiting?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ke,[Object(n["createElementVNode"])("div",He,[Object(n["createElementVNode"])("a",{href:o.generateCancelLink,class:"btn btn-warning"},"Cancel",8,Ze)])])):Object(n["createCommentVNode"])("",!0)])])],64)):Object(n["createCommentVNode"])("",!0),"main"===e.loader?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(ut),Object(n["createVNode"])(ut)],64)):Object(n["createCommentVNode"])("",!0)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",Qe,["main"!==e.loader?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",$e,[Object(n["createElementVNode"])("div",Ye,[Object(n["createElementVNode"])("div",Ge,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(o.translate("invoice.invoice_url")),1),Object(n["createElementVNode"])("span",{onClick:t[9]||(t[9]=function(t){return e.isShowUrl=!1}),class:"cursor-pointer"},[Object(n["createVNode"])(at,{name:"close"})])])]),Xe,Object(n["createElementVNode"])("div",et,[Object(n["createElementVNode"])("div",tt,[Object(n["createVNode"])(st,{imgclass:"mb-3",width:o.qrOptions.width,height:o.qrOptions.height,"qr-options":o.qrOptions.qrOptions,"background-options":o.qrOptions.backgroundOptions,"dots-options":o.qrOptions.dotsOptions,"corners-dot-options":o.qrOptions.cornersDotOptions,"corners-square-options":o.qrOptions.cornersSquareOptions,value:e.invoiceUrl},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"]),Object(n["createElementVNode"])("div",ct,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.invoiceUrl=t}),readonly:"",class:"form-input flex-1 rounded-r-none"},null,512),[[n["vModelText"],e.invoiceUrl]]),Object(n["createElementVNode"])("div",nt,[Object(n["createElementVNode"])("span",{onClick:t[11]||(t[11]=function(t){return o.copyToClipboard(e.invoiceUrl)}),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[Object(n["createVNode"])(at,{name:"clipboard",classes:"w-5 h-5"})])])]),Object(n["createElementVNode"])("p",ot,Object(n["toDisplayString"])(o.translate("invoice.warning")),1)])])])):Object(n["createCommentVNode"])("",!0),"main"===e.loader?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(ut),Object(n["createVNode"])(ut)],64)):Object(n["createCommentVNode"])("",!0)],512),[[n["vShow"],e.isShowUrl]])])]})),_:1}),Object(n["createVNode"])(pt),Object(n["createVNode"])(jt),Object(n["createVNode"])(vt)],64)}var rt=c("5530"),it=(c("d3b7"),c("25f0"),c("b64b"),c("a9e3"),c("4de4"),c("ac1f"),c("1276"),c("c35a"),c("9e55")),st=c("61c6"),lt=c.n(st),dt=c("4032"),mt=c("bad0"),bt=c("f51a"),ut=c("bf2e"),Ot={class:"card"},pt={class:"body"},jt={class:"flex items-center flex-col md:flex-row"},vt={class:"w-full md:flex-1 mr-0 md:mr-3"},ft={key:0,class:"text-right mb-1"},gt={class:"text-red-500 text-sm"},ht={class:"mt-3 md:mt-0"},yt={key:0,class:"mb-1 block"},kt={key:0,class:"mr-3"};function Nt(e,t,c,o,a,r){var i=Object(n["resolveComponent"])("icon"),s=Object(n["resolveComponent"])("j-button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ot,[Object(n["createElementVNode"])("div",pt,[Object(n["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return o.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",jt,[Object(n["createElementVNode"])("div",vt,[o.hasErrors?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ft,[Object(n["createElementVNode"])("div",gt,Object(n["toDisplayString"])(o.showError(e.errorBag,"email")),1)])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.email=t}),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[n["vModelText"],e.form.email]])]),Object(n["createElementVNode"])("div",ht,[o.hasErrors?(Object(n["openBlock"])(),Object(n["createElementBlock"])("label",yt," ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{disabled:e.isProcessing},{default:Object(n["withCtx"])((function(){return[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",kt,[Object(n["createVNode"])(i,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.translate("invoice.forward_invoice")),1)]})),_:1},8,["disabled"])])])],32)])])}var wt=c("cdae"),Vt=c("ea45"),xt=c("2e13"),Et={name:"ForwardInvoice",props:["invoice"],components:{JButton:dt["a"],Icon:wt["a"]},setup:function(e){var t=Object(n["inject"])("translate"),c=Object(n["inject"])("http"),o=Object(n["inject"])("toast"),a=Object(Vt["a"])(),r=a.showError,i=a.validate,s=Object(xt["a"])(),l=s.saveNotification,d=Object(n["reactive"])({form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),m=Object(n["computed"])((function(){return Object.keys(d.errorBag).length>0}));Object(n["watch"])((function(){return Object(rt["a"])({},d.form)}),(function(){Object.keys(d.errorBag).length>0&&(d.errorBag=i(d.form,d.rules))}));var b="https://app.cointopay.com",u=function(){d.errorBag=i(d.form,d.rules),0===Object.keys(d.errorBag).length&&(d.isProcessing=!0,c.get("".concat(b,"/InvoiceForwarder"),{params:{invoiceAddress:d.form.email,target:!1,shop:e.invoice.ShopTitle,TransactionID:e.invoice.TransactionID,coinAddress:e.invoice.coinAddress,qrcode:e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress,amount:e.invoice.Amount,output:"json"}}).then((function(e){d.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(d.form.email="",d.errorBag={},o.success("Invoice sent successfully"),l("Invoice sent successfully"))})).catch((function(e){d.isProcessing=!1,console.log(e)})))};return Object(rt["a"])(Object(rt["a"])({translate:t},Object(n["toRefs"])(d)),{},{showError:r,hasErrors:m,submit:u})}},Ct=c("6b0d"),Bt=c.n(Ct);const St=Bt()(Et,[["render",Nt]]);var It=St,Dt={class:"mt-4"},Tt={class:"flex items-center flex-col md:flex-row"},Mt={class:"w-full md:flex-1 mr-0 md:mr-3"},Pt={key:0,class:"text-right mb-1"},At={class:"text-red-500 text-sm"},Rt={class:"mt-3 md:mt-0"},Lt={key:0,class:"mb-1 block"},qt={key:0,class:"mr-3"};function Ft(e,t,c,o,a,r){var i=Object(n["resolveComponent"])("icon"),s=Object(n["resolveComponent"])("j-button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Dt,[Object(n["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return o.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",Tt,[Object(n["createElementVNode"])("div",Mt,[o.hasErrors?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Pt,[Object(n["createElementVNode"])("div",At,Object(n["toDisplayString"])(o.showError(e.errorBag,"address")),1)])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.address=t}),class:"form-input w-full",placeholder:"Refund address (crypto/coin address)",type:"text"},null,512),[[n["vModelText"],e.form.address]])]),Object(n["createElementVNode"])("div",Rt,[o.hasErrors?(Object(n["openBlock"])(),Object(n["createElementBlock"])("label",Lt," ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{disabled:e.isProcessing},{default:Object(n["withCtx"])((function(){return[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",qt,[Object(n["createVNode"])(i,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.translate("invoice.add")),1)]})),_:1},8,["disabled"])])])],32)])}var Ut={name:"RefundInvoice",props:["invoice"],components:{JButton:dt["a"],Icon:wt["a"]},setup:function(e){var t=Object(n["inject"])("translate"),c=Object(n["inject"])("http"),o=Object(n["inject"])("toast"),a=Object(Vt["a"])(),r=a.showError,i=a.validate,s=Object(xt["a"])(),l=s.saveNotification,d=Object(n["reactive"])({form:{address:""},errorBag:{},rules:{address:["required"]},isProcessing:!1}),m=Object(n["computed"])((function(){return Object.keys(d.errorBag).length>0}));Object(n["watch"])((function(){return Object(rt["a"])({},d.form)}),(function(){Object.keys(d.errorBag).length>0&&(d.errorBag=i(d.form,d.rules))}));var b="https://app.cointopay.com",u=function(){if(d.errorBag=i(d.form,d.rules),0===Object.keys(d.errorBag).length){d.isProcessing=!0;var t={Call:"Refund",MerchantID:1,APIKey:"_",RefundAddress:d.form.address,ConfirmCode:e.invoice.Security,output:"json"};c.get("".concat(b,"/v2REAPI"),{params:t}).then((function(e){d.isProcessing=!1,"success"===e.data.result?(o.success("Refund address added successfully"),l("Refund address added successfully")):o.error(e.data.message),d.form.address="",d.errorBag={}})).catch((function(e){d.isProcessing=!1,console.log(e)}))}};return Object(rt["a"])(Object(rt["a"])({translate:t},Object(n["toRefs"])(d)),{},{showError:r,hasErrors:m,submit:u})}};const _t=Bt()(Ut,[["render",Ft]]);var Wt=_t,zt=(c("b0c0"),{class:"flex items-center justify-between"}),Jt=Object(n["createElementVNode"])("span",null,"Pay with different currency",-1),Kt={class:"relative flex-1"},Ht={class:"flex flex-wrap justify-center gap-2 mt-4"},Zt=["href"],Qt=["src"],$t={class:"text-xs font-semibold"};function Yt(e,t,c,o,a,r){var i=Object(n["resolveComponent"])("icon"),s=Object(n["resolveComponent"])("modal");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=function(e){return o.closeModal()})},{title:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",zt,[Jt,Object(n["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=function(e){return o.closeModal()})},[Object(n["createVNode"])(i,{name:"close"})])])]})),content:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Kt,[Object(n["createVNode"])(i,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.keyword=t}),"aria-label":"Search...",class:"form-input px-10 w-full",type:"text"},null,512),[[n["vModelText"],e.keyword]]),""!==e.keyword?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[2]||(t[2]=function(t){return e.keyword=""})},[Object(n["createVNode"])(i,{classes:"w-5 h-5",name:"close"})])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ht,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.coinsList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"w-24 w-24 p-3 cursor-pointer text-center border-2 border-gray-300 dark:border-gray-500 hover:border-blue-700 dark:hover:border-blue-500 inline-block rounded-md shadow flex items-center justify-center flex-col",key:t},[Object(n["createElementVNode"])("a",{href:o.generateUrl(e.id)},[Object(n["createElementVNode"])("img",{class:"w-10 h-10 mb-2 mx-auto",src:o.generateIconUrl(e.name),alt:""},null,8,Qt),Object(n["createElementVNode"])("p",$t,Object(n["toDisplayString"])(e.name),1)],8,Zt)])})),128))])]})),_:1},8,["maxWidth","show"])}var Gt=c("714b"),Xt={name:"PayWithDifferentCurrencyModal",components:{Modal:Gt["a"],Icon:wt["a"]},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("emitter"),c=Object(xt["a"])(),o=c.generateIconUrl,a=Object(n["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,keyword:"",coins:[],invoice:null}),r=Object(n["computed"])((function(){return a.coins.filter((function(e){return a.keyword&&""!==a.keyword?-1!==e.name.toLowerCase().indexOf(a.keyword.toLowerCase())&&0!==e.id&&e.id!==a.invoice.AltCoinID:0!==e.id&&e.id!==a.invoice.AltCoinID}))})),i=function(){a.show=!1},s=function(e){return"https://cointopay.com/CloneMasterTransaction?TargetAltCoinID=".concat(e,"&TransactionID=").concat(a.invoice.TransactionID,"&MerchantID=").concat(a.invoice.MerchantID)};return Object(n["onBeforeMount"])((function(){t.on("payWithDifferentCurrencyModal",(function(e){a.coins=e.coins,a.invoice=e.invoice,a.show=!0}))})),Object(rt["a"])(Object(rt["a"])({translate:e},Object(n["toRefs"])(a)),{},{closeModal:i,coinsList:r,generateUrl:s,generateIconUrl:o})}};const ec=Bt()(Xt,[["render",Yt]]);var tc=ec,cc=c("46e6"),nc=c.n(cc),oc=c("e4db"),ac=c.n(oc),rc={class:"flex items-center justify-between"},ic=Object(n["createElementVNode"])("span",null,"Notification",-1),sc={key:0},lc={class:"text-center"},dc={key:0,class:"w-36 mx-auto",src:nc.a,alt:""},mc={key:1,class:"w-36 mx-auto",src:ac.a,alt:""},bc=Object(n["createElementVNode"])("p",{class:"mb-2"},"Thank you for making the transfer with your preferred wallet.",-1),uc={key:0},Oc={key:1},pc=Object(n["createElementVNode"])("p",null,"Please enter your email address to receive status update alerts.",-1),jc={class:"flex items-center flex-col md:flex-row mt-4"},vc={class:"w-full md:flex-1 mr-0 md:mr-3"},fc={key:0,class:"text-right mb-1"},gc={class:"text-red-500 text-sm"},hc={class:"mt-3 md:mt-0"},yc={key:0,class:"mb-1 block"},kc={key:0,class:"mr-3"},Nc=Object(n["createElementVNode"])("span",null,"Receive Alerts",-1);function wc(e,t,c,o,a,r){var i=Object(n["resolveComponent"])("icon"),s=Object(n["resolveComponent"])("j-button"),l=Object(n["resolveComponent"])("modal");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=function(e){return o.closeModal()})},{title:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",rc,[ic,Object(n["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=function(e){return o.closeModal()})},[Object(n["createVNode"])(i,{name:"close"})])])]})),content:Object(n["withCtx"])((function(){return[e.invoice?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",sc,[Object(n["createElementVNode"])("div",lc,[e.isFullPayment?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",dc)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",mc))]),bc,e.isFullPayment?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",uc,"The "+Object(n["toDisplayString"])(e.invoice.LongName)+" blockchain can take some time to confirm your payment. Please enter your email address to receive status update alerts for #"+Object(n["toDisplayString"])(e.invoice.TransactionID)+".",1)):Object(n["createCommentVNode"])("",!0),e.isFullPayment?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",Oc,"We received your payment, however it is not enough to fulfill the transaction, please make the additional payment of "+Object(n["toDisplayString"])(e.amount)+" "+Object(n["toDisplayString"])(e.invoice.LongName)+".",1)),pc,Object(n["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return o.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",jc,[Object(n["createElementVNode"])("div",vc,[o.hasErrors?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",fc,[Object(n["createElementVNode"])("div",gc,Object(n["toDisplayString"])(o.showError(e.errorBag,"email")),1)])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.email=t}),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[n["vModelText"],e.form.email]])]),Object(n["createElementVNode"])("div",hc,[o.hasErrors?(Object(n["openBlock"])(),Object(n["createElementBlock"])("label",yc," ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{disabled:e.isProcessing},{default:Object(n["withCtx"])((function(){return[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",kc,[Object(n["createVNode"])(i,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Nc]})),_:1},8,["disabled"])])])],32)])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["maxWidth","show"])}var Vc={name:"PaymentNotificationModal",components:{Modal:Gt["a"],Icon:wt["a"],JButton:dt["a"]},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("emitter"),c=Object(n["inject"])("http"),o=Object(n["inject"])("toast"),a=Object(xt["a"])(),r=a.saveNotification,i=Object(Vt["a"])(),s=i.validate,l=i.showError,d="https://app.cointopay.com",m=Object(n["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,invoice:null,isFullPayment:!0,amount:0,form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),b=Object(n["computed"])((function(){return Object.keys(m.errorBag).length>0}));Object(n["watch"])((function(){return Object(rt["a"])({},m.form)}),(function(){Object.keys(m.errorBag).length>0&&(m.errorBag=s(m.form,m.rules))}));var u=function(){m.show=!1},O=function(){m.errorBag=s(m.form,m.rules),0===Object.keys(m.errorBag).length&&(m.isProcessing=!0,c.get("".concat(d,"/InvoiceForwarder"),{params:{invoiceAddress:m.form.email,target:!1,shop:m.invoice.ShopTitle,TransactionID:m.invoice.TransactionID,coinAddress:m.invoice.coinAddress,qrcode:m.invoice.CoinName.toLowerCase()+":"+m.invoice.coinAddress,amount:m.invoice.Amount,output:"json"}}).then((function(e){m.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(m.form.email="",m.errorBag={},o.success("Subscribed to alerts successfully"),r("Subscribed to alerts successfully"),u())})).catch((function(e){m.isProcessing=!1,console.log(e)})))};return Object(n["onBeforeMount"])((function(){t.on("paymentNotificationModal",(function(e){e.close&&!0===e.close?m.show=!1:(m.invoice=e.invoice,m.isFullPayment=e.isFullPayment,m.amount=e.amount,m.form={email:""},m.errorBag={},m.show=!0)}))})),Object(rt["a"])(Object(rt["a"])({translate:e},Object(n["toRefs"])(m)),{},{hasErrors:b,showError:l,closeModal:u,submit:O})}};const xc=Bt()(Vc,[["render",wc]]);var Ec=xc,Cc={class:"text-center"},Bc=Object(n["createElementVNode"])("img",{class:"w-32 mx-auto",src:nc.a,alt:""},null,-1),Sc={class:"text-2xl font-semibold text-green-700 dark:text-green-500 text-center mb-3"},Ic=["href"],Dc=Object(n["createElementVNode"])("span",{class:"mr-2"},"Click here to Redirect",-1);function Tc(e,t,c,o,a,r){var i=Object(n["resolveComponent"])("icon"),s=Object(n["resolveComponent"])("modal");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{maxWidth:e.maxWidth,header:!1,show:e.show,onClose:t[0]||(t[0]=function(e){return o.closeModal()})},{content:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Cc,[Bc,Object(n["createElementVNode"])("p",Sc,"Redirecting in "+Object(n["toDisplayString"])(e.counter),1),Object(n["createElementVNode"])("a",{href:e.invoice.RedirectTargetURL,class:"text-blue-500 hover:underline inline-flex items-center"},[Dc,Object(n["createVNode"])(i,{name:"arrow-right",classes:"w-5 h-5"})],8,Ic)])]})),_:1},8,["maxWidth","show"])}var Mc={name:"RedirectTimerModal",components:{Modal:Gt["a"],Icon:wt["a"]},setup:function(){var e=Object(n["inject"])("emitter"),t=Object(n["reactive"])({show:!1,maxWidth:"sm",closeable:!0,invoice:null,interval:null,timer:null,counter:0}),c=function(){t.show=!1,t.interval&&clearInterval(t.interval),t.interval=null};return Object(n["onBeforeMount"])((function(){e.on("redirectTimerModal",(function(e){t.invoice=e.invoice,t.counter=20,t.interval=setInterval((function(){t.counter--,0===t.counter&&(clearInterval(t.interval),window.location.href=t.invoice.RedirectTargetURL)}),1e3),t.show=!0}))})),Object(rt["a"])(Object(rt["a"])({},Object(n["toRefs"])(t)),{},{closeModal:c})}};const Pc=Bt()(Mc,[["render",Tc]]);var Ac=Pc;function Rc(e,t,c,o,a,r){var i=Object(n["resolveComponent"])("icon");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,["waiting"===o.status?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,name:"spinner",classes:"w-6 h-6 mr-3 text-blue-500"})):Object(n["createCommentVNode"])("",!0),"paid"===o.status?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:1,name:"check-circle",classes:"w-8 h-8 mr-3 text-green-500"})):Object(n["createCommentVNode"])("",!0),"underpaid"===o.status?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:2,name:"check-circle",classes:"w-8 h-8 mr-3 text-yellow-500"})):Object(n["createCommentVNode"])("",!0),"expired"===o.status?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:3,name:"x-circle",classes:"w-8 h-8 mr-3 text-red-500"})):Object(n["createCommentVNode"])("",!0)],64)}var Lc={name:"StatusIcon",props:["invoice"],components:{Icon:wt["a"]},setup:function(e){var t=Object(n["computed"])((function(){return e.invoice&&e.invoice.Status.toLowerCase()}));return{status:t}}};const qc=Bt()(Lc,[["render",Rc]]);var Fc=qc,Uc=c("6c02"),_c=c("5502"),Wc=c("8923"),zc=c("3fbe"),Jc=c("2ef0"),Kc=c("1d5e"),Hc={name:"Invoice",components:{CenteredLayout:it["a"],QRCodeVue3:lt.a,PulseSkeleton:ut["a"],JButton:dt["a"],TabSet:mt["a"],Tab:bt["a"],Icon:wt["a"],ForwardInvoice:It,RefundInvoice:Wt,PayWithDifferentCurrencyModal:tc,PaymentNotificationModal:Ec,RedirectTimerModal:Ac,StatusIcon:Fc},setup:function(){var e=this,t=Object(n["inject"])("translate"),c=Object(n["inject"])("http"),o=Object(n["inject"])("toast"),a=Object(n["inject"])("swal"),r=Object(n["inject"])("emitter"),i=Object(Uc["d"])(),s=Object(Uc["e"])(),l=Object(_c["b"])(),d=Object(xt["a"])(),m=d.generateIconUrl,b=d.copyToClipboard,u=d.formatDT,O=d.saveNotification,p=d.toFixed,j=Object(zc["a"])(),v=j.qrOptions,f="https://app.cointopay.com",g=Object(n["reactive"])({lang:"en",isFiat:null,coins:[],termsLink:window.location.protocol+"//"+window.location.host+"/terms",loader:"",timer:null,interval:null,transactionInterval:null,showRedirectTimer:!1,invoice:null,invoiceUrl:window.location.href,isSimpleView:!0,isCryptoLink:!0,isRefreshable:!1,transactionSocket:null,isClosedTransactionsSocket:!1,balanceSocket:null,isClosedBalanceSocket:!1,isShowUrl:!1}),h=Object(n["computed"])((function(){var e="";if(g.invoice){e=g.invoice.inputCurrency;var t=Jc["find"](l.state.altCoins,{ShorName:e});t&&(e=t.LongName)}return e})),y=Object(n["computed"])((function(){return Jc["find"](l.state.altCoins,{ID:g.invoice.AltCoinID})})),k=Object(n["computed"])((function(){return g.invoice&&"waiting"===g.invoice.Status.toLowerCase()})),N=Object(n["computed"])((function(){return g.invoice&&-1!==["paid","underpaid"].indexOf(g.invoice.Status.toLowerCase())})),w=Object(n["computed"])((function(){return g.invoice&&"expired"===g.invoice.Status.toLowerCase()})),V=Object(n["computed"])((function(){return g.invoice&&-1!==["waiting","awaiting-fiat"].indexOf(g.invoice.Status.toLowerCase())})),x=Object(n["computed"])((function(){return g.invoice&&"underpaid"===g.invoice.Status.toLowerCase()&&"1"===g.invoice.Reopenable.toString()})),E=Object(n["computed"])((function(){return"".concat(f,"/MerchantAPI?Confirm=true&CustomerReferenceNr=").concat(g.invoice.CustomerReferenceNr,"&TransactionID=").concat(g.invoice.TransactionID,"&MerchantID=").concat(g.invoice.MerchantID,"&coinAddress=").concat(g.invoice.coinAddress,"&AltCoinID=").concat(g.invoice.AltCoinID)})),C=Object(n["computed"])((function(){return l.state.mode})),B=Object(n["computed"])((function(){return l.state.user})),S=Object(n["computed"])((function(){return l.state.isLoggedIn})),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";g.loader=t;var n={Call:"Transactiondetail",MerchantID:1,APIKey:"_",ConfirmCode:e,output:"json"};c.get("".concat(f,"/v2REAPI"),{params:n}).then((function(e){if(g.loader="",200===e.status&&"failed"!==e.data.result){g.invoice=e.data.data;var c=g.invoice.Status.toLowerCase();g.isFiat=1===g.invoice.Buy||(1===g.isFiat?1:0),-1!==["paid","underpaid","expired"].indexOf(c)&&(g.timer=g.invoice.Status,g.transactionInterval&&clearInterval(g.transactionInterval),g.interval&&(clearInterval(g.interval),g.timer=c),"paid"===c&&g.showRedirectTimer&&(r.emit("paymentNotificationModal",{close:!0}),r.emit("redirectTimerModal",{invoice:g.invoice}))),-1!==["waiting","awaiting-fiat"].indexOf(c)&&T(),"main"===t&&M(g.invoice.MerchantID)}})).catch((function(e){g.loader="",console.log(e)}))},D=function(){if(Object.keys(i.params).length>0){var e=i.params.confirmCode;I(e),g.transactionInterval&&clearInterval(g.transactionInterval),g.transactionInterval=setInterval((function(){I(e,!1)}),6e4)}else s.push("/")},T=function(){if(!g.timer){var e=Kc.tz(g.invoice.CreatedOn,"Europe/Amsterdam").add(Number(g.invoice.ExpiryTime),"minutes");g.interval=setInterval((function(){var t=Kc().tz("Europe/Amsterdam").valueOf(),c=e.valueOf()-t,n=Math.floor(c/864e5),o=Math.floor(c%864e5/36e5),a=Math.floor(c%36e5/6e4),r=Math.floor(c%6e4/1e3);g.timer="".concat(n,"d ").concat(o,"h ").concat(a,"m ").concat(r,"s"),c<0&&(clearInterval(g.interval),g.timer="Expired",I(g.invoice.ConfirmCode,""))}),1e3)}},M=function(e){var t={MerchantID:e,output:"json",JsonArray:""};c.get("".concat(f,"/CloneMasterTransaction"),{params:t}).then((function(e){g.coins=e.data})).catch((function(e){console.log(e)}))},P=function(){g.isRefreshable&&(g.isRefreshable=!1,c.get("".concat(f,"/v2REAPI"),{params:{Call:"txcheckcall",MerchantID:g.invoice.MerchantID,APIKey:"_",AltCoinID:g.invoice.AltCoinID,TransactionID:g.invoice.TransactionID,coinAddress:g.invoice.coinAddress,output:"json"}}).then((function(e){setTimeout((function(){g.isRefreshable=!0}),6e4),e.data&&e.data.message&&o.success(e.data.message)})).catch((function(e){console.log(e)})))},A=function(){var e="https://cointopay.com/MerchantAPI?Checkout=true&MerchantID=".concat(g.invoice.MerchantID,"&Amount=").concat(g.invoice.OriginalAmount,"&AltCoinID=").concat(g.invoice.AltCoinID,"&CustomerReferenceNr=").concat(g.invoice.CustomerReferenceNr,"&SecurityCode=").concat(g.invoice.SecurityCode,"&inputCurrency=").concat(g.invoice.inputCurrency);return g.invoice.ConfirmURL&&(e+="&transactionconfirmurl=".concat(g.invoice.ConfirmURL)),g.invoice.FailURL&&(e+="&transactionfailurl=".concat(g.invoice.FailURL)),e},R=function(){g.loader="reOpenInvoice",c.get("".concat(f,"/v2REAPI"),{params:{Call:"ReopenNotEnough",MerchantID:g.invoice.MerchantID,APIKey:"_",ConfirmCode:g.invoice.Security,output:"json"}}).then((function(e){g.loader="",200===e.data.status_code?(o.success("Transaction scheduled for re-validation"),O("Transaction scheduled for re-validation"),I(g.invoice.Security,"")):(o.error(e.data.message),O(e.data.message))})).catch((function(e){g.loader="",console.log(e)}))},L=function(e){var t=g.invoice.PaymentOptions.split(",").filter(Boolean);return 1===t.length&&1!==g.isFiat?-1!==t.indexOf(e):-1===t.indexOf("crypto")&&"instant"===e},q=function(e,t){var c=g.invoice.PaymentOptions.split(",").filter(Boolean);return-1!==c.indexOf(e)||1===t},F=function(){r.emit("payWithDifferentCurrencyModal",{coins:g.coins,invoice:g.invoice})},U=function(){a.fire({title:"Pay Invoice",text:"Do you want to pay this invoice?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then((function(e){var t=e.value;t&&!0===t&&c.get("".concat(f,"/TminusZeroPaymentProcessor"),{params:{MerchantID:g.invoice.MerchantID,AltCoinID:g.invoice.AltCoinID,TransactionID:g.invoice.TransactionID,CustomerReferenceNr:g.invoice.CustomerReferenceNr,coinAddress:g.invoice.coinAddress,apikey:B.value.APIKey,output:"json"}}).then((function(e){200===e.status&&(o.success(e.data),O(e.data))})).catch((function(e){e.data&&o.error(e.data)}))}))},_=function e(){g.balanceSocket=new WebSocket("wss://wss.cointopay.com/balance"),g.balanceSocket.onmessage=function(e){if(e&&e.data){var t=e.data.split(":");if(t.length>=4&&g.invoice){if(g.invoice.TransactionID.toString()===t[1].toString()&&Object.keys(i.params).length>0){var c=i.params.confirmCode;setTimeout((function(){I(c,"")}),2e3),"paid"===t[2].toLowerCase()&&(g.showRedirectTimer=!0)}}else 3===t.length&&g.invoice&&g.invoice.TransactionID.toString()===t[1].toString()&&setTimeout((function(){I(g.invoice.Security,"")}),2e3)}},g.balanceSocket.onclose=function(t){g.isClosedBalanceSocket||e()}},W=function e(){g.transactionSocket=new WebSocket("wss://wss.cointopay.com/transactions"),g.transactionSocket.onmessage=function(e){if(e&&e.data){var t=e.data,c=t.split(":");if(c.length>=4&&g.invoice){if(g.invoice.TransactionID.toString()===c[1].toString()&&(setTimeout((function(){I(g.invoice.Security,"")}),2e3),"blockchain"===c[0].toLowerCase()&&null===window.localStorage.getItem(c[1]))){window.localStorage.setItem(c[1],"true");var n="confirming"===c[3].toLowerCase(),o=n?0:p(Number.parseFloat(g.invoice.Amount)-Number.parseFloat(c[2]));r.emit("paymentNotificationModal",{invoice:g.invoice,isFullPayment:n,amount:o})}}else 3===c.length&&g.invoice&&g.invoice.TransactionID.toString()===c[1].toString()&&setTimeout((function(){I(g.invoice.Security,"")}),2e3)}},g.transactionSocket.onclose=function(t){g.isClosedTransactionsSocket||e()}};return Object(n["onBeforeMount"])((function(){g.isRefreshable=!0,Object.keys(i.query).length>0&&("undefined"!==typeof i.query.lang&&(g.lang=i.query.lang,l.commit(Wc["M"],g.lang.toUpperCase()),l.dispatch(Wc["o"])),"undefined"!==typeof i.query.fiat&&(g.isFiat=Number(i.query.fiat)),!0===i.query.t&&(e.isNotice=!0)),D(),W(),_()})),Object(n["onBeforeUnmount"])((function(){g.transactionInterval&&clearInterval(g.transactionInterval),g.interval&&clearInterval(g.interval),null!==g.balanceSocket&&(g.isClosedBalanceSocket=!0,g.balanceSocket.close()),null!==g.transactionSocket&&(g.isClosedTransactionsSocket=!0,g.transactionSocket.close())})),Object(rt["a"])(Object(rt["a"])({translate:t},Object(n["toRefs"])(g)),{},{isLoggedIn:S,generateIconUrl:m,qrOptions:v,copyToClipboard:b,formatDT:u,toFixed:p,theme:C,inputCurrency:h,altCoin:y,isWaiting:k,isPaid:N,isExpired:w,isActive:V,reOpenable:x,generateCancelLink:E,refreshTransaction:P,renewTransaction:A,reOpenInvoice:R,isOnlyPaymentMethod:L,isPaymentMethodAvailable:q,launchPayWithOtherCurrencyModal:F,payViaTZERO:U})}};c("9f63");const Zc=Bt()(Hc,[["render",at],["__scopeId","data-v-0f41bacc"]]);t["default"]=Zc},e4db:function(e,t,c){e.exports=c.p+"assets/img/warning.0228fbca.svg"}}]);
//# sourceMappingURL=invoice.aeae7bd7.js.map