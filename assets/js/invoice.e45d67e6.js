"use strict";(self["webpackChunkcointopay"]=self["webpackChunkcointopay"]||[]).push([[149],{9069:function(e,t,o){o.d(t,{Z:function(){return l}});var n=o(821);const a=(0,n.createStaticVNode)('<div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div><div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div>',2);function r(e,t,o,n,r,i){return a}var i={name:"PulseSkeleton"},c=o(3744);const s=(0,c.Z)(i,[["render",r]]);var l=s},784:function(e,t,o){o.d(t,{Z:function(){return p}});var n=o(821);const a={class:"p-4"},r={class:"max-w-7xl 3xl:max-w-8xl mx-auto"},i={class:"flex flex-col md:flex-row space-x-0 md:space-x-4"},c={class:"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4",style:{"min-height":"calc(100vh - 351px)"}};function s(e,t,o,s,l,d){return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",c,[(0,n.renderSlot)(e.$slots,"default")])])])])}var l={name:"CenteredLayout"},d=o(3744);const m=(0,d.Z)(l,[["render",s]]);var p=m},9108:function(e,t,o){o.r(t),o.d(t,{default:function(){return Lo}});var n=o(821);const a=e=>((0,n.pushScopeId)("data-v-0f41bacc"),e=e(),(0,n.popScopeId)(),e),r={class:"grid grid-cols-3 gap-0 md:gap-4"},i={key:0,class:"col-span-3"},c=a((()=>(0,n.createElementVNode)("img",{alt:"",src:"https://s3-eu-west-1.amazonaws.com/cointopay/pics/wojak.png",class:"mx-auto",style:{"max-width":"100%"}},null,-1))),s=[c],l={class:"col-span-3 md:col-span-2"},d={class:"text-sm md:text-base whitespace-nowrap mb-4 md:mb-0 scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},m={class:"flex items-center justify-between mb-4"},p={class:"flex items-center"},u={key:0},v=["src"],g=(0,n.createTextVNode)(),h={class:"font-semibold text-xl"},f={key:1},y=["src"],k=(0,n.createTextVNode)(),N={class:"font-semibold text-xl"},V={class:"mb-4"},w={class:"grid grid-cols-5 gap-0.5 md:gap-4"},x={class:"col-span-5 md:col-span-2"},E={class:"col-span-5 md:col-span-3 font-semibold"},b={class:"grid grid-cols-5 gap-0.5 md:gap-4"},C={class:"col-span-5 md:col-span-2"},B={class:"col-span-5 md:col-span-3 font-semibold"},S={class:"flex items-center"},I={key:0},D={key:1},T=a((()=>(0,n.createElementVNode)("span",{class:"inline-block mx-2"},"-",-1))),O={key:0,class:"mr-3"},M=a((()=>(0,n.createElementVNode)("span",null,"Recheck balance",-1))),P={key:0,class:"text-red-500 grid grid-cols-5 gap-0.5 md:gap-4"},A=a((()=>(0,n.createElementVNode)("div",{class:"col-span-5 md:col-span-2"},"Missing amount",-1))),R={class:"col-span-5 md:col-span-3 font-semibold"},j={class:"grid grid-cols-5 gap-0.5 md:gap-4"},L={class:"col-span-5 md:col-span-2"},q={class:"col-span-5 md:col-span-3 font-semibold"},$={class:"flex items-center"},Z=["href"],F={class:"grid grid-cols-5 gap-0.5 md:gap-4"},U=a((()=>(0,n.createElementVNode)("div",{class:"col-span-5 md:col-span-2"},"Master Transaction ID",-1))),_={class:"col-span-5 md:col-span-3 font-semibold"},W={class:"grid grid-cols-5 gap-0.5 md:gap-4"},z={class:"col-span-5 md:col-span-2"},J={class:"col-span-5 md:col-span-3 font-semibold"},K={class:"grid grid-cols-5 gap-0.5 md:gap-4"},H={class:"col-span-5 md:col-span-2"},Q={class:"col-span-5 md:col-span-3 font-semibold"},X={class:"grid grid-cols-5 gap-0.5 md:gap-4"},Y={class:"col-span-5 md:col-span-2"},G={class:"col-span-5 md:col-span-3 font-semibold"},ee=["innerHTML"],te={key:0,class:"grid grid-cols-5 gap-0.5 md:gap-4"},oe={class:"col-span-5 md:col-span-2"},ne={class:"col-span-5 md:col-span-3 font-semibold"},ae={class:"grid grid-cols-5 gap-0.5 md:gap-4"},re={class:"col-span-5 md:col-span-2"},ie={class:"col-span-5 md:col-span-3 font-semibold"},ce={class:"mt-4 flex items-center justify-center"},se={class:"text-center"},le={class:"mb-4"},de={class:"flex items-center justify-center"},me={class:"text-2xl font-bold text-blue-500 text-center capitalize"},pe=["href"],ue=a((()=>(0,n.createElementVNode)("span",{class:"mr-2"},"Click to Redirect",-1))),ve={key:0},ge={key:1,class:"flex items-center justify-center mt-3"},he={class:"cursor-pointer text-red-500 mr-4 animate-pulse"},fe={key:2,class:"mt-4"},ye={class:"flex flex-wrap justify-center items-stretch w-full mb-4 relative"},ke={class:"flex -mr-px"},Ne={key:3,class:"flex items-center justify-center"},Ve=["href"],we={class:"text-center"},xe={class:"mb-4"},Ee={class:"flex items-center justify-center"},be={class:"text-2xl font-bold text-blue-500 text-center capitalize"},Ce=["href"],Be=a((()=>(0,n.createElementVNode)("span",{class:"mr-2"},"Click to Redirect",-1))),Se={key:0,class:"mb-3"},Ie=["href"],De=a((()=>(0,n.createElementVNode)("img",{class:"h-16",src:"https://s3-eu-west-1.amazonaws.com/cointopay/img/cointopay_checkout.png",alt:""},null,-1))),Te=[De],Oe={class:"text-center"},Me={class:"mb-4"},Pe={class:"flex items-center justify-center"},Ae={class:"text-2xl font-bold text-blue-500 text-center capitalize"},Re=["href"],je=a((()=>(0,n.createElementVNode)("span",{class:"mr-2"},"Click to Redirect",-1))),Le={key:0},qe=["innerHTML"],$e=["href"],Ze={class:"grid grid-cols-2 gap-0 md:gap-4"},Fe={class:"col-span-2 md:col-span-1"},Ue={key:0,class:"card"},_e={class:"text-center body"},We={class:"col-span-2 md:col-span-1"},ze={key:0,class:"card"},Je={class:"body text-center"},Ke=["href"],He={class:"col-span-3 md:col-span-1"},Qe={key:0,class:"card"},Xe={class:"title"},Ye={class:"flex items-center justify-between"},Ge=a((()=>(0,n.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1))),et={class:"body"},tt={class:"mb-4 flex items-center justify-between flex-col"},ot={class:"flex flex-wrap items-stretch w-full mb-4 relative"},nt={class:"flex -mr-px"},at={class:"text-center text-red-500"};function rt(e,t,o,a,c,De){const rt=(0,n.resolveComponent)("icon"),it=(0,n.resolveComponent)("j-button"),ct=(0,n.resolveComponent)("status-icon"),st=(0,n.resolveComponent)("QRCodeVue3"),lt=(0,n.resolveComponent)("refund-invoice"),dt=(0,n.resolveComponent)("Tab"),mt=(0,n.resolveComponent)("TabSet"),pt=(0,n.resolveComponent)("forward-invoice"),ut=(0,n.resolveComponent)("pulse-skeleton"),vt=(0,n.resolveComponent)("centered-layout"),gt=(0,n.resolveComponent)("pay-with-different-currency-modal"),ht=(0,n.resolveComponent)("payment-notification-modal"),ft=(0,n.resolveComponent)("redirect-timer-modal"),yt=(0,n.resolveDirective)("tippy");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(vt,null,{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",r,[e.loader||e.invoice?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",i,s)),(0,n.createElementVNode)("div",l,["main"!==e.loader&&e.invoice?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("div",p,[e.isSimpleView?((0,n.openBlock)(),(0,n.createElementBlock)("div",u,[(0,n.createElementVNode)("img",{src:a.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,v),g,(0,n.createElementVNode)("h2",h,(0,n.toDisplayString)(`${a.translate("invoice.invoice")} #${e.invoice.TransactionID}`),1)])):((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[(0,n.createElementVNode)("img",{src:a.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,y),k,(0,n.createElementVNode)("h2",N,(0,n.toDisplayString)(`${a.translate("invoice.invoice")} #${e.invoice.TransactionID}`),1)]))]),(0,n.createElementVNode)("span",{class:"cursor-pointer hover:text-blue-500",onClick:t[0]||(t[0]=t=>e.isShowUrl=!e.isShowUrl)},[(0,n.createVNode)(rt,{name:"qr-code"})])]),(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("div",w,[(0,n.createElementVNode)("div",x,(0,n.toDisplayString)(a.translate("invoice.merchant")),1),(0,n.createElementVNode)("div",E,(0,n.toDisplayString)(e.invoice.ShopTitle),1)]),(0,n.createElementVNode)("div",b,[(0,n.createElementVNode)("div",C,(0,n.toDisplayString)(a.translate("invoice.amount")),1),(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("div",S,[e.isSimpleView?((0,n.openBlock)(),(0,n.createElementBlock)("div",I,(0,n.toDisplayString)(`${e.invoice.Amount} ${e.invoice.LongName}`),1)):((0,n.openBlock)(),(0,n.createElementBlock)("div",D,[(0,n.createTextVNode)((0,n.toDisplayString)(`${e.invoice.Amount} ${e.invoice.LongName} `)+" ",1),T,(0,n.createTextVNode)(" "+(0,n.toDisplayString)(` ${e.invoice.OriginalAmount} ${a.inputCurrency}`),1)])),a.isWaiting||1!==e.invoice.Reopenable||1!==e.invoice.NotEnough?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(it,{key:2,disabled:"reOpenInvoice"===e.loader,class:"ml-3",onClick:t[1]||(t[1]=e=>a.reOpenInvoice())},{default:(0,n.withCtx)((()=>["reOpenInvoice"===e.loader?((0,n.openBlock)(),(0,n.createElementBlock)("div",O,[(0,n.createVNode)(rt,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),M])),_:1},8,["disabled"])),[[yt,"Please pay the missing amount, once confirmed, click the recheck balance button. Thanks."]])])])]),"underpaid"===e.invoice.Status.toLowerCase()?((0,n.openBlock)(),(0,n.createElementBlock)("div",P,[A,(0,n.createElementVNode)("div",R,(0,n.toDisplayString)(`${a.toFixed(e.invoice.InitialAmount-e.invoice.Amount)} ${a.inputCurrency}`),1)])):(0,n.createCommentVNode)("",!0),e.isSimpleView?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("div",L,(0,n.toDisplayString)(a.translate("invoice.fee")),1),(0,n.createElementVNode)("div",q,[(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("span",null,"Service % + Fixed Network "+(0,n.toDisplayString)(e.invoice.MinerFee)+" "+(0,n.toDisplayString)(e.invoice.LongName),1),(0,n.createElementVNode)("a",{class:"ml-3",href:e.termsLink,target:"_blank"},[(0,n.createVNode)(rt,{name:"question-mark",classes:"w-5 h-5 text-yellow-500 dark:text-yellow-400"})],8,Z)])])]),(0,n.createElementVNode)("div",F,[U,(0,n.createElementVNode)("div",_,(0,n.toDisplayString)(e.invoice.MasterTransactionID),1)]),(0,n.createElementVNode)("div",W,[(0,n.createElementVNode)("div",z,(0,n.toDisplayString)(a.translate("invoice.transaction_id")),1),(0,n.createElementVNode)("div",J,(0,n.toDisplayString)(e.invoice.TransactionID),1)]),(0,n.createElementVNode)("div",K,[(0,n.createElementVNode)("div",H,(0,n.toDisplayString)(a.translate("invoice.status")),1),(0,n.createElementVNode)("div",Q,(0,n.toDisplayString)(e.invoice.Status),1)])],64)),(0,n.createElementVNode)("div",X,[(0,n.createElementVNode)("div",Y,(0,n.toDisplayString)(a.translate("invoice.reference")),1),(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",{class:"break-all whitespace-normal",innerHTML:e.invoice.CustomerReferenceNr},null,8,ee)])]),e.isSimpleView?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:2},[a.reOpenable?((0,n.openBlock)(),(0,n.createElementBlock)("div",te,[(0,n.createElementVNode)("div",oe,(0,n.toDisplayString)(a.translate("invoice.address")),1),(0,n.createElementVNode)("div",ne,(0,n.toDisplayString)(e.invoice.coinAddress),1)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",ae,[(0,n.createElementVNode)("div",re,(0,n.toDisplayString)(a.translate("invoice.created_on")),1),(0,n.createElementVNode)("div",ie,(0,n.toDisplayString)(a.formatDT(e.invoice.CreatedOn)),1)])],64)),(0,n.createElementVNode)("div",ce,[(0,n.createElementVNode)("span",{onClick:t[2]||(t[2]=t=>e.isSimpleView=!e.isSimpleView),class:(0,n.normalizeClass)(["cursor-pointer mx-auto inline-block transform transition-transform",{"rotate-180":!e.isSimpleView}])},[(0,n.createVNode)(rt,{name:"chevron-double",classes:"w-5 h-5"})],2)])])]),(0,n.createVNode)(mt,null,{default:(0,n.withCtx)((()=>[a.isPaymentMethodAvailable("crypto")?((0,n.openBlock)(),(0,n.createBlock)(dt,{key:0,name:a.translate("invoice.crypto"),selected:null===e.isFiat||0===e.isFiat||a.isOnlyPaymentMethod("crypto")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",se,[(0,n.createElementVNode)("div",le,[(0,n.createElementVNode)("div",de,[(0,n.createVNode)(ct,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("p",me,(0,n.toDisplayString)(e.timer),1)]),a.isPaid||a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center animate-pulse text-2xl text-blue-500 font-bold"},[ue,(0,n.createVNode)(rt,{name:"arrow-right",classes:"w-5 h-5"})],8,pe)):(0,n.createCommentVNode)("",!0)]),a.isPaid||a.isExpired?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",ve,[(0,n.createVNode)(st,{imgclass:"mx-auto",width:a.qrOptions.width,height:a.qrOptions.height,"qr-options":a.qrOptions.qrOptions,"background-options":a.qrOptions.backgroundOptions,"dots-options":a.qrOptions.dotsOptions,"corners-dot-options":a.qrOptions.cornersDotOptions,"corners-square-options":a.qrOptions.cornersSquareOptions,value:e.isCryptoLink?e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress+"?amount="+e.invoice.Amount:e.invoice.coinAddress},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),e.invoice.Tag?((0,n.openBlock)(),(0,n.createElementBlock)("div",ge,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",he,[(0,n.createVNode)(rt,{name:"exclamation-circle"})])),[[yt,"Please use this Memo/Tag, otherwise you risk losing your funds."]]),(0,n.createElementVNode)("span",null,"Memo/Tag: "+(0,n.toDisplayString)(e.invoice.Tag),1)])):(0,n.createCommentVNode)("",!0),"none"!==e.invoice.coinAddress?((0,n.openBlock)(),(0,n.createElementBlock)("div",fe,[(0,n.createElementVNode)("div",ye,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.invoice.coinAddress=t),readonly:"",class:"form-input flex-1 md:flex-none md:w-2/3 rounded-r-none"},null,512),[[n.vModelText,e.invoice.coinAddress]]),(0,n.createElementVNode)("div",ke,[(0,n.createElementVNode)("span",{onClick:t[4]||(t[4]=t=>a.copyToClipboard(decodeURIComponent(e.invoice.coinAddress))),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[(0,n.createVNode)(rt,{name:"clipboard",classes:"w-5 h-5"})])])])])):(0,n.createCommentVNode)("",!0),a.isPaid||a.isExpired?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ne,[(0,n.createVNode)(it,{class:"mr-3",onClick:t[5]||(t[5]=t=>e.isCryptoLink=!e.isCryptoLink)},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.isCryptoLink?a.translate("invoice.full_crypto_link"):a.translate("invoice.address_only")),1)])),_:1}),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(it,{disabled:!e.isRefreshable,onClick:t[6]||(t[6]=e=>a.refreshTransaction())},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(rt,{name:"refresh",classes:"w-4 h-4"})])),_:1},8,["disabled"])),[[yt,"Refresh"]])])),a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:4,class:"text-blue-500 hover:underline",href:a.renewTransaction()},"Pay anyway? Click here",8,Ve)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(lt,{invoice:e.invoice},null,8,["invoice"])])])),_:1},8,["name","selected"])):(0,n.createCommentVNode)("",!0),a.isPaymentMethodAvailable("instant")?((0,n.openBlock)(),(0,n.createBlock)(dt,{key:1,name:a.translate("invoice.tzero"),selected:a.isOnlyPaymentMethod("instant")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",we,[(0,n.createElementVNode)("div",xe,[(0,n.createElementVNode)("div",Ee,[(0,n.createVNode)(ct,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("p",be,(0,n.toDisplayString)(e.timer),1)]),a.isPaid||a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[Be,(0,n.createVNode)(rt,{name:"arrow-right",classes:"w-5 h-5"})],8,Ce)):(0,n.createCommentVNode)("",!0)]),a.isPaid||a.isExpired?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Se,[(0,n.createVNode)(st,{imgclass:"mx-auto",width:a.qrOptions.width,height:a.qrOptions.height,"qr-options":a.qrOptions.qrOptions,"background-options":a.qrOptions.backgroundOptions,"dots-options":a.qrOptions.dotsOptions,"corners-dot-options":a.qrOptions.cornersDotOptions,"corners-square-options":a.qrOptions.cornersSquareOptions,value:e.invoice.TZERO},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:1,class:"text-blue-500 hover:underline",href:a.renewTransaction()},"Pay anyway? Click here",8,Ie)):(0,n.createCommentVNode)("",!0),a.isLoggedIn&&a.isWaiting?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:2,class:"mx-auto inline-block cursor-pointer",onClick:t[7]||(t[7]=e=>a.payViaTZERO())},Te)):(0,n.createCommentVNode)("",!0)])])),_:1},8,["name","selected"])):(0,n.createCommentVNode)("",!0),a.isPaymentMethodAvailable("fiat",e.isFiat)?((0,n.openBlock)(),(0,n.createBlock)(dt,{key:2,name:a.translate("invoice.fiat"),selected:1===e.isFiat||a.isOnlyPaymentMethod("fiat")},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Oe,[(0,n.createElementVNode)("div",Me,[(0,n.createElementVNode)("div",Pe,[(0,n.createVNode)(ct,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("p",Ae,(0,n.toDisplayString)(e.timer),1)]),a.isPaid||a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[je,(0,n.createVNode)(rt,{name:"arrow-right",classes:"w-5 h-5"})],8,Re)):(0,n.createCommentVNode)("",!0)]),a.isPaid||a.isExpired||!e.invoice.PaymentDetail?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Le,[(0,n.createElementVNode)("div",{class:"content-center",innerHTML:e.invoice.PaymentDetail},null,8,qe)])),a.isExpired?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:1,class:"text-blue-500 hover:underline",href:a.renewTransaction()},"Pay anyway? Click here",8,$e)):(0,n.createCommentVNode)("",!0)])])),_:1},8,["name","selected"])):(0,n.createCommentVNode)("",!0)])),_:1}),(0,n.createVNode)(pt,{invoice:e.invoice},null,8,["invoice"]),(0,n.createElementVNode)("div",Ze,[(0,n.createElementVNode)("div",Fe,[a.isActive&&e.invoice.inputCurrency&&0===e.invoice.LTR&&(null===e.isFiat||0===e.isFiat)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ue,[(0,n.createElementVNode)("div",_e,[(0,n.createVNode)(it,{onClick:t[8]||(t[8]=e=>a.launchPayWithOtherCurrencyModal())},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(a.translate("invoice.pay_with_different_currency")),1)])),_:1})])])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",We,[a.isWaiting?((0,n.openBlock)(),(0,n.createElementBlock)("div",ze,[(0,n.createElementVNode)("div",Je,[(0,n.createElementVNode)("a",{href:a.generateCancelLink,class:"btn btn-warning"},"Cancel",8,Ke)])])):(0,n.createCommentVNode)("",!0)])])],64)):(0,n.createCommentVNode)("",!0),"main"===e.loader?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createVNode)(ut),(0,n.createVNode)(ut)],64)):(0,n.createCommentVNode)("",!0)]),(0,n.withDirectives)((0,n.createElementVNode)("div",He,["main"!==e.loader?((0,n.openBlock)(),(0,n.createElementBlock)("div",Qe,[(0,n.createElementVNode)("div",Xe,[(0,n.createElementVNode)("div",Ye,[(0,n.createElementVNode)("h5",null,(0,n.toDisplayString)(a.translate("invoice.invoice_url")),1),(0,n.createElementVNode)("span",{onClick:t[9]||(t[9]=t=>e.isShowUrl=!1),class:"cursor-pointer"},[(0,n.createVNode)(rt,{name:"close"})])])]),Ge,(0,n.createElementVNode)("div",et,[(0,n.createElementVNode)("div",tt,[(0,n.createVNode)(st,{imgclass:"mb-3",width:a.qrOptions.width,height:a.qrOptions.height,"qr-options":a.qrOptions.qrOptions,"background-options":a.qrOptions.backgroundOptions,"dots-options":a.qrOptions.dotsOptions,"corners-dot-options":a.qrOptions.cornersDotOptions,"corners-square-options":a.qrOptions.cornersSquareOptions,value:e.invoiceUrl},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"]),(0,n.createElementVNode)("div",ot,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.invoiceUrl=t),readonly:"",class:"form-input flex-1 rounded-r-none"},null,512),[[n.vModelText,e.invoiceUrl]]),(0,n.createElementVNode)("div",nt,[(0,n.createElementVNode)("span",{onClick:t[11]||(t[11]=t=>a.copyToClipboard(e.invoiceUrl)),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[(0,n.createVNode)(rt,{name:"clipboard",classes:"w-5 h-5"})])])]),(0,n.createElementVNode)("p",at,(0,n.toDisplayString)(a.translate("invoice.warning")),1)])])])):(0,n.createCommentVNode)("",!0),"main"===e.loader?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createVNode)(ut),(0,n.createVNode)(ut)],64)):(0,n.createCommentVNode)("",!0)],512),[[n.vShow,e.isShowUrl]])])])),_:1}),(0,n.createVNode)(gt),(0,n.createVNode)(ht),(0,n.createVNode)(ft)],64)}var it=o(784),ct=o(2215),st=o.n(ct),lt=o(3164),dt=o(1322),mt=o(7304),pt=o(9069);const ut={class:"card"},vt={class:"body"},gt={class:"flex items-center flex-col md:flex-row"},ht={class:"w-full md:flex-1 mr-0 md:mr-3"},ft={key:0,class:"text-right mb-1"},yt={class:"text-red-500 text-sm"},kt={class:"mt-3 md:mt-0"},Nt={key:0,class:"mb-1 block"},Vt={key:0,class:"mr-3"};function wt(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("j-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ut,[(0,n.createElementVNode)("div",vt,[(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)((e=>a.submit()),["prevent"]))},[(0,n.createElementVNode)("div",gt,[(0,n.createElementVNode)("div",ht,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("div",ft,[(0,n.createElementVNode)("div",yt,(0,n.toDisplayString)(a.showError(e.errorBag,"email")),1)])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[n.vModelText,e.form.email]])]),(0,n.createElementVNode)("div",kt,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("label",Nt," ")):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(s,{disabled:e.isProcessing},{default:(0,n.withCtx)((()=>[e.isProcessing?((0,n.openBlock)(),(0,n.createElementBlock)("div",Vt,[(0,n.createVNode)(c,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.translate("invoice.forward_invoice")),1)])),_:1},8,["disabled"])])])],32)])])}var xt=o(7983),Et=o(6232),bt=o(4729),Ct={name:"ForwardInvoice",props:["invoice"],components:{JButton:lt.Z,Icon:xt.Z},setup(e){const t=(0,n.inject)("translate"),o=(0,n.inject)("http"),a=(0,n.inject)("toast"),{showError:r,validate:i}=(0,Et.Z)(),{saveNotification:c}=(0,bt.Z)(),s=(0,n.reactive)({form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),l=(0,n.computed)((()=>Object.keys(s.errorBag).length>0));(0,n.watch)((()=>({...s.form})),(()=>{Object.keys(s.errorBag).length>0&&(s.errorBag=i(s.form,s.rules))}));const d="https://app.cointopay.com",m=()=>{s.errorBag=i(s.form,s.rules),0===Object.keys(s.errorBag).length&&(s.isProcessing=!0,o.get(`${d}/InvoiceForwarder`,{params:{invoiceAddress:s.form.email,target:!1,shop:e.invoice.ShopTitle,TransactionID:e.invoice.TransactionID,coinAddress:e.invoice.coinAddress,qrcode:e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress,amount:e.invoice.Amount,output:"json"}}).then((e=>{s.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(s.form.email="",s.errorBag={},a.success("Invoice sent successfully"),c("Invoice sent successfully"))})).catch((e=>{s.isProcessing=!1,console.log(e)})))};return{translate:t,...(0,n.toRefs)(s),showError:r,hasErrors:l,submit:m}}},Bt=o(3744);const St=(0,Bt.Z)(Ct,[["render",wt]]);var It=St;const Dt={class:"mt-4"},Tt={class:"flex items-center flex-col md:flex-row"},Ot={class:"w-full md:flex-1 mr-0 md:mr-3"},Mt={key:0,class:"text-right mb-1"},Pt={class:"text-red-500 text-sm"},At={class:"mt-3 md:mt-0"},Rt={key:0,class:"mb-1 block"},jt={key:0,class:"mr-3"};function Lt(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("j-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Dt,[(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)((e=>a.submit()),["prevent"]))},[(0,n.createElementVNode)("div",Tt,[(0,n.createElementVNode)("div",Ot,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("div",Mt,[(0,n.createElementVNode)("div",Pt,(0,n.toDisplayString)(a.showError(e.errorBag,"address")),1)])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.address=t),class:"form-input w-full",placeholder:"Refund address (crypto/coin address)",type:"text"},null,512),[[n.vModelText,e.form.address]])]),(0,n.createElementVNode)("div",At,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("label",Rt," ")):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(s,{disabled:e.isProcessing},{default:(0,n.withCtx)((()=>[e.isProcessing?((0,n.openBlock)(),(0,n.createElementBlock)("div",jt,[(0,n.createVNode)(c,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.translate("invoice.add")),1)])),_:1},8,["disabled"])])])],32)])}var qt={name:"RefundInvoice",props:["invoice"],components:{JButton:lt.Z,Icon:xt.Z},setup(e){const t=(0,n.inject)("translate"),o=(0,n.inject)("http"),a=(0,n.inject)("toast"),{showError:r,validate:i}=(0,Et.Z)(),{saveNotification:c}=(0,bt.Z)(),s=(0,n.reactive)({form:{address:""},errorBag:{},rules:{address:["required"]},isProcessing:!1}),l=(0,n.computed)((()=>Object.keys(s.errorBag).length>0));(0,n.watch)((()=>({...s.form})),(()=>{Object.keys(s.errorBag).length>0&&(s.errorBag=i(s.form,s.rules))}));const d="https://app.cointopay.com",m=()=>{if(s.errorBag=i(s.form,s.rules),0===Object.keys(s.errorBag).length){s.isProcessing=!0;const t={Call:"Refund",MerchantID:1,APIKey:"_",RefundAddress:s.form.address,ConfirmCode:e.invoice.Security,output:"json"};o.get(`${d}/v2REAPI`,{params:t}).then((e=>{s.isProcessing=!1,"success"===e.data.result?(a.success("Refund address added successfully"),c("Refund address added successfully")):a.error(e.data.message),s.form.address="",s.errorBag={}})).catch((e=>{s.isProcessing=!1,console.log(e)}))}};return{translate:t,...(0,n.toRefs)(s),showError:r,hasErrors:l,submit:m}}};const $t=(0,Bt.Z)(qt,[["render",Lt]]);var Zt=$t;const Ft={class:"flex items-center justify-between"},Ut=(0,n.createElementVNode)("span",null,"Pay with different currency",-1),_t={class:"relative flex-1"},Wt={class:"flex flex-wrap justify-center gap-2 mt-4"},zt=["href"],Jt=["src"],Kt={class:"text-xs font-semibold"};function Ht(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("modal");return(0,n.openBlock)(),(0,n.createBlock)(s,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=e=>a.closeModal())},{title:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Ft,[Ut,(0,n.createElementVNode)("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[(0,n.createVNode)(c,{name:"close"})])])])),content:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",_t,[(0,n.createVNode)(c,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.keyword=t),"aria-label":"Search...",class:"form-input px-10 w-full",type:"text"},null,512),[[n.vModelText,e.keyword]]),""!==e.keyword?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[2]||(t[2]=t=>e.keyword="")},[(0,n.createVNode)(c,{classes:"w-5 h-5",name:"close"})])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",Wt,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.coinsList,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"w-24 w-24 p-3 cursor-pointer text-center border-2 border-gray-300 dark:border-gray-500 hover:border-blue-700 dark:hover:border-blue-500 inline-block rounded-md shadow flex items-center justify-center flex-col",key:t},[(0,n.createElementVNode)("a",{href:a.generateUrl(e.id)},[(0,n.createElementVNode)("img",{class:"w-10 h-10 mb-2 mx-auto",src:a.generateIconUrl(e.name),alt:""},null,8,Jt),(0,n.createElementVNode)("p",Kt,(0,n.toDisplayString)(e.name),1)],8,zt)])))),128))])])),_:1},8,["maxWidth","show"])}var Qt=o(9099),Xt={name:"PayWithDifferentCurrencyModal",components:{Modal:Qt.Z,Icon:xt.Z},setup(){const e=(0,n.inject)("translate"),t=(0,n.inject)("emitter"),{generateIconUrl:o}=(0,bt.Z)(),a=(0,n.reactive)({show:!1,maxWidth:"2xl",closeable:!0,keyword:"",coins:[],invoice:null}),r=(0,n.computed)((()=>a.coins.filter((e=>a.keyword&&""!==a.keyword?-1!==e.name.toLowerCase().indexOf(a.keyword.toLowerCase())&&0!==e.id&&e.id!==a.invoice.AltCoinID:0!==e.id&&e.id!==a.invoice.AltCoinID)))),i=()=>{a.show=!1},c=e=>`https://cointopay.com/CloneMasterTransaction?TargetAltCoinID=${e}&TransactionID=${a.invoice.TransactionID}&MerchantID=${a.invoice.MerchantID}`;return(0,n.onBeforeMount)((()=>{t.on("payWithDifferentCurrencyModal",(e=>{a.coins=e.coins,a.invoice=e.invoice,a.show=!0}))})),{translate:e,...(0,n.toRefs)(a),closeModal:i,coinsList:r,generateUrl:c,generateIconUrl:o}}};const Yt=(0,Bt.Z)(Xt,[["render",Ht]]);var Gt=Yt,eo=o(3513),to=o.p+"assets/img/warning.ffae9e3d.svg";const oo={class:"flex items-center justify-between"},no=(0,n.createElementVNode)("span",null,"Notification",-1),ao={key:0},ro={class:"text-center"},io={key:0,class:"w-36 mx-auto",src:eo,alt:""},co={key:1,class:"w-36 mx-auto",src:to,alt:""},so=(0,n.createElementVNode)("p",{class:"mb-2"},"Thank you for making the transfer with your preferred wallet.",-1),lo={key:0},mo={key:1},po=(0,n.createElementVNode)("p",null,"Please enter your email address to receive status update alerts.",-1),uo={class:"flex items-center flex-col md:flex-row mt-4"},vo={class:"w-full md:flex-1 mr-0 md:mr-3"},go={key:0,class:"text-right mb-1"},ho={class:"text-red-500 text-sm"},fo={class:"mt-3 md:mt-0"},yo={key:0,class:"mb-1 block"},ko={key:0,class:"mr-3"},No=(0,n.createElementVNode)("span",null,"Receive Alerts",-1);function Vo(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon"),s=(0,n.resolveComponent)("j-button"),l=(0,n.resolveComponent)("modal");return(0,n.openBlock)(),(0,n.createBlock)(l,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=e=>a.closeModal())},{title:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",oo,[no,(0,n.createElementVNode)("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>a.closeModal())},[(0,n.createVNode)(c,{name:"close"})])])])),content:(0,n.withCtx)((()=>[e.invoice?((0,n.openBlock)(),(0,n.createElementBlock)("div",ao,[(0,n.createElementVNode)("div",ro,[e.isFullPayment?((0,n.openBlock)(),(0,n.createElementBlock)("img",io)):((0,n.openBlock)(),(0,n.createElementBlock)("img",co))]),so,e.isFullPayment?((0,n.openBlock)(),(0,n.createElementBlock)("p",lo,"The "+(0,n.toDisplayString)(e.invoice.LongName)+" blockchain can take some time to confirm your payment. Please enter your email address to receive status update alerts for #"+(0,n.toDisplayString)(e.invoice.TransactionID)+".",1)):(0,n.createCommentVNode)("",!0),e.isFullPayment?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("p",mo,"We received your payment, however it is not enough to fulfill the transaction, please make the additional payment of "+(0,n.toDisplayString)(e.amount)+" "+(0,n.toDisplayString)(e.invoice.LongName)+".",1)),po,(0,n.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,n.withModifiers)((e=>a.submit()),["prevent"]))},[(0,n.createElementVNode)("div",uo,[(0,n.createElementVNode)("div",vo,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("div",go,[(0,n.createElementVNode)("div",ho,(0,n.toDisplayString)(a.showError(e.errorBag,"email")),1)])):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.email=t),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[n.vModelText,e.form.email]])]),(0,n.createElementVNode)("div",fo,[a.hasErrors?((0,n.openBlock)(),(0,n.createElementBlock)("label",yo," ")):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(s,{disabled:e.isProcessing},{default:(0,n.withCtx)((()=>[e.isProcessing?((0,n.openBlock)(),(0,n.createElementBlock)("div",ko,[(0,n.createVNode)(c,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,n.createCommentVNode)("",!0),No])),_:1},8,["disabled"])])])],32)])):(0,n.createCommentVNode)("",!0)])),_:1},8,["maxWidth","show"])}var wo={name:"PaymentNotificationModal",components:{Modal:Qt.Z,Icon:xt.Z,JButton:lt.Z},setup(){const e=(0,n.inject)("translate"),t=(0,n.inject)("emitter"),o=(0,n.inject)("http"),a=(0,n.inject)("toast"),{saveNotification:r}=(0,bt.Z)(),{validate:i,showError:c}=(0,Et.Z)(),s="https://app.cointopay.com",l=(0,n.reactive)({show:!1,maxWidth:"2xl",closeable:!0,invoice:null,isFullPayment:!0,amount:0,form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),d=(0,n.computed)((()=>Object.keys(l.errorBag).length>0));(0,n.watch)((()=>({...l.form})),(()=>{Object.keys(l.errorBag).length>0&&(l.errorBag=i(l.form,l.rules))}));const m=()=>{l.show=!1},p=()=>{l.errorBag=i(l.form,l.rules),0===Object.keys(l.errorBag).length&&(l.isProcessing=!0,o.get(`${s}/InvoiceForwarder`,{params:{invoiceAddress:l.form.email,target:!1,shop:l.invoice.ShopTitle,TransactionID:l.invoice.TransactionID,coinAddress:l.invoice.coinAddress,qrcode:l.invoice.CoinName.toLowerCase()+":"+l.invoice.coinAddress,amount:l.invoice.Amount,output:"json"}}).then((e=>{l.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(l.form.email="",l.errorBag={},a.success("Subscribed to alerts successfully"),r("Subscribed to alerts successfully"),m())})).catch((e=>{l.isProcessing=!1,console.log(e)})))};return(0,n.onBeforeMount)((()=>{t.on("paymentNotificationModal",(e=>{e.close&&!0===e.close?l.show=!1:(l.invoice=e.invoice,l.isFullPayment=e.isFullPayment,l.amount=e.amount,l.form={email:""},l.errorBag={},l.show=!0)}))})),{translate:e,...(0,n.toRefs)(l),hasErrors:d,showError:c,closeModal:m,submit:p}}};const xo=(0,Bt.Z)(wo,[["render",Vo]]);var Eo=xo,bo=o(161);function Co(e,t,o,a,r,i){const c=(0,n.resolveComponent)("icon");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,["waiting"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,name:"spinner",classes:"w-6 h-6 mr-3 text-blue-500"})):(0,n.createCommentVNode)("",!0),"paid"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:1,name:"check-circle",classes:"w-8 h-8 mr-3 text-green-500"})):(0,n.createCommentVNode)("",!0),"underpaid"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:2,name:"check-circle",classes:"w-8 h-8 mr-3 text-yellow-500"})):(0,n.createCommentVNode)("",!0),"expired"===a.status?((0,n.openBlock)(),(0,n.createBlock)(c,{key:3,name:"x-circle",classes:"w-8 h-8 mr-3 text-red-500"})):(0,n.createCommentVNode)("",!0)],64)}var Bo={name:"StatusIcon",props:["invoice"],components:{Icon:xt.Z},setup(e){const t=(0,n.computed)((()=>e.invoice&&e.invoice.Status.toLowerCase()));return{status:t}}};const So=(0,Bt.Z)(Bo,[["render",Co]]);var Io=So,Do=o(2119),To=o(8637),Oo=o(9783),Mo=o(9414),Po=o(6486);const Ao=o(1798);var Ro={name:"Invoice",components:{CenteredLayout:it.Z,QRCodeVue3:st(),PulseSkeleton:pt.Z,JButton:lt.Z,TabSet:dt.Z,Tab:mt.Z,Icon:xt.Z,ForwardInvoice:It,RefundInvoice:Zt,PayWithDifferentCurrencyModal:Gt,PaymentNotificationModal:Eo,RedirectTimerModal:bo.Z,StatusIcon:Io},setup(){const e=(0,n.inject)("translate"),t=(0,n.inject)("http"),o=(0,n.inject)("toast"),a=(0,n.inject)("swal"),r=(0,n.inject)("emitter"),i=(0,Do.yj)(),c=(0,Do.tv)(),s=(0,To.oR)(),{generateIconUrl:l,copyToClipboard:d,formatDT:m,saveNotification:p,toFixed:u}=(0,bt.Z)(),{qrOptions:v}=(0,Mo.Z)(),g="https://app.cointopay.com",h=(0,n.reactive)({lang:"en",isFiat:null,coins:[],termsLink:window.location.protocol+"//"+window.location.host+"/terms",loader:"",timer:null,interval:null,transactionInterval:null,showRedirectTimer:!1,invoice:null,invoiceUrl:window.location.href,isSimpleView:!0,isCryptoLink:!0,isRefreshable:!1,transactionSocket:null,isClosedTransactionsSocket:!1,balanceSocket:null,isClosedBalanceSocket:!1,isShowUrl:!1}),f=(0,n.computed)((()=>{let e="";if(h.invoice){e=h.invoice.inputCurrency;const t=Po.find(s.state.altCoins,{ShorName:e});t&&(e=t.LongName)}return e})),y=(0,n.computed)((()=>Po.find(s.state.altCoins,{ID:h.invoice.AltCoinID}))),k=(0,n.computed)((()=>h.invoice&&"waiting"===h.invoice.Status.toLowerCase())),N=(0,n.computed)((()=>h.invoice&&-1!==["paid","underpaid"].indexOf(h.invoice.Status.toLowerCase()))),V=(0,n.computed)((()=>h.invoice&&"expired"===h.invoice.Status.toLowerCase())),w=(0,n.computed)((()=>h.invoice&&-1!==["waiting","awaiting-fiat"].indexOf(h.invoice.Status.toLowerCase()))),x=(0,n.computed)((()=>h.invoice&&"underpaid"===h.invoice.Status.toLowerCase()&&"1"===h.invoice.Reopenable.toString())),E=(0,n.computed)((()=>`${g}/MerchantAPI?Confirm=true&CustomerReferenceNr=${h.invoice.CustomerReferenceNr}&TransactionID=${h.invoice.TransactionID}&MerchantID=${h.invoice.MerchantID}&coinAddress=${h.invoice.coinAddress}&AltCoinID=${h.invoice.AltCoinID}`)),b=(0,n.computed)((()=>s.state.mode)),C=(0,n.computed)((()=>s.state.user)),B=(0,n.computed)((()=>s.state.isLoggedIn)),S=(e,o="main")=>{h.loader=o;const n={Call:"Transactiondetail",MerchantID:1,APIKey:"_",ConfirmCode:e,output:"json"};t.get(`${g}/v2REAPI`,{params:n}).then((e=>{if(h.loader="",200===e.status&&"failed"!==e.data.result){h.invoice=e.data.data;const t=h.invoice.Status.toLowerCase();h.isFiat=1===h.invoice.Buy||(1===h.isFiat?1:0),-1!==["paid","underpaid","expired"].indexOf(t)&&(h.timer=h.invoice.Status,h.transactionInterval&&clearInterval(h.transactionInterval),h.interval&&(clearInterval(h.interval),h.timer=t),"paid"===t&&h.showRedirectTimer&&(r.emit("paymentNotificationModal",{close:!0}),r.emit("redirectTimerModal",{invoice:h.invoice}))),-1!==["waiting","awaiting-fiat"].indexOf(t)&&D(),"main"===o&&T(h.invoice.MerchantID)}})).catch((e=>{h.loader="",console.log(e)}))},I=()=>{if(Object.keys(i.params).length>0){const e=i.params.confirmCode;S(e),h.transactionInterval&&clearInterval(h.transactionInterval),h.transactionInterval=setInterval((()=>{S(e,!1)}),6e4)}else c.push("/")},D=()=>{if(!h.timer){const e=Ao.tz(h.invoice.CreatedOn,"Europe/Amsterdam").add(Number(h.invoice.ExpiryTime),"minutes");h.interval=setInterval((()=>{const t=Ao().tz("Europe/Amsterdam").valueOf(),o=e.valueOf()-t,n=Math.floor(o/864e5),a=Math.floor(o%864e5/36e5),r=Math.floor(o%36e5/6e4),i=Math.floor(o%6e4/1e3);h.timer=`${n}d ${a}h ${r}m ${i}s`,o<0&&(clearInterval(h.interval),h.timer="Expired",S(h.invoice.ConfirmCode,""))}),1e3)}},T=e=>{const o={MerchantID:e,output:"json",JsonArray:""};t.get(`${g}/CloneMasterTransaction`,{params:o}).then((e=>{h.coins=e.data})).catch((e=>{console.log(e)}))},O=()=>{h.isRefreshable&&(h.isRefreshable=!1,t.get(`${g}/v2REAPI`,{params:{Call:"txcheckcall",MerchantID:h.invoice.MerchantID,APIKey:"_",AltCoinID:h.invoice.AltCoinID,TransactionID:h.invoice.TransactionID,coinAddress:h.invoice.coinAddress,output:"json"}}).then((e=>{setTimeout((()=>{h.isRefreshable=!0}),6e4),e.data&&e.data.message&&o.success(e.data.message)})).catch((e=>{console.log(e)})))},M=()=>{let e=`https://cointopay.com/MerchantAPI?Checkout=true&MerchantID=${h.invoice.MerchantID}&Amount=${h.invoice.OriginalAmount}&AltCoinID=${h.invoice.AltCoinID}&CustomerReferenceNr=${h.invoice.CustomerReferenceNr}&SecurityCode=${h.invoice.SecurityCode}&inputCurrency=${h.invoice.inputCurrency}`;return h.invoice.ConfirmURL&&(e+=`&transactionconfirmurl=${h.invoice.ConfirmURL}`),h.invoice.FailURL&&(e+=`&transactionfailurl=${h.invoice.FailURL}`),e},P=()=>{h.loader="reOpenInvoice",t.get(`${g}/v2REAPI`,{params:{Call:"ReopenNotEnough",MerchantID:h.invoice.MerchantID,APIKey:"_",ConfirmCode:h.invoice.Security,output:"json"}}).then((e=>{h.loader="",200===e.data.status_code?(o.success("Transaction scheduled for re-validation"),p("Transaction scheduled for re-validation"),S(h.invoice.Security,"")):(o.error(e.data.message),p(e.data.message))})).catch((e=>{h.loader="",console.log(e)}))},A=e=>{const t=h.invoice.PaymentOptions.split(",").filter(Boolean);return 1===t.length&&1!==h.isFiat?-1!==t.indexOf(e):-1===t.indexOf("crypto")&&"instant"===e},R=(e,t)=>{const o=h.invoice.PaymentOptions.split(",").filter(Boolean);return-1!==o.indexOf(e)||1===t},j=()=>{r.emit("payWithDifferentCurrencyModal",{coins:h.coins,invoice:h.invoice})},L=()=>{a.fire({title:"Pay Invoice",text:"Do you want to pay this invoice?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then((({value:e})=>{e&&!0===e&&t.get(`${g}/TminusZeroPaymentProcessor`,{params:{MerchantID:h.invoice.MerchantID,AltCoinID:h.invoice.AltCoinID,TransactionID:h.invoice.TransactionID,CustomerReferenceNr:h.invoice.CustomerReferenceNr,coinAddress:h.invoice.coinAddress,apikey:C.value.APIKey,output:"json"}}).then((e=>{200===e.status&&(o.success(e.data),p(e.data))})).catch((e=>{e.data&&o.error(e.data)}))}))},q=()=>{h.balanceSocket=new WebSocket("wss://wss.cointopay.com/balance"),h.balanceSocket.onmessage=function(e){if(e&&e.data){const t=e.data.split(":");if(t.length>=4&&h.invoice){if(h.invoice.TransactionID.toString()===t[1].toString()&&Object.keys(i.params).length>0){const e=i.params.confirmCode;setTimeout((()=>{S(e,"")}),2e3),"paid"===t[2].toLowerCase()&&(h.showRedirectTimer=!0)}}else 3===t.length&&h.invoice&&h.invoice.TransactionID.toString()===t[1].toString()&&setTimeout((()=>{S(h.invoice.Security,"")}),2e3)}},h.balanceSocket.onclose=function(e){h.isClosedBalanceSocket||q()}},$=()=>{h.transactionSocket=new WebSocket("wss://wss.cointopay.com/transactions"),h.transactionSocket.onmessage=function(e){if(e&&e.data){const t=e.data,o=t.split(":");if(o.length>=4&&h.invoice){if(h.invoice.TransactionID.toString()===o[1].toString()&&(setTimeout((()=>{S(h.invoice.Security,"")}),2e3),"blockchain"===o[0].toLowerCase()&&null===window.localStorage.getItem(o[1]))){window.localStorage.setItem(o[1],"true");const e="confirming"===o[3].toLowerCase(),t=e?0:u(Number.parseFloat(h.invoice.Amount)-Number.parseFloat(o[2]));r.emit("paymentNotificationModal",{invoice:h.invoice,isFullPayment:e,amount:t})}}else 3===o.length&&h.invoice&&h.invoice.TransactionID.toString()===o[1].toString()&&setTimeout((()=>{S(h.invoice.Security,"")}),2e3)}},h.transactionSocket.onclose=function(e){h.isClosedTransactionsSocket||$()}};return(0,n.onBeforeMount)((()=>{h.isRefreshable=!0,Object.keys(i.query).length>0&&("undefined"!==typeof i.query.lang&&(h.lang=i.query.lang,s.commit(Oo.lX,h.lang.toUpperCase()),s.dispatch(Oo.Xi)),"undefined"!==typeof i.query.fiat&&(h.isFiat=Number(i.query.fiat)),!0===i.query.t&&(this.isNotice=!0)),I(),$(),q()})),(0,n.onBeforeUnmount)((()=>{h.transactionInterval&&clearInterval(h.transactionInterval),h.interval&&clearInterval(h.interval),null!==h.balanceSocket&&(h.isClosedBalanceSocket=!0,h.balanceSocket.close()),null!==h.transactionSocket&&(h.isClosedTransactionsSocket=!0,h.transactionSocket.close())})),{translate:e,...(0,n.toRefs)(h),isLoggedIn:B,generateIconUrl:l,qrOptions:v,copyToClipboard:d,formatDT:m,toFixed:u,theme:b,inputCurrency:f,altCoin:y,isWaiting:k,isPaid:N,isExpired:V,isActive:w,reOpenable:x,generateCancelLink:E,refreshTransaction:O,renewTransaction:M,reOpenInvoice:P,isOnlyPaymentMethod:A,isPaymentMethodAvailable:R,launchPayWithOtherCurrencyModal:j,payViaTZERO:L}}};const jo=(0,Bt.Z)(Ro,[["render",rt],["__scopeId","data-v-0f41bacc"]]);var Lo=jo}}]);
//# sourceMappingURL=invoice.e45d67e6.js.map