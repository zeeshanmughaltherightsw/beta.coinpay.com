{"version":3,"sources":["webpack:///./src/views/ForgotPassword.vue","webpack:///./src/views/ForgotPassword.vue?90d5"],"names":["class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","key","render","_component_vue_recaptcha","_component_icon","_component_j_button","_component_auth_layout","_openBlock","_createBlock","default","_withCtx","_createElementVNode","_toDisplayString","$setup","onSubmit","_ctx","_withDirectives","type","autofocus","User","$event","autocomplete","_vModelText","form","_createVNode","ref","siteKey","size","onExpire","theme","onFail","onVerify","disabled","_createElementBlock","name","classes","_createCommentVNode","components","AuthLayout","vueRecaptcha","JButton","Icon","setup","http","inject","toast","translate","store","useStore","router","useRouter","validator","validate","showError","state","reactive","reCaptchaAPIKey","process","reCaptcha","output","errorBag","rules","messages","required","isProcessing","mode","computed","isLoggedIn","watch","newVal","oldVal","Object","keys","length","apiBaseUrl","recaptchaVerified","response","recaptchaExpired","value","reset","recaptchaFailed","submit","payload","assign","get","params","then","status","data","status_code","error","reason","success","push","catch","onBeforeMount","route","currentRoute","toRefs","__exports__"],"mappings":"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","file":"assets/js/recover-password.a487f06f.js","sourcesContent":["<template>\r\n  <auth-layout>\r\n    <div class=\"max-w-xl w-full space-y-4 rounded bg-white dark:bg-gray-800 dark:text-gray-400 shadow p-4\">\r\n      <h1 class=\"text-xl font-bold mb-4 text-center\">{{ translate('login.recover') }}</h1>\r\n      <form @submit.prevent=\"submit()\">\r\n        <div class=\"mb-2\">\r\n          <div class=\"flex items-center justify-between mb-1\">\r\n            <label>{{ translate('login.username') }}</label>\r\n            <div class=\"text-blue-500 text-sm\">{{ showError(errorBag, 'User') }}</div>\r\n          </div>\r\n          <input type=\"text\" autofocus v-model=\"form.User\" class=\"form-input w-full\" autocomplete=\"off\"/>\r\n        </div>\r\n        <div>\r\n          <vue-recaptcha ref=\"vueRecaptcha\" :siteKey=\"reCaptchaAPIKey\"\r\n                         size=\"normal\" @expire=\"recaptchaExpired\" :theme=\"mode\"\r\n                         @fail=\"recaptchaFailed\" @verify=\"recaptchaVerified\">\r\n          </vue-recaptcha>\r\n          <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'reCaptcha') }}</div>\r\n        </div>\r\n\r\n        <div class=\"mt-4\">\r\n          <j-button :disabled=\"isProcessing\" size=\"w-full\">\r\n            <div v-if=\"isProcessing\" class=\"mr-3\">\r\n              <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n            </div>\r\n            <span>{{ translate('login.recover') }}</span>\r\n          </j-button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </auth-layout>\r\n</template>\r\n\r\n<script>\r\nimport AuthLayout from '@/components/layouts/AuthLayout'\r\nimport vueRecaptcha from 'vue3-recaptcha2'\r\nimport JButton from '@/templates/Button'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, onBeforeMount, reactive, ref, toRefs, watch } from 'vue'\r\nimport validator from '@/validator'\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\n\r\nexport default {\r\n  name: 'ForgotPassword',\r\n  components: {\r\n    AuthLayout,\r\n    vueRecaptcha,\r\n    JButton,\r\n    Icon\r\n  },\r\n  setup () {\r\n    const vueRecaptcha = ref(null)\r\n\r\n    // Provides\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n    const translate = inject('translate')\r\n    // Store\r\n    const store = useStore()\r\n    // Router\r\n    const router = useRouter()\r\n\r\n    const {\r\n      validate,\r\n      showError\r\n    } = validator()\r\n\r\n    const state = reactive({\r\n      reCaptchaAPIKey: process.env.VUE_APP_GOOGLE_reCAPTCHA_SITE_KEY,\r\n      form: {\r\n        User: '',\r\n        reCaptcha: '',\r\n        output: 'json'\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        User: ['required'],\r\n        reCaptcha: ['required']\r\n      },\r\n      messages: {\r\n        User: {\r\n          required: 'Username is required'\r\n        },\r\n        reCaptcha: {\r\n          required: 'Verify you are not a robot'\r\n        }\r\n      },\r\n      isProcessing: false\r\n    })\r\n\r\n    // Computed\r\n    const mode = computed(() => store.state.mode)\r\n    const isLoggedIn = computed(() => store.state.isLoggedIn)\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(state.form, state.rules, state.messages)\r\n        }\r\n      })\r\n\r\n    // Methods\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const recaptchaVerified = (response) => {\r\n      state.form.reCaptcha = response\r\n    }\r\n    const recaptchaExpired = () => {\r\n      vueRecaptcha.value.reset()\r\n      state.form.reCaptcha = ''\r\n    }\r\n    const recaptchaFailed = () => {\r\n    }\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.isProcessing = true\r\n        let payload = state.form\r\n        payload = Object.assign(payload, {\r\n          'g-recaptcha-response': payload.reCaptcha\r\n        })\r\n        delete payload.reCaptcha\r\n\r\n        http.get(`${apiBaseUrl}/RecoverPassword`, {\r\n          params: payload\r\n        }).then(response => {\r\n          state.isProcessing = false\r\n          if (response.status === 200) {\r\n            if (response.data.status_code === 400) {\r\n              toast.error(response.data.reason)\r\n            } else {\r\n              // Reset google reCaptcha\r\n              toast.success(response.data.data[0])\r\n              // Redirect\r\n              router.push('/login')\r\n            }\r\n          }\r\n        }).catch(error => {\r\n          state.isProcessing = false\r\n          if (error.response) {\r\n            toast.error(error.response.data)\r\n          } else if (error.data && error.data.reason) {\r\n            toast.error(error.data.reason)\r\n          }\r\n          vueRecaptcha.value.reset()\r\n          state.form.reCaptcha = ''\r\n        })\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      if (isLoggedIn.value) {\r\n        const route = store.state.currentRoute\r\n        router.push(route)\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      vueRecaptcha,\r\n      showError,\r\n      mode,\r\n      recaptchaVerified,\r\n      recaptchaExpired,\r\n      recaptchaFailed,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./ForgotPassword.vue?vue&type=template&id=d76876a6\"\nimport script from \"./ForgotPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ForgotPassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}