(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account-pos-invoice-success"],{"2da5":function(e,t,c){"use strict";c.r(t);var n=c("f2bf"),r={key:0,class:"text-center"},a={class:"font-bold text-green-500 mb-4"},o={class:"w-full md:w-3/5 mx-auto mb-3"},s={class:"flex items-center mb-1"},i={style:{"flex-grow":"1"}},l=["placeholder"],u=["disabled"],m={key:0,class:"mr-3"},b={class:"text-blue-500 text-sm text-left"},d=Object(n["createTextVNode"])(" Create New Order ");function p(e,t,c,p,j,O){var f=Object(n["resolveComponent"])("icon"),v=Object(n["resolveComponent"])("routerLink"),g=Object(n["resolveComponent"])("pos-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{content:Object(n["withCtx"])((function(){return[e.ticket&&e.ticket.paymentRequest?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createVNode"])(f,{name:"check-circle",classes:"w-24 h-24 text-green-500 mx-auto"}),Object(n["createElementVNode"])("p",a," Invoice #"+Object(n["toDisplayString"])(e.ticket.paymentRequest.TransactionID)+" has been paid successfully! ",1),Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return p.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",i,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{placeholder:p.translate("pos.receipts.email"),"aria-label":"Email",class:"form-input w-full",type:"email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.email=t})},null,8,l),[[n["vModelText"],e.form.email]])]),Object(n["createElementVNode"])("button",{disabled:e.isProcessing,class:"btn btn-success ml-3"},[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m,[Object(n["createVNode"])(f,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(p.translate("pos.receipts.btn_send_receipt")),1)],8,u)])],32),Object(n["createElementVNode"])("div",b,Object(n["toDisplayString"])(p.showError(e.errorBag,"email")),1)]),Object(n["createVNode"])(v,{class:"btn btn-primary",tag:"a",to:{name:"account-pos-products"}},{default:Object(n["withCtx"])((function(){return[d]})),_:1})])):Object(n["createCommentVNode"])("",!0)]})),_:1})}var j=c("5530"),O=(c("d3b7"),c("25f0"),c("4de4"),c("b64b"),c("a9e3"),c("e9c4"),c("a15b"),c("d81d"),c("66c3")),f=c("cdae"),v=c("6c02"),g=c("5502"),k=c("ea45"),h=c("2ef0"),E=c("c1df"),I=c.n(E),w={name:"Success",components:{"pos-layout":O["a"],Icon:f["a"]},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("http"),c=Object(n["inject"])("toast"),r=Object(g["b"])(),a=Object(v["d"])(),o=Object(v["e"])(),s=Object(k["a"])(),i=s.showError,l=s.validate,u=Object(n["reactive"])({ticket:null,form:{email:""},errorBag:{},rules:{email:["required","email"]},messages:{email:{required:"Email address is required",email:"Please provide a valid email address"}},isProcessing:!1}),m=Object(n["computed"])((function(){return r.state.user})),b=Object(n["computed"])((function(){return r.state.pos})),d=Object(n["computed"])((function(){var e=h["find"](b.value.receipts,(function(e){return e.TICKETNUMBER===u.ticket.ticketId.toString()}));return e&&(e.items=b.value.receiptItems.filter((function(t){return t.RECIEPT_ID===e.ID}))),e}));Object(n["watch"])((function(){return Object(j["a"])({},u.form)}),(function(e,t){Object.keys(u.errorBag).length>0&&(u.errorBag=l(e,u.rules,u.messages))}));var p="https://app.cointopay.com",O=function(){if(u.errorBag=l(u.form,u.rules,u.messages),0===Object.keys(u.errorBag).length&&d.value){u.isProcessing=!0;var e={"Receipt ID":d.value.ID,Time:I()(new Date(Number(d.value.DATE))).format("DD/MM/YYYY H:mm A"),"Total Amount":d.value.TOTAL+" "+d.value.CURRENCY,Cashier:d.value.CASHIER,Items:d.value.items},n={Call:"POSRECEIPT",MerchantID:Number(m.value.ID),APIKey:m.value.APIKey,email:u.form.email,ticketData:JSON.stringify(e),output:"json"},r=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")};t.post("".concat(p,"/v2REAPI"),r(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){u.isProcessing=!1,e.data&&(u.form.email="",c.success("Receipt sent successfully")),o.push({name:"account-pos-products"})})).catch((function(e){u.isProcessing=!1,console.log(e)}))}};return Object(n["onBeforeMount"])((function(){Object.keys(a.params).length>0&&a.params.ticketId&&(u.ticket=h["find"](b.value.tickets,{ticketId:a.params.ticketId}))})),Object(j["a"])(Object(j["a"])({translate:e},Object(n["toRefs"])(u)),{},{showError:i,submit:O})}},y=c("6b0d"),N=c.n(y);const C=N()(w,[["render",p]]);t["default"]=C},c460:function(e,t,c){"use strict";c.r(t);var n=c("f2bf"),r={key:0,class:"text-center"},a={class:"font-bold text-green-500 mb-4"},o={class:"w-full md:w-3/5 mx-auto mb-3"},s={class:"flex items-center mb-1"},i={style:{"flex-grow":"1"}},l=["placeholder"],u=["disabled"],m={key:0,class:"mr-3"},b={class:"text-blue-500 text-sm text-left"},d=Object(n["createTextVNode"])(" Create New Order ");function p(e,t,c,p,j,O){var f=Object(n["resolveComponent"])("icon"),v=Object(n["resolveComponent"])("routerLink"),g=Object(n["resolveComponent"])("pos-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(g,null,{content:Object(n["withCtx"])((function(){return[e.ticket&&e.ticket.paymentRequest?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createVNode"])(f,{name:"check-circle",classes:"w-24 h-24 text-green-500 mx-auto"}),Object(n["createElementVNode"])("p",a," Invoice #"+Object(n["toDisplayString"])(e.ticket.paymentRequest.TransactionID)+" has been paid successfully! ",1),Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return p.submit()}),["prevent"]))},[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",i,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{placeholder:p.translate("pos.receipts.email"),"aria-label":"Email",class:"form-input w-full",type:"email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.email=t})},null,8,l),[[n["vModelText"],e.form.email]])]),Object(n["createElementVNode"])("button",{disabled:e.isProcessing,class:"btn btn-success ml-3"},[e.isProcessing?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",m,[Object(n["createVNode"])(f,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(p.translate("pos.receipts.btn_send_receipt")),1)],8,u)])],32),Object(n["createElementVNode"])("div",b,Object(n["toDisplayString"])(p.showError(e.errorBag,"email")),1)]),Object(n["createVNode"])(v,{class:"btn btn-primary",tag:"a",to:{name:"account-pos-products"}},{default:Object(n["withCtx"])((function(){return[d]})),_:1})])):Object(n["createCommentVNode"])("",!0)]})),_:1})}var j=c("5530"),O=(c("d3b7"),c("25f0"),c("4de4"),c("b64b"),c("a9e3"),c("e9c4"),c("a15b"),c("d81d"),c("66c3")),f=c("cdae"),v=c("6c02"),g=c("5502"),k=c("ea45"),h=c("2ef0"),E=c("c1df"),I=c.n(E),w={name:"Success",components:{"pos-layout":O["a"],Icon:f["a"]},setup:function(){var e=Object(n["inject"])("translate"),t=Object(n["inject"])("http"),c=Object(n["inject"])("toast"),r=Object(g["b"])(),a=Object(v["d"])(),o=Object(v["e"])(),s=Object(k["a"])(),i=s.showError,l=s.validate,u=Object(n["reactive"])({ticket:null,form:{email:""},errorBag:{},rules:{email:["required","email"]},messages:{email:{required:"Email address is required",email:"Please provide a valid email address"}},isProcessing:!1}),m=Object(n["computed"])((function(){return r.state.user})),b=Object(n["computed"])((function(){return r.state.pos})),d=Object(n["computed"])((function(){var e=h["find"](b.value.receipts,(function(e){return e.TICKETNUMBER===u.ticket.ticketId.toString()}));return e&&(e.items=b.value.receiptItems.filter((function(t){return t.RECIEPT_ID===e.ID}))),e}));Object(n["watch"])((function(){return Object(j["a"])({},u.form)}),(function(e,t){Object.keys(u.errorBag).length>0&&(u.errorBag=l(e,u.rules,u.messages))}));var p="https://app.cointopay.com",O=function(){if(u.errorBag=l(u.form,u.rules,u.messages),0===Object.keys(u.errorBag).length&&d.value){u.isProcessing=!0;var e={"Receipt ID":d.value.ID,Time:I()(new Date(Number(d.value.DATE))).format("DD/MM/YYYY H:mm A"),"Total Amount":d.value.TOTAL+" "+d.value.CURRENCY,Cashier:d.value.CASHIER,Items:d.value.items},n={Call:"POSRECEIPT",MerchantID:Number(m.value.ID),APIKey:m.value.APIKey,email:u.form.email,ticketData:JSON.stringify(e),output:"json"},r=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")};t.post("".concat(p,"/v2REAPI"),r(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){u.isProcessing=!1,e.data&&(u.form.email="",c.success("Receipt sent successfully")),o.push({name:"account-pos-products"})})).catch((function(e){u.isProcessing=!1,console.log(e)}))}};return Object(n["onBeforeMount"])((function(){Object.keys(a.params).length>0&&a.params.ticketId&&(u.ticket=h["find"](b.value.tickets,{ticketId:a.params.ticketId}))})),Object(j["a"])(Object(j["a"])({translate:e},Object(n["toRefs"])(u)),{},{showError:i,submit:O})}},y=c("6b0d"),N=c.n(y);const C=N()(w,[["render",p]]);t["default"]=C}}]);
//# sourceMappingURL=account-pos-invoice-success.5b1d0de5.js.map