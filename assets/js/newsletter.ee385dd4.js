"use strict";(self["webpackChunkcointopay"]=self["webpackChunkcointopay"]||[]).push([[617],{784:function(e,t,r){r.d(t,{Z:function(){return u}});var a=r(821);const o={class:"p-4"},l={class:"max-w-7xl 3xl:max-w-8xl mx-auto"},s={class:"flex flex-col md:flex-row space-x-0 md:space-x-4"},n={class:"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4",style:{"min-height":"calc(100vh - 351px)"}};function c(e,t,r,c,i,d){return(0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("div",n,[(0,a.renderSlot)(e.$slots,"default")])])])])}var i={name:"CenteredLayout"},d=r(3744);const m=(0,d.Z)(i,[["render",c]]);var u=m},1375:function(e,t,r){r.r(t),r.d(t,{default:function(){return B}});var a=r(821);const o={class:"card"},l={class:"title"},s=(0,a.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),n={class:"body"},c={class:"grid grid-cols-2"},i={class:"col-span-2 lg:col-span-1"},d={class:"mb-2"},m={class:"text-red-500 text-sm"},u={class:"text-red-500 text-sm"},p={class:"mt-4 text-right"},h={key:0,class:"mr-3"},b={key:0,class:"mr-3"};function f(e,t,r,f,v,g){const y=(0,a.resolveComponent)("vue-recaptcha"),C=(0,a.resolveComponent)("icon"),E=(0,a.resolveComponent)("j-button"),V=(0,a.resolveComponent)("centered-layout");return(0,a.openBlock)(),(0,a.createBlock)(V,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("h5",null,(0,a.toDisplayString)(f.translate("newsletter.title")),1)]),s,(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("form",null,[(0,a.createElementVNode)("div",d,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)(f.translate("newsletter.email")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),autocomplete:"off",class:"form-input w-full",type:"email"},null,512),[[a.vModelText,e.form.email]]),(0,a.createElementVNode)("div",m,(0,a.toDisplayString)(f.showError(e.errorBag,"email")),1)]),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(y,{ref:"vueRecaptcha",siteKey:e.reCaptchaAPIKey,theme:f.mode,size:"normal",onExpire:f.recaptchaExpired,onFail:f.recaptchaFailed,onVerify:f.recaptchaVerified},null,8,["siteKey","theme","onExpire","onFail","onVerify"]),(0,a.createElementVNode)("div",u,(0,a.toDisplayString)(f.showError(e.errorBag,"reCaptcha")),1)]),(0,a.createElementVNode)("div",p,[(0,a.createVNode)(E,{disabled:""!==e.loader,class:"mb-2 md:mb-0 mr-3",type:"button",buttonStyle:"danger",onClick:t[1]||(t[1]=e=>f.unSubscribe())},{default:(0,a.withCtx)((()=>["unsub"===e.loader?((0,a.openBlock)(),(0,a.createElementBlock)("div",h,[(0,a.createVNode)(C,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(f.translate("newsletter.un_subscribe")),1)])),_:1},8,["disabled"]),(0,a.createVNode)(E,{disabled:""!==e.loader,type:"button",onClick:t[2]||(t[2]=e=>f.subscribe())},{default:(0,a.withCtx)((()=>["sub"===e.loader?((0,a.openBlock)(),(0,a.createElementBlock)("div",b,[(0,a.createVNode)(C,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(f.translate("newsletter.subscribe")),1)])),_:1},8,["disabled"])])])])])])])])),_:1})}var v=r(784),g=r(3164),y=r(7983),C=r(38),E=r(6232),V=r(4729),w=r(8637),N={name:"Newsletter",components:{CenteredLayout:v.Z,JButton:g.Z,Icon:y.Z,vueRecaptcha:C.Z},setup(){const e=(0,a.ref)(null),t=(0,a.inject)("translate"),r=(0,a.inject)("http"),o=(0,a.inject)("toast"),l=(0,w.oR)(),{validate:s,showError:n}=(0,E.Z)(),{saveNotification:c}=(0,V.Z)(),i=(0,a.reactive)({reCaptchaAPIKey:"6LdOLTEUAAAAAGDKKH5DMUQbW8PtXjimV6ZDrBKr",form:{email:"",reCaptcha:"",output:"json"},errorBag:{},rules:{email:["required","email"],reCaptcha:["required"]},messages:{email:{required:"Email address is required",email:"Please provide a valid email address"},reCaptcha:{required:"Verify you are not a robot"}},loader:""}),d=(0,a.computed)((()=>l.state.mode));(0,a.watch)((()=>({...i.form})),((e,t)=>{Object.keys(i.errorBag).length>0&&(i.errorBag=s(i.form,i.rules,i.messages))}));const m="https://app.cointopay.com",u=e=>{i.form.reCaptcha=e},p=()=>{e.value.reset(),i.form.reCaptcha=""},h=()=>{},b=()=>{if(i.errorBag=s(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length){i.loader="sub";const t={Subscriber:i.form.email,"g-recaptcha-response":i.form.reCaptcha};r.get(`${m}/Subscribe`,{params:t}).then((t=>{i.loader="",200===t.status&&(o.success("Congratulations! You have subscribed to the Cointopay newsletter."),c("Congratulations! You have subscribed to the Cointopay newsletter."),e.value&&e.value.reset(),i.form={email:"",reCaptcha:""})})).catch((t=>{console.log(t),o.error("Internal Server Error"),i.loader="",e.value&&e.value.reset(),i.form.reCaptcha=""}))}},f=()=>{if(i.errorBag=s(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length){i.loader="unsub";const t={Unsubscriber:i.form.email,"g-recaptcha-response":i.form.reCaptcha};r.get(`${m}/Subscribe`,{params:t}).then((t=>{i.loader="",200===t.status&&(o.success("Congratulations! You have unsubscribed from Cointopay newsletter."),c("Congratulations! You have unsubscribed from Cointopay newsletter."),e.value.reset(),i.form={email:"",reCaptcha:""})})).catch((t=>{console.log(t),o.error("Internal Server Error"),i.loader="",e.value.reset(),i.form.reCaptcha=""}))}};return{translate:t,...(0,a.toRefs)(i),vueRecaptcha:e,mode:d,showError:n,recaptchaVerified:u,recaptchaExpired:p,recaptchaFailed:h,subscribe:b,unSubscribe:f}}},x=r(3744);const k=(0,x.Z)(N,[["render",f]]);var B=k}}]);
//# sourceMappingURL=newsletter.ee385dd4.js.map