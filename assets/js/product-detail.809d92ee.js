(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-detail"],{3479:function(e,t,c){},"501e":function(e,t,c){"use strict";c("3479")},"5f47":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("a4d3"),c("e01a"),c("99af"),c("b680"),c("a9e3");var r=c("f2bf"),a={key:0},n={class:"mb-3"},o={class:"font-semibold"},i=Object(r["createElementVNode"])("span",null," > ",-1),l={class:"grid grid-cols-3 gap-2 lg:gap-3"},s={class:"col-span-3 md:col-span-2"},d={class:"flex items-start overflow-hidden mb-3 md:mb-4"},u=["src"],m={class:"flex-1"},b=["src"],p={class:"col-span-3 md:col-span-1"},j={class:"shadow bg-gray-100 dark:bg-gray-700 rounded p-4"},O={class:"font-bold text-lg mb-3"},g={class:"text-sm text-gray-400"},f={class:"font-bold"},h={class:"text-sm mt-8 flex items-center justify-between mb-3"},v=["max"],N={class:"flex items-center"},y={class:"text-center mr-3"},V={class:"font-bold text-2xl"},x={class:"mt-2"},E={class:"flex-1"},w={class:"flex justify-between items-center mb-1"},k={class:"flex items-center"},S=Object(r["createTextVNode"])(" 5 "),C={class:"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3"},D={class:"flex justify-between items-center mb-1"},R={class:"flex items-center"},I=Object(r["createTextVNode"])(" 4 "),B={class:"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3"},T={class:"flex justify-between items-center mb-1"},P={class:"flex items-center"},q=Object(r["createTextVNode"])(" 3 "),_={class:"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3"},U={class:"flex justify-between items-center mb-1"},A={class:"flex items-center"},M=Object(r["createTextVNode"])(" 2 "),K={class:"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3"},z={class:"flex justify-between items-center mb-1"},F={class:"flex items-center"},W=Object(r["createTextVNode"])(" 1 "),L={class:"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3"};function J(e,t,c,J,Q,H){var Y=Object(r["resolveComponent"])("router-link"),G=Object(r["resolveComponent"])("tab"),X=Object(r["resolveComponent"])("review-rating"),Z=Object(r["resolveComponent"])("tab-set"),$=Object(r["resolveComponent"])("j-button"),ee=Object(r["resolveComponent"])("star-rating"),te=Object(r["resolveComponent"])("icon"),ce=Object(r["resolveComponent"])("centered-layout");return Object(r["openBlock"])(),Object(r["createBlock"])(ce,null,{default:Object(r["withCtx"])((function(){return[J.product&&J.selectedShop?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("h5",o,[Object(r["createVNode"])(Y,{to:{name:"shop-detail",params:{id:J.shopId}},tag:"a",class:"text-blue-500 hover:underline"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(J.selectedShop.ShopTitle),1)]})),_:1},8,["to"]),i,Object(r["createVNode"])(Y,{to:{name:"shop-detail-category",params:{id:J.shopId,categoryId:J.category.id}},tag:"a",class:"text-blue-500 hover:underline"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(J.category.name),1)]})),_:1},8,["to"]),Object(r["createTextVNode"])(" > "+Object(r["toDisplayString"])(J.product.itemName),1)])]),Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("img",{class:"hidden md:block w-36 mr-3 cursor-pointer",src:J.product.imageUri,alt:"",onClick:t[0]||(t[0]=function(e){return J.fancyBox(J.product.imageUri)})},null,8,u),Object(r["createElementVNode"])("div",m,[Object(r["createElementVNode"])("img",{src:J.product.imageUri,alt:"",class:"cursor-pointer",onClick:t[1]||(t[1]=function(e){return J.fancyBox(J.product.imageUri)})},null,8,b)])]),Object(r["createVNode"])(Z,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(G,{name:"Description"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(J.product.description),1)]})),_:1}),Object(r["createVNode"])(G,{name:"Reviews"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(X,{shopId:J.shopId,product:J.product,onFetchRatings:J.fetchRatings},null,8,["shopId","product","onFetchRatings"])]})),_:1})]})),_:1})]),Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("h3",O,Object(r["toDisplayString"])(J.product.itemName),1),Object(r["createElementVNode"])("p",g,"SKU: "+Object(r["toDisplayString"])(J.product.sku),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(J.product.description),1),Object(r["createElementVNode"])("p",f,Object(r["toDisplayString"])(J.formatPrice(J.product.price,J.currency)),1),Object(r["createElementVNode"])("div",h,[Object(r["createElementVNode"])("span",null,"Qty: "+Object(r["toDisplayString"])("".concat(J.availableStock," ").concat(J.translate("pos.cart.available"))),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{max:J.maxQty,"aria-label":"quantity",class:"form-input w-36",min:"1",type:"number","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.qty=t}),pattern:"[0-9]{10}",onInput:t[3]||(t[3]=function(t){return e.qty=Math.round(e.qty)})},null,40,v),[[r["vModelText"],e.qty]])]),Object(r["createVNode"])($,{onClick:t[4]||(t[4]=function(e){return J.addToCart()}),class:"w-full mb-3"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(J.translate(J.isExistsInCart?"pos.cart.update_cart":"pos.cart.add_to_cart")),1)]})),_:1}),Object(r["createVNode"])(Y,{to:{name:"shop-detail",params:{id:J.shopId}},class:"btn btn-primary w-full mb-3",tag:"a"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(J.translate("pos.cart.continue_shopping")),1)]})),_:1},8,["to"]),J.isExistsInCart?(Object(r["openBlock"])(),Object(r["createBlock"])(Y,{key:0,class:"btn btn-primary w-full mb-3",tag:"a",to:{name:"cart"}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(J.translate("pos.cart.checkout")),1)]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",N,[Object(r["createElementVNode"])("div",y,[Object(r["createElementVNode"])("p",V,Object(r["toDisplayString"])(e.totalRatings.toFixed(1)),1),Object(r["createVNode"])(ee,{increment:.1,"max-rating":5,rating:Number(e.totalRatings),"read-only":!0,"show-rating":!1,"star-size":20,"active-color":"#ffd200","inactive-color":"#d0d0d0"},null,8,["increment","rating"]),Object(r["createElementVNode"])("p",x,[Object(r["createVNode"])(te,{name:"user"}),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.counter)+" total ",1)])]),Object(r["createElementVNode"])("div",E,[Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("div",k,[Object(r["createVNode"])(te,{name:"star",classes:"w-5 h-5 mr-2"}),S]),Object(r["createElementVNode"])("div",C,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])("width:"+J.getPercentageWidth(5)),class:"h-8 bg-green-700 z-10"},null,4)]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(J.getRatingCount(5)),1)]),Object(r["createElementVNode"])("div",D,[Object(r["createElementVNode"])("div",R,[Object(r["createVNode"])(te,{name:"star",classes:"w-5 h-5 mr-2"}),I]),Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])("width:"+J.getPercentageWidth(4)),class:"h-8 bg-green-500"},null,4)]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(J.getRatingCount(4)),1)]),Object(r["createElementVNode"])("div",T,[Object(r["createElementVNode"])("div",P,[Object(r["createVNode"])(te,{name:"star",classes:"w-5 h-5 mr-2"}),q]),Object(r["createElementVNode"])("div",_,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])("width:"+J.getPercentageWidth(3)),class:"h-8 bg-yellow-500"},null,4)]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(J.getRatingCount(3)),1)]),Object(r["createElementVNode"])("div",U,[Object(r["createElementVNode"])("div",A,[Object(r["createVNode"])(te,{name:"star",classes:"w-5 h-5 mr-2"}),M]),Object(r["createElementVNode"])("div",K,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])("width:"+J.getPercentageWidth(2)),class:"h-8 bg-orange-500"},null,4)]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(J.getRatingCount(2)),1)]),Object(r["createElementVNode"])("div",z,[Object(r["createElementVNode"])("div",F,[Object(r["createVNode"])(te,{name:"star",classes:"w-5 h-5 mr-2"}),W]),Object(r["createElementVNode"])("div",L,[Object(r["createElementVNode"])("div",{style:Object(r["normalizeStyle"])("width:"+J.getPercentageWidth(1)),class:"h-8 bg-red-500"},null,4)]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(J.getRatingCount(1)),1)])])])])])])])):Object(r["createCommentVNode"])("",!0)]})),_:1})}var Q=c("5530"),H=(c("d81d"),c("4de4"),c("d3b7"),c("25f0"),c("b64b"),c("9e55")),Y=c("cdae"),G=c("4032"),X=c("bad0"),Z=c("f51a"),$=function(e){return Object(r["pushScopeId"])("data-v-40a5f186"),e=e(),Object(r["popScopeId"])(),e},ee={key:0},te={style:{"max-height":"500px"},class:"scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},ce={class:"flex items-start review"},re={class:"avatar"},ae={class:"mb-3"},ne={class:"font-semibold mb-1"},oe={class:"flex items-start md:items-center flex-col md:flex-row mb-2"},ie={class:"ml-0 md:ml-3 text-sm font-medium"},le={class:"font-semibold"},se={class:"text-gray-500"},de=$((function(){return Object(r["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600 mb-3"},null,-1)})),ue={class:"grid grid-cols-3 gap-2 lg:gap-4"},me={class:"col-span-3 md:col-span-1 mb-2"},be={class:"block mb-1"},pe=$((function(){return Object(r["createElementVNode"])("span",{class:"ml-1 text-red-500"},"*",-1)})),je={class:"text-red-500 text-sm"},Oe={class:"col-span-3 md:col-span-1 mb-2"},ge={class:"block mb-1"},fe=$((function(){return Object(r["createElementVNode"])("span",{class:"ml-1 text-red-500"},"*",-1)})),he={class:"text-red-500 text-sm"},ve={class:"col-span-3 md:col-span-1 mb-2"},Ne={class:"block mb-1"},ye=$((function(){return Object(r["createElementVNode"])("span",{class:"ml-1 text-red-500"},"*",-1)})),Ve={class:"text-red-500 text-sm"},xe={class:"mb-2"},Ee={class:"block mb-1"},we=$((function(){return Object(r["createElementVNode"])("span",{class:"ml-1 text-red-500"},"*",-1)})),ke={class:"text-red-500 text-sm"},Se={class:"mb-2"},Ce={class:"text-red-500 text-sm"},De={class:"text-red-500 text-sm"},Re={class:"mt-4 text-right"},Ie={key:0,class:"mr-3"};function Be(e,t,c,a,n,o){var i=Object(r["resolveComponent"])("star-rating"),l=Object(r["resolveComponent"])("vue-recaptcha"),s=Object(r["resolveComponent"])("icon"),d=Object(r["resolveComponent"])("j-button");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[e.productRatings.length>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ee,[Object(r["createElementVNode"])("div",te,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.productRatings,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t},[Object(r["createElementVNode"])("div",ce,[Object(r["createElementVNode"])("div",re,Object(r["toDisplayString"])(a.generateAvatar(e.ReviewerName)),1),Object(r["createElementVNode"])("div",ae,[Object(r["createElementVNode"])("p",ne,Object(r["toDisplayString"])(e.ReviewerName),1),Object(r["createElementVNode"])("div",oe,[Object(r["createVNode"])(i,{increment:1,"max-rating":5,rating:Number(e.ReviewStars),"read-only":!0,"show-rating":!1,"star-size":20,"active-color":"#ffd200","inactive-color":"#d0d0d0"},null,8,["rating"]),Object(r["createElementVNode"])("p",ie,Object(r["toDisplayString"])("".concat(a.formatDT(e.ReviewCreatedOn)," - ").concat(e.ReviewerEmail)),1)]),Object(r["createElementVNode"])("p",le,Object(r["toDisplayString"])(e.ReviewTitle),1),Object(r["createElementVNode"])("p",se,Object(r["toDisplayString"])(e.ReviewDescription),1)])])])})),128))]),de])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("form",{onSubmit:t[5]||(t[5]=Object(r["withModifiers"])((function(e){return a.submit()}),["prevent"]))},[Object(r["createElementVNode"])("div",ue,[Object(r["createElementVNode"])("div",me,[Object(r["createElementVNode"])("label",be,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.translate("ratings.author"))+" ",1),pe]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.author=t})},null,512),[[r["vModelText"],e.form.author]]),Object(r["createElementVNode"])("div",je,Object(r["toDisplayString"])(a.showError(e.errorBag,"author")),1)]),Object(r["createElementVNode"])("div",Oe,[Object(r["createElementVNode"])("label",ge,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.translate("ratings.email"))+" ",1),fe]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"email","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.email=t})},null,512),[[r["vModelText"],e.form.email]]),Object(r["createElementVNode"])("div",he,Object(r["toDisplayString"])(a.showError(e.errorBag,"email")),1)]),Object(r["createElementVNode"])("div",ve,[Object(r["createElementVNode"])("label",Ne,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.translate("ratings.title"))+" ",1),ye]),Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.title=t})},null,512),[[r["vModelText"],e.form.title]]),Object(r["createElementVNode"])("div",Ve,Object(r["toDisplayString"])(a.showError(e.errorBag,"title")),1)])]),Object(r["createElementVNode"])("div",xe,[Object(r["createElementVNode"])("label",Ee,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.translate("ratings.comment"))+" ",1),we]),Object(r["withDirectives"])(Object(r["createElementVNode"])("textarea",{class:"form-input w-full",rows:"3","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.comment=t})},null,512),[[r["vModelText"],e.form.comment]]),Object(r["createElementVNode"])("div",ke,Object(r["toDisplayString"])(a.showError(e.errorBag,"comment")),1)]),Object(r["createElementVNode"])("div",Se,[Object(r["createVNode"])(l,{ref:"vueRecaptcha",siteKey:e.reCaptchaAPIKey,size:"normal",onExpire:a.recaptchaExpired,theme:a.theme,onFail:a.recaptchaFailed,onVerify:a.recaptchaVerified},null,8,["siteKey","onExpire","theme","onFail","onVerify"]),Object(r["createElementVNode"])("div",Ce,Object(r["toDisplayString"])(a.showError(e.errorBag,"reCaptcha")),1)]),Object(r["createVNode"])(i,{increment:1,"max-rating":5,"show-rating":!1,"star-size":20,"active-color":"#ffd200","inactive-color":"#d0d0d0",rating:e.form.rating,"onUpdate:rating":t[4]||(t[4]=function(t){return e.form.rating=t})},null,8,["rating"]),Object(r["createElementVNode"])("div",De,Object(r["toDisplayString"])(a.showError(e.errorBag,"rating")),1),Object(r["createElementVNode"])("div",Re,[Object(r["createVNode"])(d,{disabled:e.isProcessing},{default:Object(r["withCtx"])((function(){return[e.isProcessing?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ie,[Object(r["createVNode"])(s,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(a.translate("ratings.btn_rate")),1)]})),_:1},8,["disabled"])])],32)],64)}var Te=c("5b3d"),Pe=c.n(Te),qe=c("2e4e"),_e=c("5502"),Ue=c("ea45"),Ae=c("2e13"),Me=c("8923"),Ke=c("2ef0"),ze={name:"ReviewRating",props:["shopId","product"],components:{StarRating:Pe.a,vueRecaptcha:qe["a"],JButton:G["a"],Icon:Y["a"]},setup:function(e,t){var c=t.emit,a=Object(r["inject"])("translate"),n=Object(r["inject"])("http"),o=Object(r["inject"])("toast"),i=Object(r["ref"])(null),l=Object(_e["b"])(),s=Object(Ue["a"])(),d=s.validate,u=s.showError,m=Object(Ae["a"])(),b=m.formatDT,p=m.saveNotification,j=Object(r["reactive"])({reCaptchaAPIKey:"6LdOLTEUAAAAAGDKKH5DMUQbW8PtXjimV6ZDrBKr",form:{rating:0,sku:"",merchantid:"",author:"",email:"",title:"",comment:"",reCaptcha:""},errorBag:{},rules:{author:["required"],email:["required","email"],title:["required"],comment:["required"],rating:["required","minValue:1"],reCaptcha:["required"]},messages:{author:{required:"Please enter your full name"},email:{required:"Please enter your email address",email:"Email address is not valid"},title:{required:"Review title is required"},comment:{required:"Review text is required"},rating:{required:"Please rate the product",minValue:"Please rate the product"},reCaptcha:{required:"Verify you are not a robot"}},productRatings:[],isProcessing:!1}),O=Object(r["computed"])((function(){return l.state.mode}));Object(r["watch"])((function(){return Object(Q["a"])({},j.form)}),(function(e,t){Object.keys(j.errorBag).length>0&&(j.errorBag=d(e,j.rules,j.messages))}));var g="https://app.cointopay.com",f=function(e){return e?e[0]:""},h=function(e){j.form.reCaptcha=e},v=function(){i.value.reset(),j.form.reCaptcha=""},N=function(){},y=function(){l.dispatch(Me["j"],e.shopId).then((function(t){j.ratings=t,j.productRatings=[],j.counter=0,e.product&&j.ratings.map((function(t){t.SKU===e.product.sku&&(j.counter+=1,j.productRatings.push(t))})),j.productRatings=Ke["orderBy"](j.productRatings,"ReviewCreatedOn","desc")}))},V=function(){if(j.errorBag=d(j.form,j.rules,j.messages),0===Object.keys(j.errorBag).length){j.isProcessing=!0;var t=Object(Q["a"])(Object(Q["a"])({},j.form),{},{merchantid:e.shopId,sku:e.product.sku,output:"json"});n.get("".concat(g,"/MarketAPI"),{params:t}).then((function(e){j.isProcessing=!1,o.success("Thank you for your review"),p("Thank you for your review"),y(),i.value.reset(),j.form={rating:0,sku:"",merchantid:"",author:"",email:"",title:"",comment:"",reCaptcha:""},c("fetchRatings")})).catch((function(e){console.log(e),j.isProcessing=!1,i.value.reset()}))}};return Object(r["onBeforeMount"])((function(){y()})),Object(Q["a"])(Object(Q["a"])({translate:a},Object(r["toRefs"])(j)),{},{vueRecaptcha:i,showError:u,theme:O,generateAvatar:f,recaptchaVerified:h,recaptchaExpired:v,recaptchaFailed:N,formatDT:b,submit:V})}},Fe=(c("501e"),c("6b0d")),We=c.n(Fe);const Le=We()(ze,[["render",Be],["__scopeId","data-v-40a5f186"]]);var Je=Le,Qe=c("6c02"),He={name:"ProductDetail",components:{CenteredLayout:H["a"],StarRating:Pe.a,Icon:Y["a"],JButton:G["a"],TabSet:X["a"],Tab:Z["a"],ReviewRating:Je},setup:function(){var e=Object(r["inject"])("translate"),t=Object(r["inject"])("http"),c=Object(r["inject"])("toast"),a=Object(r["inject"])("swal"),n=Object(_e["b"])(),o=Object(Qe["d"])(),i=Object(Qe["e"])(),l=Object(Ae["a"])(),s=l.saveNotification,d=l.formatPrice,u=l.fancyBox,m=Object(r["reactive"])({productId:null,qty:1,form:{rating:0,sku:"",merchantid:"",author:"",email:"",title:"",comment:"",reCaptcha:""},ratings:[],productRatings:[],totalRatings:0,counter:0,isProcessing:!1}),b=Object(r["computed"])((function(){return n.state.shopId})),p=Object(r["computed"])((function(){return n.state.shopData})),j=Object(r["computed"])((function(){return n.state.shopsList})),O=Object(r["computed"])((function(){return n.state.cart})),g=Object(r["computed"])((function(){return n.state.altCoins})),f=Object(r["computed"])((function(){return b.value?Ke["find"](j.value,{ID:b.value}):null})),h=Object(r["computed"])((function(){return m.productId?Ke["find"](p.value.products,{id:m.productId}):null})),v=Object(r["computed"])((function(){return Ke["find"](O.value.items,{id:h.value.id})})),N=Object(r["computed"])((function(){return Ke["find"](p.value.categories,{id:h.value.categoryID})})),y=Object(r["computed"])((function(){var e="EUR";if(f.value){e=f.value.PayoutCurrencyShortName;var t=Ke["find"](g.value,{ShortName:e});t&&(e=t.LongName)}return e})),V=Object(r["computed"])((function(){var e=Number(h.value.stock);return v.value&&(e-=Number(v.value.qty)),e})),x=Object(r["computed"])((function(){var e=Number(h.value.stock)-m.qty;return v.value&&(e-=Number(v.value.qty)),e})),E=Object(r["computed"])((function(){return-1!==Ke["findIndex"](O.value.items,{id:h.value.id})})),w="https://app.cointopay.com",k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.dispatch(Me["j"],e||b.value).then((function(e){m.ratings=e,m.productRatings=[],m.counter=0;var t=0;h.value&&m.ratings.map((function(e){e.SKU===h.value.sku&&(m.counter+=1,m.productRatings.push(e),t=Number(t)+Number(e.ReviewStars))})),m.totalRatings=m.counter>0?t/m.counter:0,m.productRatings=Ke["orderBy"](m.productRatings,"ReviewCreatedOn","desc")}))},S=function(e){return m.productRatings.filter((function(t){return Number(t.ReviewStars)===e})).length},C=function(e){var t=S(e);if(m.counter>0&&t>0){var c=t/m.counter*100;return"".concat(c,"%")}return 0},D=function(){if(m.qty>0&&m.qty<=Number(h.value.stock)){var e=Ke["cloneDeep"](O.value);0===e.items.length&&(e.merchantId=null),null!==e.merchantId&&e.merchantId.toString()!==b.value.toString()?a.fire({title:"You can only add items from same merchant",text:"Do you want to order your current shopping cart items?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",customClass:{container:"swal2-tailwind"}}).then((function(c){"cancel"===c.dismiss?i.push("/shop/cart"):c.value&&t.get("".concat(w,"/MarketAPI"),{params:{POSDATA:"",Call:"SHOWPOS",KeyData:"".concat(e.merchantId,"_products"),MerchantID:e.merchantId,showpos:1}}).then((function(t){var c=t.data;e.items&&(e.items.map((function(e){if(6===Object.keys(e).length){var t=Ke["findIndex"](c,{sku:e.sku});-1!==t&&(c[t].stock=Number(c[t].stock)+Number(e.qty))}else{var r=Ke["findIndex"](c,{id:e.id});-1!==r&&(c[r].stock=Number(c[r].stock)+Number(e.qty))}})),n.dispatch(Me["w"],{Call:"UPDATE",data:c,user:{ID:e.merchantId,APIKey:"_"}}).then((function(){e={items:[],merchantId:b.value},n.commit(Me["ib"],O),setTimeout((function(){R(O)}),300)})))}))})):R(e)}else c.error("Please provide correct quantity")},R=function(e){if(null===e.merchantId||e.merchantId.toString()===b.value.toString()){var t=Ke["findIndex"](e.items,{id:h.value.id});-1!==t?e.items[t].qty=Number(e.items[t].qty)+Number(m.qty):(e.items.push({id:h.value.id,sku:h.value.sku,name:h.value.itemName,url:h.value.imageUri,price:h.value.price,qty:m.qty}),e.merchantId=b.value),n.commit(Me["ib"],e),c.success("Item added to the cart successfully")}};return Object(r["onBeforeMount"])((function(){if(Object.keys(o.params).length>0){var e=o.params.shopId;k(e),n.commit(Me["bb"],e),m.productId=o.params.id,0===p.value.categories.length&&(m.isProcessing=!0,n.dispatch(Me["l"]).then((function(){n.dispatch(Me["m"],{shopId:e}).then((function(e){m.isProcessing=!1,"nothing found"===e.categories&&(c.warning("Store for this merchant is not enabled"),s("Store for this merchant is not enabled"),i.push({name:"shop"}))})).catch((function(e){m.isProcessing=!1,console.log(e)}))})).catch((function(){m.isProcessing=!1})))}h.value&&0===Number(h.value.stock)&&i.push({path:"/shop",params:{id:b.value}})})),Object(Q["a"])(Object(Q["a"])({translate:e},Object(r["toRefs"])(m)),{},{selectedShop:f,currency:y,category:N,product:h,shopId:b,formatPrice:d,availableStock:x,maxQty:V,fancyBox:u,isExistsInCart:E,getRatingCount:S,getPercentageWidth:C,addToCart:D,fetchRatings:k})}};const Ye=We()(He,[["render",J]]);t["default"]=Ye}}]);
//# sourceMappingURL=product-detail.809d92ee.js.map