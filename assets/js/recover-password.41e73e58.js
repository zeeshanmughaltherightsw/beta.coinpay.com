"use strict";(self["webpackChunkcointopay"]=self["webpackChunkcointopay"]||[]).push([[899],{4995:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var a=r(821);const o={class:"max-w-xl w-full space-y-4 rounded bg-white dark:bg-gray-800 dark:text-gray-400 shadow p-4"},s={class:"text-xl font-bold mb-4 text-center"},n={class:"mb-2"},c={class:"flex items-center justify-between mb-1"},l={class:"text-blue-500 text-sm"},i={class:"text-red-500 text-sm"},d={class:"mt-4"},u={key:0,class:"mr-3"};function p(e,t,r,p,m,h){const f=(0,a.resolveComponent)("vue-recaptcha"),g=(0,a.resolveComponent)("icon"),v=(0,a.resolveComponent)("j-button"),y=(0,a.resolveComponent)("auth-layout");return(0,a.openBlock)(),(0,a.createBlock)(y,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("h1",s,(0,a.toDisplayString)(p.translate("login.recover")),1),(0,a.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,a.withModifiers)((e=>p.submit()),["prevent"]))},[(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)(p.translate("login.username")),1),(0,a.createElementVNode)("div",l,(0,a.toDisplayString)(p.showError(e.errorBag,"User")),1)]),(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",autofocus:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.User=t),class:"form-input w-full",autocomplete:"off"},null,512),[[a.vModelText,e.form.User]])]),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(f,{ref:"vueRecaptcha",siteKey:e.reCaptchaAPIKey,size:"normal",onExpire:p.recaptchaExpired,theme:p.mode,onFail:p.recaptchaFailed,onVerify:p.recaptchaVerified},null,8,["siteKey","onExpire","theme","onFail","onVerify"]),(0,a.createElementVNode)("div",i,(0,a.toDisplayString)(p.showError(e.errorBag,"reCaptcha")),1)]),(0,a.createElementVNode)("div",d,[(0,a.createVNode)(v,{disabled:e.isProcessing,size:"w-full"},{default:(0,a.withCtx)((()=>[e.isProcessing?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createVNode)(g,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(p.translate("login.recover")),1)])),_:1},8,["disabled"])])],32)])])),_:1})}var m=r(9874),h=r(38),f=r(3164),g=r(7983),v=r(6232),y=r(2119),V=r(8637),b={name:"ForgotPassword",components:{AuthLayout:m.Z,vueRecaptcha:h.Z,JButton:f.Z,Icon:g.Z},setup(){const e=(0,a.ref)(null),t=(0,a.inject)("http"),r=(0,a.inject)("toast"),o=(0,a.inject)("translate"),s=(0,V.oR)(),n=(0,y.tv)(),{validate:c,showError:l}=(0,v.Z)(),i=(0,a.reactive)({reCaptchaAPIKey:"6LdOLTEUAAAAAGDKKH5DMUQbW8PtXjimV6ZDrBKr",form:{User:"",reCaptcha:"",output:"json"},errorBag:{},rules:{User:["required"],reCaptcha:["required"]},messages:{User:{required:"Username is required"},reCaptcha:{required:"Verify you are not a robot"}},isProcessing:!1}),d=(0,a.computed)((()=>s.state.mode)),u=(0,a.computed)((()=>s.state.isLoggedIn));(0,a.watch)((()=>({...i.form})),((e,t)=>{Object.keys(i.errorBag).length>0&&(i.errorBag=c(i.form,i.rules,i.messages))}));const p="https://app.cointopay.com",m=e=>{i.form.reCaptcha=e},h=()=>{e.value.reset(),i.form.reCaptcha=""},f=()=>{},g=()=>{if(i.errorBag=c(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length){i.isProcessing=!0;let a=i.form;a=Object.assign(a,{"g-recaptcha-response":a.reCaptcha}),delete a.reCaptcha,t.get(`${p}/RecoverPassword`,{params:a}).then((e=>{i.isProcessing=!1,200===e.status&&(400===e.data.status_code?r.error(e.data.reason):(r.success(e.data.data[0]),n.push("/login")))})).catch((t=>{i.isProcessing=!1,t.response?r.error(t.response.data):t.data&&t.data.reason&&r.error(t.data.reason),e.value.reset(),i.form.reCaptcha=""}))}};return(0,a.onBeforeMount)((()=>{if(u.value){const e=s.state.currentRoute;n.push(e)}})),{translate:o,...(0,a.toRefs)(i),vueRecaptcha:e,showError:l,mode:d,recaptchaVerified:m,recaptchaExpired:h,recaptchaFailed:f,submit:g}}},w=r(3744);const E=(0,w.Z)(b,[["render",p]]);var x=E}}]);
//# sourceMappingURL=recover-password.41e73e58.js.map