{"version":3,"sources":["webpack:///./src/views/Cart.vue?e606","webpack:///./src/components/layouts/CenteredLayout.vue","webpack:///./src/components/layouts/CenteredLayout.vue?113c","webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?65fa"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_renderSlot","_ctx","name","__exports__","render","colspan","_createBlock","_component_centered_layout","$setup","items","length","_createVNode","_component_router_link","to","params","id","tag","products","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","item","index","key","_hoisted_10","src","url","alt","onClick","_hoisted_12","price","_hoisted_13","_hoisted_14","max","onChange","aria-label","min","step","type","qty","onInput","Math","round","_hoisted_16","_hoisted_17","_component_icon","_hoisted_19","_hoisted_20","_hoisted_21","disabled","components","CenteredLayout","Icon","setup","translate","inject","toast","store","useStore","formatPrice","fancyBox","compositionUtils","state","reactive","isValuesInValid","altCoins","computed","shopsList","shopId","shop","shopData","cart","selectedShop","value","_","ID","currency","PayoutCurrencyShortName","altCoin","ShortName","LongName","cartTotal","total","map","Number","totalAmount","maxQty","product","stock","updateCart","activeCart","oldItem","error","commit","UPDATE_CART","removeItem","splice","clearCart","merchantId","toRefs"],"mappings":"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","file":"assets/js/cart.a48fd0e3.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Cart.vue?vue&type=style&index=0&id=4996cff8&scoped=true&lang=scss\"","<template>\r\n  <div class=\"p-4\">\r\n    <div class=\"max-w-7xl 3xl:max-w-8xl mx-auto\">\r\n      <div class=\"flex flex-col md:flex-row space-x-0 md:space-x-4\">\r\n        <div class=\"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4\"\r\n          style=\"min-height: calc(100vh - 351px);\">\r\n          <slot/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CenteredLayout'\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./CenteredLayout.vue?vue&type=template&id=99072110\"\nimport script from \"./CenteredLayout.vue?vue&type=script&lang=js\"\nexport * from \"./CenteredLayout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <centered-layout>\r\n    <div class=\"h-full\" v-if=\"cart.items.length === 0\">\r\n      <div class=\"flex items-center justify-center h-full\">\r\n        <div class=\"text-center\">\r\n          <p class=\"mb-4 font-semibold text-lg\">{{ translate('pos.cart.empty_cart') }}</p>\r\n          <router-link :to=\"{name: 'shop-detail', params: {id: shopId}}\" class=\"btn btn-primary\" tag=\"a\">\r\n            {{ translate('pos.cart.continue_shopping') }}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\" v-if=\"cart.items.length > 0 && shop && shop.products.length > 0\">\r\n      <div class=\"body\">\r\n        <div\r\n          class=\"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600\">\r\n          <table class=\"table-sm mb-2\">\r\n            <thead>\r\n            <tr>\r\n              <th>Item</th>\r\n              <th>Price</th>\r\n              <th>Quantity</th>\r\n              <th>Subtotal</th>\r\n              <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr :key=\"index\" v-for=\"(item, index) of cart.items\">\r\n              <td>\r\n                <div class=\"flex items-center\">\r\n                  <img class=\"w-12 h-12 rounded-full mr-3\" :src=\"item.url\" alt=\"\"\r\n                       @click=\"fancyBox(item.url)\"/>\r\n                  <p class=\"mb-0 ml-1\">{{ item.name }}</p>\r\n                </div>\r\n              </td>\r\n              <td>{{ formatPrice(item.price, currency) }}</td>\r\n              <td>\r\n                <div class=\"items-center\">\r\n                  <span class=\"mr-3\">x</span>\r\n                  <input :max=\"maxQty(item)\" @change=\"updateCart(item, index)\" aria-label=\"qty\"\r\n                         class=\"form-input w-36\" min=\"1\" step=\"1\" type=\"number\" v-model=\"item.qty\" @input=\"item.qty = item.qty == 0 ? 1 : Math.round(item.qty)\" />\r\n                </div>\r\n              </td>\r\n              <td>{{ formatPrice(item.price * item.qty, currency) }}</td>\r\n              <td class=\"text-right\">\r\n                <div class=\"pr-3\">\r\n                  <button @click=\"removeItem(index)\" class=\"hover:text-red-500\">\r\n                    <icon name=\"trash\"></icon>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"text-right\" colspan=\"5\">\r\n                <span class=\"font-bold pr-3\">Total: {{ cartTotal }}</span>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td>\r\n                <button @click=\"clearCart()\" class=\"btn btn-danger\">\r\n                  {{ translate('pos.cart.clear_cart') }}\r\n                </button>\r\n              </td>\r\n              <td class=\"text-right\" colspan=\"4\">\r\n                <router-link :to=\"{name: 'shop-detail', params: {id: shopId}}\" class=\"btn btn-default\" tag=\"a\">\r\n                  {{ translate('pos.cart.continue_shopping') }}\r\n                </router-link>\r\n                <router-link :disabled=\"totalAmount === 0\" tag=\"a\" :to=\"{name: 'checkout'}\"\r\n                             class=\"btn btn-primary ml-2 mr-3\">\r\n                  {{ translate('pos.cart.checkout') }}\r\n                </router-link>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </centered-layout>\r\n</template>\r\n\r\n<script>\r\nimport CenteredLayout from '@/components/layouts/CenteredLayout'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, reactive, toRefs } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport * as _ from 'lodash'\r\nimport { UPDATE_CART } from '@/store/keys'\r\n\r\nexport default {\r\n  name: 'Cart',\r\n  components: {\r\n    CenteredLayout,\r\n    Icon\r\n  },\r\n  setup () {\r\n    const translate = inject('translate')\r\n    const toast = inject('toast')\r\n    const store = useStore()\r\n\r\n    const {\r\n      formatPrice,\r\n      fancyBox\r\n    } = compositionUtils()\r\n\r\n    const state = reactive({\r\n      isValuesInValid: false,\r\n    })\r\n    // Computed\r\n    const altCoins = computed(() => store.state.altCoins)\r\n    const shopsList = computed(() => store.state.shopsList)\r\n    const shopId = computed(() => store.state.shopId)\r\n    const shop = computed(() => store.state.shopData)\r\n    const cart = computed(() => store.state.cart)\r\n    const selectedShop = computed(() => {\r\n      let shop = null\r\n      if (shopId.value) {\r\n        shop = _.find(shopsList.value, { ID: shopId.value })\r\n      }\r\n      return shop\r\n    })\r\n    const currency = computed(() => {\r\n      let currency = 'EUR'\r\n      if (selectedShop.value) {\r\n        currency = selectedShop.value.PayoutCurrencyShortName\r\n        const altCoin = _.find(altCoins.value, { ShortName: currency })\r\n        if (altCoin) {\r\n          currency = altCoin.LongName\r\n        }\r\n      }\r\n      return currency\r\n    })\r\n    const cartTotal = computed(() => {\r\n      let total = 0\r\n      if (cart.value.items.length > 0) {\r\n        cart.value.items.map(item => {\r\n          total += Number(item.qty) * Number(item.price)\r\n        })\r\n      }\r\n      return formatPrice(total, currency.value)\r\n    })\r\n    const totalAmount = computed(() => {\r\n      let total = 0\r\n      if (cart.value.items.length > 0) {\r\n        cart.value.items.map(item => {\r\n          total += Number(item.qty) * Number(item.price)\r\n        })\r\n      }\r\n      return total\r\n    })\r\n\r\n    // Methods\r\n    const maxQty = (item) => {\r\n      const product = _.find(shop.value.products, { id: item.id })\r\n      if (product) {\r\n        return Number(product.stock) - Number(item.qty)\r\n      }\r\n      return 0\r\n    }\r\n    const updateCart = (item, index) => {\r\n      const activeCart = _.cloneDeep(cart.value)\r\n      const oldItem = _.find(activeCart.items, { id: item.id })\r\n      activeCart.items[index].qty = activeCart.items[index].qty == 0 ? 1 : Math.round(activeCart.items[index].qty) \r\n     if (Number(item.qty) === 0) {\r\n        activeCart.items[index].qty = oldItem.qty\r\n        toast.error('Invalid quantity entered. The previous value will be restored.')\r\n      } else if (Number(item.qty) > maxQty(item)) {\r\n        activeCart.items[index].qty = oldItem.qty\r\n        toast.error('Invalid quantity entered. The previous value will be restored.')\r\n      }\r\n      store.commit(UPDATE_CART, activeCart)\r\n    }\r\n    const removeItem = (index) => {\r\n      const activeCart = _.cloneDeep(cart.value)\r\n      activeCart.items.splice(index, 1)\r\n      store.commit(UPDATE_CART, activeCart)\r\n    }\r\n    const clearCart = () => {\r\n      store.commit(UPDATE_CART, {\r\n        items: [],\r\n        merchantId: null\r\n      })\r\n    }\r\n\r\n    return {\r\n      translate,\r\n      shopId,\r\n      cart,\r\n      currency,\r\n      formatPrice,\r\n      cartTotal,\r\n      totalAmount,\r\n      shop,\r\n      maxQty,\r\n      updateCart,\r\n      removeItem,\r\n      clearCart,\r\n      fancyBox,\r\n      ...toRefs(state), \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.table-sm {\r\n  thead {\r\n    tr {\r\n      th:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n\r\n  tbody {\r\n    tr {\r\n      td:first-child {\r\n        @apply pl-3;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Cart.vue?vue&type=template&id=4996cff8&scoped=true\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=4996cff8&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4996cff8\"]])\n\nexport default __exports__"],"sourceRoot":""}