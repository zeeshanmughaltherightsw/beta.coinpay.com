{"version":3,"sources":["webpack:///./src/components/shop/ReviewRating.vue?0521","webpack:///./src/views/ProductDetail.vue","webpack:///./src/components/shop/ReviewRating.vue","webpack:///./src/components/shop/ReviewRating.vue?18e3","webpack:///./src/views/ProductDetail.vue?b1fd"],"names":["class","_createElementVNode","_createBlock","_component_centered_layout","$setup","_createElementBlock","_hoisted_2","_hoisted_3","_createVNode","_component_router_link","to","name","params","id","tag","ShopTitle","_hoisted_4","categoryId","itemName","_hoisted_5","_hoisted_6","_hoisted_7","src","imageUri","alt","onClick","_hoisted_9","_component_tab_set","_component_tab","description","_component_review_rating","shopId","product","onFetchRatings","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","sku","_hoisted_15","price","_hoisted_16","max","aria-label","min","type","_ctx","pattern","onInput","Math","round","_component_j_button","_hoisted_18","_hoisted_19","_hoisted_20","toFixed","_component_star_rating","increment","max-rating","rating","Number","read-only","show-rating","star-size","active-color","inactive-color","_hoisted_21","_component_icon","_hoisted_22","_hoisted_23","_hoisted_24","classes","_hoisted_25","style","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","length","_Fragment","index","key","ReviewerName","ReviewStars","_hoisted_8","ReviewCreatedOn","ReviewerEmail","ReviewTitle","_hoisted_10","ReviewDescription","onSubmit","author","_hoisted_17","email","title","rows","comment","_component_vue_recaptcha","ref","siteKey","size","onExpire","theme","onFail","onVerify","disabled","props","components","StarRating","vueRecaptcha","JButton","Icon","setup","emit","translate","inject","http","toast","store","useStore","validate","showError","validator","formatDT","saveNotification","compositionUtils","state","reactive","reCaptchaAPIKey","process","form","merchantid","reCaptcha","errorBag","rules","messages","required","minValue","productRatings","isProcessing","computed","mode","watch","newVal","oldVal","Object","keys","apiBaseUrl","generateAvatar","str","recaptchaVerified","response","recaptchaExpired","value","reset","recaptchaFailed","fetchRatings","dispatch","FETCH_RATINGS","then","ratings","counter","map","SKU","push","_","submit","payload","output","get","success","catch","error","console","log","onBeforeMount","toRefs","__exports__","CenteredLayout","TabSet","Tab","ReviewRating","swal","route","useRoute","router","useRouter","formatPrice","fancyBox","productId","qty","totalRatings","shop","shopData","shopsList","cart","altCoins","selectedShop","ID","products","cartItem","items","category","categories","categoryID","currency","PayoutCurrencyShortName","altCoin","ShortName","LongName","maxQty","stock","availableStock","isExistsInCart","getRatingCount","count","filter","getPercentageWidth","ratingsCount","width","addToCart","activeCart","merchantId","toString","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","customClass","container","result","dismiss","POSDATA","Call","KeyData","MerchantID","showpos","data","item","SAVE_PRODUCTS","user","APIKey","commit","UPDATE_CART","setTimeout","updateCart","carts","url","SET_SHOP_ID","FETCH_SHOPS_LIST","FETCH_SHOP_DATA","warning","path","render"],"mappings":"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","file":"assets/js/product-detail.6bb0dfdb.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ReviewRating.vue?vue&type=style&index=0&id=40a5f186&scoped=true&lang=scss\"","<template>\r\n  <centered-layout>\r\n    <div v-if=\"product && selectedShop\">\r\n      <div class=\"mb-3\">\r\n        <h5 class=\"font-semibold\">\r\n          <router-link :to=\"{name: 'shop-detail', params: {id: shopId}}\" tag=\"a\" class=\"text-blue-500 hover:underline\">\r\n            {{ selectedShop.ShopTitle }}\r\n          </router-link>\r\n          <span> > </span>\r\n          <router-link :to=\"{name: 'shop-detail-category', params: { id: shopId, categoryId: category.id }}\" tag=\"a\"\r\n                       class=\"text-blue-500 hover:underline\">\r\n            {{ category.name }}\r\n          </router-link>\r\n          > {{ product.itemName }}\r\n        </h5>\r\n      </div>\r\n      <div class=\"grid grid-cols-3 gap-2 lg:gap-3\">\r\n        <div class=\"col-span-3 md:col-span-2\">\r\n          <div class=\"flex items-start overflow-hidden mb-3 md:mb-4\">\r\n            <img class=\"hidden md:block w-36 mr-3 cursor-pointer\" :src=\"product.imageUri\" alt=\"\"\r\n                 @click=\"fancyBox(product.imageUri)\"/>\r\n            <div class=\"flex-1\">\r\n              <img :src=\"product.imageUri\" alt=\"\" class=\"cursor-pointer\" @click=\"fancyBox(product.imageUri)\"/>\r\n            </div>\r\n          </div>\r\n          <tab-set>\r\n            <tab name=\"Description\">\r\n              <p>{{ product.description }}</p>\r\n            </tab>\r\n            <tab name=\"Reviews\">\r\n              <review-rating :shopId=\"shopId\" :product=\"product\" @fetchRatings=\"fetchRatings\"></review-rating>\r\n            </tab>\r\n          </tab-set>\r\n        </div>\r\n        <div class=\"col-span-3 md:col-span-1\">\r\n          <div class=\"shadow bg-gray-100 dark:bg-gray-700 rounded p-4\">\r\n            <h3 class=\"font-bold text-lg mb-3\">{{ product.itemName }}</h3>\r\n            <p class=\"text-sm text-gray-400\">SKU: {{ product.sku }}</p>\r\n            <p>{{ product.description }}</p>\r\n            <p class=\"font-bold\">{{ formatPrice(product.price, currency) }}</p>\r\n            <div class=\"text-sm mt-8 flex items-center justify-between mb-3\">\r\n              <span>Qty: {{ `${availableStock} ${translate('pos.cart.available')}` }}</span>\r\n              <input :max=\"maxQty\" aria-label=\"quantity\" class=\"form-input w-36\" min=\"1\" type=\"number\" v-model=\"qty\" pattern=\"[0-9]{10}\" @input=\"qty = qty == 0 ? 1 : Math.round(qty)\"/>\r\n            </div>\r\n            <j-button @click=\"addToCart()\" class=\"w-full mb-3\">\r\n              <span>{{ translate(isExistsInCart ? 'pos.cart.update_cart' : 'pos.cart.add_to_cart') }}</span>\r\n            </j-button>\r\n\r\n            <router-link :to=\"{name: 'shop-detail', params: {id: shopId}}\" class=\"btn btn-primary w-full mb-3\" tag=\"a\">\r\n              {{ translate('pos.cart.continue_shopping') }}\r\n            </router-link>\r\n            <router-link class=\"btn btn-primary w-full mb-3\" tag=\"a\" :to=\"{name: 'cart'}\" v-if=\"isExistsInCart\">\r\n              {{ translate('pos.cart.checkout') }}\r\n            </router-link>\r\n            <div class=\"flex items-center\">\r\n              <div class=\"text-center mr-3\">\r\n                <p class=\"font-bold text-2xl\">{{ totalRatings.toFixed(1) }}</p>\r\n                <star-rating :increment=\"0.1\" :max-rating=\"5\" :rating=\"Number(totalRatings)\"\r\n                             :read-only=\"true\" :show-rating=\"false\" :star-size=\"20\" active-color=\"#ffd200\"\r\n                             inactive-color=\"#d0d0d0\"></star-rating>\r\n                <p class=\"mt-2\">\r\n                  <icon name=\"user\"></icon>\r\n                  {{ counter }} total\r\n                </p>\r\n              </div>\r\n              <div class=\"flex-1\">\r\n                <div class=\"flex justify-between items-center mb-1\">\r\n                  <div class=\"flex items-center\">\r\n                    <icon name=\"star\" classes=\"w-5 h-5 mr-2\"></icon>\r\n                    5\r\n                  </div>\r\n                  <div class=\"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3\">\r\n                    <div :style=\"'width:' + getPercentageWidth(5)\" class=\"h-8 bg-green-700 z-10\"></div>\r\n                  </div>\r\n                  {{ getRatingCount(5) }}\r\n                </div>\r\n                <div class=\"flex justify-between items-center mb-1\">\r\n                  <div class=\"flex items-center\">\r\n                    <icon name=\"star\" classes=\"w-5 h-5 mr-2\"></icon>\r\n                    4\r\n                  </div>\r\n                  <div class=\"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3\">\r\n                    <div :style=\"'width:' + getPercentageWidth(4)\" class=\"h-8 bg-green-500\"></div>\r\n                  </div>\r\n                  {{ getRatingCount(4) }}\r\n                </div>\r\n                <div class=\"flex justify-between items-center mb-1\">\r\n                  <div class=\"flex items-center\">\r\n                    <icon name=\"star\" classes=\"w-5 h-5 mr-2\"></icon>\r\n                    3\r\n                  </div>\r\n                  <div class=\"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3\">\r\n                    <div :style=\"'width:' + getPercentageWidth(3)\" class=\"h-8 bg-yellow-500\"></div>\r\n                  </div>\r\n                  {{ getRatingCount(3) }}\r\n                </div>\r\n                <div class=\"flex justify-between items-center mb-1\">\r\n                  <div class=\"flex items-center\">\r\n                    <icon name=\"star\" classes=\"w-5 h-5 mr-2\"></icon>\r\n                    2\r\n                  </div>\r\n                  <div class=\"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3\">\r\n                    <div :style=\"'width:' + getPercentageWidth(2)\" class=\"h-8 bg-orange-500\"></div>\r\n                  </div>\r\n                  {{ getRatingCount(2) }}\r\n                </div>\r\n                <div class=\"flex justify-between items-center mb-1\">\r\n                  <div class=\"flex items-center\">\r\n                    <icon name=\"star\" classes=\"w-5 h-5 mr-2\"></icon>\r\n                    1\r\n                  </div>\r\n                  <div class=\"bg-gray-300 dark:bg-gray-600 w-full h-8 mx-3\">\r\n                    <div :style=\"'width:' + getPercentageWidth(1)\" class=\"h-8 bg-red-500\"></div>\r\n                  </div>\r\n                  {{ getRatingCount(1) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </centered-layout>\r\n</template>\r\n\r\n<script>\r\nimport CenteredLayout from '@/components/layouts/CenteredLayout'\r\nimport Icon from '@/components/Icon'\r\nimport JButton from '@/templates/Button'\r\nimport TabSet from '@/components/common/TabSet'\r\nimport Tab from '@/components/common/Tab'\r\nimport ReviewRating from '@/components/shop/ReviewRating'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport * as _ from 'lodash'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { FETCH_RATINGS, FETCH_SHOP_DATA, FETCH_SHOPS_LIST, SAVE_PRODUCTS, SET_SHOP_ID, UPDATE_CART } from '@/store/keys'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport StarRating from 'vue-star-rating'\r\n\r\nexport default {\r\n  name: 'ProductDetail',\r\n  components: {\r\n    CenteredLayout,\r\n    StarRating,\r\n    Icon,\r\n    JButton,\r\n    TabSet,\r\n    Tab,\r\n    ReviewRating\r\n  },\r\n  setup () {\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n    const swal = inject('swal')\r\n    // Store\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n\r\n    const {\r\n      saveNotification,\r\n      formatPrice,\r\n      fancyBox\r\n    } = compositionUtils()\r\n    // State\r\n    const state = reactive({\r\n      productId: null,\r\n      qty: 1,\r\n      form: {\r\n        rating: 0,\r\n        sku: '',\r\n        merchantid: '',\r\n        author: '',\r\n        email: '',\r\n        title: '',\r\n        comment: '',\r\n        reCaptcha: ''\r\n      },\r\n      ratings: [],\r\n      productRatings: [],\r\n      totalRatings: 0,\r\n      counter: 0,\r\n      isProcessing: false\r\n    })\r\n\r\n    // Computed\r\n    const shopId = computed(() => store.state.shopId)\r\n    const shop = computed(() => store.state.shopData)\r\n    const shopsList = computed(() => store.state.shopsList)\r\n    const cart = computed(() => store.state.cart)\r\n    const altCoins = computed(() => store.state.altCoins)\r\n    const selectedShop = computed(() => {\r\n      if (shopId.value) {\r\n        return _.find(shopsList.value, { ID: shopId.value })\r\n      }\r\n      return null\r\n    })\r\n    const product = computed(() => {\r\n      if (state.productId) {\r\n        return _.find(shop.value.products, { id: state.productId })\r\n      }\r\n      return null\r\n    })\r\n    const cartItem = computed(() => {\r\n      return _.find(cart.value.items, { id: product.value.id })\r\n    })\r\n    const category = computed(() => {\r\n      return _.find(shop.value.categories, { id: product.value.categoryID })\r\n    })\r\n    const currency = computed(() => {\r\n      let currency = 'EUR'\r\n      if (selectedShop.value) {\r\n        currency = selectedShop.value.PayoutCurrencyShortName\r\n        const altCoin = _.find(altCoins.value, { ShortName: currency })\r\n        if (altCoin) {\r\n          currency = altCoin.LongName\r\n        }\r\n      }\r\n      return currency\r\n    })\r\n\r\n    const maxQty = computed(() => {\r\n      let qty = Number(product.value.stock)\r\n      if (cartItem.value) {\r\n        qty -= Number(cartItem.value.qty)\r\n      }\r\n      return qty\r\n    })\r\n    const availableStock = computed(() => {\r\n      let qty = Number(product.value.stock) - state.qty\r\n      if (cartItem.value) {\r\n        qty -= Number(cartItem.value.qty)\r\n      }\r\n      return qty\r\n    })\r\n    const isExistsInCart = computed(() => {\r\n      return _.findIndex(cart.value.items, { id: product.value.id }) !== -1\r\n    })\r\n    //watch\r\n    // Methods\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const fetchRatings = (id = null) => {\r\n      store.dispatch(FETCH_RATINGS, id || shopId.value).then(ratings => {\r\n        state.ratings = ratings\r\n        state.productRatings = []\r\n        state.counter = 0\r\n        let totalRatings = 0\r\n        if (product.value) {\r\n          state.ratings.map(rating => {\r\n            if (rating.SKU === product.value.sku) {\r\n              state.counter += 1\r\n              state.productRatings.push(rating)\r\n              totalRatings = Number(totalRatings) + Number(rating.ReviewStars)\r\n            }\r\n          })\r\n        }\r\n        state.totalRatings = (state.counter > 0) ? totalRatings / state.counter : 0\r\n        // Sort by date desc\r\n        state.productRatings = _.orderBy(state.productRatings, 'ReviewCreatedOn', 'desc')\r\n      })\r\n    }\r\n    const getRatingCount = (count) => {\r\n      return state.productRatings.filter(rating => Number(rating.ReviewStars) === count).length\r\n    }\r\n    const getPercentageWidth = (count) => {\r\n      const ratingsCount = getRatingCount(count)\r\n      if (state.counter > 0 && ratingsCount > 0) {\r\n        const width = ratingsCount / state.counter * 100\r\n        return `${width}%`\r\n      }\r\n      return 0\r\n    }\r\n    const addToCart = () => {\r\n      if (state.qty > 0 && state.qty <= Number(product.value.stock)) {\r\n        let activeCart = _.cloneDeep(cart.value)\r\n        if (activeCart.items.length === 0) {\r\n          activeCart.merchantId = null\r\n        }\r\n        if (activeCart.merchantId !== null && activeCart.merchantId.toString() !== shopId.value.toString()) {\r\n          swal.fire({\r\n            title: 'You can only add items from same merchant',\r\n            text: 'Do you want to order your current shopping cart items?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes',\r\n            cancelButtonText: 'No',\r\n            customClass: {\r\n              container: 'swal2-tailwind'\r\n            }\r\n          }).then((result) => {\r\n            if (result.dismiss === 'cancel') {\r\n              router.push('/shop/cart')\r\n            } else if (result.value) {\r\n              http.get(`${apiBaseUrl}/MarketAPI`, {\r\n                params: {\r\n                  POSDATA: '',\r\n                  Call: 'SHOWPOS',\r\n                  KeyData: `${activeCart.merchantId}_products`,\r\n                  MerchantID: activeCart.merchantId,\r\n                  showpos: 1\r\n                }\r\n              }).then(response => {\r\n                const products = response.data\r\n                if (activeCart.items) {\r\n                  activeCart.items.map(item => {\r\n                    if (Object.keys(item).length === 6) {\r\n                      const index = _.findIndex(products, { sku: item.sku })\r\n                      if (index !== -1) {\r\n                        products[index].stock = Number(products[index].stock) + Number(item.qty)\r\n                      }\r\n                    } else {\r\n                      const index = _.findIndex(products, { id: item.id })\r\n                      if (index !== -1) {\r\n                        products[index].stock = Number(products[index].stock) + Number(item.qty)\r\n                      }\r\n                    }\r\n                  })\r\n                  store.dispatch(SAVE_PRODUCTS, {\r\n                    Call: 'UPDATE',\r\n                    data: products,\r\n                    user: {\r\n                      ID: activeCart.merchantId,\r\n                      APIKey: '_'\r\n                    }\r\n                  }).then(() => {\r\n                    activeCart = {\r\n                      items: [],\r\n                      merchantId: shopId.value\r\n                    }\r\n                    store.commit(UPDATE_CART, cart)\r\n                    setTimeout(() => {\r\n                      updateCart(cart)\r\n                    }, 300)\r\n                  })\r\n                }\r\n              })\r\n            }\r\n          })\r\n        } else {\r\n          updateCart(activeCart)\r\n        }\r\n      } else {\r\n        toast.error('Please provide correct quantity')\r\n      }\r\n    }\r\n    const updateCart = (carts) => {\r\n      //if ((carts.value.merchantId === null || carts.value.merchantId.toString() === shopId.value.toString())) {\r\n        const index = _.findIndex(carts.items, { id: product.value.id })\r\n        if (index !== -1) {\r\n          carts.items[index].qty = Number(carts.items[index].qty) + Number(state.qty)\r\n        } else {\r\n          carts.items.push({\r\n            id: product.value.id,\r\n            sku: product.value.sku,\r\n            name: product.value.itemName,\r\n            url: product.value.imageUri,\r\n            price: product.value.price,\r\n            qty: state.qty\r\n          })\r\n          carts.merchantId = shopId.value\r\n        }\r\n        store.commit(UPDATE_CART, carts)\r\n        toast.success('Item added to the cart successfully')\r\n      //}\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      if (Object.keys(route.params).length > 0) {\r\n        const shopId = route.params.shopId\r\n        fetchRatings(shopId)\r\n        store.commit(SET_SHOP_ID, shopId)\r\n        state.productId = route.params.id\r\n        if (shop.value.categories.length === 0) {\r\n          state.isProcessing = true\r\n          // Get shop list and then shop products\r\n          store.dispatch(FETCH_SHOPS_LIST).then(() => {\r\n            store.dispatch(FETCH_SHOP_DATA, {\r\n              shopId: shopId\r\n            }).then(response => {\r\n              state.isProcessing = false\r\n              if (response.categories === 'nothing found') {\r\n                toast.warning('Store for this merchant is not enabled')\r\n                saveNotification('Store for this merchant is not enabled')\r\n                router.push({ name: 'shop' })\r\n              }\r\n            }).catch(error => {\r\n              state.isProcessing = false\r\n              console.log(error)\r\n            })\r\n          }).catch(() => {\r\n            state.isProcessing = false\r\n          })\r\n        }\r\n      }\r\n      if (product.value && Number(product.value.stock) === 0) {\r\n        router.push({\r\n          path: '/shop',\r\n          params: { id: shopId.value }\r\n        })\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      selectedShop,\r\n      currency,\r\n      category,\r\n      product,\r\n      shopId,\r\n      formatPrice,\r\n      availableStock,\r\n      maxQty,\r\n      fancyBox,\r\n      isExistsInCart,\r\n      getRatingCount,\r\n      getPercentageWidth,\r\n      addToCart,\r\n      fetchRatings\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","<template>\r\n  <div v-if=\"productRatings.length > 0\">\r\n    <div style=\"max-height: 500px\"\r\n         class=\"scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600\">\r\n      <div :key=\"index\" v-for=\"(rating, index) of productRatings\">\r\n        <div class=\"flex items-start review\">\r\n          <div class=\"avatar\">\r\n            {{ generateAvatar(rating.ReviewerName) }}\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <p class=\"font-semibold mb-1\">{{ rating.ReviewerName }}</p>\r\n            <div class=\"flex items-start md:items-center flex-col md:flex-row mb-2\">\r\n              <star-rating :increment=\"1\" :max-rating=\"5\" :rating=\"Number(rating.ReviewStars)\"\r\n                           :read-only=\"true\" :show-rating=\"false\" :star-size=\"20\" active-color=\"#ffd200\"\r\n                           inactive-color=\"#d0d0d0\"></star-rating>\r\n              <p class=\"ml-0 md:ml-3 text-sm font-medium\">\r\n                {{ `${formatDT(rating.ReviewCreatedOn)} - ${rating.ReviewerEmail}` }}</p>\r\n            </div>\r\n            <p class=\"font-semibold\">{{ rating.ReviewTitle }}</p>\r\n            <p class=\"text-gray-500\">{{ rating.ReviewDescription }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <hr class=\"border-gray-300 dark:border-gray-600 mb-3\"/>\r\n  </div>\r\n    <form @submit.prevent=\"submit()\">\r\n      <div class=\"grid grid-cols-3 gap-2 lg:gap-4\">\r\n        <div class=\"col-span-3 md:col-span-1 mb-2\">\r\n          <label class=\"block mb-1\">\r\n            {{ translate('ratings.author') }}\r\n            <span class=\"ml-1 text-red-500\">*</span>\r\n          </label>\r\n          <input class=\"form-input w-full\" type=\"text\" v-model=\"form.author\">\r\n          <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'author') }}</div>\r\n        </div>\r\n        <div class=\"col-span-3 md:col-span-1 mb-2\">\r\n          <label class=\"block mb-1\">\r\n            {{ translate('ratings.email') }}\r\n            <span class=\"ml-1 text-red-500\">*</span>\r\n          </label>\r\n          <input class=\"form-input w-full\" type=\"email\" v-model=\"form.email\">\r\n          <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'email') }}</div>\r\n        </div>\r\n        <div class=\"col-span-3 md:col-span-1 mb-2\">\r\n          <label class=\"block mb-1\">\r\n            {{ translate('ratings.title') }}\r\n            <span class=\"ml-1 text-red-500\">*</span>\r\n          </label>\r\n          <input class=\"form-input w-full\" type=\"text\" v-model=\"form.title\">\r\n          <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'title') }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"mb-2\">\r\n        <label class=\"block mb-1\">\r\n          {{ translate('ratings.comment') }}\r\n          <span class=\"ml-1 text-red-500\">*</span>\r\n        </label>\r\n        <textarea class=\"form-input w-full\" rows=\"3\" v-model=\"form.comment\"></textarea>\r\n        <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'comment') }}</div>\r\n      </div>\r\n      <div class=\"mb-2\">\r\n        <vue-recaptcha ref=\"vueRecaptcha\" :siteKey=\"reCaptchaAPIKey\"\r\n                       size=\"normal\" @expire=\"recaptchaExpired\" :theme=\"theme\"\r\n                       @fail=\"recaptchaFailed\" @verify=\"recaptchaVerified\"></vue-recaptcha>\r\n        <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'reCaptcha') }}</div>\r\n      </div>\r\n\r\n      <star-rating :increment=\"1\" :max-rating=\"5\" :show-rating=\"false\"\r\n                   :star-size=\"20\" active-color=\"#ffd200\"\r\n                   inactive-color=\"#d0d0d0\" v-model:rating=\"form.rating\"></star-rating>\r\n      <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'rating') }}</div>\r\n\r\n      <div class=\"mt-4 text-right\">\r\n        <j-button :disabled=\"isProcessing\">\r\n          <div v-if=\"isProcessing\" class=\"mr-3\">\r\n            <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n          </div>\r\n          <span>{{ translate('ratings.btn_rate') }}</span>\r\n        </j-button>\r\n      </div>\r\n    </form>\r\n</template>\r\n\r\n<script>\r\nimport JButton from '@/templates/Button'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, onBeforeMount, reactive, ref, toRefs, watch } from 'vue'\r\nimport StarRating from 'vue-star-rating'\r\nimport vueRecaptcha from 'vue3-recaptcha2'\r\nimport { useStore } from 'vuex'\r\nimport validator from '@/validator'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport { FETCH_RATINGS } from '@/store/keys'\r\nimport * as _ from 'lodash'\r\n\r\nexport default {\r\n  name: 'ReviewRating',\r\n  props: ['shopId', 'product'],\r\n  components: {\r\n    StarRating,\r\n    vueRecaptcha,\r\n    JButton,\r\n    Icon\r\n  },\r\n  setup (props, { emit }) {\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n\r\n    const vueRecaptcha = ref(null)\r\n    const store = useStore()\r\n\r\n    const {\r\n      validate,\r\n      showError\r\n    } = validator()\r\n\r\n    const {\r\n      formatDT,\r\n      saveNotification\r\n    } = compositionUtils()\r\n\r\n    const state = reactive({\r\n      reCaptchaAPIKey: process.env.VUE_APP_GOOGLE_reCAPTCHA_SITE_KEY,\r\n      form: {\r\n        rating: 0,\r\n        sku: '',\r\n        merchantid: '',\r\n        author: '',\r\n        email: '',\r\n        title: '',\r\n        comment: '',\r\n        reCaptcha: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        author: ['required'],\r\n        email: ['required', 'email'],\r\n        title: ['required'],\r\n        comment: ['required'],\r\n        rating: ['required', 'minValue:1'],\r\n        reCaptcha: ['required']\r\n      },\r\n      messages: {\r\n        author: {\r\n          required: 'Please enter your full name'\r\n        },\r\n        email: {\r\n          required: 'Please enter your email address',\r\n          email: 'Email address is not valid'\r\n        },\r\n        title: {\r\n          required: 'Review title is required'\r\n        },\r\n        comment: {\r\n          required: 'Review text is required'\r\n        },\r\n        rating: {\r\n          required: 'Please rate the product',\r\n          minValue: 'Please rate the product'\r\n        },\r\n        reCaptcha: {\r\n          required: 'Verify you are not a robot'\r\n        }\r\n      },\r\n      productRatings: [],\r\n      isProcessing: false\r\n    })\r\n\r\n    const theme = computed(() => store.state.mode)\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(newVal, state.rules, state.messages)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Methods\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const generateAvatar = (str) => {\r\n      return str ? str[0] : ''\r\n    }\r\n    const recaptchaVerified = (response) => {\r\n      state.form.reCaptcha = response\r\n    }\r\n    const recaptchaExpired = () => {\r\n      vueRecaptcha.value.reset()\r\n      state.form.reCaptcha = ''\r\n    }\r\n    const recaptchaFailed = () => {\r\n    }\r\n\r\n    const fetchRatings = () => {\r\n      store.dispatch(FETCH_RATINGS, props.shopId).then(ratings => {\r\n        state.ratings = ratings\r\n        state.productRatings = []\r\n        state.counter = 0\r\n        if (props.product) {\r\n          state.ratings.map(rating => {\r\n            if (rating.SKU === props.product.sku) {\r\n              state.counter += 1\r\n              state.productRatings.push(rating)\r\n            }\r\n          })\r\n        }\r\n        // Sort by date desc\r\n        state.productRatings = _.orderBy(state.productRatings, 'ReviewCreatedOn', 'desc')\r\n      })\r\n    }\r\n\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.isProcessing = true\r\n        const payload = {\r\n          ...state.form,\r\n          merchantid: props.shopId,\r\n          sku: props.product.sku,\r\n          output: 'json'\r\n        }\r\n        http.get(`${apiBaseUrl}/MarketAPI`, {\r\n          params: payload\r\n        }).then(response => {\r\n          state.isProcessing = false\r\n          toast.success('Thank you for your review')\r\n          saveNotification('Thank you for your review')\r\n          fetchRatings()\r\n          vueRecaptcha.value.reset()\r\n          state.form = {\r\n            rating: 0,\r\n            sku: '',\r\n            merchantid: '',\r\n            author: '',\r\n            email: '',\r\n            title: '',\r\n            comment: '',\r\n            reCaptcha: ''\r\n          }\r\n          emit('fetchRatings')\r\n        }).catch(error => {\r\n          console.log(error)\r\n          state.isProcessing = false\r\n          vueRecaptcha.value.reset()\r\n        })\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      fetchRatings()\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      vueRecaptcha,\r\n      showError,\r\n      theme,\r\n      generateAvatar,\r\n      recaptchaVerified,\r\n      recaptchaExpired,\r\n      recaptchaFailed,\r\n      formatDT,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.avatar {\r\n  @apply w-12 h-12 rounded-full border border-blue-700 dark:border-gray-600 bg-blue-500 text-white flex items-center justify-center font-bold text-lg uppercase mr-3;\r\n}\r\n</style>\r\n","import { render } from \"./ReviewRating.vue?vue&type=template&id=40a5f186&scoped=true\"\nimport script from \"./ReviewRating.vue?vue&type=script&lang=js\"\nexport * from \"./ReviewRating.vue?vue&type=script&lang=js\"\n\nimport \"./ReviewRating.vue?vue&type=style&index=0&id=40a5f186&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-40a5f186\"]])\n\nexport default __exports__","import { render } from \"./ProductDetail.vue?vue&type=template&id=ef0efa72\"\nimport script from \"./ProductDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}