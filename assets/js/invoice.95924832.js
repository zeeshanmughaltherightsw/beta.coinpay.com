(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["invoice"],{"243d":function(e,t,c){},"9f63":function(e,t,c){"use strict";c("243d")},bf2e:function(e,t,c){"use strict";var o=c("f2bf");const n=Object(o["createStaticVNode"])('<div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div><div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div>',2);function a(e,t,c,o,a,i){return n}var i={name:"PulseSkeleton"},r=c("6b0d"),s=c.n(r);const l=s()(i,[["render",a]]);t["a"]=l},cbf3:function(e,t,c){"use strict";c.r(t);var o=c("f2bf");const n=e=>(Object(o["pushScopeId"])("data-v-0f41bacc"),e=e(),Object(o["popScopeId"])(),e),a={class:"grid grid-cols-3 gap-0 md:gap-4"},i={key:0,class:"col-span-3"},r=n(()=>Object(o["createElementVNode"])("img",{alt:"",src:"https://s3-eu-west-1.amazonaws.com/cointopay/pics/wojak.png",class:"mx-auto",style:{"max-width":"100%"}},null,-1)),s=[r],l={class:"col-span-3 md:col-span-2"},d={class:"text-sm md:text-base whitespace-nowrap mb-4 md:mb-0 scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},m={class:"flex items-center justify-between mb-4"},b={class:"flex items-center"},p={key:0},O=["src"],j={class:"font-semibold text-xl"},u={key:1},v=["src"],g={class:"font-semibold text-xl"},h={class:"mb-4"},f={class:"grid grid-cols-5 gap-0.5 md:gap-4"},y={class:"col-span-5 md:col-span-2"},k={class:"col-span-5 md:col-span-3 font-semibold"},N={class:"grid grid-cols-5 gap-0.5 md:gap-4"},V={class:"col-span-5 md:col-span-2"},w={class:"col-span-5 md:col-span-3 font-semibold"},E={class:"flex items-center"},x={key:0},C={key:1},B=n(()=>Object(o["createElementVNode"])("span",{class:"inline-block mx-2"},"-",-1)),S={key:0,class:"mr-3"},I=n(()=>Object(o["createElementVNode"])("span",null,"Recheck balance",-1)),D={key:0,class:"text-red-500 grid grid-cols-5 gap-0.5 md:gap-4"},T=n(()=>Object(o["createElementVNode"])("div",{class:"col-span-5 md:col-span-2"},"Missing amount",-1)),M={class:"col-span-5 md:col-span-3 font-semibold"},P={class:"grid grid-cols-5 gap-0.5 md:gap-4"},A={class:"col-span-5 md:col-span-2"},R={class:"col-span-5 md:col-span-3 font-semibold"},q={class:"flex items-center"},L=["href"],F={class:"grid grid-cols-5 gap-0.5 md:gap-4"},U=n(()=>Object(o["createElementVNode"])("div",{class:"col-span-5 md:col-span-2"},"Master Transaction ID",-1)),$={class:"col-span-5 md:col-span-3 font-semibold"},_={class:"grid grid-cols-5 gap-0.5 md:gap-4"},W={class:"col-span-5 md:col-span-2"},z={class:"col-span-5 md:col-span-3 font-semibold"},J={class:"grid grid-cols-5 gap-0.5 md:gap-4"},K={class:"col-span-5 md:col-span-2"},H={class:"col-span-5 md:col-span-3 font-semibold"},Z={class:"grid grid-cols-5 gap-0.5 md:gap-4"},Q={class:"col-span-5 md:col-span-2"},Y={class:"col-span-5 md:col-span-3 font-semibold"},G=["innerHTML"],X={key:0,class:"grid grid-cols-5 gap-0.5 md:gap-4"},ee={class:"col-span-5 md:col-span-2"},te={class:"col-span-5 md:col-span-3 font-semibold"},ce={class:"grid grid-cols-5 gap-0.5 md:gap-4"},oe={class:"col-span-5 md:col-span-2"},ne={class:"col-span-5 md:col-span-3 font-semibold"},ae={class:"mt-4 flex items-center justify-center"},ie={class:"text-center"},re={class:"mb-4"},se={class:"flex items-center justify-center"},le={class:"text-2xl font-bold text-blue-500 text-center capitalize"},de=["href"],me=n(()=>Object(o["createElementVNode"])("span",{class:"mr-2"},"Click to Redirect",-1)),be={key:0},pe={key:1,class:"flex items-center justify-center mt-3"},Oe={class:"cursor-pointer text-red-500 mr-4 animate-pulse"},je={key:2,class:"mt-4"},ue={class:"flex flex-wrap justify-center items-stretch w-full mb-4 relative"},ve={class:"flex -mr-px"},ge={key:3,class:"flex items-center justify-center"},he=["href"],fe={class:"text-center"},ye={class:"mb-4"},ke={class:"flex items-center justify-center"},Ne={class:"text-2xl font-bold text-blue-500 text-center capitalize"},Ve=["href"],we=n(()=>Object(o["createElementVNode"])("span",{class:"mr-2"},"Click to Redirect",-1)),Ee={key:0,class:"mb-3"},xe=["href"],Ce=n(()=>Object(o["createElementVNode"])("img",{class:"h-16",src:"https://s3-eu-west-1.amazonaws.com/cointopay/img/cointopay_checkout.png",alt:""},null,-1)),Be=[Ce],Se={class:"text-center"},Ie={class:"mb-4"},De={class:"flex items-center justify-center"},Te={class:"text-2xl font-bold text-blue-500 text-center capitalize"},Me=["href"],Pe=n(()=>Object(o["createElementVNode"])("span",{class:"mr-2"},"Click to Redirect",-1)),Ae={key:0},Re=["innerHTML"],qe=["href"],Le={class:"grid grid-cols-2 gap-0 md:gap-4"},Fe={class:"col-span-2 md:col-span-1"},Ue={key:0,class:"card"},$e={class:"text-center body"},_e={class:"col-span-2 md:col-span-1"},We={key:0,class:"card"},ze={class:"body text-center"},Je=["href"],Ke={class:"col-span-3 md:col-span-1"},He={key:0,class:"card"},Ze={class:"title"},Qe={class:"flex items-center justify-between"},Ye=n(()=>Object(o["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1)),Ge={class:"body"},Xe={class:"mb-4 flex items-center justify-between flex-col"},et={class:"flex flex-wrap items-stretch w-full mb-4 relative"},tt={class:"flex -mr-px"},ct={class:"text-center text-red-500"};function ot(e,t,c,n,r,Ce){const ot=Object(o["resolveComponent"])("icon"),nt=Object(o["resolveComponent"])("j-button"),at=Object(o["resolveComponent"])("status-icon"),it=Object(o["resolveComponent"])("QRCodeVue3"),rt=Object(o["resolveComponent"])("refund-invoice"),st=Object(o["resolveComponent"])("Tab"),lt=Object(o["resolveComponent"])("TabSet"),dt=Object(o["resolveComponent"])("forward-invoice"),mt=Object(o["resolveComponent"])("pulse-skeleton"),bt=Object(o["resolveComponent"])("centered-layout"),pt=Object(o["resolveComponent"])("pay-with-different-currency-modal"),Ot=Object(o["resolveComponent"])("payment-notification-modal"),jt=Object(o["resolveComponent"])("redirect-timer-modal"),ut=Object(o["resolveDirective"])("tippy");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(bt,null,{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",a,[e.loader||e.invoice?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,s)),Object(o["createElementVNode"])("div",l,["main"!==e.loader&&e.invoice?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("div",b,[e.isSimpleView?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[Object(o["createElementVNode"])("img",{src:n.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,O),Object(o["createTextVNode"])(),Object(o["createElementVNode"])("h2",j,Object(o["toDisplayString"])(`${n.translate("invoice.invoice")} #${e.invoice.TransactionID}`),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",u,[Object(o["createElementVNode"])("img",{src:n.generateIconUrl(e.invoice.CoinName),alt:"Image of {{ `${invoice.LongName} ` }} currency",class:"w-fit h-fit ml-fit"},null,8,v),Object(o["createTextVNode"])(),Object(o["createElementVNode"])("h2",g,Object(o["toDisplayString"])(`${n.translate("invoice.invoice")} #${e.invoice.TransactionID}`),1)]))]),Object(o["createElementVNode"])("span",{class:"cursor-pointer hover:text-blue-500",onClick:t[0]||(t[0]=t=>e.isShowUrl=!e.isShowUrl)},[Object(o["createVNode"])(ot,{name:"qr-code"})])]),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("div",y,Object(o["toDisplayString"])(n.translate("invoice.merchant")),1),Object(o["createElementVNode"])("div",k,Object(o["toDisplayString"])(e.invoice.ShopTitle),1)]),Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",V,Object(o["toDisplayString"])(n.translate("invoice.amount")),1),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",E,[e.isSimpleView?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",x,Object(o["toDisplayString"])(`${e.invoice.Amount} ${e.invoice.LongName}`),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",C,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(`${e.invoice.Amount} ${e.invoice.LongName} `)+" ",1),B,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(` ${e.invoice.OriginalAmount} ${n.inputCurrency}`),1)])),n.isWaiting||1!==e.invoice.Reopenable||1!==e.invoice.NotEnough?Object(o["createCommentVNode"])("",!0):Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(nt,{key:2,disabled:"reOpenInvoice"===e.loader,class:"ml-3",onClick:t[1]||(t[1]=e=>n.reOpenInvoice())},{default:Object(o["withCtx"])(()=>["reOpenInvoice"===e.loader?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",S,[Object(o["createVNode"])(ot,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(o["createCommentVNode"])("",!0),I]),_:1},8,["disabled"])),[[ut,"Please pay the missing amount, once confirmed, click the recheck balance button. Thanks."]])])])]),"underpaid"===e.invoice.Status.toLowerCase()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[T,Object(o["createElementVNode"])("div",M,Object(o["toDisplayString"])(`${n.toFixed(e.invoice.InitialAmount-e.invoice.Amount)} ${n.inputCurrency}`),1)])):Object(o["createCommentVNode"])("",!0),e.isSimpleView?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("div",A,Object(o["toDisplayString"])(n.translate("invoice.fee")),1),Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("div",q,[Object(o["createElementVNode"])("span",null,"Service % + Fixed Network "+Object(o["toDisplayString"])(e.invoice.MinerFee)+" "+Object(o["toDisplayString"])(e.invoice.LongName),1),Object(o["createElementVNode"])("a",{class:"ml-3",href:e.termsLink,target:"_blank"},[Object(o["createVNode"])(ot,{name:"question-mark",classes:"w-5 h-5 text-yellow-500 dark:text-yellow-400"})],8,L)])])]),Object(o["createElementVNode"])("div",F,[U,Object(o["createElementVNode"])("div",$,Object(o["toDisplayString"])(e.invoice.MasterTransactionID),1)]),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("div",W,Object(o["toDisplayString"])(n.translate("invoice.transaction_id")),1),Object(o["createElementVNode"])("div",z,Object(o["toDisplayString"])(e.invoice.TransactionID),1)]),Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("div",K,Object(o["toDisplayString"])(n.translate("invoice.status")),1),Object(o["createElementVNode"])("div",H,Object(o["toDisplayString"])(e.invoice.Status),1)])],64)),Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("div",Q,Object(o["toDisplayString"])(n.translate("invoice.reference")),1),Object(o["createElementVNode"])("div",Y,[Object(o["createElementVNode"])("div",{class:"break-all whitespace-normal",innerHTML:e.invoice.CustomerReferenceNr},null,8,G)])]),e.isSimpleView?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[n.reOpenable?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,[Object(o["createElementVNode"])("div",ee,Object(o["toDisplayString"])(n.translate("invoice.address")),1),Object(o["createElementVNode"])("div",te,Object(o["toDisplayString"])(e.invoice.coinAddress),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",ce,[Object(o["createElementVNode"])("div",oe,Object(o["toDisplayString"])(n.translate("invoice.created_on")),1),Object(o["createElementVNode"])("div",ne,Object(o["toDisplayString"])(n.formatDT(e.invoice.CreatedOn)),1)])],64)),Object(o["createElementVNode"])("div",ae,[Object(o["createElementVNode"])("span",{onClick:t[2]||(t[2]=t=>e.isSimpleView=!e.isSimpleView),class:Object(o["normalizeClass"])(["cursor-pointer mx-auto inline-block transform transition-transform",{"rotate-180":!e.isSimpleView}])},[Object(o["createVNode"])(ot,{name:"chevron-double",classes:"w-5 h-5"})],2)])])]),Object(o["createVNode"])(lt,null,{default:Object(o["withCtx"])(()=>[n.isPaymentMethodAvailable("crypto")?(Object(o["openBlock"])(),Object(o["createBlock"])(st,{key:0,name:n.translate("invoice.crypto"),selected:null===e.isFiat||0===e.isFiat||n.isOnlyPaymentMethod("crypto")},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",ie,[Object(o["createElementVNode"])("div",re,[Object(o["createElementVNode"])("div",se,[Object(o["createVNode"])(at,{invoice:e.invoice},null,8,["invoice"]),Object(o["createElementVNode"])("p",le,Object(o["toDisplayString"])(e.timer),1)]),n.isPaid||n.isExpired?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center animate-pulse text-2xl text-blue-500 font-bold"},[me,Object(o["createVNode"])(ot,{name:"arrow-right",classes:"w-5 h-5"})],8,de)):Object(o["createCommentVNode"])("",!0)]),n.isPaid||n.isExpired?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",be,[Object(o["createVNode"])(it,{imgclass:"mx-auto",width:n.qrOptions.width,height:n.qrOptions.height,"qr-options":n.qrOptions.qrOptions,"background-options":n.qrOptions.backgroundOptions,"dots-options":n.qrOptions.dotsOptions,"corners-dot-options":n.qrOptions.cornersDotOptions,"corners-square-options":n.qrOptions.cornersSquareOptions,value:e.isCryptoLink?e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress+"?amount="+e.invoice.Amount:e.invoice.coinAddress},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),e.invoice.Tag?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",pe,[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Oe,[Object(o["createVNode"])(ot,{name:"exclamation-circle"})])),[[ut,"Please use this Memo/Tag, otherwise you risk losing your funds."]]),Object(o["createElementVNode"])("span",null,"Memo/Tag: "+Object(o["toDisplayString"])(e.invoice.Tag),1)])):Object(o["createCommentVNode"])("",!0),"none"!==e.invoice.coinAddress?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[Object(o["createElementVNode"])("div",ue,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.invoice.coinAddress=t),readonly:"",class:"form-input flex-1 md:flex-none md:w-2/3 rounded-r-none"},null,512),[[o["vModelText"],e.invoice.coinAddress]]),Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("span",{onClick:t[4]||(t[4]=t=>n.copyToClipboard(decodeURIComponent(e.invoice.coinAddress))),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[Object(o["createVNode"])(ot,{name:"clipboard",classes:"w-5 h-5"})])])])])):Object(o["createCommentVNode"])("",!0),n.isPaid||n.isExpired?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ge,[Object(o["createVNode"])(nt,{class:"mr-3",onClick:t[5]||(t[5]=t=>e.isCryptoLink=!e.isCryptoLink)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.isCryptoLink?n.translate("invoice.full_crypto_link"):n.translate("invoice.address_only")),1)]),_:1}),Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(nt,{disabled:!e.isRefreshable,onClick:t[6]||(t[6]=e=>n.refreshTransaction())},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ot,{name:"refresh",classes:"w-4 h-4"})]),_:1},8,["disabled"])),[[ut,"Refresh"]])])),n.isExpired?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:4,class:"text-blue-500 hover:underline",href:n.renewTransaction()},"Pay anyway? Click here",8,he)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(rt,{invoice:e.invoice},null,8,["invoice"])])]),_:1},8,["name","selected"])):Object(o["createCommentVNode"])("",!0),n.isPaymentMethodAvailable("instant")?(Object(o["openBlock"])(),Object(o["createBlock"])(st,{key:1,name:n.translate("invoice.tzero"),selected:n.isOnlyPaymentMethod("instant")},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("div",ye,[Object(o["createElementVNode"])("div",ke,[Object(o["createVNode"])(at,{invoice:e.invoice},null,8,["invoice"]),Object(o["createElementVNode"])("p",Ne,Object(o["toDisplayString"])(e.timer),1)]),n.isPaid||n.isExpired?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[we,Object(o["createVNode"])(ot,{name:"arrow-right",classes:"w-5 h-5"})],8,Ve)):Object(o["createCommentVNode"])("",!0)]),n.isPaid||n.isExpired?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ee,[Object(o["createVNode"])(it,{imgclass:"mx-auto",width:n.qrOptions.width,height:n.qrOptions.height,"qr-options":n.qrOptions.qrOptions,"background-options":n.qrOptions.backgroundOptions,"dots-options":n.qrOptions.dotsOptions,"corners-dot-options":n.qrOptions.cornersDotOptions,"corners-square-options":n.qrOptions.cornersSquareOptions,value:e.invoice.TZERO},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"])])),n.isExpired?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:1,class:"text-blue-500 hover:underline",href:n.renewTransaction()},"Pay anyway? Click here",8,xe)):Object(o["createCommentVNode"])("",!0),n.isLoggedIn&&n.isWaiting?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:2,class:"mx-auto inline-block cursor-pointer",onClick:t[7]||(t[7]=e=>n.payViaTZERO())},Be)):Object(o["createCommentVNode"])("",!0)])]),_:1},8,["name","selected"])):Object(o["createCommentVNode"])("",!0),n.isPaymentMethodAvailable("fiat",e.isFiat)?(Object(o["openBlock"])(),Object(o["createBlock"])(st,{key:2,name:n.translate("invoice.fiat"),selected:1===e.isFiat||n.isOnlyPaymentMethod("fiat")},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Se,[Object(o["createElementVNode"])("div",Ie,[Object(o["createElementVNode"])("div",De,[Object(o["createVNode"])(at,{invoice:e.invoice},null,8,["invoice"]),Object(o["createElementVNode"])("p",Te,Object(o["toDisplayString"])(e.timer),1)]),n.isPaid||n.isExpired?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,href:e.invoice.RedirectTargetURL,class:"mt-2 text-blue-500 hover:underline inline-flex items-center"},[Pe,Object(o["createVNode"])(ot,{name:"arrow-right",classes:"w-5 h-5"})],8,Me)):Object(o["createCommentVNode"])("",!0)]),n.isPaid||n.isExpired||!e.invoice.PaymentDetail?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ae,[Object(o["createElementVNode"])("div",{class:"content-center",innerHTML:e.invoice.PaymentDetail},null,8,Re)])),n.isExpired?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:1,class:"text-blue-500 hover:underline",href:n.renewTransaction()},"Pay anyway? Click here",8,qe)):Object(o["createCommentVNode"])("",!0)])]),_:1},8,["name","selected"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(dt,{invoice:e.invoice},null,8,["invoice"]),Object(o["createElementVNode"])("div",Le,[Object(o["createElementVNode"])("div",Fe,[n.isActive&&e.invoice.inputCurrency&&0===e.invoice.LTR&&(null===e.isFiat||0===e.isFiat)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ue,[Object(o["createElementVNode"])("div",$e,[Object(o["createVNode"])(nt,{onClick:t[8]||(t[8]=e=>n.launchPayWithOtherCurrencyModal())},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.translate("invoice.pay_with_different_currency")),1)]),_:1})])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",_e,[n.isWaiting?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",We,[Object(o["createElementVNode"])("div",ze,[Object(o["createElementVNode"])("a",{href:n.generateCancelLink,class:"btn btn-warning"},"Cancel",8,Je)])])):Object(o["createCommentVNode"])("",!0)])])],64)):Object(o["createCommentVNode"])("",!0),"main"===e.loader?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])(mt),Object(o["createVNode"])(mt)],64)):Object(o["createCommentVNode"])("",!0)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",Ke,["main"!==e.loader?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",He,[Object(o["createElementVNode"])("div",Ze,[Object(o["createElementVNode"])("div",Qe,[Object(o["createElementVNode"])("h5",null,Object(o["toDisplayString"])(n.translate("invoice.invoice_url")),1),Object(o["createElementVNode"])("span",{onClick:t[9]||(t[9]=t=>e.isShowUrl=!1),class:"cursor-pointer"},[Object(o["createVNode"])(ot,{name:"close"})])])]),Ye,Object(o["createElementVNode"])("div",Ge,[Object(o["createElementVNode"])("div",Xe,[Object(o["createVNode"])(it,{imgclass:"mb-3",width:n.qrOptions.width,height:n.qrOptions.height,"qr-options":n.qrOptions.qrOptions,"background-options":n.qrOptions.backgroundOptions,"dots-options":n.qrOptions.dotsOptions,"corners-dot-options":n.qrOptions.cornersDotOptions,"corners-square-options":n.qrOptions.cornersSquareOptions,value:e.invoiceUrl},null,8,["width","height","qr-options","background-options","dots-options","corners-dot-options","corners-square-options","value"]),Object(o["createElementVNode"])("div",et,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.invoiceUrl=t),readonly:"",class:"form-input flex-1 rounded-r-none"},null,512),[[o["vModelText"],e.invoiceUrl]]),Object(o["createElementVNode"])("div",tt,[Object(o["createElementVNode"])("span",{onClick:t[11]||(t[11]=t=>n.copyToClipboard(e.invoiceUrl)),class:"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm"},[Object(o["createVNode"])(ot,{name:"clipboard",classes:"w-5 h-5"})])])]),Object(o["createElementVNode"])("p",ct,Object(o["toDisplayString"])(n.translate("invoice.warning")),1)])])])):Object(o["createCommentVNode"])("",!0),"main"===e.loader?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])(mt),Object(o["createVNode"])(mt)],64)):Object(o["createCommentVNode"])("",!0)],512),[[o["vShow"],e.isShowUrl]])])]),_:1}),Object(o["createVNode"])(pt),Object(o["createVNode"])(Ot),Object(o["createVNode"])(jt)],64)}c("14d9");var nt=c("9e55"),at=c("61c6"),it=c.n(at),rt=c("4032"),st=c("bad0"),lt=c("f51a"),dt=c("bf2e");const mt={class:"card"},bt={class:"body"},pt={class:"flex items-center flex-col md:flex-row"},Ot={class:"w-full md:flex-1 mr-0 md:mr-3"},jt={key:0,class:"text-right mb-1"},ut={class:"text-red-500 text-sm"},vt={class:"mt-3 md:mt-0"},gt={key:0,class:"mb-1 block"},ht={key:0,class:"mr-3"};function ft(e,t,c,n,a,i){const r=Object(o["resolveComponent"])("icon"),s=Object(o["resolveComponent"])("j-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",mt,[Object(o["createElementVNode"])("div",bt,[Object(o["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(o["withModifiers"])(e=>n.submit(),["prevent"]))},[Object(o["createElementVNode"])("div",pt,[Object(o["createElementVNode"])("div",Ot,[n.hasErrors?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",jt,[Object(o["createElementVNode"])("div",ut,Object(o["toDisplayString"])(n.showError(e.errorBag,"email")),1)])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[o["vModelText"],e.form.email]])]),Object(o["createElementVNode"])("div",vt,[n.hasErrors?(Object(o["openBlock"])(),Object(o["createElementBlock"])("label",gt," ")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{disabled:e.isProcessing},{default:Object(o["withCtx"])(()=>[e.isProcessing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ht,[Object(o["createVNode"])(r,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.translate("invoice.forward_invoice")),1)]),_:1},8,["disabled"])])])],32)])])}var yt=c("cdae"),kt=c("ea45"),Nt=c("2e13"),Vt={name:"ForwardInvoice",props:["invoice"],components:{JButton:rt["a"],Icon:yt["a"]},setup(e){const t=Object(o["inject"])("translate"),c=Object(o["inject"])("http"),n=Object(o["inject"])("toast"),{showError:a,validate:i}=Object(kt["a"])(),{saveNotification:r}=Object(Nt["a"])(),s=Object(o["reactive"])({form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),l=Object(o["computed"])(()=>Object.keys(s.errorBag).length>0);Object(o["watch"])(()=>({...s.form}),()=>{Object.keys(s.errorBag).length>0&&(s.errorBag=i(s.form,s.rules))});const d="https://app.cointopay.com",m=()=>{s.errorBag=i(s.form,s.rules),0===Object.keys(s.errorBag).length&&(s.isProcessing=!0,c.get(d+"/InvoiceForwarder",{params:{invoiceAddress:s.form.email,target:!1,shop:e.invoice.ShopTitle,TransactionID:e.invoice.TransactionID,coinAddress:e.invoice.coinAddress,qrcode:e.invoice.CoinName.toLowerCase()+":"+e.invoice.coinAddress,amount:e.invoice.Amount,output:"json"}}).then(e=>{s.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(s.form.email="",s.errorBag={},n.success("Invoice sent successfully"),r("Invoice sent successfully"))}).catch(e=>{s.isProcessing=!1,console.log(e)}))};return{translate:t,...Object(o["toRefs"])(s),showError:a,hasErrors:l,submit:m}}},wt=c("6b0d"),Et=c.n(wt);const xt=Et()(Vt,[["render",ft]]);var Ct=xt;const Bt={class:"mt-4"},St={class:"flex items-center flex-col md:flex-row"},It={class:"w-full md:flex-1 mr-0 md:mr-3"},Dt={key:0,class:"text-right mb-1"},Tt={class:"text-red-500 text-sm"},Mt={class:"mt-3 md:mt-0"},Pt={key:0,class:"mb-1 block"},At={key:0,class:"mr-3"};function Rt(e,t,c,n,a,i){const r=Object(o["resolveComponent"])("icon"),s=Object(o["resolveComponent"])("j-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Bt,[Object(o["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(o["withModifiers"])(e=>n.submit(),["prevent"]))},[Object(o["createElementVNode"])("div",St,[Object(o["createElementVNode"])("div",It,[n.hasErrors?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Dt,[Object(o["createElementVNode"])("div",Tt,Object(o["toDisplayString"])(n.showError(e.errorBag,"address")),1)])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.address=t),class:"form-input w-full",placeholder:"Refund address (crypto/coin address)",type:"text"},null,512),[[o["vModelText"],e.form.address]])]),Object(o["createElementVNode"])("div",Mt,[n.hasErrors?(Object(o["openBlock"])(),Object(o["createElementBlock"])("label",Pt," ")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{disabled:e.isProcessing},{default:Object(o["withCtx"])(()=>[e.isProcessing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",At,[Object(o["createVNode"])(r,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.translate("invoice.add")),1)]),_:1},8,["disabled"])])])],32)])}var qt={name:"RefundInvoice",props:["invoice"],components:{JButton:rt["a"],Icon:yt["a"]},setup(e){const t=Object(o["inject"])("translate"),c=Object(o["inject"])("http"),n=Object(o["inject"])("toast"),{showError:a,validate:i}=Object(kt["a"])(),{saveNotification:r}=Object(Nt["a"])(),s=Object(o["reactive"])({form:{address:""},errorBag:{},rules:{address:["required"]},isProcessing:!1}),l=Object(o["computed"])(()=>Object.keys(s.errorBag).length>0);Object(o["watch"])(()=>({...s.form}),()=>{Object.keys(s.errorBag).length>0&&(s.errorBag=i(s.form,s.rules))});const d="https://app.cointopay.com",m=()=>{if(s.errorBag=i(s.form,s.rules),0===Object.keys(s.errorBag).length){s.isProcessing=!0;const t={Call:"Refund",MerchantID:1,APIKey:"_",RefundAddress:s.form.address,ConfirmCode:e.invoice.Security,output:"json"};c.get(d+"/v2REAPI",{params:t}).then(e=>{s.isProcessing=!1,"success"===e.data.result?(n.success("Refund address added successfully"),r("Refund address added successfully")):n.error(e.data.message),s.form.address="",s.errorBag={}}).catch(e=>{s.isProcessing=!1,console.log(e)})}};return{translate:t,...Object(o["toRefs"])(s),showError:a,hasErrors:l,submit:m}}};const Lt=Et()(qt,[["render",Rt]]);var Ft=Lt;const Ut={class:"flex items-center justify-between"},$t=Object(o["createElementVNode"])("span",null,"Pay with different currency",-1),_t={class:"relative flex-1"},Wt={class:"flex flex-wrap justify-center gap-2 mt-4"},zt=["href"],Jt=["src"],Kt={class:"text-xs font-semibold"};function Ht(e,t,c,n,a,i){const r=Object(o["resolveComponent"])("icon"),s=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=e=>n.closeModal())},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Ut,[$t,Object(o["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>n.closeModal())},[Object(o["createVNode"])(r,{name:"close"})])])]),content:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",_t,[Object(o["createVNode"])(r,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.keyword=t),"aria-label":"Search...",class:"form-input px-10 w-full",type:"text"},null,512),[[o["vModelText"],e.keyword]]),""!==e.keyword?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[2]||(t[2]=t=>e.keyword="")},[Object(o["createVNode"])(r,{classes:"w-5 h-5",name:"close"})])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",Wt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.coinsList,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"w-24 w-24 p-3 cursor-pointer text-center border-2 border-gray-300 dark:border-gray-500 hover:border-blue-700 dark:hover:border-blue-500 inline-block rounded-md shadow flex items-center justify-center flex-col",key:t},[Object(o["createElementVNode"])("a",{href:n.generateUrl(e.id)},[Object(o["createElementVNode"])("img",{class:"w-10 h-10 mb-2 mx-auto",src:n.generateIconUrl(e.name),alt:""},null,8,Jt),Object(o["createElementVNode"])("p",Kt,Object(o["toDisplayString"])(e.name),1)],8,zt)]))),128))])]),_:1},8,["maxWidth","show"])}var Zt=c("714b"),Qt={name:"PayWithDifferentCurrencyModal",components:{Modal:Zt["a"],Icon:yt["a"]},setup(){const e=Object(o["inject"])("translate"),t=Object(o["inject"])("emitter"),{generateIconUrl:c}=Object(Nt["a"])(),n=Object(o["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,keyword:"",coins:[],invoice:null}),a=Object(o["computed"])(()=>n.coins.filter(e=>n.keyword&&""!==n.keyword?-1!==e.name.toLowerCase().indexOf(n.keyword.toLowerCase())&&0!==e.id&&e.id!==n.invoice.AltCoinID:0!==e.id&&e.id!==n.invoice.AltCoinID)),i=()=>{n.show=!1},r=e=>`https://cointopay.com/CloneMasterTransaction?TargetAltCoinID=${e}&TransactionID=${n.invoice.TransactionID}&MerchantID=${n.invoice.MerchantID}`;return Object(o["onBeforeMount"])(()=>{t.on("payWithDifferentCurrencyModal",e=>{n.coins=e.coins,n.invoice=e.invoice,n.show=!0})}),{translate:e,...Object(o["toRefs"])(n),closeModal:i,coinsList:a,generateUrl:r,generateIconUrl:c}}};const Yt=Et()(Qt,[["render",Ht]]);var Gt=Yt,Xt=c("46e6"),ec=c.n(Xt),tc=c("e4db"),cc=c.n(tc);const oc={class:"flex items-center justify-between"},nc=Object(o["createElementVNode"])("span",null,"Notification",-1),ac={key:0},ic={class:"text-center"},rc={key:0,class:"w-36 mx-auto",src:ec.a,alt:""},sc={key:1,class:"w-36 mx-auto",src:cc.a,alt:""},lc=Object(o["createElementVNode"])("p",{class:"mb-2"},"Thank you for making the transfer with your preferred wallet.",-1),dc={key:0},mc={key:1},bc=Object(o["createElementVNode"])("p",null,"Please enter your email address to receive status update alerts.",-1),pc={class:"flex items-center flex-col md:flex-row mt-4"},Oc={class:"w-full md:flex-1 mr-0 md:mr-3"},jc={key:0,class:"text-right mb-1"},uc={class:"text-red-500 text-sm"},vc={class:"mt-3 md:mt-0"},gc={key:0,class:"mb-1 block"},hc={key:0,class:"mr-3"},fc=Object(o["createElementVNode"])("span",null,"Receive Alerts",-1);function yc(e,t,c,n,a,i){const r=Object(o["resolveComponent"])("icon"),s=Object(o["resolveComponent"])("j-button"),l=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{maxWidth:e.maxWidth,show:e.show,onClose:t[3]||(t[3]=e=>n.closeModal())},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",oc,[nc,Object(o["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>n.closeModal())},[Object(o["createVNode"])(r,{name:"close"})])])]),content:Object(o["withCtx"])(()=>[e.invoice?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ac,[Object(o["createElementVNode"])("div",ic,[e.isFullPayment?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",rc)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",sc))]),lc,e.isFullPayment?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",dc,"The "+Object(o["toDisplayString"])(e.invoice.LongName)+" blockchain can take some time to confirm your payment. Please enter your email address to receive status update alerts for #"+Object(o["toDisplayString"])(e.invoice.TransactionID)+".",1)):Object(o["createCommentVNode"])("",!0),e.isFullPayment?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",mc,"We received your payment, however it is not enough to fulfill the transaction, please make the additional payment of "+Object(o["toDisplayString"])(e.amount)+" "+Object(o["toDisplayString"])(e.invoice.LongName)+".",1)),bc,Object(o["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(o["withModifiers"])(e=>n.submit(),["prevent"]))},[Object(o["createElementVNode"])("div",pc,[Object(o["createElementVNode"])("div",Oc,[n.hasErrors?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",jc,[Object(o["createElementVNode"])("div",uc,Object(o["toDisplayString"])(n.showError(e.errorBag,"email")),1)])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.email=t),class:"form-input w-full",placeholder:"Email address",type:"text"},null,512),[[o["vModelText"],e.form.email]])]),Object(o["createElementVNode"])("div",vc,[n.hasErrors?(Object(o["openBlock"])(),Object(o["createElementBlock"])("label",gc," ")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{disabled:e.isProcessing},{default:Object(o["withCtx"])(()=>[e.isProcessing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",hc,[Object(o["createVNode"])(r,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(o["createCommentVNode"])("",!0),fc]),_:1},8,["disabled"])])])],32)])):Object(o["createCommentVNode"])("",!0)]),_:1},8,["maxWidth","show"])}var kc={name:"PaymentNotificationModal",components:{Modal:Zt["a"],Icon:yt["a"],JButton:rt["a"]},setup(){const e=Object(o["inject"])("translate"),t=Object(o["inject"])("emitter"),c=Object(o["inject"])("http"),n=Object(o["inject"])("toast"),{saveNotification:a}=Object(Nt["a"])(),{validate:i,showError:r}=Object(kt["a"])(),s="https://app.cointopay.com",l=Object(o["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,invoice:null,isFullPayment:!0,amount:0,form:{email:""},errorBag:{},rules:{email:["required","email"]},isProcessing:!1}),d=Object(o["computed"])(()=>Object.keys(l.errorBag).length>0);Object(o["watch"])(()=>({...l.form}),()=>{Object.keys(l.errorBag).length>0&&(l.errorBag=i(l.form,l.rules))});const m=()=>{l.show=!1},b=()=>{l.errorBag=i(l.form,l.rules),0===Object.keys(l.errorBag).length&&(l.isProcessing=!0,c.get(s+"/InvoiceForwarder",{params:{invoiceAddress:l.form.email,target:!1,shop:l.invoice.ShopTitle,TransactionID:l.invoice.TransactionID,coinAddress:l.invoice.coinAddress,qrcode:l.invoice.CoinName.toLowerCase()+":"+l.invoice.coinAddress,amount:l.invoice.Amount,output:"json"}}).then(e=>{l.isProcessing=!1,"mail sent"===e.data.toLowerCase()&&(l.form.email="",l.errorBag={},n.success("Subscribed to alerts successfully"),a("Subscribed to alerts successfully"),m())}).catch(e=>{l.isProcessing=!1,console.log(e)}))};return Object(o["onBeforeMount"])(()=>{t.on("paymentNotificationModal",e=>{e.close&&!0===e.close?l.show=!1:(l.invoice=e.invoice,l.isFullPayment=e.isFullPayment,l.amount=e.amount,l.form={email:""},l.errorBag={},l.show=!0)})}),{translate:e,...Object(o["toRefs"])(l),hasErrors:d,showError:r,closeModal:m,submit:b}}};const Nc=Et()(kc,[["render",yc]]);var Vc=Nc,wc=c("48fc");function Ec(e,t,c,n,a,i){const r=Object(o["resolveComponent"])("icon");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,["waiting"===n.status?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,name:"spinner",classes:"w-6 h-6 mr-3 text-blue-500"})):Object(o["createCommentVNode"])("",!0),"paid"===n.status?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:1,name:"check-circle",classes:"w-8 h-8 mr-3 text-green-500"})):Object(o["createCommentVNode"])("",!0),"underpaid"===n.status?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:2,name:"check-circle",classes:"w-8 h-8 mr-3 text-yellow-500"})):Object(o["createCommentVNode"])("",!0),"expired"===n.status?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:3,name:"x-circle",classes:"w-8 h-8 mr-3 text-red-500"})):Object(o["createCommentVNode"])("",!0)],64)}var xc={name:"StatusIcon",props:["invoice"],components:{Icon:yt["a"]},setup(e){const t=Object(o["computed"])(()=>e.invoice&&e.invoice.Status.toLowerCase());return{status:t}}};const Cc=Et()(xc,[["render",Ec]]);var Bc=Cc,Sc=c("6605"),Ic=c("5502"),Dc=c("8923"),Tc=c("3fbe"),Mc=c("2ef0");const Pc=c("1d5e");var Ac={name:"Invoice",components:{CenteredLayout:nt["a"],QRCodeVue3:it.a,PulseSkeleton:dt["a"],JButton:rt["a"],TabSet:st["a"],Tab:lt["a"],Icon:yt["a"],ForwardInvoice:Ct,RefundInvoice:Ft,PayWithDifferentCurrencyModal:Gt,PaymentNotificationModal:Vc,RedirectTimerModal:wc["a"],StatusIcon:Bc},setup(){const e=Object(o["inject"])("translate"),t=Object(o["inject"])("http"),c=Object(o["inject"])("toast"),n=Object(o["inject"])("swal"),a=Object(o["inject"])("emitter"),i=Object(Sc["d"])(),r=Object(Sc["e"])(),s=Object(Ic["b"])(),{generateIconUrl:l,copyToClipboard:d,formatDT:m,saveNotification:b,toFixed:p}=Object(Nt["a"])(),{qrOptions:O}=Object(Tc["a"])(),j="https://app.cointopay.com",u=Object(o["reactive"])({lang:"en",isFiat:null,coins:[],termsLink:window.location.protocol+"//"+window.location.host+"/terms",loader:"",timer:null,interval:null,transactionInterval:null,showRedirectTimer:!1,invoice:null,invoiceUrl:window.location.href,isSimpleView:!0,isCryptoLink:!0,isRefreshable:!1,transactionSocket:null,isClosedTransactionsSocket:!1,balanceSocket:null,isClosedBalanceSocket:!1,isShowUrl:!1}),v=Object(o["computed"])(()=>{let e="";if(u.invoice){e=u.invoice.inputCurrency;const t=Mc["find"](s.state.altCoins,{ShorName:e});t&&(e=t.LongName)}return e}),g=Object(o["computed"])(()=>Mc["find"](s.state.altCoins,{ID:u.invoice.AltCoinID})),h=Object(o["computed"])(()=>u.invoice&&"waiting"===u.invoice.Status.toLowerCase()),f=Object(o["computed"])(()=>u.invoice&&-1!==["paid","underpaid"].indexOf(u.invoice.Status.toLowerCase())),y=Object(o["computed"])(()=>u.invoice&&"expired"===u.invoice.Status.toLowerCase()),k=Object(o["computed"])(()=>u.invoice&&-1!==["waiting","awaiting-fiat"].indexOf(u.invoice.Status.toLowerCase())),N=Object(o["computed"])(()=>u.invoice&&"underpaid"===u.invoice.Status.toLowerCase()&&"1"===u.invoice.Reopenable.toString()),V=Object(o["computed"])(()=>`${j}/MerchantAPI?Confirm=true&CustomerReferenceNr=${u.invoice.CustomerReferenceNr}&TransactionID=${u.invoice.TransactionID}&MerchantID=${u.invoice.MerchantID}&coinAddress=${u.invoice.coinAddress}&AltCoinID=${u.invoice.AltCoinID}`),w=Object(o["computed"])(()=>s.state.mode),E=Object(o["computed"])(()=>s.state.user),x=Object(o["computed"])(()=>s.state.isLoggedIn),C=(e,c="main")=>{u.loader=c;const o={Call:"Transactiondetail",MerchantID:1,APIKey:"_",ConfirmCode:e,output:"json"};t.get(j+"/v2REAPI",{params:o}).then(e=>{if(u.loader="",200===e.status&&"failed"!==e.data.result){u.invoice=e.data.data;const t=u.invoice.Status.toLowerCase();u.isFiat=1===u.invoice.Buy||(1===u.isFiat?1:0),-1!==["paid","underpaid","expired"].indexOf(t)&&(u.timer=u.invoice.Status,u.transactionInterval&&clearInterval(u.transactionInterval),u.interval&&(clearInterval(u.interval),u.timer=t),"paid"===t&&u.showRedirectTimer&&(a.emit("paymentNotificationModal",{close:!0}),a.emit("redirectTimerModal",{invoice:u.invoice}))),-1!==["waiting","awaiting-fiat"].indexOf(t)&&S(),"main"===c&&I(u.invoice.MerchantID)}}).catch(e=>{u.loader="",console.log(e)})},B=()=>{if(Object.keys(i.params).length>0){const e=i.params.confirmCode;C(e),u.transactionInterval&&clearInterval(u.transactionInterval),u.transactionInterval=setInterval(()=>{C(e,!1)},6e4)}else r.push("/")},S=()=>{if(!u.timer){const e=Pc.tz(u.invoice.CreatedOn,"Europe/Amsterdam").add(Number(u.invoice.ExpiryTime),"minutes");u.interval=setInterval(()=>{const t=Pc().tz("Europe/Amsterdam").valueOf(),c=e.valueOf()-t,o=Math.floor(c/864e5),n=Math.floor(c%864e5/36e5),a=Math.floor(c%36e5/6e4),i=Math.floor(c%6e4/1e3);u.timer=`${o}d ${n}h ${a}m ${i}s`,c<0&&(clearInterval(u.interval),u.timer="Expired",C(u.invoice.ConfirmCode,""))},1e3)}},I=e=>{const c={MerchantID:e,output:"json",JsonArray:""};t.get(j+"/CloneMasterTransaction",{params:c}).then(e=>{u.coins=e.data}).catch(e=>{console.log(e)})},D=()=>{u.isRefreshable&&(u.isRefreshable=!1,t.get(j+"/v2REAPI",{params:{Call:"txcheckcall",MerchantID:u.invoice.MerchantID,APIKey:"_",AltCoinID:u.invoice.AltCoinID,TransactionID:u.invoice.TransactionID,coinAddress:u.invoice.coinAddress,output:"json"}}).then(e=>{setTimeout(()=>{u.isRefreshable=!0},6e4),e.data&&e.data.message&&c.success(e.data.message)}).catch(e=>{console.log(e)}))},T=()=>{let e=`https://cointopay.com/MerchantAPI?Checkout=true&MerchantID=${u.invoice.MerchantID}&Amount=${u.invoice.OriginalAmount}&AltCoinID=${u.invoice.AltCoinID}&CustomerReferenceNr=${u.invoice.CustomerReferenceNr}&SecurityCode=${u.invoice.SecurityCode}&inputCurrency=${u.invoice.inputCurrency}`;return u.invoice.ConfirmURL&&(e+="&transactionconfirmurl="+u.invoice.ConfirmURL),u.invoice.FailURL&&(e+="&transactionfailurl="+u.invoice.FailURL),e},M=()=>{u.loader="reOpenInvoice",t.get(j+"/v2REAPI",{params:{Call:"ReopenNotEnough",MerchantID:u.invoice.MerchantID,APIKey:"_",ConfirmCode:u.invoice.Security,output:"json"}}).then(e=>{u.loader="",200===e.data.status_code?(c.success("Transaction scheduled for re-validation"),b("Transaction scheduled for re-validation"),C(u.invoice.Security,"")):(c.error(e.data.message),b(e.data.message))}).catch(e=>{u.loader="",console.log(e)})},P=e=>{const t=u.invoice.PaymentOptions.split(",").filter(Boolean);return 1===t.length&&1!==u.isFiat?-1!==t.indexOf(e):-1===t.indexOf("crypto")&&"instant"===e},A=(e,t)=>{const c=u.invoice.PaymentOptions.split(",").filter(Boolean);return-1!==c.indexOf(e)||1===t},R=()=>{a.emit("payWithDifferentCurrencyModal",{coins:u.coins,invoice:u.invoice})},q=()=>{n.fire({title:"Pay Invoice",text:"Do you want to pay this invoice?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,customClass:{container:"swal2-tailwind"}}).then(({value:e})=>{e&&!0===e&&t.get(j+"/TminusZeroPaymentProcessor",{params:{MerchantID:u.invoice.MerchantID,AltCoinID:u.invoice.AltCoinID,TransactionID:u.invoice.TransactionID,CustomerReferenceNr:u.invoice.CustomerReferenceNr,coinAddress:u.invoice.coinAddress,apikey:E.value.APIKey,output:"json"}}).then(e=>{200===e.status&&(c.success(e.data),b(e.data))}).catch(e=>{e.data&&c.error(e.data)})})},L=()=>{u.balanceSocket=new WebSocket("wss://wss.cointopay.com/balance"),u.balanceSocket.onmessage=function(e){if(e&&e.data){const t=e.data.split(":");if(t.length>=4&&u.invoice){if(u.invoice.TransactionID.toString()===t[1].toString()&&Object.keys(i.params).length>0){const e=i.params.confirmCode;setTimeout(()=>{C(e,"")},2e3),"paid"===t[2].toLowerCase()&&(u.showRedirectTimer=!0)}}else 3===t.length&&u.invoice&&u.invoice.TransactionID.toString()===t[1].toString()&&setTimeout(()=>{C(u.invoice.Security,"")},2e3)}},u.balanceSocket.onclose=function(e){u.isClosedBalanceSocket||L()}},F=()=>{u.transactionSocket=new WebSocket("wss://wss.cointopay.com/transactions"),u.transactionSocket.onmessage=function(e){if(e&&e.data){const t=e.data,c=t.split(":");if(c.length>=4&&u.invoice){if(u.invoice.TransactionID.toString()===c[1].toString()&&(setTimeout(()=>{C(u.invoice.Security,"")},2e3),"blockchain"===c[0].toLowerCase()&&null===window.localStorage.getItem(c[1]))){window.localStorage.setItem(c[1],"true");const e="confirming"===c[3].toLowerCase(),t=e?0:p(Number.parseFloat(u.invoice.Amount)-Number.parseFloat(c[2]));a.emit("paymentNotificationModal",{invoice:u.invoice,isFullPayment:e,amount:t})}}else 3===c.length&&u.invoice&&u.invoice.TransactionID.toString()===c[1].toString()&&setTimeout(()=>{C(u.invoice.Security,"")},2e3)}},u.transactionSocket.onclose=function(e){u.isClosedTransactionsSocket||F()}};return Object(o["onBeforeMount"])(()=>{u.isRefreshable=!0,Object.keys(i.query).length>0&&("undefined"!==typeof i.query.lang&&(u.lang=i.query.lang,s.commit(Dc["N"],u.lang.toUpperCase()),s.dispatch(Dc["o"])),"undefined"!==typeof i.query.fiat&&(u.isFiat=Number(i.query.fiat)),!0===i.query.t&&(this.isNotice=!0)),B(),F(),L()}),Object(o["onBeforeUnmount"])(()=>{u.transactionInterval&&clearInterval(u.transactionInterval),u.interval&&clearInterval(u.interval),null!==u.balanceSocket&&(u.isClosedBalanceSocket=!0,u.balanceSocket.close()),null!==u.transactionSocket&&(u.isClosedTransactionsSocket=!0,u.transactionSocket.close())}),{translate:e,...Object(o["toRefs"])(u),isLoggedIn:x,generateIconUrl:l,qrOptions:O,copyToClipboard:d,formatDT:m,toFixed:p,theme:w,inputCurrency:v,altCoin:g,isWaiting:h,isPaid:f,isExpired:y,isActive:k,reOpenable:N,generateCancelLink:V,refreshTransaction:D,renewTransaction:T,reOpenInvoice:M,isOnlyPaymentMethod:P,isPaymentMethodAvailable:A,launchPayWithOtherCurrencyModal:R,payViaTZERO:q}}};c("9f63");const Rc=Et()(Ac,[["render",ot],["__scopeId","data-v-0f41bacc"]]);t["default"]=Rc},e4db:function(e,t,c){e.exports=c.p+"assets/img/warning.0228fbca.svg"}}]);
//# sourceMappingURL=invoice.95924832.js.map