"use strict";(self["webpackChunkcointopay"]=self["webpackChunkcointopay"]||[]).push([[630],{2630:function(e,t,i){i.d(t,{Z:function(){return ri}});var l=i(821);const n={class:"p-4"},o={class:"max-w-7xl 3xl:max-w-8xl mx-auto"},s={class:"flex flex-col md:flex-row space-x-0 md:space-x-4"},r={class:"w-full md:w-72 mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4",style:{"min-width":"18rem"}},a={class:"pl-0",style:{"list-style-type":"none"}},c={class:"flex-grow bg-white dark:bg-gray-800 rounded shadow p-4 overflow-hidden"};function d(e,t,i,d,p,m){const u=(0,l.resolveComponent)("router-link"),g=(0,l.resolveComponent)("pos-checkout");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createElementVNode)("div",o,[(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("div",r,[(0,l.createElementVNode)("ul",a,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.navs,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:t,class:"mb-1 border border-gray-200 dark:border-gray-700"},[(0,l.createVNode)(u,{class:(0,l.normalizeClass)([{active:e.isActive},"flex items-center hover:bg-gray-200 dark:hover:bg-gray-700 p-2 cursor-pointer dark:text-gray-300"]),to:{name:e.route},tag:"a"},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(d.translate(e.name)),1)])),_:2},1032,["class","to"])])))),128))])]),(0,l.createElementVNode)("div",c,[(0,l.createVNode)(g),(0,l.renderSlot)(e.$slots,"content",{},void 0,!0)])])])])}const p={class:"card"},m={class:"body"},u={class:"flex items-center justify-between mb-3"},g={class:"font-medium"},h={class:"font-medium"},f={class:"flex items-center justify-between flex-col lg:flex-row"},v={class:"flex items-center flex-col lg:flex-row mb-3 md:mb-0"},y={class:"flex items-center mr-0 lg:mr-3 mb-3 lg:mb-0"},b={class:"mr-2"},V=(0,l.createElementVNode)("option",{value:""},"- - Select - -",-1),N=["value"],E={class:"flex items-center"},x={key:0,class:"mr-3"},k={key:0,class:"mr-3"},w={key:0,class:"font-medium"};function D(e,t,i,n,o,s){const r=(0,l.resolveComponent)("icon"),a=(0,l.resolveComponent)("j-button"),c=(0,l.resolveComponent)("delivery-modal");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[(0,l.withDirectives)((0,l.createElementVNode)("div",p,[(0,l.createElementVNode)("div",m,[(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("p",g,(0,l.toDisplayString)(n.ticket.name),1),(0,l.createElementVNode)("p",h,(0,l.toDisplayString)(`${n.translate("pos.products.charge.total_price")}: ${n.totalAmount} ${n.ticket.inputCurrency}`),1)]),(0,l.createElementVNode)("div",f,[(0,l.createElementVNode)("div",v,[(0,l.createElementVNode)("div",y,[(0,l.createElementVNode)("label",b,(0,l.toDisplayString)(n.translate("pos.products.charge.pay_with")),1),(0,l.withDirectives)((0,l.createElementVNode)("select",{onChange:t[0]||(t[0]=t=>n.updateTicketAltCoin(e.altCoinId)),class:"form-select","onUpdate:modelValue":t[1]||(t[1]=t=>e.altCoinId=t)},[V,((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.userAltCoins,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:t,value:e.id},(0,l.toDisplayString)(e.name),9,N)))),128))],544),[[l.vModelSelect,e.altCoinId]])]),(0,l.createElementVNode)("div",E,[(0,l.createVNode)(a,{disabled:e.isProcessing,onClick:t[2]||(t[2]=e=>n.processTicket()),class:"mr-2"},{default:(0,l.withCtx)((()=>[e.isProcessing?((0,l.openBlock)(),(0,l.createElementBlock)("div",x,[(0,l.createVNode)(r,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.translate("pos.products.charge.btn_charge")),1)])),_:1},8,["disabled"]),(0,l.createVNode)(a,{disabled:e.isProcessing,onClick:t[3]||(t[3]=e=>n.launchDeliveryModal())},{default:(0,l.withCtx)((()=>[e.isProcessing?((0,l.openBlock)(),(0,l.createElementBlock)("div",k,[(0,l.createVNode)(r,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.translate("pos.products.charge.btn_delivery_charge")),1)])),_:1},8,["disabled"])])]),e.employee?((0,l.openBlock)(),(0,l.createElementBlock)("div",w," Logged in: "+(0,l.toDisplayString)(e.employee.USERNAME),1)):(0,l.createCommentVNode)("",!0)])])],512),[[l.vShow,n.ticket&&n.isShow]]),(0,l.createVNode)(c)],64)}var S=i(3164),C=i(7983),B=i(8637),A=i(6486),q=i(4729),M=i(9783),T=i(2119);const _={class:"flex items-center justify-between"},j={class:"font-semibold py-2 uppercase tracking-tight"},I=(0,l.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600 mb-2"},null,-1),P={class:"grid grid-cols-2 gap-1 md:gap-4"},O={class:"col-span-2 md:col-span-1 mb-2"},U={class:"flex items-center justify-between mb-1"},$=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),R={class:"text-red-500 text-sm"},F={class:"col-span-2 md:col-span-1 mb-2"},Z={class:"flex items-center justify-between mb-1"},L=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),W={class:"text-red-500 text-sm"},H={class:"grid grid-cols-2 gap-1 md:gap-4"},K={class:"col-span-2 md:col-span-1 mb-2"},z={class:"flex items-center justify-between mb-1"},J=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Q={class:"text-red-500 text-sm"},G={class:"col-span-2 md:col-span-1 mb-2"},X={class:"flex items-center justify-between mb-1"},Y={class:"text-red-500 text-sm"},ee={class:"grid grid-cols-2 gap-1 md:gap-4"},te={class:"col-span-2 md:col-span-1 mb-2"},ie={class:"flex items-center justify-between mb-1"},le={class:"text-red-500 text-sm"},ne={class:"col-span-2 md:col-span-1 mb-2"},oe={class:"flex items-center justify-between mb-1"},se=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),re={class:"text-red-500 text-sm"},ae={class:"mb-2"},ce={class:"flex items-center justify-between mb-1"},de=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),pe={class:"text-red-500 text-sm"},me={class:"grid grid-cols-2 gap-1 md:gap-4"},ue={class:"col-span-2 md:col-span-1 mb-2"},ge={class:"flex items-center justify-between mb-1"},he=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),fe={class:"text-red-500 text-sm"},ve={class:"col-span-2 md:col-span-1 mb-2"},ye={class:"flex items-center justify-between mb-1"},be=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Ve={class:"text-red-500 text-sm"},Ne={class:"grid grid-cols-2 gap-1 md:gap-4"},Ee={class:"col-span-2 md:col-span-1 mb-2"},xe={class:"flex items-center justify-between mb-1"},ke=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),we={class:"text-red-500 text-sm"},De={class:"col-span-2 md:col-span-1 mb-2"},Se={class:"flex items-center justify-between mb-1"},Ce=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Be={class:"text-red-500 text-sm"},Ae=(0,l.createElementVNode)("option",{value:""},"Select",-1),qe=["value"],Me={class:"font-semibold py-2 uppercase tracking-tight"},Te=(0,l.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600 mb-2"},null,-1),_e={class:"inline-flex items-center mb-2 cursor-pointer"},je={class:"ml-3"},Ie={key:0,class:"mb-2"},Pe={class:"grid grid-cols-2 gap-1 md:gap-4"},Oe={class:"col-span-2 md:col-span-1 mb-2"},Ue={class:"flex items-center justify-between mb-1"},$e=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Re={class:"text-red-500 text-sm"},Fe={class:"col-span-2 md:col-span-1 mb-2"},Ze={class:"flex items-center justify-between mb-1"},Le=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),We={class:"text-red-500 text-sm"},He={class:"grid grid-cols-2 gap-1 md:gap-4"},Ke={class:"col-span-2 md:col-span-1 mb-2"},ze={class:"flex items-center justify-between mb-1"},Je={class:"text-red-500 text-sm"},Qe={class:"col-span-2 md:col-span-1 mb-2"},Ge={class:"flex items-center justify-between mb-1"},Xe=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Ye={class:"text-red-500 text-sm"},et={class:"grid grid-cols-2 gap-1 md:gap-4"},tt={class:"col-span-2 md:col-span-1 mb-2"},it={class:"flex items-center justify-between mb-1"},lt={class:"text-red-500 text-sm"},nt={class:"col-span-2 md:col-span-1 mb-2"},ot={class:"flex items-center justify-between mb-1"},st=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),rt={class:"text-red-500 text-sm"},at={class:"mb-2"},ct={class:"flex items-center justify-between mb-1"},dt=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),pt={class:"text-red-500 text-sm"},mt={class:"grid grid-cols-2 gap-1 md:gap-4"},ut={class:"col-span-2 md:col-span-1 mb-2"},gt={class:"flex items-center justify-between mb-1"},ht=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),ft={class:"text-red-500 text-sm"},vt={class:"col-span-2 md:col-span-1 mb-2"},yt={class:"flex items-center justify-between mb-1"},bt=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Vt={class:"text-red-500 text-sm"},Nt={class:"grid grid-cols-2 gap-1 md:gap-4"},Et={class:"col-span-2 md:col-span-1 mb-2"},xt={class:"flex items-center justify-between mb-1"},kt=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),wt={class:"text-red-500 text-sm"},Dt={class:"col-span-2 md:col-span-1 mb-2"},St={class:"flex items-center justify-between mb-1"},Ct=(0,l.createElementVNode)("span",{class:"ml-1 text-red-500"},"*",-1),Bt={class:"text-red-500 text-sm"},At=(0,l.createElementVNode)("option",{value:""},"Select",-1),qt=["value"],Mt={key:1},Tt=(0,l.createElementVNode)("hr",{class:"border-gray-300 dark:border-gray-600 mb-2"},null,-1),_t={class:"pl-0"},jt=["checked","onChange"],It={class:"ml-3"},Pt={class:"flex items-center justify-between mb-2"},Ot={class:"mb-2"},Ut={class:"flex items-center"},$t={key:2,class:"mb-2"},Rt={class:"inline-flex items-center bg-yellow-500 text-gray-700 px-3 py-1 text-sm rounded"},Ft={key:3,class:"mb-3"},Zt={class:"flex items-center justify-between text-blue-500 font-semibold"},Lt={class:"flex items-center justify-between"},Wt={class:"font-bold"},Ht={class:"font-bold"},Kt={class:"mt-2 text-right"},zt={key:0,class:"mr-3"};function Jt(e,t,i,n,o,s){const r=(0,l.resolveComponent)("icon"),a=(0,l.resolveComponent)("j-button"),c=(0,l.resolveComponent)("modal");return(0,l.openBlock)(),(0,l.createBlock)(c,{maxWidth:e.maxWidth,show:e.show,onClose:t[30]||(t[30]=e=>n.closeModal())},{title:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",_,[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.translate("pos.title")),1),(0,l.createElementVNode)("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>n.closeModal())},[(0,l.createVNode)(r,{name:"close"})])])])),content:(0,l.withCtx)((()=>[(0,l.createElementVNode)("form",{onSubmit:t[29]||(t[29]=(0,l.withModifiers)((e=>n.submit()),["prevent"]))},[(0,l.createElementVNode)("h5",j,(0,l.toDisplayString)(n.translate("shop.checkout.billing")),1),I,(0,l.createElementVNode)("div",P,[(0,l.createElementVNode)("div",O,[(0,l.createElementVNode)("div",U,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_first_name"))+" ",1),$]),(0,l.createElementVNode)("div",R,(0,l.toDisplayString)(n.showError(e.errorBag,"billingfirstname")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.form.billingfirstname=t)},null,512),[[l.vModelText,e.form.billingfirstname]])]),(0,l.createElementVNode)("div",F,[(0,l.createElementVNode)("div",Z,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_last_name"))+" ",1),L]),(0,l.createElementVNode)("div",W,(0,l.toDisplayString)(n.showError(e.errorBag,"billinglastname")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.billinglastname=t)},null,512),[[l.vModelText,e.form.billinglastname]])])]),(0,l.createElementVNode)("div",H,[(0,l.createElementVNode)("div",K,[(0,l.createElementVNode)("div",z,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.organization"))+" ",1),J]),(0,l.createElementVNode)("div",Q,(0,l.toDisplayString)(n.showError(e.errorBag,"billingorg")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.form.billingorg=t)},null,512),[[l.vModelText,e.form.billingorg]])]),(0,l.createElementVNode)("div",G,[(0,l.createElementVNode)("div",X,[(0,l.createElementVNode)("label",null,(0,l.toDisplayString)(n.translate("shop.checkout.billing_phone")),1),(0,l.createElementVNode)("div",Y,(0,l.toDisplayString)(n.showError(e.errorBag,"billingPhone")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.billingphone=t)},null,512),[[l.vModelText,e.form.billingphone]])])]),(0,l.createElementVNode)("div",ee,[(0,l.createElementVNode)("div",te,[(0,l.createElementVNode)("div",ie,[(0,l.createElementVNode)("label",null,(0,l.toDisplayString)(n.translate("shop.checkout.billing_skype")),1),(0,l.createElementVNode)("div",le,(0,l.toDisplayString)(n.showError(e.errorBag,"billingskype")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[5]||(t[5]=t=>e.form.billingskype=t)},null,512),[[l.vModelText,e.form.billingskype]])]),(0,l.createElementVNode)("div",ne,[(0,l.createElementVNode)("div",oe,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_email"))+" ",1),se]),(0,l.createElementVNode)("div",re,(0,l.toDisplayString)(n.showError(e.errorBag,"billingemail")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"email","onUpdate:modelValue":t[6]||(t[6]=t=>e.form.billingemail=t)},null,512),[[l.vModelText,e.form.billingemail]])])]),(0,l.createElementVNode)("div",ae,[(0,l.createElementVNode)("div",ce,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_address"))+" ",1),de]),(0,l.createElementVNode)("div",pe,(0,l.toDisplayString)(n.showError(e.errorBag,"billingaddress")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("textarea",{class:"form-input w-full","onUpdate:modelValue":t[7]||(t[7]=t=>e.form.billingaddress=t),rows:"2"},null,512),[[l.vModelText,e.form.billingaddress]])]),(0,l.createElementVNode)("div",me,[(0,l.createElementVNode)("div",ue,[(0,l.createElementVNode)("div",ge,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_postal_code"))+" ",1),he]),(0,l.createElementVNode)("div",fe,(0,l.toDisplayString)(n.showError(e.errorBag,"billingpostalcode")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[8]||(t[8]=t=>e.form.billingpostalcode=t)},null,512),[[l.vModelText,e.form.billingpostalcode]])]),(0,l.createElementVNode)("div",ve,[(0,l.createElementVNode)("div",ye,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_city"))+" ",1),be]),(0,l.createElementVNode)("div",Ve,(0,l.toDisplayString)(n.showError(e.errorBag,"billingcity")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.form.billingcity=t)},null,512),[[l.vModelText,e.form.billingcity]])])]),(0,l.createElementVNode)("div",Ne,[(0,l.createElementVNode)("div",Ee,[(0,l.createElementVNode)("div",xe,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_state"))+" ",1),ke]),(0,l.createElementVNode)("div",we,(0,l.toDisplayString)(n.showError(e.errorBag,"billingprovince")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.form.billingprovince=t)},null,512),[[l.vModelText,e.form.billingprovince]])]),(0,l.createElementVNode)("div",De,[(0,l.createElementVNode)("div",Se,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.billing_country"))+" ",1),Ce]),(0,l.createElementVNode)("div",Be,(0,l.toDisplayString)(n.showError(e.errorBag,"billingcountryid")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("select",{onChange:t[11]||(t[11]=e=>n.updateShipping()),class:"form-select w-full","onUpdate:modelValue":t[12]||(t[12]=t=>e.form.billingcountryid=t)},[Ae,((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.countries,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:t,value:e.id},(0,l.toDisplayString)(e.name),9,qe)))),128))],544),[[l.vModelSelect,e.form.billingcountryid]])])]),(0,l.createElementVNode)("h5",Me,(0,l.toDisplayString)(n.translate("shop.checkout.shipping")),1),Te,(0,l.createElementVNode)("label",_e,[(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=t=>e.differentFromBilling=t)},null,512),[[l.vModelCheckbox,e.differentFromBilling]]),(0,l.createElementVNode)("span",je,(0,l.toDisplayString)(n.translate("shop.checkout.different_from_billing")),1)]),e.differentFromBilling?((0,l.openBlock)(),(0,l.createElementBlock)("div",Ie,[(0,l.createElementVNode)("div",Pe,[(0,l.createElementVNode)("div",Oe,[(0,l.createElementVNode)("div",Ue,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_first_name"))+" ",1),$e]),(0,l.createElementVNode)("div",Re,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingfirstname")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[14]||(t[14]=t=>e.form.shippingfirstname=t)},null,512),[[l.vModelText,e.form.shippingfirstname]])]),(0,l.createElementVNode)("div",Fe,[(0,l.createElementVNode)("div",Ze,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_last_name"))+" ",1),Le]),(0,l.createElementVNode)("div",We,(0,l.toDisplayString)(n.showError(e.errorBag,"shippinglastname")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[15]||(t[15]=t=>e.form.shippinglastname=t)},null,512),[[l.vModelText,e.form.shippinglastname]])])]),(0,l.createElementVNode)("div",He,[(0,l.createElementVNode)("div",Ke,[(0,l.createElementVNode)("div",ze,[(0,l.createElementVNode)("label",null,(0,l.toDisplayString)(n.translate("shop.checkout.organization")),1),(0,l.createElementVNode)("div",Je,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingorg")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[16]||(t[16]=t=>e.form.shippingorg=t)},null,512),[[l.vModelText,e.form.shippingorg]])]),(0,l.createElementVNode)("div",Qe,[(0,l.createElementVNode)("div",Ge,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_phone"))+" ",1),Xe]),(0,l.createElementVNode)("div",Ye,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingphone")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[17]||(t[17]=t=>e.form.shippingphone=t)},null,512),[[l.vModelText,e.form.shippingphone]])])]),(0,l.createElementVNode)("div",et,[(0,l.createElementVNode)("div",tt,[(0,l.createElementVNode)("div",it,[(0,l.createElementVNode)("label",null,(0,l.toDisplayString)(n.translate("shop.checkout.shipping_skype")),1),(0,l.createElementVNode)("div",lt,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingskype")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[18]||(t[18]=t=>e.form.shippingskype=t)},null,512),[[l.vModelText,e.form.shippingskype]])]),(0,l.createElementVNode)("div",nt,[(0,l.createElementVNode)("div",ot,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_email"))+" ",1),st]),(0,l.createElementVNode)("div",rt,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingemail")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"email","onUpdate:modelValue":t[19]||(t[19]=t=>e.form.shippingemail=t)},null,512),[[l.vModelText,e.form.shippingemail]])])]),(0,l.createElementVNode)("div",at,[(0,l.createElementVNode)("div",ct,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_address"))+" ",1),dt]),(0,l.createElementVNode)("div",pt,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingaddress")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("textarea",{class:"form-input w-full","onUpdate:modelValue":t[20]||(t[20]=t=>e.form.shippingaddress=t),rows:"2"},null,512),[[l.vModelText,e.form.shippingaddress]])]),(0,l.createElementVNode)("div",mt,[(0,l.createElementVNode)("div",ut,[(0,l.createElementVNode)("div",gt,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_postal_code"))+" ",1),ht]),(0,l.createElementVNode)("div",ft,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingpostalcode")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[21]||(t[21]=t=>e.form.shippingpostalcode=t)},null,512),[[l.vModelText,e.form.shippingpostalcode]])]),(0,l.createElementVNode)("div",vt,[(0,l.createElementVNode)("div",yt,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_city"))+" ",1),bt]),(0,l.createElementVNode)("div",Vt,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingcity")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[22]||(t[22]=t=>e.form.shippingcity=t)},null,512),[[l.vModelText,e.form.shippingcity]])])]),(0,l.createElementVNode)("div",Nt,[(0,l.createElementVNode)("div",Et,[(0,l.createElementVNode)("div",xt,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_state"))+" ",1),kt]),(0,l.createElementVNode)("div",wt,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingprovince")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full",type:"text","onUpdate:modelValue":t[23]||(t[23]=t=>e.form.shippingprovince=t)},null,512),[[l.vModelText,e.form.shippingprovince]])]),(0,l.createElementVNode)("div",Dt,[(0,l.createElementVNode)("div",St,[(0,l.createElementVNode)("label",null,[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.shipping_country"))+" ",1),Ct]),(0,l.createElementVNode)("div",Bt,(0,l.toDisplayString)(n.showError(e.errorBag,"shippingcountryid")),1)]),(0,l.withDirectives)((0,l.createElementVNode)("select",{onChange:t[24]||(t[24]=e=>n.updateShipping()),class:"form-select w-full","onUpdate:modelValue":t[25]||(t[25]=t=>e.form.shippingcountryid=t)},[At,((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.countries,((e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("option",{key:t,value:e.id},(0,l.toDisplayString)(e.name),9,qt)))),128))],544),[[l.vModelSelect,e.form.shippingcountryid]])])])])):(0,l.createCommentVNode)("",!0),e.shippingOptions.length>0?((0,l.openBlock)(),(0,l.createElementBlock)("div",Mt,[Tt,(0,l.createElementVNode)("ul",_t,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.shippingOptions,((t,i)=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:i,class:"mb-2"},[(0,l.createElementVNode)("label",null,[(0,l.createElementVNode)("input",{checked:t.method===e.shippingOption.method,onChange:e=>n.updateCustomerShipping(t),name:"shipping",type:"radio"},null,40,jt),(0,l.createElementVNode)("span",It,(0,l.toDisplayString)(t.method+" "+n.formatPrice(t.cost)),1)])])))),128))]),(0,l.createElementVNode)("div",Pt,[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.translate("shop.checkout.cart.shipping_cost")),1),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.formatPrice(e.shippingOption.cost)),1)])])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",Ot,[(0,l.createElementVNode)("div",Ut,[(0,l.withDirectives)((0,l.createElementVNode)("input",{class:"form-input w-full rounded-r-none",placeholder:"Discount Code",type:"text","onUpdate:modelValue":t[26]||(t[26]=t=>e.couponCode=t)},null,512),[[l.vModelText,e.couponCode]]),(0,l.createVNode)(a,{onClick:t[27]||(t[27]=e=>n.validateCoupon()),type:"button",class:"rounded-l-none py-3"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(n.translate("shop.checkout.cart.btn_apply")),1)])),_:1})])]),e.discountValue>0?((0,l.openBlock)(),(0,l.createElementBlock)("div",$t,[(0,l.createElementVNode)("div",Rt,[(0,l.createTextVNode)((0,l.toDisplayString)(e.discountCode)+" ",1),(0,l.createElementVNode)("span",{class:"cursor-pointer ml-3",onClick:t[28]||(t[28]=e=>n.removeCoupon())},[(0,l.createVNode)(r,{name:"close",classes:"w-4 h-4 hover:text-gray-800"})])])])):(0,l.createCommentVNode)("",!0),e.discountAmount>0?((0,l.openBlock)(),(0,l.createElementBlock)("div",Ft,[(0,l.createElementVNode)("div",Zt,[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.translate("shop.checkout.cart.discount")),1),(0,l.createElementVNode)("span",null,"-"+(0,l.toDisplayString)(n.formatPrice(e.discountAmount)),1)])])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",Lt,[(0,l.createElementVNode)("span",Wt,(0,l.toDisplayString)(n.translate("shop.checkout.cart.total")),1),(0,l.createElementVNode)("span",Ht,(0,l.toDisplayString)(n.formatPrice(n.totalAmount)),1)]),(0,l.createElementVNode)("div",Kt,[(0,l.createVNode)(a,{disabled:e.isProcessing,type:"submit"},{default:(0,l.withCtx)((()=>[e.isProcessing?((0,l.openBlock)(),(0,l.createElementBlock)("div",zt,[(0,l.createVNode)(r,{name:"spinner",classes:"w-4 h-4 text-white"})])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(n.translate("pos.products.charge.btn_charge")),1)])),_:1},8,["disabled"])])],32)])),_:1},8,["maxWidth","show"])}var Qt=i(9099),Gt=i(6232),Xt={name:"DeliveryModal",components:{Modal:Qt.Z,Icon:C.Z,JButton:S.Z},setup(){const e=(0,l.inject)("translate"),t=(0,l.inject)("emitter"),i=(0,l.inject)("http"),n=(0,l.inject)("toast"),o=(0,B.oR)(),s=(0,T.tv)(),{showError:r,validate:a}=(0,Gt.Z)(),{toFixed:c,saveNotification:d}=(0,q.Z)(),p=(0,l.reactive)({show:!1,maxWidth:"2xl",closeable:!0,ticket:null,currency:"EUR",form:{hasaddress:1,billingfirstname:"",billinglastname:"",billingorg:"",billingphone:"",billingskype:"",billingemail:"",billingaddress:"",billingpostalcode:"",billingcity:"",billingprovince:"",billingcountryid:"",shippingfirstname:"",shippinglastname:"",shippingorg:"",shippingphone:"",shippingskype:"",shippingemail:"",shippingaddress:"",shippingpostalcode:"",shippingcity:"",shippingprovince:"",shippingcountryid:"",shippingcost:0},errorBag:{},rules:{billingfirstname:["required"],billinglastname:["required"],billingphone:["required"],billingemail:["required","email"],billingaddress:["required"],billingpostalcode:["required"],billingcity:["required"],billingprovince:["required"],billingcountryid:["required"],shippingfirstname:["required"],shippinglastname:["required"],shippingphone:["required"],shippingemail:["required","email"],shippingaddress:["required"],shippingpostalcode:["required"],shippingcity:["required"],shippingprovince:["required"],shippingcountryid:["required"]},messages:{billingfirstname:{required:"Billing first name is required"},billinglastname:{required:"Billing last name is required"},billingphone:{required:"Billing phone is required"},billingemail:{required:"Billing email is required",email:"Please provide a valid email"},billingaddress:{required:"Billing address is required"},billingpostalcode:{required:"Billing postal code is required"},billingcity:{required:"Billing city is required"},billingprovince:{required:"Billing state/province is required"},billingcountryid:{required:"Billing country is required"},shippingfirstname:{required:"Shipping first name is required"},shippinglastname:{required:"Shipping last name is required"},shippingphone:{required:"Shipping phone is required"},shippingemail:{required:"Shipping email is required",email:"Please provide a valid email"},shippingaddress:{required:"Shipping address is required"},shippingpostalcode:{required:"Shipping postal code is required"},shippingcity:{required:"Shipping city is required"},shippingprovince:{required:"Shipping state/province is required"},shippingcountryid:{required:"Shipping country is required"}},differentFromBilling:!1,userAltCoins:[],shippingOption:null,shippingOptions:[],countries:[],couponCode:"",discountValue:0,discountAmount:0,discountCode:null,confirmHook:()=>{},isProcessing:!1}),m=(0,l.computed)((()=>o.state.pos)),u=(0,l.computed)((()=>o.state.posCalls)),g=(0,l.computed)((()=>o.state.user)),h=(0,l.computed)((()=>o.state.accountInfo)),f=(0,l.computed)((()=>{let e=0;return p.ticket&&p.ticket.ticketProducts.map((t=>{e=Number(e)+Number(t.productQuantity)*Number(t.productPrice)})),p.shippingOption&&(e+=Number(p.shippingOption.cost)),p.discountValue&&(p.discountAmount=e*(Number(p.discountValue)/100)),e-p.discountAmount})),v="https://app.cointopay.com",y=()=>{p.show=!1},b=e=>e?c(e)+" "+p.currency:"",V=()=>{p.differentFromBilling?p.form={...p.form,shippingfirstname:"",shippinglastname:"",shippingorg:"",shippingskype:"",shippingemail:"",shippingphone:"",shippingaddress:"",shippingpostalcode:"",shippingcity:"",shippingprovince:"",shippingcountryid:""}:p.form={...p.form,shippingfirstname:p.form.billingfirstname,shippinglastname:p.form.billinglastname,shippingorg:p.form.billingorg,shippingskype:p.form.billingskype,shippingemail:p.form.billingemail,shippingphone:p.form.billingphone,shippingaddress:p.form.billingaddress,shippingpostalcode:p.form.billingpostalcode,shippingcity:p.form.billingcity,shippingprovince:p.form.billingprovince,shippingcountryid:p.form.billingcountryid},N()},N=()=>{const e=p.differentFromBilling?p.form.shippingcountryid:p.form.billingcountryid;if(e){const t=A.find(p.countries,{id:e});t&&"undefined"!==typeof t.shippingOptions&&(p.shippingOptions=t.shippingOptions,p.shippingOption=p.shippingOptions[0],p.form.shippingcost=p.shippingOption.cost)}else p.shippingOptions=[],p.form.shippingcost=0},E=e=>{p.shippingOption=e,p.form.shippingcost=e.cost},x=()=>{p.couponCode&&i.get(`${v}/MarketAPI?POSDATA`,{params:{Call:"SHOWPOS",KeyData:`${g.value.ID}_coupon${p.couponCode.trim()}`,MerchantID:g.value.ID,APIKey:"_",output:"json"}}).then((e=>{if(200===e.status){const t=e.data;"nothing found"===t?(n.warning("Coupon code is not valid"),d("Coupon code is not valid")):(p.discountValue=Number(t),p.discountCode=p.couponCode,p.couponCode="")}})).catch((e=>{console.log(e)}))},k=()=>{p.discountValue>0&&(p.discountValue=0,p.discountCode=null,p.discountAmount=0)},w=()=>{if(p.errorBag=a(p.form,p.rules,p.messages),0===Object.keys(p.errorBag).length&&p.ticket&&f.value>0){p.isProcessing=!0;const e=A.find(p.userAltCoins,{name:p.ticket.currency});if(Object.keys(e).length>0){let t="";p.ticket.ticketProducts.map((e=>{t+=`${e.productId}|${e.productSku}|${e.productName}|${e.imageUrl}|${e.productPrice}|${e.productQuantity}:::`})),p.shippingOption&&(t+=`${p.shippingOption.method}|${p.shippingOption.cost}:::`),p.discountAmount>0&&(t+=`${p.discountValue}|${p.discountCode}|${p.discountAmount}`);const l={MerchantID:g.value.ID,Checkout:!0,Amount:f.value,CustomerReferenceNr:t,inputCurrency:h.value?h.value.PayoutCurrencyShortName:"EUR",AltCoinID:e.id,SecurityCode:g.value.SecurityCode,active:1,hasAddress:1,...p.form,coupon:p.discountCode,output:"json"};i.get(`${v}/MerchantAPI`,{params:l}).then((e=>{p.isProcessing=!1;const t=A.cloneDeep(p.ticket);t.paymentRequest=e.data,t.status="inprogress";const i=A.cloneDeep(m.value.tickets),l=A.findIndex(i,{ticketId:t.ticketId});-1!==l&&(i.splice(l,1,t),o.dispatch(M.yF,{call:u.value.tickets,data:i})),s.push({name:"account-pos-invoice",params:{confirmCode:t.paymentRequest.Security}})})).catch((e=>{p.isProcessing=!1,n.error(e.response.data),d(e.response.data)}))}else n.warning("Please select currency")}};return(0,l.onBeforeMount)((()=>{t.on("deliveryModal",(e=>{p.ticket=e.ticket,p.countries=e.countries,p.userAltCoins=e.userAltCoins,p.confirmHook=e.confirm,p.currency=h.value?h.value.PayoutCurrencyShortName:"EUR",p.form={hasaddress:1,billingfirstname:"",billinglastname:"",billingorg:"",billingphone:"",billingskype:"",billingemail:"",billingaddress:"",billingpostalcode:"",billingcity:"",billingprovince:"",billingcountryid:"",shippingfirstname:"",shippinglastname:"",shippingorg:"",shippingphone:"",shippingskype:"",shippingemail:"",shippingaddress:"",shippingpostalcode:"",shippingcity:"",shippingprovince:"",shippingcountryid:"",shippingcost:0},p.show=!0}))})),{translate:e,...(0,l.toRefs)(p),closeModal:y,showError:r,formatPrice:b,totalAmount:f,toggleShippingAddress:V,updateShipping:N,updateCustomerShipping:E,validateCoupon:x,removeCoupon:k,submit:w}}},Yt=i(3744);const ei=(0,Yt.Z)(Xt,[["render",Jt]]);var ti=ei,ii={name:"PosCheckout",components:{JButton:S.Z,Icon:C.Z,DeliveryModal:ti},setup(){const e=(0,l.inject)("translate"),t=(0,l.inject)("http"),i=(0,l.inject)("emitter"),n=(0,l.inject)("toast"),o=(0,B.oR)(),s=(0,T.tv)(),{toFixed:r,saveNotification:a}=(0,q.Z)(),c=(0,l.reactive)({employee:null,discountValue:0,discountAmount:0,shippingOption:null,userAltCoins:[],altCoinId:"",countries:[],isProcessing:!1}),d=(0,l.computed)((()=>o.state.user)),p=(0,l.computed)((()=>o.state.accountInfo)),m=(0,l.computed)((()=>o.state.pos)),u=(0,l.computed)((()=>o.state.posCalls)),g=(0,l.computed)((()=>{let e=null;return m.value&&m.value.tickets.length>0&&(e=A.find(m.value.tickets,{isActive:"true"})),e})),h=(0,l.computed)((()=>{let e=0;return g.value&&g.value.ticketProducts.map((t=>{e=Number(e)+Number(t.productQuantity)*Number(t.productPrice)})),c.shippingOption&&(e+=Number(c.shippingOption.cost)),c.discountValue&&(c.discountAmount=e*(Number(c.discountValue)/100)),r(e-c.discountAmount)})),f=(0,l.computed)((()=>-1===["account-pos-employees","account-pos-office","account-pos-invoice-success","account-pos-invoice"].indexOf(s.currentRoute.value.name))),v="https://app.cointopay.com",y=()=>{t.get(`${v}/CloneMasterTransaction`,{params:{MerchantID:d.value.ID,output:"json",JsonArray:""}}).then((e=>{if(200===e.status&&(c.userAltCoins=e.data.filter((e=>0!==e.id)),g.value&&c.userAltCoins.length>0)){const e=A.find(c.userAltCoins,{name:g.value.currency});c.altCoinId=e?e.id:c.userAltCoins[0].id}})).catch((e=>{console.log(e)}))},b=()=>{t.get(`${v}/MarketAPI?POSDATA`,{params:{Call:"SHOWPOS",MerchantID:d.value.ID,APIKey:"_",KeyData:`${d.value.ID}_shippings`,output:"json"}}).then((e=>{if(200===e.status){const t=e.data;if("nothing found"!==t&&t.length>0){const e=[];t.map((t=>{const i=A.findIndex(e,{id:t.countryId});if(-1!==i){const l=A.findIndex(e[i].shippingOptions,{method:t.shippingMethod});-1===l&&e[i].shippingOptions.push({method:t.shippingMethod,cost:t.shippingCost})}else e.push({id:t.countryId,name:t.countryName,shippingOptions:[{method:t.shippingMethod,cost:t.shippingCost}]})})),c.countries=e}else c.countries=o.state.countries}})).catch((e=>{console.log(e)}))},V=e=>{if(e){const t=A.find(c.userAltCoins,{id:e}),i=A.cloneDeep(m.value.tickets),l=A.findIndex(i,{ticketId:g.value.ticketId});i.splice(l,1,{...g.value,currency:t.name}),o.dispatch(M.yF,{call:u.value.tickets,data:i})}},N=()=>{if(g.value&&h.value>0){const e=A.find(c.userAltCoins,{name:g.value.currency});if(e){c.isProcessing=!0;const i={MerchantID:d.value.ID,Checkout:!0,Amount:h.value,CustomerReferenceNr:g.value.ticketId+"|"+g.value.name,inputCurrency:p.value?p.value.PayoutCurrencyShortName:"EUR",AltCoinID:e.id,SecurityCode:d.value.SecurityCode,output:"json"};t.get(`${v}/MerchantAPI`,{params:i}).then((e=>{c.isProcessing=!1;const t=A.cloneDeep(g.value);t.paymentRequest=e.data,t.status="inprogress";const i=A.cloneDeep(m.value.tickets),l=A.findIndex(i,{ticketId:t.ticketId});-1!==l&&(i.splice(l,1,t),o.dispatch(M.yF,{call:u.value.tickets,data:i})),s.push({name:"account-pos-invoice",params:{confirmCode:t.paymentRequest.Security}})})).catch((e=>{c.isProcessing=!1,n.error(e.response.data),a(e.response.data)}))}}},E=()=>{i.emit("deliveryModal",{ticket:g.value,countries:c.countries,userAltCoins:c.userAltCoins,confirm:({discountAmount:e})=>{c.discountAmount=e}})};return(0,l.onBeforeMount)((()=>{c.employee=A.find(m.value.users,{isLoggedIn:"true"}),y(),b()})),{translate:e,...(0,l.toRefs)(c),ticket:g,isShow:f,totalAmount:h,updateTicketAltCoin:V,processTicket:N,launchDeliveryModal:E}}};const li=(0,Yt.Z)(ii,[["render",D]]);var ni=li,oi={name:"POSLayout",components:{PosCheckout:ni},setup(){const e=(0,l.inject)("translate"),t=(0,T.tv)(),i=(0,B.oR)(),n=(0,l.reactive)({navs:[{name:"pos.menu.products",route:"account-pos-products",isActive:!0},{name:"pos.menu.tickets",route:"account-pos-tickets",isActive:!1},{name:"pos.menu.receipts",route:"account-pos-recipients",isActive:!1},{name:"pos.menu.employees",route:"account-pos-employees",isActive:!1},{name:"pos.menu.office",route:"account-pos-office",isActive:!1}]});return(0,l.onMounted)((()=>{const e=["account-pos-categories","account-pos-favourites","account-pos-invoice","account-pos-invoice-success"],l=["account-pos-ticket"],o=t.currentRoute.value.name;n.navs=n.navs.map((t=>({...t,isActive:t.route===o||-1!==e.indexOf(o)&&"account-pos-products"===t.route||-1!==l.indexOf(o)&&"account-pos-tickets"===t.route}))),i.dispatch(M.Z6,{}).catch((e=>{console.log(e),t.push({name:"wallet"})}))})),{translate:e,...(0,l.toRefs)(n)}}};const si=(0,Yt.Z)(oi,[["render",d],["__scopeId","data-v-1f631ded"]]);var ri=si}}]);
//# sourceMappingURL=630.7a45f145.js.map