(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["webshop-overview"],{2403:function(e,t,r){"use strict";r.r(t);var a=r("f2bf"),o={class:"flex items-center justify-between flex-col md:flex-row mb-3"},c=Object(a["createTextVNode"])("Export to CSV"),n={class:"flex items-center space-x-2 flex-col md:flex-row"},l=Object(a["createElementVNode"])("label",{class:"whitespace-nowrap mb-1 md:mb-0"},"From Date",-1),s=Object(a["createElementVNode"])("label",{class:"whitespace-nowrap mb-1 md:mb-0"},"To Date",-1),i={class:"relative w-full md:w-auto"},d=Object(a["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1),m={class:"w-full scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600"},b={class:"table-sm mb-2"},u=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,"ID"),Object(a["createElementVNode"])("th",{style:{"min-width":"180px"}},"Direction"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Created On"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Confirmed On"),Object(a["createElementVNode"])("th",{style:{"min-width":"70px"}},"Time"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Customer Reference Nr"),Object(a["createElementVNode"])("th",null,"Original"),Object(a["createElementVNode"])("th",null,"Received"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Fee Paid"),Object(a["createElementVNode"])("th",{style:{"min-width":"70px"}},"Input"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Crypto Amount"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Crypto Name"),Object(a["createElementVNode"])("th",{class:"whitespace-nowrap"},"Coin Address Used")])],-1),p={class:"whitespace-nowrap"},g={class:"whitespace-nowrap"},O={class:"break-all whitespace-normal",style:{"max-width":"600px"}},j={class:"flex items-center"},f=["onClick"],y={class:"flex items-center"},v=["onClick"],h={class:"whitespace-nowrap"},k={class:"break-all"},w={key:0},C=Object(a["createElementVNode"])("td",{colspan:"13"},"No record found!",-1),N=[C];function x(e,t,r,C,x,V){var E=Object(a["resolveComponent"])("j-button"),D=Object(a["resolveComponent"])("litepie-datepicker"),P=Object(a["resolveComponent"])("icon"),B=Object(a["resolveComponent"])("pagination"),A=Object(a["resolveComponent"])("pulse-skeleton"),I=Object(a["resolveComponent"])("centered-layout");return Object(a["openBlock"])(),Object(a["createBlock"])(I,null,{default:Object(a["withCtx"])((function(){return[e.isProcessing?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",o,[Object(a["createVNode"])(E,{onClick:C.exportToCSV,class:"mb-3 md:mb-0"},{default:Object(a["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(a["createElementVNode"])("div",n,[l,Object(a["createVNode"])(D,{"as-single":"",modelValue:e.searchForm.fromDate,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.searchForm.fromDate=t}),class:"mb-3 md:mb-0",formatter:{date:"YYYY-MM-DD",month:"MMM"}},null,8,["modelValue"]),s,Object(a["createVNode"])(D,{"as-single":"",modelValue:e.searchForm.toDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchForm.toDate=t}),class:"mb-3 md:mb-0",formatter:{date:"YYYY-MM-DD",month:"MMM"}},null,8,["modelValue"]),Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(P,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.keyword=t}),"aria-label":"Search...",class:"form-input w-full px-10",type:"text",style:{"min-width":"220px"}},null,512),[[a["vModelText"],e.keyword]]),""!==e.keyword?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[3]||(t[3]=function(t){return e.keyword=""})},[Object(a["createVNode"])(P,{classes:"w-5 h-5",name:"close"})])):Object(a["createCommentVNode"])("",!0)])])]),d,Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("table",b,[u,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(C.paginatedReports,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.ID),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.Incoming),1),Object(a["createElementVNode"])("td",p,Object(a["toDisplayString"])(C.formatDT(e.CreatedOn)),1),Object(a["createElementVNode"])("td",g,Object(a["toDisplayString"])(C.formatDT(e.ConfirmedOn)),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.ConfirmationTime),1),Object(a["createElementVNode"])("td",O,Object(a["toDisplayString"])(e.CustomerReferenceNr),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.OriginalAmount),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",j,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.AmountReceived)+" ",1),Object(a["createElementVNode"])("span",{class:"ml-3 cursor-pointer hover:text-blue-500",onClick:function(t){return C.toConverter(e,"ic")}},[Object(a["createVNode"])(P,{name:"clipboard",classes:"w-5 h-5"})],8,f)])]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.FeePaidByCustomer),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.InputCurrency),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",y,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.CryptoCurrencyAmount)+" ",1),Object(a["createElementVNode"])("span",{class:"ml-3 cursor-pointer hover:text-blue-500",onClick:function(t){return C.toConverter(e,"c")}},[Object(a["createVNode"])(P,{name:"clipboard",classes:"w-5 h-5"})],8,v)])]),Object(a["createElementVNode"])("td",h,Object(a["toDisplayString"])(e.Name),1),Object(a["createElementVNode"])("td",k,Object(a["toDisplayString"])(e.CoinAddressUsed),1)])})),128)),0===C.paginatedReports.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",w,N)):Object(a["createCommentVNode"])("",!0)])])]),C.filteredReports.length>0?(Object(a["openBlock"])(),Object(a["createBlock"])(B,{key:0,meta:e.meta,onPage:C.updatePage},null,8,["meta","onPage"])):Object(a["createCommentVNode"])("",!0)],64)),e.isProcessing?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createVNode"])(A),Object(a["createVNode"])(A)],64)):Object(a["createCommentVNode"])("",!0)]})),_:1})}var V=r("5530"),E=r("6b75");function D(e){if(Array.isArray(e))return Object(E["a"])(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function P(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var B=r("06c5");r("d9e2");function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e){return D(e)||P(e)||Object(B["a"])(e)||A()}r("4de4"),r("498a"),r("25f0"),r("fb6a"),r("b64b"),r("ac1f"),r("1276"),r("159b"),r("a15b"),r("d81d");var S=r("9e55"),F=r("bf2e"),T=r("cdae"),R=r("4032"),M=r("d529"),L=r("8527"),Y=r("2e13"),U=r("5502"),z=r("2ef0"),J=r("8923"),G=r("c1df"),K={name:"WebshopOverview",components:{CenteredLayout:S["a"],PulseSkeleton:F["a"],Icon:T["a"],JButton:R["a"],Pagination:M["a"],LitepieDatepicker:L["a"]},setup:function(){var e=Object(a["inject"])("http"),t=Object(a["inject"])("toast"),r=Object(U["b"])(),o=Object(Y["a"])(),c=o.formatDT,n=o.copyToClipboard,l=Object(a["reactive"])({reports:[],isProcessing:!1,keyword:"",searchForm:{fromDate:"",toDate:""},meta:{currentPage:1,totalPages:0,limit:25,offset:0}}),s=Object(a["computed"])((function(){return r.state.user})),i=Object(a["computed"])((function(){return r.state.converter})),d=Object(a["computed"])((function(){return l.reports.filter((function(e){var t=l.keyword?l.keyword.toString().trim():"";return!t||(t=t.toLowerCase(),z["includes"](e.ID.toLowerCase(),t)||z["includes"](e.CustomerReferenceNr.toLowerCase(),t)||z["includes"](e.InputCurrency&&e.InputCurrency.toLowerCase(),t)||z["includes"](e.Incoming.toLowerCase(),t)||z["includes"](e.Name.toLowerCase(),t)||z["includes"](e.CreatedOn,t)||z["includes"](e.ConfirmedOn,t)||z["includes"](e.CoinAddressUsed.toLowerCase(),t))}))})),m=Object(a["computed"])((function(){return d.value.length>0?I(d.value).slice(l.meta.offset,l.meta.offset+l.meta.limit):I(d.value)})),b=Object(a["computed"])((function(){return r.state.allAltCoins}));Object(a["watch"])((function(){return Object(V["a"])({},l.searchForm)}),(function(e,r){var a=l.searchForm.fromDate,o=l.searchForm.toDate,c=!0;new Date(a).getTime()>(new Date).getTime()?(c=!1,l.searchForm.fromDate="",t.error("From date cannot be greater than today")):""!==a&&""!==o?new Date(a).getTime()>new Date(o).getTime()&&(c=!1,l.searchForm.fromDate="",t.error("From date should be less than to date")):""===l.searchForm.toDate&&(l.searchForm.toDate=G().format("YYYY-MM-DD")),!c||""===l.searchForm.fromDate&&""===l.searchForm.toDate||setTimeout((function(){p(l.searchForm)}),50)})),Object(a["watch"])((function(){return l.keyword}),(function(e,t){l.meta=Object(V["a"])(Object(V["a"])({},l.meta),{},{currentPage:1,totalPages:Math.ceil(d.value.length/l.meta.limit),offset:0})}));var u="https://app.cointopay.com",p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l.isProcessing=!0;var r={MerchantID:s.value.ID,APIKey:s.value.APIKey};null!==t&&(""!==t.fromDate&&Object.assign(r,{fromdate:t.fromDate}),""!==t.todate&&Object.assign(r,{todate:t.toDate})),e.get("".concat(u,"/V2Processor?WebShopReport"),{params:r}).then((function(e){l.isProcessing=!1,l.reports=[],200===e.status&&Object.keys(e.data.data[0]).length>0&&(l.reports=e.data.data,l.meta=Object(V["a"])(Object(V["a"])({},l.meta),{},{currentPage:1,totalPages:Math.ceil(l.reports.length/l.meta.limit),offset:0}))})).catch((function(e){l.isProcessing=!1,console.log(e)}))},g=function(e,t){if("ic"===t){var a=z["find"](b.value,{ShortName:e.InputCurrency}),o=z["find"](b.value,{Name:e.Name.split(" ")[0]});if(a){var c=a.ID,l=Object(V["a"])(Object(V["a"])({},i.value),{},{source:e.AmountReceived,sourceAltCoinId:c});o&&(l.targetAltCoinId=o.ID),r.commit(J["G"],l)}n(e.AmountReceived)}else{var s=z["find"](b.value,{Name:e.Name.split(" ")[0]}),d=z["find"](b.value,{ShortName:e.InputCurrency});if(s){var m=s.ID,u=Object(V["a"])(Object(V["a"])({},i.value),{},{source:e.CryptoCurrencyAmount,sourceAltCoinId:m});d&&(u.targetAltCoinId=d.ID),r.commit(J["G"],u)}n(e.CryptoCurrencyAmount)}},O=function(e){l.meta=Object(V["a"])(Object(V["a"])({},l.meta),{},{currentPage:e,offset:(e-1)*l.meta.limit})},j=function(){var e=[["ID","Direction","CreatedOn","ConfirmedOn","ConfirmationTime","CustomerReferenceNr","OriginalAmount","AmountReceived","FeePaidByCustomer","InputCurrency","CryptoAmount","CryptoName","CoinAddressUsed"]];l.reports.length>0&&l.reports.forEach((function(t){e.push([t.ID,t.Incoming,c(t.CreatedOn),c(t.ConfirmedOn),t.ConfirmationTime,t.CustomerReferenceNr,t.OriginalAmount,t.AmountReceived,t.FeePaidByCustomer,t.InputCurrency,t.CryptoCurrencyAmount,t.Name,t.CoinAddressUsed])}));var t=e.map((function(e){return e.join(";")})).join("\n"),r=encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href","data:text/csv;charset=utf-8,"+r),a.setAttribute("download","webshop-overview.csv"),document.body.appendChild(a),a.click()};return Object(a["onBeforeMount"])((function(){p()})),Object(V["a"])(Object(V["a"])({},Object(a["toRefs"])(l)),{},{filteredReports:d,paginatedReports:m,formatDT:c,toConverter:g,updatePage:O,exportToCSV:j})}},W=r("6b0d"),_=r.n(W);const $=_()(K,[["render",x]]);t["default"]=$},"9e55":function(e,t,r){"use strict";var a=r("f2bf"),o={class:"p-4"},c={class:"max-w-7xl 3xl:max-w-8xl mx-auto"},n={class:"flex flex-col md:flex-row space-x-0 md:space-x-4"},l={class:"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4",style:{"min-height":"calc(100vh - 351px)"}};function s(e,t,r,s,i,d){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",l,[Object(a["renderSlot"])(e.$slots,"default")])])])])}var i={name:"CenteredLayout"},d=r("6b0d"),m=r.n(d);const b=m()(i,[["render",s]]);t["a"]=b},bf2e:function(e,t,r){"use strict";var a=r("f2bf"),o=Object(a["createStaticVNode"])('<div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div><div class="p-2 w-full mx-auto"><div class="animate-pulse"><div class="flex-1 space-y-3 py-1"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-1"></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded col-span-2"></div></div><div class="h-2 bg-gray-200 dark:bg-gray-500 rounded"></div></div></div></div></div>',2);function c(e,t,r,a,c,n){return o}var n={name:"PulseSkeleton"},l=r("6b0d"),s=r.n(l);const i=s()(n,[["render",c]]);t["a"]=i},d529:function(e,t,r){"use strict";var a=r("f2bf"),o={key:0,"aria-label":"pagination",class:"mt-3"},c={class:"inline-flex -space-x-px text-sm md:text-base"},n=Object(a["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),l=[n],s={key:0,class:"px-1 py-2 md:px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500",href:"javascript:void(0)"},i=["onClick"],d={key:0,class:"sr-only"},m=Object(a["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),b=[m];function u(e,t,r,n,m,u){return r.meta.totalPages>1?(Object(a["openBlock"])(),Object(a["createElementBlock"])("nav",o,[Object(a["createElementVNode"])("ul",c,[Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:text-gray-400":!e.isPrev},"px-2 py-2 md:px-3 ml-0 leading-tight text-gray-500 dark:text-gray-400 bg-white rounded-l border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[0]||(t[0]=function(e){return n.prev()})},l,2)]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.pageRange,(function(t,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:r},["..."===t?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",s,Object(a["toDisplayString"])(t),1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:1,class:Object(a["normalizeClass"])("px-2 py-2 md:px-3 leading-tight bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 ".concat(t===e.currentPage?"text-blue-500 font-semibold":"text-gray-500 dark:text-gray-400"," hover:text-blue-500 dark:hover:text-blue-500")),href:"javascript:void(0)",onClick:function(e){return n.updatePage(t)}},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t)+" ",1),t===e.currentPage?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",d,"(current)")):Object(a["createCommentVNode"])("",!0)],10,i))])})),128)),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])([{"cursor-not-allowed bg-gray-200 dark:bg-gray-900 dark:hover:bg-text-400":!e.isNext},"px-2 py-2 md:px-3 leading-tight text-gray-500 bg-white rounded-r border border-gray-300 hover:text-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-blue-500"]),href:"javascript:void(0)",onClick:t[1]||(t[1]=function(e){return n.next()})},b,2)])])])):Object(a["createCommentVNode"])("",!0)}var p=r("5530"),g=(r("d3b7"),r("ac1f"),r("00b4"),{name:"Pagination",props:["meta"],emits:["page"],setup:function(e,t){var r=t.emit,o=Object(a["reactive"])({isPrev:!1,isNext:!1,pagesLimit:5,currentPage:e.meta.currentPage,delta:3}),c=Object(a["computed"])((function(){for(var t,r=e.meta.currentPage,a=e.meta.totalPages,c=r-o.delta,n=r+o.delta+1,l=[],s=[],i=1;i<=a;i++)(1===i||i===a||i>=c&&i<n)&&l.push(i);return l.forEach((function(e){t&&(e-t===2?s.push(t+1):e-t!==1&&s.push("...")),s.push(e),t=e})),s})),n=function(e){e!==o.currentPage&&(o.currentPage=e,i(),r("page",o.currentPage))},l=function(){o.currentPage>1?o.currentPage--:o.currentPage=1,i(),r("page",o.currentPage)},s=function(){o.currentPage<e.meta.totalPages?o.currentPage++:o.currentPage=e.meta.totalPages,i(),r("page",o.currentPage)},i=function(){o.isPrev=o.currentPage>1,o.isNext=o.currentPage<e.meta.totalPages},d=function(){o.delta=3,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(o.delta=1)};return Object(a["onBeforeMount"])((function(){i(),window.addEventListener("resize",d)})),Object(a["onBeforeUnmount"])((function(){window.removeEventListener("resize",d)})),Object(p["a"])(Object(p["a"])({},Object(a["toRefs"])(o)),{},{pageRange:c,prev:l,next:s,updatePage:n})}}),O=r("6b0d"),j=r.n(O);const f=j()(g,[["render",u]]);t["a"]=f}}]);
//# sourceMappingURL=webshop-overview.1df0e80f.js.map