{"version":3,"sources":["webpack:///./src/views/Shop.vue","webpack:///./src/views/Shop.vue?7dcc","webpack:///./src/components/ProductSkeleton.vue","webpack:///./src/components/ProductSkeleton.vue?44ac","webpack:///./node_modules/core-js/modules/es.array.find-index.js"],"names":["class","_hoisted_2","key","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementVNode","value","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","render","_ctx","_cache","_component_product_skeleton","_component_router_link","_component_icon","_resolveComponent","_component_star_rating","_component_centered_layout","_openBlock","_createBlock","default","_withCtx","counter","_createElementBlock","_Fragment","_createVNode","to","name","params","id","$setup","tag","Avatar","src","alt","_createCommentVNode","onClick","_toDisplayString","ShopTitle","_","$event","aria-label","_renderList","cat","index","_vModelSelect","classes","_withDirectives","placeholder","type","_vModelText","product","shopId","imageUri","itemName","price","increment","max-rating","rating","sku","read-only","show-rating","star-size","active-color","inactive-color","length","totalPages","disabled","currentPage","components","CenteredLayout","ProductSkeleton","StarRating","Icon","setup","toast","inject","store","useStore","route","useRoute","router","useRouter","compositionUtils","saveNotification","formatPrice","copyToClipboard","state","reactive","shop","category","keyword","selectedShop","meta","limit","offset","ratings","isProcessing","computed","shopsList","productsFilters","altCoins","currency","PayoutCurrencyShortName","altCoin","ShortName","LongName","productCategories","categories","filter","self","findIndex","t","products","categoryID","filteredProducts","trim","toLowerCase","description","Number","stock","paginatedProducts","slice","selectedCategory","watch","newVal","oldVal","ID","toString","Math","ceil","updateProductsFilters","isAvatar","img","fetchProducts","dispatch","FETCH_SHOP_DATA","then","response","warning","push","Object","keys","query","page","catch","error","console","log","fetchRatings","FETCH_RATINGS","resetShopItems","commit","SET_SHOP_DATA","filters","SET_PRODUCTS_FILTERS","getProductRatings","map","SKU","ReviewStars","paginate","window","location","href","onBeforeMount","FETCH_SHOPS_LIST","SET_SHOP_ID","categoryId","setTimeout","toRefs","__exports__","_createStaticVNode","$props","count","props","$","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","this","arguments","undefined"],"mappings":"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","file":"assets/js/shop-detail.55b337e2.js","sourcesContent":["<template>\r\n  <centered-layout>\r\n    <template v-if=\"isProcessing\">\r\n      <product-skeleton :counter=\"8\"></product-skeleton>\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"mb-3 flex items-center justify-between flex-col lg:flex-row\">\r\n        <p class=\"flex items-center\" v-if=\"selectedShop\">\r\n          <router-link :to=\"{name: 'shop-detail', params: {id: shopId}}\" tag=\"a\" class=\"flex items-center mr-2\">\r\n            <img v-if=\"isAvatar(selectedShop.Avatar)\" :src=\"selectedShop.Avatar\"\r\n                 alt=\"\" class=\"w-8 h-8 rounded-full mr-2\"/>\r\n            <span @click=\"category = ''\">{{ selectedShop.ShopTitle }}</span>\r\n          </router-link>\r\n          <span v-if=\"selectedCategory\"> > Category > {{ selectedCategory.name }}</span>\r\n          <span v-else> > Category > all</span>\r\n        </p>\r\n        <div class=\"flex items-center justify-between flex-col lg:flex-row\">\r\n          <select v-model=\"category\" aria-label=\"Filter\" class=\"form-select w-full lg:w-auto mr-0 lg:mr-3 mb-3 lg:mb-0\">\r\n            <option value=\"\">Filter Products</option>\r\n            <option v-for=\"(cat, index) of productCategories\" :key=\"index\" :value=\"cat.id\">\r\n              {{ cat.name }}\r\n            </option>\r\n          </select>\r\n          <div class=\"relative w-full lg:w-auto\">\r\n            <icon classes=\"absolute w-5 h-5 top-3 left-3 dark:text-gray-300\" name=\"search\"></icon>\r\n            <input v-model=\"keyword\" aria-label=\"Search...\" placeholder=\"Search...\"\r\n                   class=\"form-input px-10 w-full lg:w-auto\" type=\"text\"/>\r\n            <span v-if=\"keyword !== ''\" class=\"absolute top-3 right-3 dark:text-gray-400 cursor-pointer\"\r\n                  @click=\"keyword = ''\">\r\n              <icon classes=\"w-5 h-5\" name=\"close\"></icon>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"grid grid-cols-4 gap-2 xl:gap-3\">\r\n        <div :key=\"index\"\r\n             class=\"h-72 shadow bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-900 rounded col-span-4 md:col-span-2 lg:col-span-1 p-4\"\r\n             v-for=\"(product, index) in paginatedProducts\">\r\n          <router-link :to=\"{name: 'product-detail', params: {shopId: shopId, id: product.id}}\" tag=\"a\">\r\n            <img :src=\"product.imageUri\" alt=\"\" class=\"w-32 h-32 mx-auto object-contain\"/>\r\n          </router-link>\r\n          <h5 class=\"text-center py-1 font-semibold\">{{ product.itemName }}</h5>\r\n          <p class=\"text-center font-semibold mb-3\">{{ formatPrice(product.price, currency) }}</p>\r\n          <div class=\"flex items-center justify-center mb-3\">\r\n            <star-rating :increment=\"0.1\" :max-rating=\"5\" :rating=\"getProductRatings(product.sku)\"\r\n                         :read-only=\"true\" :show-rating=\"true\" :star-size=\"20\"\r\n                         active-color=\"#ffd200\" inactive-color=\"#d0d0d0\"></star-rating>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"shopId && shop && paginatedProducts.length === 0\">\r\n        <hr class=\"border-gray-300 dark:border-gray-600\"/>\r\n        <div class=\"w-full rounded shadow px-4 py-3 bg-yellow-500 mb-4 text-yellow-900 font-semibold mt-3\">\r\n          No products found\r\n        </div>\r\n      </div>\r\n      <!-- Pagination -->\r\n      <div v-if=\"meta.totalPages > 1\" class=\"flex items-center justify-center mt-3\">\r\n        <button :disabled=\"meta.currentPage === 1\" @click=\"paginate('prev')\" class=\"btn btn-default mr-2\">\r\n          <icon name=\"chevron-left\"></icon>\r\n        </button>\r\n        <span class=\"mr-2\">{{ `${meta.currentPage} of ${meta.totalPages}` }}</span>\r\n        <button :disabled=\"meta.currentPage === meta.totalPages\" @click=\"paginate('next')\" class=\"btn btn-default\">\r\n          <icon name=\"chevron-right\"></icon>\r\n        </button>\r\n      </div>\r\n    </template>\r\n  </centered-layout>\r\n</template>\r\n\r\n<script>\r\nimport CenteredLayout from '@/components/layouts/CenteredLayout'\r\nimport ProductSkeleton from '@/components/ProductSkeleton'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport {\r\n  FETCH_RATINGS,\r\n  FETCH_SHOP_DATA,\r\n  FETCH_SHOPS_LIST,\r\n  SET_PRODUCTS_FILTERS,\r\n  SET_SHOP_DATA,\r\n  SET_SHOP_ID\r\n} from '@/store/keys'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport * as _ from 'lodash'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport StarRating from 'vue-star-rating'\r\n\r\nexport default {\r\n  name: 'Shop',\r\n  components: {\r\n    CenteredLayout,\r\n    ProductSkeleton,\r\n    StarRating,\r\n    Icon\r\n  },\r\n  setup () {\r\n    const toast = inject('toast')\r\n    // Store\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n\r\n    const {\r\n      saveNotification,\r\n      formatPrice,\r\n      copyToClipboard\r\n    } = compositionUtils()\r\n    // State\r\n    const state = reactive({\r\n      shop: null,\r\n      category: '',\r\n      keyword: '',\r\n      selectedShop: null,\r\n      meta: {\r\n        currentPage: 1,\r\n        totalPages: 0,\r\n        limit: 12,\r\n        offset: 0\r\n      },\r\n      ratings: [],\r\n      isProcessing: false\r\n    })\r\n    // Computed\r\n    const shopId = computed(() => store.state.shopId)\r\n    const shopsList = computed(() => store.state.shopsList)\r\n    const productsFilters = computed(() => store.state.productsFilters)\r\n    const altCoins = computed(() => store.state.altCoins)\r\n    const currency = computed(() => {\r\n      let currency = 'EUR'\r\n      if (state.shop) {\r\n        currency = state.shop.PayoutCurrencyShortName\r\n        const altCoin = _.find(altCoins.value, { ShortName: currency })\r\n        if (altCoin) {\r\n          currency = altCoin.LongName\r\n        }\r\n      }\r\n      return currency\r\n    })\r\n    const productCategories = computed(() => {\r\n      let categories = _.cloneDeep(state.shop.categories)\r\n      if(categories != 'nothing found' && categories.length > 0){\r\n        categories = categories.filter((value, index, self) =>\r\n          index === self.findIndex((t) => (\r\n            t.id === value.id\r\n          ))\r\n        )\r\n      }\r\n      if (state.shop.products.length > 0 && categories != 'nothing found') {\r\n        return categories.filter(category => {\r\n          return _.findIndex(state.shop.products, { categoryID: category.id }) !== -1\r\n        })\r\n      } else {\r\n        return []\r\n      }\r\n    })\r\n    const filteredProducts = computed(() => {\r\n      if (state.shop) {\r\n        return state.shop.products.filter(product => {\r\n          const keyword = state.keyword.trim().toLowerCase()\r\n          if (state.category && keyword) {\r\n            return (product.categoryID === state.category &&\r\n              (_.includes(product.itemName.toLowerCase(), keyword) ||\r\n                _.includes(product.sku.toLowerCase(), keyword) ||\r\n                _.includes(product.description.toLowerCase(), keyword)) && Number(product.stock) > 0\r\n            )\r\n          } else if (state.category) {\r\n            return product.categoryID === state.category && Number(product.stock) > 0\r\n          } else if (keyword) {\r\n            return (_.includes(product.itemName.toLowerCase(), keyword) ||\r\n                _.includes(product.sku.toLowerCase(), keyword) ||\r\n                _.includes(product.description.toLowerCase(), keyword)) &&\r\n              Number(product.stock) > 0\r\n          } else {\r\n            return Number(product.stock) > 0\r\n          }\r\n        })\r\n      }\r\n      return []\r\n    })\r\n    const paginatedProducts = computed(() => {\r\n      if (filteredProducts.value.length > 0) {\r\n        return filteredProducts.value.slice(state.meta.offset, state.meta.currentPage * state.meta.limit)\r\n      }\r\n      return filteredProducts.value\r\n    })\r\n    const selectedCategory = computed(() => {\r\n      if (state.category) {\r\n        return _.find(state.shop.categories, { id: state.category })\r\n      }\r\n      return null\r\n    })\r\n\r\n    // Watch\r\n    watch(() => shopId.value,\r\n      (newVal, oldVal) => {\r\n        if (newVal) {\r\n          state.selectedShop = _.find(shopsList.value, { ID: newVal.toString() })\r\n        }\r\n      })\r\n    watch(() => state.keyword,\r\n      (newVal, oldVal) => {\r\n        state.meta = {\r\n          ...state.meta,\r\n          currentPage: 1,\r\n          totalPages: filteredProducts.value ? Math.ceil(filteredProducts.value.length / state.meta.limit) : 0,\r\n          offset: 0\r\n        }\r\n        updateProductsFilters({\r\n          currentPage: 1,\r\n          keyword: newVal,\r\n          category: state.category\r\n        })\r\n      })\r\n    watch(() => state.category,\r\n      (newVal, oldVal) => {\r\n        state.meta = {\r\n          ...state.meta,\r\n          currentPage: 1,\r\n          totalPages: filteredProducts.value ? Math.ceil(filteredProducts.value.length / state.meta.limit) : 0,\r\n          offset: 0\r\n        }\r\n        updateProductsFilters({\r\n          currentPage: 1,\r\n          keyword: state.keyword,\r\n          category: newVal\r\n        })\r\n      })\r\n\r\n    // Methods\r\n    const isAvatar = (img) => {\r\n      return _.startsWith(img, 'https://cointopay.com/M_Images')\r\n    }\r\n    const fetchProducts = () => {\r\n      state.isProcessing = true\r\n      store.dispatch(FETCH_SHOP_DATA, {\r\n        shopId: shopId.value\r\n      }).then(response => {\r\n        state.isProcessing = false\r\n        if (response.products === 'nothing found') {\r\n          toast.warning('Store for this merchant is not enabled')\r\n          saveNotification('Store for this merchant is not enabled')\r\n          router.push({ name: 'shop' })\r\n        } else {\r\n          state.shop = response\r\n          const totalPages = state.shop.products ? Math.ceil(state.shop.products.length / state.meta.limit) : 0\r\n          // Check if page parameter is present\r\n          if (Object.keys(route.query).length > 0) {\r\n            if (typeof route.query.page !== 'undefined') {\r\n              const page = route.query.page\r\n              if (page > 0 && page <= totalPages) {\r\n                updateProductsFilters({\r\n                  currentPage: page,\r\n                  keyword: state.keyword,\r\n                  category: state.category\r\n                })\r\n              }\r\n            }\r\n          }\r\n          state.meta = {\r\n            currentPage: productsFilters.value ? productsFilters.value.currentPage : 1,\r\n            totalPages: state.shop.products ? totalPages : 0,\r\n            limit: 12,\r\n            offset: productsFilters.value ? (productsFilters.value.currentPage - 1) * state.meta.limit : 0\r\n          }\r\n        }\r\n      }).catch(error => {\r\n        state.isProcessing = false\r\n        console.log(error)\r\n      })\r\n    }\r\n    const fetchRatings = (shopId) => {\r\n      store.dispatch(FETCH_RATINGS, shopId).then(ratings => {\r\n        state.ratings = ratings\r\n      })\r\n    }\r\n    const resetShopItems = () => {\r\n      store.commit(SET_SHOP_DATA, {\r\n        categories: [],\r\n        products: []\r\n      })\r\n    }\r\n    const updateProductsFilters = (filters = null) => {\r\n      if (!filters) {\r\n        filters = {\r\n          currentPage: state.meta.currentPage,\r\n          keyword: state.keyword,\r\n          category: state.category\r\n        }\r\n      }\r\n      store.commit(SET_PRODUCTS_FILTERS, filters)\r\n    }\r\n    const getProductRatings = (sku) => {\r\n      let ratings = 0\r\n      let counter = 0\r\n      state.ratings.map(rating => {\r\n        if (rating.SKU === sku) {\r\n          counter += 1\r\n          ratings = Number(ratings) + Number(rating.ReviewStars)\r\n        }\r\n      })\r\n      return (counter > 0) ? ratings / counter : 0\r\n    }\r\n    const paginate = (type) => {\r\n      let page = state.meta.currentPage\r\n      if (type === 'next') {\r\n        page = state.meta.currentPage < state.meta.totalPages ? state.meta.currentPage + 1 : state.meta.totalPages\r\n      } else {\r\n        page = state.meta.currentPage > 0 ? state.meta.currentPage - 1 : state.meta.totalPages\r\n      }\r\n      state.meta = {\r\n        ...state.meta,\r\n        currentPage: page,\r\n        offset: (page - 1) * state.meta.limit\r\n      }\r\n      router.push({\r\n        name: 'shop-detail',\r\n        params: { id: shopId.value },\r\n        query: { page: page }\r\n      })\r\n      updateProductsFilters()\r\n      copyToClipboard(window.location.href, false)\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      state.isProcessing = true\r\n      if (shopId.value) {\r\n        state.selectedShop = _.find(shopsList.value, { ID: shopId.value })\r\n      }\r\n      store.dispatch(FETCH_SHOPS_LIST).then(() => {\r\n        if (Object.keys(route.params).length > 0) {\r\n          if (typeof route.params.id !== 'undefined') {\r\n            store.commit(SET_SHOP_ID, route.params.id)\r\n            updateProductsFilters()\r\n          } else {\r\n            store.commit(SET_SHOP_ID, null)\r\n          }\r\n          if (route.params.categoryId) {\r\n            state.category = route.params.categoryId\r\n          }\r\n\r\n          setTimeout(() => {\r\n            if (shopId.value && state.selectedShop) {\r\n              fetchProducts()\r\n              fetchRatings(shopId.value)\r\n            } else {\r\n              toast.warning('Store for this merchant is not enabled')\r\n              store.commit(SET_SHOP_ID, null)\r\n              router.push({ name: 'shop' })\r\n            }\r\n          }, 50)\r\n        } else {\r\n          updateProductsFilters({\r\n            currentPage: 1,\r\n            keyword: '',\r\n            category: ''\r\n          })\r\n          store.commit(SET_SHOP_ID, null)\r\n          resetShopItems()\r\n        }\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n\r\n    \r\n    })\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      currency,\r\n      shopId,\r\n      isAvatar,\r\n      selectedCategory,\r\n      productCategories,\r\n      paginatedProducts,\r\n      formatPrice,\r\n      getProductRatings,\r\n      paginate\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./Shop.vue?vue&type=template&id=27a611d2\"\nimport script from \"./Shop.vue?vue&type=script&lang=js\"\nexport * from \"./Shop.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"grid grid-cols-4 gap-2 xl:gap-3\">\r\n    <div v-for=\"count in counter\" :key=\"count\"\r\n      class=\"animate-pulse h-72 shadow bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-900 rounded col-span-4 md:col-span-2 lg:col-span-1 p-4\">\r\n      <div class=\"bg-gray-200 dark:bg-gray-500 rounded w-32 h-32 mx-auto\"></div>\r\n      <div class=\"mt-3 h-2 bg-gray-200 dark:bg-gray-500 rounded\"></div>\r\n      <div class=\"mt-3 h-2 bg-gray-200 dark:bg-gray-500 rounded w-2/5 mx-auto\"></div>\r\n      <div class=\"flex items-center justify-center mt-3\">\r\n        <div class=\"w-8 h-8 bg-gray-200 dark:bg-gray-500 rounded mr-3\"></div>\r\n        <div class=\"w-8 h-8 bg-gray-200 dark:bg-gray-500 rounded mr-3\"></div>\r\n        <div class=\"w-8 h-8 bg-gray-200 dark:bg-gray-500 rounded mr-3\"></div>\r\n        <div class=\"w-8 h-8 bg-gray-200 dark:bg-gray-500 rounded mr-3\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Product',\r\n  props: ['counter']\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./ProductSkeleton.vue?vue&type=template&id=42d5307c\"\nimport script from \"./ProductSkeleton.vue?vue&type=script&lang=js\"\nexport * from \"./ProductSkeleton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\TRS 37\\\\Desktop\\\\Zeeshan\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}