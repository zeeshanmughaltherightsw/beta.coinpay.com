(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["signup"],{"34c3":function(e,t,a){"use strict";a.r(t);var o=a("f2bf"),c=a("44c6"),l=a.n(c);const r=e=>(Object(o["pushScopeId"])("data-v-4406d8ba"),e=e(),Object(o["popScopeId"])(),e),s={class:"max-w-xl w-full space-y-4 rounded bg-white dark:bg-gray-800 dark:text-gray-400 shadow p-4"},n={class:"text-xl font-bold mb-4 text-center"},i={class:"mb-2"},d={class:"flex items-center justify-between mb-1"},m={class:"text-red-500 text-sm"},b={class:"grid grid-cols-2 gap-1 md:gap-4"},p={class:"col-span-1"},u={class:"mb-2"},j={class:"flex items-center justify-between mb-1"},O={class:"text-red-500 text-sm"},w={class:"flex items-center"},f={class:"ml-3 cursor-pointer"},h={class:"col-span-1"},g={class:"mb-2"},y={class:"flex items-center justify-between mb-1"},x={class:"text-red-500 text-sm"},v={class:"mb-2"},V={class:"card mb-1"},k={class:"title"},N=r(()=>Object(o["createElementVNode"])("hr",{class:"border-gray-300 dark:border-gray-600"},null,-1)),E={class:"body"},C={key:0,class:"flex flex-wrap justify-start gap-x-1 gap-y-1 md:gap-x-2 md:gap-y-2 mb-4"},S=["src"],A={class:"text-right"},P={class:"text-red-500 text-sm"},B={class:"mb-2"},D={class:"flex items-center justify-between mb-1"},I={class:"text-red-500 text-sm"},L=["value"],U={class:"text-red-500 text-sm"},M={class:"mt-4"},q={key:0,class:"mr-3"},_={class:"text-center"},z={class:"flex items-center"},R={class:"mr-3"},T=r(()=>Object(o["createElementVNode"])("div",{class:"text-center font-bold my-4"},[Object(o["createElementVNode"])("span",null,"Or...")],-1)),K=r(()=>Object(o["createElementVNode"])("img",{class:"w-5 h-5 mr-3",src:l.a,alt:"facebook"},null,-1));function F(e,t,a,c,l,r){const F=Object(o["resolveComponent"])("icon"),W=Object(o["resolveComponent"])("j-button"),$=Object(o["resolveComponent"])("vue-recaptcha"),J=Object(o["resolveComponent"])("router-link"),Z=Object(o["resolveComponent"])("auth-layout"),H=Object(o["resolveComponent"])("alt-coins-modal"),G=Object(o["resolveDirective"])("tippy");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(Z,null,{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("h1",n,Object(o["toDisplayString"])(c.translate("signup.title")),1),Object(o["createElementVNode"])("form",{onSubmit:t[5]||(t[5]=Object(o["withModifiers"])((...e)=>c.submit&&c.submit(...e),["prevent"]))},[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("label",null,Object(o["toDisplayString"])(c.translate("signup.username")),1),Object(o["createElementVNode"])("div",m,Object(o["toDisplayString"])(c.showError(e.errorBag,"ownernickname")),1)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{autofocus:"",autocomplete:"off",class:"form-input w-full",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.ownernickname=t)},null,512),[[o["vModelText"],e.form.ownernickname]])]),Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("label",null,Object(o["toDisplayString"])(c.translate("signup.password")),1),Object(o["createElementVNode"])("div",O,Object(o["toDisplayString"])(!0===e.isValidPassword?"":!1===e.isValidPassword?"Password is not Valid":""),1)]),Object(o["createElementVNode"])("div",w,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-input w-full",onKeyup:t[1]||(t[1]=(...e)=>c.validatePasswordOnKeyup&&c.validatePasswordOnKeyup(...e)),type:"password","onUpdate:modelValue":t[2]||(t[2]=t=>e.form.ownerpassword=t)},null,544),[[o["vModelText"],e.form.ownerpassword]]),Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("span",f,[Object(o["createVNode"])(F,{name:"exclamation-circle",classes:"w-5 h-5 text-yellow-500"})])),[[G,{content:c.passwordRules}]])])])]),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("label",null,Object(o["toDisplayString"])(c.translate("signup.email")),1),Object(o["createElementVNode"])("div",x,Object(o["toDisplayString"])(c.showError(e.errorBag,"email")),1)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-input w-full",type:"email","onUpdate:modelValue":t[3]||(t[3]=t=>e.form.email=t)},null,512),[[o["vModelText"],e.form.email]])])])]),Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("h5",null,Object(o["toDisplayString"])(c.translate("signup.wallets")),1)]),N,Object(o["createElementVNode"])("div",E,[e.form.selectedaltcoins.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",C,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.form.selectedaltcoins,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t,class:"flex items-center w-40"},[Object(o["createElementVNode"])("img",{src:c.generateIconUrl(e.Name),alt:"",class:"w-6 h-6 mr-3"},null,8,S),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.Name),1)]))),128))])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",A,[Object(o["createVNode"])(W,{type:"button",onClick:c.launchAtlCoinsModal},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.translate("signup.wallet_button")),1)]),_:1},8,["onClick"])])])]),Object(o["createElementVNode"])("div",P,Object(o["toDisplayString"])(c.showError(e.errorBag,"selectedaltcoins")),1)]),Object(o["createElementVNode"])("div",B,[Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("label",null,Object(o["toDisplayString"])(c.translate("signup.locale")),1),Object(o["createElementVNode"])("div",I,Object(o["toDisplayString"])(c.showError(e.errorBag,"locale")),1)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{class:"form-select w-full","onUpdate:modelValue":t[4]||(t[4]=t=>e.form.locale=t)},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.languages,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:t,value:t},Object(o["toDisplayString"])(e.naam),9,L))),128))],512),[[o["vModelSelect"],e.form.locale]])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])($,{ref:"vueRecaptcha",siteKey:e.reCaptchaAPIKey,size:"normal",onExpire:c.recaptchaExpired,theme:c.mode,onFail:c.recaptchaFailed,onVerify:c.recaptchaVerified},null,8,["siteKey","onExpire","theme","onFail","onVerify"]),Object(o["createElementVNode"])("div",U,Object(o["toDisplayString"])(c.showError(e.errorBag,"reCaptcha")),1)]),Object(o["createElementVNode"])("div",M,[Object(o["createVNode"])(W,{disabled:e.isProcessing,size:"w-full"},{default:Object(o["withCtx"])(()=>[e.isProcessing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",q,[Object(o["createVNode"])(F,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(c.translate("signup.button")),1)]),_:1},8,["disabled"])])],32),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("p",R,Object(o["toDisplayString"])(c.translate("login.forgot")),1),Object(o["createVNode"])(J,{class:"link",to:"/recover-password",tag:"a"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.translate("login.recover")),1)]),_:1})])]),T,Object(o["createVNode"])(W,{size:"w-full",buttonStyle:"outline",onClick:t[6]||(t[6]=e=>c.authenticate("facebook"))},{default:Object(o["withCtx"])(()=>[K,Object(o["createTextVNode"])(" Sign Up With Meta Facebook ")]),_:1})])]),_:1}),Object(o["createVNode"])(H)],64)}a("14d9");var W=a("227c");const $={class:"flex items-center justify-between"},J={class:"capitalize"},Z={class:"flex items-center justify-between flex-col md:flex-row"},H={class:"relative flex-1 my-4"},G={class:"flex flex-wrap justify-center gap-2"},Q=["onClick"],X=["src"],Y={class:"text-xs font-semibold"};function ee(e,t,a,c,l,r){const s=Object(o["resolveComponent"])("icon"),n=Object(o["resolveComponent"])("j-button"),i=Object(o["resolveComponent"])("modal");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{maxWidth:e.maxWidth,show:e.show,onClose:t[6]||(t[6]=e=>c.closeModal())},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("span",J,Object(o["toDisplayString"])(c.translate("account.wallet.choose")),1),Object(o["createElementVNode"])("span",{class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>c.closeModal())},[Object(o["createVNode"])(s,{name:"close"})])])]),content:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Z,[Object(o["createVNode"])(n,{size:"w-full md:w-auto",class:"mb-2 md:mb-0",type:"button",onClick:t[1]||(t[1]=e=>c.selectAll())},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("Select All")]),_:1}),Object(o["createVNode"])(n,{size:"w-full md:w-auto",class:"mb-2 md:mb-0",type:"button",onClick:t[2]||(t[2]=e=>c.selectPopularOnly())},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Select Popular Only ")]),_:1}),Object(o["createVNode"])(n,{size:"w-full md:w-auto",class:"mb-2 md:mb-0",type:"button",onClick:t[3]||(t[3]=e=>c.unSelectAll())},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Unselect All ")]),_:1})]),Object(o["createElementVNode"])("div",H,[Object(o["createVNode"])(s,{classes:"absolute w-5 h-5 top-3 left-3 dark:text-gray-300",name:"search"}),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.keyword=t),"aria-label":"Search...",class:"form-input px-10 w-full",type:"text"},null,512),[[o["vModelText"],e.keyword]]),""!==e.keyword?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"absolute top-3 right-3 dark:text-gray-400 cursor-pointer",onClick:t[5]||(t[5]=t=>e.keyword="")},[Object(o["createVNode"])(s,{classes:"w-5 h-5",name:"close"})])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",G,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.altCoinsList,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t,class:Object(o["normalizeClass"])("w-24 w-24 p-3 cursor-pointer hover:border-blue-700 dark:hover:border-blue-500 text-center border-2 inline-block rounded-md shadow flex items-center justify-center flex-col "+(c.isSelected(e)?"border-green-500":"border-gray-300 dark:border-gray-500")),onClick:t=>c.toggleAltCoinsSelection(e)},[Object(o["createElementVNode"])("img",{src:c.generateIconUrl(e.Name),alt:"",class:"w-10 h-10 mb-2 mx-auto"},null,8,X),Object(o["createElementVNode"])("p",Y,Object(o["toDisplayString"])(e.Name),1)],10,Q))),128))])]),_:1},8,["maxWidth","show"])}var te=a("714b"),ae=a("4032"),oe=a("cdae"),ce=a("5502"),le=a("2e13"),re=a("2ef0"),se={name:"AltCoinsModal",components:{Modal:te["a"],JButton:ae["a"],Icon:oe["a"]},setup(){const e=Object(o["inject"])("translate"),t=Object(o["inject"])("emitter"),a=Object(ce["b"])(),{generateIconUrl:c}=Object(le["a"])(),l=Object(o["reactive"])({show:!1,maxWidth:"2xl",closeable:!0,keyword:"",selectedAltCoinsList:[]}),r=Object(o["computed"])(()=>a.state.altCoins),s=Object(o["computed"])(()=>{const e=re["orderBy"](r.value,[e=>e.Name.toLowerCase()],"asc");return e.filter(e=>{if(l.keyword&&""!==l.keyword){const t=l.keyword.toLowerCase();return-1!==e.Name.toLowerCase().indexOf(t)||-1!==e.ShortName.toLowerCase().indexOf(t)||-1!==e.LongName.toLowerCase().indexOf(t)}return!0})}),n=()=>{l.show=!1,l.confirmHook(l.selectedAltCoinsList)},i=e=>-1!==re["findIndex"](l.selectedAltCoinsList,{ID:e.ID}),d=()=>{l.selectedAltCoinsList=r.value},m=()=>{l.selectedAltCoinsList=r.value.filter(e=>1===e.BuyEnabled&&0===e.vFiat)},b=()=>{l.selectedAltCoinsList=[],l.selectedAltCoins="1,8,9,2"},p=e=>{const t=re["findIndex"](l.selectedAltCoinsList,{ID:e.ID});-1!==t?l.selectedAltCoinsList.splice(t,1):l.selectedAltCoinsList.push(e)};return Object(o["onBeforeMount"])(()=>{t.on("altCoinsModal",e=>{l.selectedAltCoinsList=e.selectedAltCoinsList||[],l.confirmHook=e.confirm,l.show=!0})}),{translate:e,...Object(o["toRefs"])(l),closeModal:n,generateIconUrl:c,altCoinsList:s,isSelected:i,toggleAltCoinsSelection:p,selectAll:d,selectPopularOnly:m,unSelectAll:b}}},ne=a("6b0d"),ie=a.n(ne);const de=ie()(se,[["render",ee]]);var me=de,be=a("d4df"),pe=a.n(be),ue=a("ea45"),je=a("6605"),Oe=a("8923"),we=a("df85"),fe=a("3933"),he={name:"Signup",components:{AuthLayout:W["a"],vueRecaptcha:pe.a,JButton:ae["a"],Icon:oe["a"],AltCoinsModal:me},setup(){const{cookies:e}=Object(we["b"])(),t=Object(o["ref"])(null),a=Object(o["inject"])("http"),c=Object(o["inject"])("toast"),l=Object(o["inject"])("emitter"),r=Object(o["inject"])("translate"),s=Object(ce["b"])(),n=Object(je["e"])(),{validate:i,showError:d}=Object(ue["a"])(),{generateIconUrl:m,saveNotification:b}=Object(le["a"])(),p=Object(o["reactive"])({reCaptchaAPIKey:"6LdOLTEUAAAAAGDKKH5DMUQbW8PtXjimV6ZDrBKr",form:{ownernickname:"",ownerpassword:"",email:"",selectedaltcoins:[],locale:"EN",totp:"000000",reCaptcha:""},errorBag:{},rules:{ownernickname:["required","regex:/^[a-zA-Z0-9.]{1,60}$/"],email:["required","email"],selectedaltcoins:["required"],locale:["required"],totp:["required"],reCaptcha:["required"]},messages:{ownernickname:{required:"Username is required",regex:"Username should only contain alpha numeric, max 60 characters"},ownerpassword:{required:"Password is required",regex:"Password is not valid"},email:{required:"Email is required",email:"Please provide a valid email"},selectedaltcoins:{required:"Please select at least 1 coin"},locale:{required:"Please select language"},totp:{integer:"Only numeric value is allowed"},reCaptcha:{required:"Verify you are not a robot"}},facebook:null,isSocial:!1,isProcessing:!1,isValidPassword:null}),u=Object(o["computed"])(()=>s.state.mode),j=Object(o["computed"])(()=>s.state.isLoggedIn),O=Object(o["computed"])(()=>s.state.languages),w=Object(o["computed"])(()=>"\n            <p>1- Password should be minimal 6 and max 60 characters</p>\n            <p>2. At least one digit 0-9</p>\n            <p>3- At least one lowercase character a-z</p>\n            <p>4- At least one uppercase character A-Z</p>\n            <p>5- At least one allowed special character @$%#?&!*.+_|&#34;%&#39;&#60;&#62;(),/;=[]{}~</p>\n        ");Object(o["watch"])(()=>({...p.form}),(e,t)=>{Object.keys(p.errorBag).length>0&&(p.errorBag=i(p.form,p.rules,p.messages))});const f="https://app.cointopay.com",h=e=>{p.form.reCaptcha=e},g=()=>{t.value.reset(),p.form.reCaptcha=""},y=()=>{},x=()=>{l.emit("altCoinsModal",{selectedAltCoinsList:p.form.selectedaltcoins,confirm:e=>{p.form.selectedaltcoins=e}})},v=e=>{let t=0;for(let a=0;a<e.length;a++){const o=e.charCodeAt(a);t=(t<<5)-t+o,t&=t}return t},V=e=>{"facebook"===e&&p.facebook.signIn().then(e=>{e&&(p.isSocial=!0,"undefined"!==typeof e.email?k(e):c.error("Please verify your email to your Facebook account or signup with your email manually"))}).catch(e=>{console.log(e)})},k=e=>{const t=new URL(window.location.href);let o=t.searchParams.get("r");o=null===o?0:o;let l="",r={Call:"CreateAccount",MerchantID:1,APIKey:"_",selectedaltcoins:1,shoptitle:e.name.replace(/ /g,"").toLowerCase(),email:e.email,ownernickname:e.email.replace(/[^a-z0-9]/gi,""),ownerpassword:e.id,locale:"EN",Sticky:1,r:o,output:"json"};a.get(f+"/v2REAPI",{params:r}).then(t=>{if(t.data.startsWith("The Username "+r.ownernickname+" exists")){l=t.data;const o=r.ownernickname,s=v(o);r={User:o,Password:e.id,totp:"000000",api:s,output:"json"},a.get(f+"/Login",{params:r}).then(t=>{if("Session already exists"===t.data)c.error(t.data);else{const a=t.data;a.Username=o,N(a,e.id)}}).catch(e=>{console.log(e),""!==l?(b(l),c.error(l)):c.error(e.response.data)})}else{const e=t.data;e.Username=r.ownernickname,N(e,r.Password)}}).catch(e=>{p.isSocial&&p.facebook.signOut().then(()=>{}),console.log(e)})},N=(t,a)=>{delete t.Status,e.set("JSESSIONID",t.SessionID,{expires:"1Y",domain:".cointopay.com"}),s.dispatch(Oe["q"],t).then(()=>{s.dispatch(Oe["i"],{User:t.Username,Password:a}),s.dispatch(Oe["b"]).then(e=>{s.commit(Oe["P"],!0),n.push({name:"wallet"})}).catch(e=>{console.log(e.response)})})},E=()=>{if(p.errorBag=i(p.form,p.rules,p.messages),0===Object.keys(p.errorBag).length&&p.isValidPassword){p.isProcessing=!0;const t=new URL(window.location.href);let o=t.searchParams.get("r");o=null===o?0:o;const l={Call:"CreateAccount",MerchantID:1,APIKey:"_",shoptitle:p.form.ownernickname,ownernickname:p.form.ownernickname,ownerpassword:encodeURIComponent(p.form.ownerpassword),email:p.form.email,selectedaltcoins:p.form.selectedaltcoins.map(e=>e.ID).join(","),locale:p.form.locale,Sticky:1,r:o,output:"json"};a.get(f+"/v2REAPI",{params:l}).then(t=>{if(t.data===`The Username ${p.form.ownernickname} exists, Recover password with Username ${p.form.ownernickname}`)p.isProcessing=!1,c.error(t.data);else{const a=t.data;delete a.Status,a.Username=p.form.ownernickname,e.set("JSESSIONID",a.SessionID,"7d","/",".cointopay.com",!0,"None"),s.dispatch(Oe["q"],a).then(()=>{s.dispatch(Oe["i"],{User:a.Username,Password:l.ownerpassword}),s.dispatch(Oe["b"]).then(e=>{p.isProcessing=!1,n.push({name:"wallet"})}).catch(e=>{p.isProcessing=!1,console.log(e.response)})})}}).catch(e=>{p.isProcessing=!1,console.log(e),c.error(e.response.data)})}},C=()=>{const e=/^(?=.*[A-Z]+)(?=.*[a-z]+)(?=.*[0-9]+)(?=.*[#?!@$%^&*\-.+_<>|%(),\\/;=\[\]`{}~])[A-Za-z0-9#?!@$%^&*\-.+_<>|%(),\\/;=\[\]`{}~]{6,60}$/;return e.test(p.form.ownerpassword)?p.isValidPassword=!0:p.isValidPassword=!1};return Object(o["onBeforeMount"])(()=>{if(p.facebook=new fe["a"]("1018008431912064"),p.facebook&&p.facebook.initialize().then(e=>{}).catch(e=>{console.log(e)}),j.value){const e=s.state.currentRoute;n.push(e)}}),{translate:r,...Object(o["toRefs"])(p),vueRecaptcha:t,showError:d,mode:u,languages:O,passwordRules:w,generateIconUrl:m,recaptchaVerified:h,recaptchaExpired:g,recaptchaFailed:y,launchAtlCoinsModal:x,authenticate:V,submit:E,validatePasswordOnKeyup:C}}};a("74d1");const ge=ie()(he,[["render",F],["__scopeId","data-v-4406d8ba"]]);t["default"]=ge},"74d1":function(e,t,a){"use strict";a("774d")},"774d":function(e,t,a){}}]);
//# sourceMappingURL=signup.a5075512.js.map