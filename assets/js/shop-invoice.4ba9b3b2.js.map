{"version":3,"sources":["webpack:///./src/views/ShopInvoice.vue","webpack:///./src/views/ShopInvoice.vue?59ff"],"names":["class","_createElementVNode","colspan","_hoisted_50","_createBlock","_component_centered_layout","_ctx","_createElementBlock","_Fragment","key","$setup","_hoisted_55","_hoisted_56","_hoisted_57","innerHTML","TransactionID","_createVNode","_component_router_link","tag","to","_hoisted_2","_hoisted_3","ShopTitle","_hoisted_4","_hoisted_5","_component_TabSet","_component_Tab","name","_hoisted_6","_hoisted_7","href","RedirectTargetURL","_hoisted_9","_component_icon","classes","_component_QRCodeVue3","imgclass","width","height","qr-options","qrOptions","background-options","backgroundOptions","dots-options","dotsOptions","corners-dot-options","cornersDotOptions","corners-square-options","cornersSquareOptions","value","coinAddress","_hoisted_11","_hoisted_12","type","readonly","_hoisted_13","onClick","selected","_hoisted_14","_hoisted_15","_hoisted_17","_hoisted_19","Tag","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_26","TZERO","_hoisted_28","Amount","LongName","items","length","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","Object","keys","_hoisted_35","_hoisted_36","_hoisted_37","item","index","_hoisted_38","url","src","alt","sku","price","qty","shipping","_hoisted_43","method","cost","coupon","_hoisted_46","_hoisted_47","_hoisted_48","discount","_hoisted_52","_hoisted_53","_hoisted_54","params","confirmCode","Security","moment","require","components","CenteredLayout","TabSet","Tab","Icon","QRCodeVue3","setup","translate","inject","http","route","useRoute","router","useRouter","store","useStore","qrCodeOptions","copyToClipboard","formatPrice","fancyBox","compositionUtils","state","reactive","invoice","order","interval","transactionInterval","timer","loader","socket","isClosedSocket","status","isInvoiceComplete","computed","indexOf","toLowerCase","isPaid","Status","isExpired","qrLink","CoinName","currency","inputCurrency","cartTotal","total","map","Number","apiBaseUrl","process","extractOrderData","transaction","decoded","decodeURIComponent","CustomerReferenceNr","elm","document","createElement","trim","split","filter","Boolean","orderItem","push","id","code","fetchTransaction","payload","Call","MerchantID","APIKey","ConfirmCode","output","get","then","response","data","result","commit","SET_INVOICE","clearInterval","startTimer","catch","error","console","log","fetchInvoiceData","setInterval","date","tz","CreatedOn","add","ExpiryTime","now","valueOf","diff","days","Math","floor","hours","minutes","seconds","initSocket","WebSocket","onmessage","event","parts","invoiceData","_","onclose","onBeforeMount","onBeforeUnmount","close","toRefs","__exports__","render"],"mappings":"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","file":"assets/js/shop-invoice.4ba9b3b2.js","sourcesContent":["<template>\r\n  <centered-layout>\r\n    <template v-if=\"invoice\">\r\n      <div v-if=\"!isInvoiceComplete\">\r\n        <div class=\"text-center mb-3\">\r\n          <p>{{ translate('pos.invoice.message') }}</p>\r\n          <p><span class=\"font-bold\">{{ translate('pos.invoice.merchant') }}</span>&nbsp;{{ invoice.ShopTitle }}</p>\r\n          <p>\r\n            <span class=\"font-bold\">{{ translate('pos.invoice.invoice_number') }}</span>&nbsp;\r\n            {{ invoice.TransactionID }}\r\n          </p>\r\n        </div>\r\n        <div class=\"w-full lg:w-3/5 mx-auto\">\r\n          <TabSet>\r\n            <!-- Address Only -->\r\n            <Tab :name=\"translate('invoice.address_only')\">\r\n              <div class=\"mb-4\">\r\n                <p class=\"text-3xl font-bold text-blue-500 text-center\">{{ timer }}</p>\r\n                <a :href=\"invoice.RedirectTargetURL\" v-if=\"isPaid\"\r\n                  class=\"mt-3 text-blue-500 hover:underline inline-flex items-center\">\r\n                  <span class=\"mr-2\">Click to Redirect</span>\r\n                  <icon name=\"arrow-right\" classes=\"w-5 h-5\"></icon>\r\n                </a>\r\n              </div>\r\n              <div v-if=\"!isPaid && !isExpired\">\r\n                <QRCodeVue3 imgclass=\"mx-auto\"\r\n                            :width=\"qrOptions.width\"\r\n                            :height=\"qrOptions.height\"\r\n                            :qr-options=\"qrOptions.qrOptions\"\r\n                            :background-options=\"qrOptions.backgroundOptions\"\r\n                            :dots-options=\"qrOptions.dotsOptions\"\r\n                            :corners-dot-options=\"qrOptions.cornersDotOptions\"\r\n                            :corners-square-options=\"qrOptions.cornersSquareOptions\"\r\n                            :value=\"invoice.coinAddress\"></QRCodeVue3>\r\n                <div class=\"mt-4\">\r\n                  <div class=\"flex justify-center flex-wrap items-stretch w-full mb-4 relative\">\r\n                    <input type=\"text\" v-model=\"invoice.coinAddress\" readonly\r\n                          class=\"form-input w-2/3 rounded-r-none\"/>\r\n                    <div class=\"flex -mr-px\">\r\n                      <span @click=\"copyToClipboard(invoice.coinAddress)\"\r\n                            class=\"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm\">\r\n                        <icon name=\"clipboard\" classes=\"w-5 h-5\"></icon>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Tab>\r\n            <!-- Full Crypto Link -->\r\n            <Tab :name=\"translate('invoice.full_crypto_link')\" :selected=\"true\">\r\n              <div class=\"mb-4\">\r\n                <p class=\"text-3xl font-bold text-blue-500 text-center\">{{ timer }}</p>\r\n                <a :href=\"invoice.RedirectTargetURL\" v-if=\"isPaid\"\r\n                  class=\"mt-3 text-blue-500 hover:underline inline-flex items-center\">\r\n                  <span class=\"mr-2\">Click to Redirect</span>\r\n                  <icon name=\"arrow-right\" classes=\"w-5 h-5\"></icon>\r\n                </a>\r\n              </div>\r\n              <div v-if=\"!isPaid && !isExpired\">\r\n                <QRCodeVue3 imgclass=\"mx-auto\"\r\n                            :width=\"qrOptions.width\"\r\n                            :height=\"qrOptions.height\"\r\n                            :qr-options=\"qrOptions.qrOptions\"\r\n                            :background-options=\"qrOptions.backgroundOptions\"\r\n                            :dots-options=\"qrOptions.dotsOptions\"\r\n                            :corners-dot-options=\"qrOptions.cornersDotOptions\"\r\n                            :corners-square-options=\"qrOptions.cornersSquareOptions\"\r\n                            :value=\"qrLink\"></QRCodeVue3>\r\n                <div class=\"mt-4\">\r\n                  <div v-if=\"invoice.Tag\" class=\"text-center mb-3\">Memo/Tag: {{ invoice.Tag }}</div>\r\n                  <div class=\"flex justify-center flex-wrap items-stretch w-full mb-4 relative\">\r\n                    <input type=\"text\" v-model=\"invoice.coinAddress\" readonly\r\n                          class=\"form-input w-2/3 rounded-r-none\"/>\r\n                    <div class=\"flex -mr-px\">\r\n                      <span @click=\"copyToClipboard(invoice.coinAddress)\"\r\n                            class=\"hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer flex items-center leading-normal rounded rounded-l-none border border-l-0 border-gray-300 dark:border-gray-600 px-3 whitespace-no-wrap text-sm\">\r\n                        <icon name=\"clipboard\" classes=\"w-5 h-5\"></icon>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Tab>\r\n            <!-- TZERO -->\r\n            <Tab :name=\"translate('invoice.tzero')\">\r\n              <div class=\"mb-4\">\r\n                <p class=\"text-3xl font-bold text-blue-500 text-center\">{{ timer }}</p>\r\n                <a :href=\"invoice.RedirectTargetURL\" v-if=\"isPaid\"\r\n                  class=\"mt-3 text-blue-500 hover:underline inline-flex items-center\">\r\n                  <span class=\"mr-2\">Click to Redirect</span>\r\n                  <icon name=\"arrow-right\" classes=\"w-5 h-5\"></icon>\r\n                </a>\r\n              </div>\r\n              <div v-if=\"!isPaid && !isExpired\">\r\n                <QRCodeVue3 imgclass=\"mx-auto\"\r\n                            :width=\"qrOptions.width\"\r\n                            :height=\"qrOptions.height\"\r\n                            :qr-options=\"qrOptions.qrOptions\"\r\n                            :background-options=\"qrOptions.backgroundOptions\"\r\n                            :dots-options=\"qrOptions.dotsOptions\"\r\n                            :corners-dot-options=\"qrOptions.cornersDotOptions\"\r\n                            :corners-square-options=\"qrOptions.cornersSquareOptions\"\r\n                            :value=\"invoice.TZERO\"></QRCodeVue3>\r\n              </div>\r\n            </Tab>\r\n          </TabSet>\r\n          <p class=\"text-center\">{{ `${translate('pos.invoice.amount')}: ${invoice.Amount} ${invoice.LongName}` }}</p>\r\n          <div class=\"card mt-4\" v-if=\"order.items.length > 0\">\r\n            <div class=\"body\">\r\n              <div\r\n                class=\"scrollbar scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-track-gray-900 dark:scrollbar-thumb-gray-600\">\r\n                <table class=\"table-sm mb-2\">\r\n                  <thead>\r\n                  <tr>\r\n                    <th>Item</th>\r\n                    <th v-if=\"Object.keys(order.items[0]).length === 6\">SKU</th>\r\n                    <th>Price</th>\r\n                    <th>Quantity</th>\r\n                    <th>Subtotal</th>\r\n                  </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                  <tr :key=\"index\" v-for=\"(item, index) of order.items\">\r\n                    <td>\r\n                      <div class=\"flex items-center\">\r\n                        <img v-if=\"item.url\" :src=\"item.url\" alt=\"\"\r\n                            class=\"w-12 h-12 rounded-full overflow-hidden mr-2 cursor-pointer\"\r\n                            @click=\"fancyBox(item.url)\"/>\r\n                        <p>{{ item.name }}</p>\r\n                      </div>\r\n                    </td>\r\n                    <td v-if=\"Object.keys(order.items[0]).length === 6\">{{ item.sku }}</td>\r\n                    <td>{{ formatPrice(item.price, currency) }}</td>\r\n                    <td>{{ 'x ' + item.qty }}</td>\r\n                    <td>{{ formatPrice(item.price * item.qty, currency) }}</td>\r\n                  </tr>\r\n                  <tr v-if=\"order.shipping\">\r\n                    <td :colspan=\"Object.keys(order.items[0]).length === 6 ? 4 : 3\" class=\"text-right\">\r\n                      {{ translate('invoice.shipping_cost') }}:\r\n                    </td>\r\n                    <td colspan=\"1\">{{ order.shipping.method + ' ' + formatPrice(order.shipping.cost, currency) }}</td>\r\n                  </tr>\r\n                  <tr v-if=\"order.coupon\">\r\n                    <td :colspan=\"Object.keys(order.items[0]).length === 6 ? 4 : 3\" class=\"text-right\">\r\n                      <span class=\"text-red-500\">{{ translate('invoice.discount') }}:</span>\r\n                    </td>\r\n                    <td colspan=\"1\">\r\n                      <span class=\"text-red-500\">-{{ formatPrice(order.coupon.discount, currency) }}</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td :colspan=\"Object.keys(order.items[0]).length === 6 ? 4 : 3\" class=\"text-right\">\r\n                      <span class=\"font-bold\">Total:</span></td>\r\n                    <td colspan=\"1\"><span class=\"font-bold\">{{ cartTotal }}</span></td>\r\n                  </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <router-link :to=\"{name: 'invoice', params: {confirmCode: invoice.Security}}\" tag=\"a\"\r\n                        class=\"btn btn-primary\">Invoice Page\r\n            </router-link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row\" v-else>\r\n        <div class=\"offset-md-3 col-md-6 text-center\">\r\n          <div class=\"alert alert-success\">\r\n            <span v-html=\"translate('pos.invoice.success')\"></span>{{ invoice.TransactionID }}\r\n          </div>\r\n          <router-link class=\"btn btn-success b200\" tag=\"a\" to=\"/shop\">\r\n            {{ translate(\"pos.cart.continue_shopping\")  }}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </centered-layout>\r\n</template>\r\n\r\n<script>\r\nimport CenteredLayout from '@/components/layouts/CenteredLayout'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, onBeforeMount, onBeforeUnmount, reactive, toRefs } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { SET_INVOICE } from '@/store/keys'\r\nimport TabSet from '@/components/common/TabSet'\r\nimport Tab from '@/components/common/Tab'\r\nimport QRCodeVue3 from 'qrcode-vue3'\r\nimport qrCodeOptions from '@/qrOptions'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport * as _ from 'lodash'\r\n\r\nconst moment = require('moment-timezone/builds/moment-timezone-with-data-2012-2022.min')\r\n\r\nexport default {\r\n  name: 'ShopInvoice',\r\n  components: {\r\n    CenteredLayout,\r\n    TabSet,\r\n    Tab,\r\n    Icon,\r\n    QRCodeVue3\r\n  },\r\n  setup () {\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    const store = useStore()\r\n\r\n    const { qrOptions } = qrCodeOptions()\r\n    const {\r\n      copyToClipboard,\r\n      formatPrice,\r\n      fancyBox\r\n    } = compositionUtils()\r\n\r\n    const state = reactive({\r\n      confirmCode: null,\r\n      invoice: null,\r\n      order: {\r\n        items: [],\r\n        shipping: null,\r\n        coupon: null\r\n      },\r\n      interval: null,\r\n      transactionInterval: null,\r\n      timer: null,\r\n      loader: '',\r\n      socket: null,\r\n      isClosedSocket: false,\r\n      status: 'null'\r\n    })\r\n\r\n    // Computed\r\n    const isInvoiceComplete = computed(() => {\r\n      if (state.status) {\r\n        return ['paid', 'underpaid', 'complete'].indexOf(state.status.toLowerCase()) !== -1\r\n      }\r\n      return false;\r\n    })\r\n    const isPaid = computed(() => {\r\n      return (\r\n        state.invoice &&\r\n        (state.invoice.Status.toLowerCase() === 'paid' ||\r\n          state.invoice.Status.toLowerCase() === 'underpaid')\r\n      )\r\n    })\r\n    const isExpired = computed(() => {\r\n      return (\r\n        state.invoice && state.invoice.Status.toLowerCase() === 'expired'\r\n      )\r\n    })\r\n    const qrLink = computed(() => {\r\n      return (\r\n        state.invoice.CoinName.toLowerCase() +\r\n        ':' + state.invoice.coinAddress + '?amount=' + state.invoice.Amount\r\n      )\r\n    })\r\n    const currency = computed(() => {\r\n      return state.invoice ? state.invoice.inputCurrency : 'EUR'\r\n    })\r\n    const cartTotal = computed(() => {\r\n      let total = 0\r\n      if (state.order.items.length > 0) {\r\n        state.order.items.map(item => {\r\n          total += Number(item.qty) * Number(item.price)\r\n        })\r\n      }\r\n      if (state.order.shipping) {\r\n        total += Number(state.order.shipping.cost)\r\n      }\r\n      if (state.order.coupon) {\r\n        total -= Number(state.order.coupon.discount)\r\n      }\r\n      return formatPrice(total, currency.value)\r\n    })\r\n\r\n    // Methods\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const extractOrderData = (transaction) => {\r\n      const decoded = decodeURIComponent(transaction.CustomerReferenceNr)\r\n      const elm = document.createElement('div')\r\n      elm.innerHTML = decoded\r\n      let items = elm.innerHTML.trim()\r\n      state.order = {\r\n        items: [],\r\n        shipping: null,\r\n        coupon: null\r\n      }\r\n      if (items) {\r\n        items = items.split(':::').filter(Boolean)\r\n        items.map(orderItem => {\r\n          orderItem = orderItem.split('|').filter(Boolean)\r\n          if (orderItem.length === 6) {\r\n            state.order.items.push({\r\n              id: orderItem[0],\r\n              sku: orderItem[1],\r\n              name: orderItem[2],\r\n              url: orderItem[3],\r\n              price: Number(orderItem[4]),\r\n              qty: Number(orderItem[5])\r\n            })\r\n          } else if (orderItem.length === 5) {\r\n            state.order.items.push({\r\n              id: orderItem[0],\r\n              name: orderItem[1],\r\n              url: orderItem[2],\r\n              price: Number(orderItem[3]),\r\n              qty: Number(orderItem[4])\r\n            })\r\n          } else if (orderItem.length === 2) {\r\n            state.order.shipping = {\r\n              method: orderItem[0],\r\n              cost: orderItem[1]\r\n            }\r\n          } else if (orderItem.length === 3) {\r\n            state.order.coupon = {\r\n              code: orderItem[0],\r\n              value: orderItem[1],\r\n              discount: orderItem[2]\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }\r\n    const fetchTransaction = (confirmCode, loader = 'main') => {\r\n      state.loader = loader\r\n      const payload = {\r\n        Call: 'Transactiondetail',\r\n        MerchantID: 0,\r\n        APIKey: '_',\r\n        ConfirmCode: confirmCode,\r\n        output: 'json'\r\n      }\r\n      http.get(`${apiBaseUrl}/v2REAPI`, {\r\n        params: payload\r\n      }).then(response => {\r\n        state.loader = ''\r\n        if (response.status === 200) {\r\n          if (response.data.result !== 'failed') {\r\n            state.invoice = response.data.data\r\n            extractOrderData(state.invoice)\r\n            store.commit(SET_INVOICE, state.invoice)\r\n            const status = state.invoice.Status.toLowerCase()\r\n            if (['paid', 'underpaid', 'expired'].indexOf(status) !== -1) {\r\n              state.timer = state.invoice.Status\r\n              if (state.transactionInterval) {\r\n                clearInterval(state.transactionInterval)\r\n              }\r\n              if (state.interval) {\r\n                clearInterval(state.interval)\r\n                state.timer = status\r\n              }\r\n            }\r\n            if (['waiting', 'awaiting-fiat'].indexOf(status) !== -1) {\r\n              startTimer()\r\n            }\r\n          }\r\n        }\r\n      }).catch(error => {\r\n        state.loader = ''\r\n        console.log(error)\r\n      })\r\n    }\r\n    const fetchInvoiceData = () => {\r\n      if (Object.keys(route.params).length > 0) {\r\n        const confirmCode = route.params.confirmCode\r\n        fetchTransaction(confirmCode)\r\n        if (state.transactionInterval) {\r\n          clearInterval(state.transactionInterval)\r\n        }\r\n        state.transactionInterval = setInterval(() => {\r\n          fetchTransaction(confirmCode, false)\r\n        }, 60000)\r\n      } else {\r\n        router.push({ name: 'shop' })\r\n      }\r\n    }\r\n    // Start timer\r\n    const startTimer = () => {\r\n      if (!state.timer) {\r\n        const date = moment.tz(state.invoice.CreatedOn, 'Europe/Amsterdam')\r\n          .add(Number(state.invoice.ExpiryTime), 'minutes')\r\n        state.interval = setInterval(() => {\r\n          const now = moment().tz('Europe/Amsterdam').valueOf()\r\n          const diff = date.valueOf() - now\r\n          // Time calculations for days, hours, minutes and seconds\r\n          const days = Math.floor(diff / (1000 * 60 * 60 * 24))\r\n          const hours = Math.floor(\r\n            (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\r\n          )\r\n          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))\r\n          const seconds = Math.floor((diff % (1000 * 60)) / 1000)\r\n          state.timer = `${days}d ${hours}h ${minutes}m ${seconds}s`\r\n          if (diff < 0) {\r\n            clearInterval(state.interval)\r\n            state.timer = 'Expired'\r\n            fetchTransaction(state.invoice.ConfirmCode, '')\r\n          }\r\n        }, 1000)\r\n      }\r\n    }\r\n\r\n    const initSocket = () => {\r\n      state.socket = new WebSocket('wss://wss.cointopay.com/transactions')\r\n      state.socket.onmessage = event => {\r\n        if (event) {\r\n          if (event.data) {\r\n            const parts = event.data.split(':')\r\n            if (state.invoice) {\r\n              const invoiceData = _.cloneDeep(state.invoice)\r\n              if (parts[0] === 'TZERO') {\r\n                if (invoiceData && Number(invoiceData.TransactionID) === Number(parts[1])) {\r\n                  if (state.interval) {\r\n                    clearInterval(state.interval)\r\n                  }\r\n                  invoiceData.Status = parts[2].toLowerCase()\r\n                  state.status = parts[2].toLowerCase()\r\n                  store.commit(SET_INVOICE, invoiceData)\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      state.socket.onclose = event => {\r\n        if (!state.isClosedSocket) {\r\n          initSocket()\r\n        }\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      fetchInvoiceData()\r\n      initSocket()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      if (state.transactionInterval) {\r\n        clearInterval(state.transactionInterval)\r\n      }\r\n      if (state.interval) {\r\n        clearInterval(state.interval)\r\n      }\r\n      if (state.socket !== null) {\r\n        state.isClosedSocket = true\r\n        state.socket.close()\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      currency,\r\n      isInvoiceComplete,\r\n      copyToClipboard,\r\n      qrOptions,\r\n      isPaid,\r\n      isExpired,\r\n      qrLink,\r\n      formatPrice,\r\n      cartTotal,\r\n      fancyBox,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./ShopInvoice.vue?vue&type=template&id=03cdfd48\"\nimport script from \"./ShopInvoice.vue?vue&type=script&lang=js\"\nexport * from \"./ShopInvoice.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}