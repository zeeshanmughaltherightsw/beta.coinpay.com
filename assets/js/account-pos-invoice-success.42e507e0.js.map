{"version":3,"sources":["webpack:///./src/views/pos/Success.vue","webpack:///./src/views/pos/Success.vue?c38a","webpack:///./src/views/pos/Expired.vue","webpack:///./src/views/pos/Expired.vue?31b1"],"names":["class","style","_createBlock","_component_pos_layout","content","_ctx","paymentRequest","_createElementBlock","_hoisted_1","_createVNode","_component_icon","name","classes","_createElementVNode","_hoisted_2","TransactionID","_hoisted_3","onSubmit","$setup","_hoisted_4","_hoisted_5","placeholder","aria-label","type","email","disabled","_hoisted_8","_hoisted_9","_component_routerLink","tag","to","components","POSLayout","Icon","setup","translate","inject","http","toast","store","useStore","route","useRoute","router","useRouter","showError","validate","validator","state","reactive","ticket","form","errorBag","rules","messages","required","isProcessing","user","computed","pos","receipt","_","value","receipts","TICKETNUMBER","ticketId","toString","items","receiptItems","filter","item","RECIEPT_ID","ID","watch","newVal","oldVal","Object","keys","length","apiBaseUrl","process","submit","ticketReceipt","Time","moment","Date","Number","DATE","format","TOTAL","CURRENCY","Cashier","CASHIER","Items","payload","Call","MerchantID","APIKey","ticketData","JSON","stringify","output","encodeForm","data","map","key","encodeURIComponent","join","post","headers","then","response","success","push","catch","error","console","log","onBeforeMount","params","tickets","toRefs","__exports__","render"],"mappings":"qKAGWA,MAAM,e,GAENA,MAAM,iC,GAGJA,MAAM,gC,GAEFA,MAAM,0B,GACJC,MAAA,mB,0CAKuBD,MAAM,Q,GAOjCA,MAAM,mC,kMAtBnBE,yBA6BaC,QA5BMC,QAAO,qBACtB,IAyBM,CAzByBC,UAAUA,SAAOC,gBAAc,yBAA9DC,gCAyBM,MAzBNC,EAyBM,CAxBJC,yBAA4EC,GAAtEC,KAAK,eAAeC,QAAQ,qCAClCC,gCAEI,IAFJC,EAAyC,aAC9B,6BAAGT,SAAOC,eAAeS,eAAgB,gCACpD,GACAF,gCAgBM,MAhBNG,EAgBM,CAfJH,gCAaO,QAbAI,SAAM,0CAAUC,WAAM,e,CAC3BL,gCAWM,MAXNM,EAWM,CAVJN,gCAGM,MAHNO,EAGM,6BAFJP,gCACuF,SAD/EQ,YAAaH,YAAU,sBACxBI,aAAW,QAAQtB,MAAM,oBAAoBuB,KAAK,Q,qCAAiBlB,OAAKmB,MAAK,I,4BAAVnB,OAAKmB,WAEjFX,gCAKS,UALAY,SAAUpB,eAAcL,MAAM,wB,CACzBK,gBAAY,yBAAxBE,gCAEO,OAFPmB,EAEO,CADLjB,yBAA4DC,GAArDC,KAAM,UAAWC,QAAQ,0B,uCAElCC,gCAA6D,yCAApDK,YAAU,kCAAD,gBAIxBL,gCAAqF,MAArFc,EAAqF,6BAArCT,YAAUb,WAAU,UAAF,KAEpEI,yBAEamB,GAFD5B,MAAM,kBAAkB6B,IAAI,IAAKC,GAAI,CAAAnB,8B,8BAAgC,IAEjF,8BAFiF,wB,mKAkB1E,GACbA,KAAM,UACNoB,WAAY,CACV,aAAcC,OACdC,aAEFC,QAEE,MAAMC,EAAYC,oBAAO,aACnBC,EAAOD,oBAAO,QACdE,EAAQF,oBAAO,SAEfG,EAAQC,iBACRC,EAAQC,iBACRC,EAASC,kBAET,UACJC,EAAS,SACTC,GACEC,iBAGEC,EAAQC,sBAAS,CACrBC,OAAQ,KACRC,KAAM,CACJ3B,MAAO,IAET4B,SAAU,GACVC,MAAO,CACL7B,MAAO,CAAC,WAAY,UAEtB8B,SAAU,CACR9B,MAAO,CACL+B,SAAU,4BACV/B,MAAO,yCAGXgC,cAAc,IAIVC,EAAOC,sBAAS,IAAMnB,EAAMS,MAAMS,MAClCE,EAAMD,sBAAS,IAAMnB,EAAMS,MAAMW,KACjCC,EAAUF,sBAAS,KACvB,MAAME,EAAUC,UACdF,EAAIG,MAAMC,SAAUH,GAAWA,EAAQI,eAAiBhB,EAAME,OAAOe,SAASC,YAKhF,OAHIN,IACFA,EAAQO,MAAQR,EAAIG,MAAMM,aAAaC,OAAOC,GAAQA,EAAKC,aAAeX,EAAQY,KAE7EZ,IAITa,mBAAM,KAAM,IAAMzB,EAAMG,OACtB,CAACuB,EAAQC,KACHC,OAAOC,KAAK7B,EAAMI,UAAU0B,OAAS,IACvC9B,EAAMI,SAAWN,EAAS4B,EAAQ1B,EAAMK,MAAOL,EAAMM,aAM3D,MAAMyB,EAAaC,4BACbC,EAAS,KAEb,GADAjC,EAAMI,SAAWN,EAASE,EAAMG,KAAMH,EAAMK,MAAOL,EAAMM,UACd,IAAvCsB,OAAOC,KAAK7B,EAAMI,UAAU0B,QAAgBlB,EAAQE,MAAO,CAC7Dd,EAAMQ,cAAe,EACrB,MAAM0B,EAAgB,CACpB,aAActB,EAAQE,MAAMU,GAC5BW,KAAMC,IAAO,IAAIC,KAAKC,OAAO1B,EAAQE,MAAMyB,QAAQC,OAAO,qBAC1D,eAAgB5B,EAAQE,MAAM2B,MAAQ,IAAM7B,EAAQE,MAAM4B,SAC1DC,QAAS/B,EAAQE,MAAM8B,QACvBC,MAAOjC,EAAQE,MAAMK,OAEjB2B,EAAU,CACdC,KAAM,aACNC,WAAYV,OAAO7B,EAAKK,MAAMU,IAC9ByB,OAAQxC,EAAKK,MAAMmC,OACnBzE,MAAOwB,EAAMG,KAAK3B,MAClB0E,WAAYC,KAAKC,UAAUlB,GAC3BmB,OAAQ,QAEJC,EAAaC,GACV3B,OAAOC,KAAK0B,GAAMC,IAAIC,GAAOC,mBAAmBD,GAAO,IAAMC,mBAAmBH,EAAKE,KAAOE,KAAK,KAE1GtE,EAAKuE,KAAQ7B,EAAF,WAAwBuB,EAAWR,GAAU,CACtDe,QAAS,CACP,eAAgB,uCAEjBC,KAAKC,IACN/D,EAAMQ,cAAe,EACjBuD,EAASR,OACXvD,EAAMG,KAAK3B,MAAQ,GACnBc,EAAM0E,QAAQ,8BAEhBrE,EAAOsE,KAAK,CAAEtG,KAAM,2BACnBuG,MAAMC,IACPnE,EAAMQ,cAAe,EACrB4D,QAAQC,IAAIF,OAWlB,OANAG,2BAAc,KACR1C,OAAOC,KAAKpC,EAAM8E,QAAQzC,OAAS,GAAKrC,EAAM8E,OAAOtD,WACvDjB,EAAME,OAASW,UAAOF,EAAIG,MAAM0D,QAAS,CAAEvD,SAAUxB,EAAM8E,OAAOtD,cAI/D,CACL9B,eACGsF,oBAAOzE,GACVH,YACAoC,Y,qBCxJN,MAAMyC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,wECJJ3H,MAAM,e,GAENA,MAAM,iC,GAGJA,MAAM,gC,GAEFA,MAAM,0B,GACJC,MAAA,mB,0CAKuBD,MAAM,Q,GAOjCA,MAAM,mC,kMAtBnBE,yBA6BaC,QA5BMC,QAAO,qBACtB,IAyBM,CAzByBC,UAAUA,SAAOC,gBAAc,yBAA9DC,gCAyBM,MAzBNC,EAyBM,CAxBJC,yBAA4EC,GAAtEC,KAAK,eAAeC,QAAQ,qCAClCC,gCAEI,IAFJC,EAAyC,aAC9B,6BAAGT,SAAOC,eAAeS,eAAgB,gCACpD,GACAF,gCAgBM,MAhBNG,EAgBM,CAfJH,gCAaO,QAbAI,SAAM,0CAAUC,WAAM,e,CAC3BL,gCAWM,MAXNM,EAWM,CAVJN,gCAGM,MAHNO,EAGM,6BAFJP,gCACuF,SAD/EQ,YAAaH,YAAU,sBACxBI,aAAW,QAAQtB,MAAM,oBAAoBuB,KAAK,Q,qCAAiBlB,OAAKmB,MAAK,I,4BAAVnB,OAAKmB,WAEjFX,gCAKS,UALAY,SAAUpB,eAAcL,MAAM,wB,CACzBK,gBAAY,yBAAxBE,gCAEO,OAFPmB,EAEO,CADLjB,yBAA4DC,GAArDC,KAAM,UAAWC,QAAQ,0B,uCAElCC,gCAA6D,yCAApDK,YAAU,kCAAD,gBAIxBL,gCAAqF,MAArFc,EAAqF,6BAArCT,YAAUb,WAAU,UAAF,KAEpEI,yBAEamB,GAFD5B,MAAM,kBAAkB6B,IAAI,IAAKC,GAAI,CAAAnB,8B,8BAAgC,IAEjF,8BAFiF,wB,mKAkB1E,GACbA,KAAM,UACNoB,WAAY,CACV,aAAcC,OACdC,aAEFC,QAEE,MAAMC,EAAYC,oBAAO,aACnBC,EAAOD,oBAAO,QACdE,EAAQF,oBAAO,SAEfG,EAAQC,iBACRC,EAAQC,iBACRC,EAASC,kBAET,UACJC,EAAS,SACTC,GACEC,iBAGEC,EAAQC,sBAAS,CACrBC,OAAQ,KACRC,KAAM,CACJ3B,MAAO,IAET4B,SAAU,GACVC,MAAO,CACL7B,MAAO,CAAC,WAAY,UAEtB8B,SAAU,CACR9B,MAAO,CACL+B,SAAU,4BACV/B,MAAO,yCAGXgC,cAAc,IAIVC,EAAOC,sBAAS,IAAMnB,EAAMS,MAAMS,MAClCE,EAAMD,sBAAS,IAAMnB,EAAMS,MAAMW,KACjCC,EAAUF,sBAAS,KACvB,MAAME,EAAUC,UACdF,EAAIG,MAAMC,SAAUH,GAAWA,EAAQI,eAAiBhB,EAAME,OAAOe,SAASC,YAKhF,OAHIN,IACFA,EAAQO,MAAQR,EAAIG,MAAMM,aAAaC,OAAOC,GAAQA,EAAKC,aAAeX,EAAQY,KAE7EZ,IAITa,mBAAM,KAAM,IAAMzB,EAAMG,OACtB,CAACuB,EAAQC,KACHC,OAAOC,KAAK7B,EAAMI,UAAU0B,OAAS,IACvC9B,EAAMI,SAAWN,EAAS4B,EAAQ1B,EAAMK,MAAOL,EAAMM,aAM3D,MAAMyB,EAAaC,4BACbC,EAAS,KAEb,GADAjC,EAAMI,SAAWN,EAASE,EAAMG,KAAMH,EAAMK,MAAOL,EAAMM,UACd,IAAvCsB,OAAOC,KAAK7B,EAAMI,UAAU0B,QAAgBlB,EAAQE,MAAO,CAC7Dd,EAAMQ,cAAe,EACrB,MAAM0B,EAAgB,CACpB,aAActB,EAAQE,MAAMU,GAC5BW,KAAMC,IAAO,IAAIC,KAAKC,OAAO1B,EAAQE,MAAMyB,QAAQC,OAAO,qBAC1D,eAAgB5B,EAAQE,MAAM2B,MAAQ,IAAM7B,EAAQE,MAAM4B,SAC1DC,QAAS/B,EAAQE,MAAM8B,QACvBC,MAAOjC,EAAQE,MAAMK,OAEjB2B,EAAU,CACdC,KAAM,aACNC,WAAYV,OAAO7B,EAAKK,MAAMU,IAC9ByB,OAAQxC,EAAKK,MAAMmC,OACnBzE,MAAOwB,EAAMG,KAAK3B,MAClB0E,WAAYC,KAAKC,UAAUlB,GAC3BmB,OAAQ,QAEJC,EAAaC,GACV3B,OAAOC,KAAK0B,GAAMC,IAAIC,GAAOC,mBAAmBD,GAAO,IAAMC,mBAAmBH,EAAKE,KAAOE,KAAK,KAE1GtE,EAAKuE,KAAQ7B,EAAF,WAAwBuB,EAAWR,GAAU,CACtDe,QAAS,CACP,eAAgB,uCAEjBC,KAAKC,IACN/D,EAAMQ,cAAe,EACjBuD,EAASR,OACXvD,EAAMG,KAAK3B,MAAQ,GACnBc,EAAM0E,QAAQ,8BAEhBrE,EAAOsE,KAAK,CAAEtG,KAAM,2BACnBuG,MAAMC,IACPnE,EAAMQ,cAAe,EACrB4D,QAAQC,IAAIF,OAWlB,OANAG,2BAAc,KACR1C,OAAOC,KAAKpC,EAAM8E,QAAQzC,OAAS,GAAKrC,EAAM8E,OAAOtD,WACvDjB,EAAME,OAASW,UAAOF,EAAIG,MAAM0D,QAAS,CAAEvD,SAAUxB,EAAM8E,OAAOtD,cAI/D,CACL9B,eACGsF,oBAAOzE,GACVH,YACAoC,Y,qBCxJN,MAAMyC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"assets/js/account-pos-invoice-success.42e507e0.js","sourcesContent":["<template>\r\n  <pos-layout>\r\n    <template v-slot:content>\r\n      <div class=\"text-center\" v-if=\"ticket && ticket.paymentRequest\">\r\n        <icon name=\"check-circle\" classes=\"w-24 h-24 text-green-500 mx-auto\"></icon>\r\n        <p class=\"font-bold text-green-500 mb-4\">\r\n          Invoice #{{ ticket.paymentRequest.TransactionID }} has been paid successfully!\r\n        </p>\r\n        <div class=\"w-full md:w-3/5 mx-auto mb-3\">\r\n          <form @submit.prevent=\"submit()\">\r\n            <div class=\"flex items-center mb-1\">\r\n              <div style=\"flex-grow: 1\">\r\n                <input :placeholder=\"translate('pos.receipts.email')\"\r\n                       aria-label=\"Email\" class=\"form-input w-full\" type=\"email\" v-model=\"form.email\"/>\r\n              </div>\r\n              <button :disabled=\"isProcessing\" class=\"btn btn-success ml-3\">\r\n                <span v-if=\"isProcessing\" class=\"mr-3\">\r\n                  <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n                </span>\r\n                <span>{{ translate('pos.receipts.btn_send_receipt') }}</span>\r\n              </button>\r\n            </div>\r\n          </form>\r\n          <div class=\"text-blue-500 text-sm text-left\">{{ showError(errorBag, 'email') }}</div>\r\n        </div>\r\n        <routerLink class=\"btn btn-primary\" tag=\"a\" :to=\"{name: 'account-pos-products'}\">\r\n          Create New Order\r\n        </routerLink>\r\n      </div>\r\n    </template>\r\n  </pos-layout>\r\n</template>\r\n\r\n<script>\r\nimport POSLayout from '@/components/layouts/POSLayout'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport validator from '@/validator'\r\nimport * as _ from 'lodash'\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: 'Success',\r\n  components: {\r\n    'pos-layout': POSLayout,\r\n    Icon\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n\r\n    const {\r\n      showError,\r\n      validate\r\n    } = validator()\r\n\r\n    // State\r\n    const state = reactive({\r\n      ticket: null,\r\n      form: {\r\n        email: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        email: ['required', 'email']\r\n      },\r\n      messages: {\r\n        email: {\r\n          required: 'Email address is required',\r\n          email: 'Please provide a valid email address'\r\n        }\r\n      },\r\n      isProcessing: false\r\n    })\r\n\r\n    // Computed\r\n    const user = computed(() => store.state.user)\r\n    const pos = computed(() => store.state.pos)\r\n    const receipt = computed(() => {\r\n      const receipt = _.find(\r\n        pos.value.receipts, receipt => receipt.TICKETNUMBER === state.ticket.ticketId.toString()\r\n      )\r\n      if (receipt) {\r\n        receipt.items = pos.value.receiptItems.filter(item => item.RECIEPT_ID === receipt.ID)\r\n      }\r\n      return receipt\r\n    })\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(newVal, state.rules, state.messages)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Method\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0 && receipt.value) {\r\n        state.isProcessing = true\r\n        const ticketReceipt = {\r\n          'Receipt ID': receipt.value.ID,\r\n          Time: moment(new Date(Number(receipt.value.DATE))).format('DD/MM/YYYY H:mm A'),\r\n          'Total Amount': receipt.value.TOTAL + ' ' + receipt.value.CURRENCY,\r\n          Cashier: receipt.value.CASHIER,\r\n          Items: receipt.value.items\r\n        }\r\n        const payload = {\r\n          Call: 'POSRECEIPT',\r\n          MerchantID: Number(user.value.ID),\r\n          APIKey: user.value.APIKey,\r\n          email: state.form.email,\r\n          ticketData: JSON.stringify(ticketReceipt),\r\n          output: 'json'\r\n        }\r\n        const encodeForm = data => {\r\n          return Object.keys(data).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key])).join('&')\r\n        }\r\n        http.post(`${apiBaseUrl}/v2REAPI`, encodeForm(payload), {\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          }\r\n        }).then(response => {\r\n          state.isProcessing = false\r\n          if (response.data) {\r\n            state.form.email = ''\r\n            toast.success('Receipt sent successfully')\r\n          }\r\n          router.push({ name: 'account-pos-products' })\r\n        }).catch(error => {\r\n          state.isProcessing = false\r\n          console.log(error)\r\n        })\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      if (Object.keys(route.params).length > 0 && route.params.ticketId) {\r\n        state.ticket = _.find(pos.value.tickets, { ticketId: route.params.ticketId })\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      showError,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./Success.vue?vue&type=template&id=02b8e37c\"\nimport script from \"./Success.vue?vue&type=script&lang=js\"\nexport * from \"./Success.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <pos-layout>\r\n    <template v-slot:content>\r\n      <div class=\"text-center\" v-if=\"ticket && ticket.paymentRequest\">\r\n        <icon name=\"check-circle\" classes=\"w-24 h-24 text-green-500 mx-auto\"></icon>\r\n        <p class=\"font-bold text-green-500 mb-4\">\r\n          Invoice #{{ ticket.paymentRequest.TransactionID }} has been paid successfully!\r\n        </p>\r\n        <div class=\"w-full md:w-3/5 mx-auto mb-3\">\r\n          <form @submit.prevent=\"submit()\">\r\n            <div class=\"flex items-center mb-1\">\r\n              <div style=\"flex-grow: 1\">\r\n                <input :placeholder=\"translate('pos.receipts.email')\"\r\n                       aria-label=\"Email\" class=\"form-input w-full\" type=\"email\" v-model=\"form.email\"/>\r\n              </div>\r\n              <button :disabled=\"isProcessing\" class=\"btn btn-success ml-3\">\r\n                <span v-if=\"isProcessing\" class=\"mr-3\">\r\n                  <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n                </span>\r\n                <span>{{ translate('pos.receipts.btn_send_receipt') }}</span>\r\n              </button>\r\n            </div>\r\n          </form>\r\n          <div class=\"text-blue-500 text-sm text-left\">{{ showError(errorBag, 'email') }}</div>\r\n        </div>\r\n        <routerLink class=\"btn btn-primary\" tag=\"a\" :to=\"{name: 'account-pos-products'}\">\r\n          Create New Order\r\n        </routerLink>\r\n      </div>\r\n    </template>\r\n  </pos-layout>\r\n</template>\r\n\r\n<script>\r\nimport POSLayout from '@/components/layouts/POSLayout'\r\nimport Icon from '@/components/Icon'\r\nimport { computed, inject, onBeforeMount, reactive, toRefs, watch } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport validator from '@/validator'\r\nimport * as _ from 'lodash'\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n  name: 'Success',\r\n  components: {\r\n    'pos-layout': POSLayout,\r\n    Icon\r\n  },\r\n  setup () {\r\n    // Providers\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n\r\n    const {\r\n      showError,\r\n      validate\r\n    } = validator()\r\n\r\n    // State\r\n    const state = reactive({\r\n      ticket: null,\r\n      form: {\r\n        email: ''\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        email: ['required', 'email']\r\n      },\r\n      messages: {\r\n        email: {\r\n          required: 'Email address is required',\r\n          email: 'Please provide a valid email address'\r\n        }\r\n      },\r\n      isProcessing: false\r\n    })\r\n\r\n    // Computed\r\n    const user = computed(() => store.state.user)\r\n    const pos = computed(() => store.state.pos)\r\n    const receipt = computed(() => {\r\n      const receipt = _.find(\r\n        pos.value.receipts, receipt => receipt.TICKETNUMBER === state.ticket.ticketId.toString()\r\n      )\r\n      if (receipt) {\r\n        receipt.items = pos.value.receiptItems.filter(item => item.RECIEPT_ID === receipt.ID)\r\n      }\r\n      return receipt\r\n    })\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(newVal, state.rules, state.messages)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Method\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const submit = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0 && receipt.value) {\r\n        state.isProcessing = true\r\n        const ticketReceipt = {\r\n          'Receipt ID': receipt.value.ID,\r\n          Time: moment(new Date(Number(receipt.value.DATE))).format('DD/MM/YYYY H:mm A'),\r\n          'Total Amount': receipt.value.TOTAL + ' ' + receipt.value.CURRENCY,\r\n          Cashier: receipt.value.CASHIER,\r\n          Items: receipt.value.items\r\n        }\r\n        const payload = {\r\n          Call: 'POSRECEIPT',\r\n          MerchantID: Number(user.value.ID),\r\n          APIKey: user.value.APIKey,\r\n          email: state.form.email,\r\n          ticketData: JSON.stringify(ticketReceipt),\r\n          output: 'json'\r\n        }\r\n        const encodeForm = data => {\r\n          return Object.keys(data).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(data[key])).join('&')\r\n        }\r\n        http.post(`${apiBaseUrl}/v2REAPI`, encodeForm(payload), {\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          }\r\n        }).then(response => {\r\n          state.isProcessing = false\r\n          if (response.data) {\r\n            state.form.email = ''\r\n            toast.success('Receipt sent successfully')\r\n          }\r\n          router.push({ name: 'account-pos-products' })\r\n        }).catch(error => {\r\n          state.isProcessing = false\r\n          console.log(error)\r\n        })\r\n      }\r\n    }\r\n\r\n    onBeforeMount(() => {\r\n      if (Object.keys(route.params).length > 0 && route.params.ticketId) {\r\n        state.ticket = _.find(pos.value.tickets, { ticketId: route.params.ticketId })\r\n      }\r\n    })\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      showError,\r\n      submit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./Expired.vue?vue&type=template&id=59acbae0\"\nimport script from \"./Expired.vue?vue&type=script&lang=js\"\nexport * from \"./Expired.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}