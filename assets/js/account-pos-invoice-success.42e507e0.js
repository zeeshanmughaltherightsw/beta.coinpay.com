(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["account-pos-invoice-success"],{"2da5":function(e,t,c){"use strict";c.r(t);var s=c("f2bf");const a={key:0,class:"text-center"},o={class:"font-bold text-green-500 mb-4"},r={class:"w-full md:w-3/5 mx-auto mb-3"},n={class:"flex items-center mb-1"},l={style:{"flex-grow":"1"}},i=["placeholder"],m=["disabled"],b={key:0,class:"mr-3"},u={class:"text-blue-500 text-sm text-left"};function d(e,t,c,d,p,j){const O=Object(s["resolveComponent"])("icon"),f=Object(s["resolveComponent"])("routerLink"),v=Object(s["resolveComponent"])("pos-layout");return Object(s["openBlock"])(),Object(s["createBlock"])(v,null,{content:Object(s["withCtx"])(()=>[e.ticket&&e.ticket.paymentRequest?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",a,[Object(s["createVNode"])(O,{name:"check-circle",classes:"w-24 h-24 text-green-500 mx-auto"}),Object(s["createElementVNode"])("p",o," Invoice #"+Object(s["toDisplayString"])(e.ticket.paymentRequest.TransactionID)+" has been paid successfully! ",1),Object(s["createElementVNode"])("div",r,[Object(s["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(s["withModifiers"])(e=>d.submit(),["prevent"]))},[Object(s["createElementVNode"])("div",n,[Object(s["createElementVNode"])("div",l,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{placeholder:d.translate("pos.receipts.email"),"aria-label":"Email",class:"form-input w-full",type:"email","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t)},null,8,i),[[s["vModelText"],e.form.email]])]),Object(s["createElementVNode"])("button",{disabled:e.isProcessing,class:"btn btn-success ml-3"},[e.isProcessing?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",b,[Object(s["createVNode"])(O,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(d.translate("pos.receipts.btn_send_receipt")),1)],8,m)])],32),Object(s["createElementVNode"])("div",u,Object(s["toDisplayString"])(d.showError(e.errorBag,"email")),1)]),Object(s["createVNode"])(f,{class:"btn btn-primary",tag:"a",to:{name:"account-pos-products"}},{default:Object(s["withCtx"])(()=>[Object(s["createTextVNode"])(" Create New Order ")]),_:1})])):Object(s["createCommentVNode"])("",!0)]),_:1})}c("14d9");var p=c("66c3"),j=c("cdae"),O=c("6605"),f=c("5502"),v=c("ea45"),g=c("2ef0"),k=c("c1df"),h=c.n(k),E={name:"Success",components:{"pos-layout":p["a"],Icon:j["a"]},setup(){const e=Object(s["inject"])("translate"),t=Object(s["inject"])("http"),c=Object(s["inject"])("toast"),a=Object(f["b"])(),o=Object(O["d"])(),r=Object(O["e"])(),{showError:n,validate:l}=Object(v["a"])(),i=Object(s["reactive"])({ticket:null,form:{email:""},errorBag:{},rules:{email:["required","email"]},messages:{email:{required:"Email address is required",email:"Please provide a valid email address"}},isProcessing:!1}),m=Object(s["computed"])(()=>a.state.user),b=Object(s["computed"])(()=>a.state.pos),u=Object(s["computed"])(()=>{const e=g["find"](b.value.receipts,e=>e.TICKETNUMBER===i.ticket.ticketId.toString());return e&&(e.items=b.value.receiptItems.filter(t=>t.RECIEPT_ID===e.ID)),e});Object(s["watch"])(()=>({...i.form}),(e,t)=>{Object.keys(i.errorBag).length>0&&(i.errorBag=l(e,i.rules,i.messages))});const d="https://app.cointopay.com",p=()=>{if(i.errorBag=l(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length&&u.value){i.isProcessing=!0;const e={"Receipt ID":u.value.ID,Time:h()(new Date(Number(u.value.DATE))).format("DD/MM/YYYY H:mm A"),"Total Amount":u.value.TOTAL+" "+u.value.CURRENCY,Cashier:u.value.CASHIER,Items:u.value.items},s={Call:"POSRECEIPT",MerchantID:Number(m.value.ID),APIKey:m.value.APIKey,email:i.form.email,ticketData:JSON.stringify(e),output:"json"},a=e=>Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&");t.post(d+"/v2REAPI",a(s),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{i.isProcessing=!1,e.data&&(i.form.email="",c.success("Receipt sent successfully")),r.push({name:"account-pos-products"})}).catch(e=>{i.isProcessing=!1,console.log(e)})}};return Object(s["onBeforeMount"])(()=>{Object.keys(o.params).length>0&&o.params.ticketId&&(i.ticket=g["find"](b.value.tickets,{ticketId:o.params.ticketId}))}),{translate:e,...Object(s["toRefs"])(i),showError:n,submit:p}}},I=c("6b0d"),w=c.n(I);const y=w()(E,[["render",d]]);t["default"]=y},c460:function(e,t,c){"use strict";c.r(t);var s=c("f2bf");const a={key:0,class:"text-center"},o={class:"font-bold text-green-500 mb-4"},r={class:"w-full md:w-3/5 mx-auto mb-3"},n={class:"flex items-center mb-1"},l={style:{"flex-grow":"1"}},i=["placeholder"],m=["disabled"],b={key:0,class:"mr-3"},u={class:"text-blue-500 text-sm text-left"};function d(e,t,c,d,p,j){const O=Object(s["resolveComponent"])("icon"),f=Object(s["resolveComponent"])("routerLink"),v=Object(s["resolveComponent"])("pos-layout");return Object(s["openBlock"])(),Object(s["createBlock"])(v,null,{content:Object(s["withCtx"])(()=>[e.ticket&&e.ticket.paymentRequest?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",a,[Object(s["createVNode"])(O,{name:"check-circle",classes:"w-24 h-24 text-green-500 mx-auto"}),Object(s["createElementVNode"])("p",o," Invoice #"+Object(s["toDisplayString"])(e.ticket.paymentRequest.TransactionID)+" has been paid successfully! ",1),Object(s["createElementVNode"])("div",r,[Object(s["createElementVNode"])("form",{onSubmit:t[1]||(t[1]=Object(s["withModifiers"])(e=>d.submit(),["prevent"]))},[Object(s["createElementVNode"])("div",n,[Object(s["createElementVNode"])("div",l,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{placeholder:d.translate("pos.receipts.email"),"aria-label":"Email",class:"form-input w-full",type:"email","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t)},null,8,i),[[s["vModelText"],e.form.email]])]),Object(s["createElementVNode"])("button",{disabled:e.isProcessing,class:"btn btn-success ml-3"},[e.isProcessing?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",b,[Object(s["createVNode"])(O,{name:"spinner",classes:"w-4 h-4 text-white"})])):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("span",null,Object(s["toDisplayString"])(d.translate("pos.receipts.btn_send_receipt")),1)],8,m)])],32),Object(s["createElementVNode"])("div",u,Object(s["toDisplayString"])(d.showError(e.errorBag,"email")),1)]),Object(s["createVNode"])(f,{class:"btn btn-primary",tag:"a",to:{name:"account-pos-products"}},{default:Object(s["withCtx"])(()=>[Object(s["createTextVNode"])(" Create New Order ")]),_:1})])):Object(s["createCommentVNode"])("",!0)]),_:1})}c("14d9");var p=c("66c3"),j=c("cdae"),O=c("6605"),f=c("5502"),v=c("ea45"),g=c("2ef0"),k=c("c1df"),h=c.n(k),E={name:"Success",components:{"pos-layout":p["a"],Icon:j["a"]},setup(){const e=Object(s["inject"])("translate"),t=Object(s["inject"])("http"),c=Object(s["inject"])("toast"),a=Object(f["b"])(),o=Object(O["d"])(),r=Object(O["e"])(),{showError:n,validate:l}=Object(v["a"])(),i=Object(s["reactive"])({ticket:null,form:{email:""},errorBag:{},rules:{email:["required","email"]},messages:{email:{required:"Email address is required",email:"Please provide a valid email address"}},isProcessing:!1}),m=Object(s["computed"])(()=>a.state.user),b=Object(s["computed"])(()=>a.state.pos),u=Object(s["computed"])(()=>{const e=g["find"](b.value.receipts,e=>e.TICKETNUMBER===i.ticket.ticketId.toString());return e&&(e.items=b.value.receiptItems.filter(t=>t.RECIEPT_ID===e.ID)),e});Object(s["watch"])(()=>({...i.form}),(e,t)=>{Object.keys(i.errorBag).length>0&&(i.errorBag=l(e,i.rules,i.messages))});const d="https://app.cointopay.com",p=()=>{if(i.errorBag=l(i.form,i.rules,i.messages),0===Object.keys(i.errorBag).length&&u.value){i.isProcessing=!0;const e={"Receipt ID":u.value.ID,Time:h()(new Date(Number(u.value.DATE))).format("DD/MM/YYYY H:mm A"),"Total Amount":u.value.TOTAL+" "+u.value.CURRENCY,Cashier:u.value.CASHIER,Items:u.value.items},s={Call:"POSRECEIPT",MerchantID:Number(m.value.ID),APIKey:m.value.APIKey,email:i.form.email,ticketData:JSON.stringify(e),output:"json"},a=e=>Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&");t.post(d+"/v2REAPI",a(s),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{i.isProcessing=!1,e.data&&(i.form.email="",c.success("Receipt sent successfully")),r.push({name:"account-pos-products"})}).catch(e=>{i.isProcessing=!1,console.log(e)})}};return Object(s["onBeforeMount"])(()=>{Object.keys(o.params).length>0&&o.params.ticketId&&(i.ticket=g["find"](b.value.tickets,{ticketId:o.params.ticketId}))}),{translate:e,...Object(s["toRefs"])(i),showError:n,submit:p}}},I=c("6b0d"),w=c.n(I);const y=w()(E,[["render",d]]);t["default"]=y}}]);
//# sourceMappingURL=account-pos-invoice-success.42e507e0.js.map