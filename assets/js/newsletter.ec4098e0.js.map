{"version":3,"sources":["webpack:///./src/components/layouts/CenteredLayout.vue","webpack:///./src/components/layouts/CenteredLayout.vue?113c","webpack:///./src/views/Newsletter.vue","webpack:///./src/views/Newsletter.vue?f004"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_renderSlot","_ctx","name","__exports__","render","_createBlock","_component_centered_layout","$setup","_hoisted_5","_hoisted_6","_hoisted_7","email","autocomplete","type","_hoisted_8","_createVNode","_component_vue_recaptcha","ref","siteKey","theme","size","onExpire","onFail","onVerify","_hoisted_9","_hoisted_10","_component_j_button","disabled","buttonStyle","onClick","_hoisted_11","_component_icon","classes","_hoisted_12","components","CenteredLayout","JButton","Icon","vueRecaptcha","setup","translate","inject","http","toast","store","useStore","validate","showError","validator","saveNotification","compositionUtils","state","reactive","reCaptchaAPIKey","process","form","reCaptcha","output","errorBag","rules","messages","required","loader","mode","computed","watch","newVal","oldVal","Object","keys","length","apiBaseUrl","recaptchaVerified","response","recaptchaExpired","value","reset","recaptchaFailed","subscribe","payload","Subscriber","get","params","then","status","success","catch","error","console","log","unSubscribe","Unsubscriber","toRefs"],"mappings":"uIACOA,MAAM,O,GACJA,MAAM,mC,GACJA,MAAM,oD,GACJA,MAAM,mEACTC,MAAA,sC,wDAJRC,gCASM,MATNC,EASM,CARJC,gCAOM,MAPNC,EAOM,CANJD,gCAKM,MALNE,EAKM,CAJJF,gCAGM,MAHNG,EAGM,CADJC,wBAAOC,4BAQF,OACbC,KAAM,kB,qBCVR,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,U,kECLNZ,MAAM,Q,GACJA,MAAM,S,EAGXI,gCAAkD,MAA9CJ,MAAM,wCAAsC,S,GAC3CA,MAAM,Q,GACJA,MAAM,oB,GACJA,MAAM,4B,GAEFA,MAAM,Q,GAGJA,MAAM,wB,GAONA,MAAM,wB,GAERA,MAAM,mB,SAGwBA,MAAM,Q,SAMRA,MAAM,Q,sPA/BnDa,yBA0CkBC,Q,6BAzChB,IAwCM,CAxCNV,gCAwCM,MAxCND,EAwCM,CAvCJC,gCAEM,MAFNC,EAEM,CADJD,gCAA4C,uCAArCW,YAAU,qBAAD,KAElBT,EACAF,gCAkCM,MAlCNG,EAkCM,CAjCJH,gCAgCM,MAhCNY,EAgCM,CA/BJZ,gCA8BM,MA9BNa,EA8BM,CA7BJb,gCA4BO,aA3BLA,gCAIM,MAJNc,EAIM,CAHJd,gCAAkD,0CAAxCW,YAAU,qBAAD,+BACnBX,gCAAuF,S,qCAAvEK,OAAKU,MAAK,GAAEC,aAAa,MAAMpB,MAAM,oBAAoBqB,KAAK,S,4BAA9DZ,OAAKU,SACrBf,gCAA0E,MAA1EkB,EAA0E,6BAArCP,YAAUN,WAAU,UAAF,KAEzDL,gCAMM,YALJmB,yBAGgBC,GAHDC,IAAI,eAAgBC,QAASjB,kBAC5BkB,MAAOZ,OAAMa,KAAK,SAAUC,SAAQd,mBACpCe,OAAMf,kBAAkBgB,SAAQhB,qB,2DAEhDX,gCAA8E,MAA9E4B,EAA8E,6BAAzCjB,YAAUN,WAAU,cAAF,KAEzDL,gCAcM,MAdN6B,EAcM,CAbJV,yBAMWW,GANAC,SAAqB,KAAX1B,SAAeT,MAAM,oBAAoBqB,KAAK,SACzDe,YAAY,SAAUC,QAAK,eAAEtB,kB,8BACrC,IAEM,CAFgB,UAAXN,UAAM,yBAAjBP,gCAEM,MAFNoC,EAEM,CADJf,yBAA4DgB,GAArD7B,KAAM,UAAW8B,QAAQ,0B,uCAElCpC,gCAAuD,yCAA9CW,YAAU,4BAAD,K,qBAEpBQ,yBAKWW,GALAC,SAAqB,KAAX1B,SAAeY,KAAK,SAAUgB,QAAK,eAAEtB,gB,8BACxD,IAEM,CAFgB,QAAXN,UAAM,yBAAjBP,gCAEM,MAFNuC,EAEM,CADJlB,yBAA4DgB,GAArD7B,KAAM,UAAW8B,QAAQ,0B,uCAElCpC,gCAAoD,yCAA3CW,YAAU,yBAAD,K,0IAqBrB,GACbL,KAAM,aACNgC,WAAY,CAAEC,sBAAgBC,eAASC,YAAMC,kBAC7CC,QACE,MAAMD,EAAerB,iBAAI,MAEnBuB,EAAYC,oBAAO,aACnBC,EAAOD,oBAAO,QACdE,EAAQF,oBAAO,SAEfG,EAAQC,kBAER,SACJC,EAAQ,UACRC,GACEC,kBACE,iBAAEC,GAAqBC,iBAEvBC,EAAQC,sBAAS,CACrBC,gBAAiBC,2CACjBC,KAAM,CACJ5C,MAAO,GACP6C,UAAW,GACXC,OAAQ,QAEVC,SAAU,GACVC,MAAO,CACLhD,MAAO,CAAC,WAAY,SACpB6C,UAAW,CAAC,aAEdI,SAAU,CACRjD,MAAO,CACLkD,SAAU,4BACVlD,MAAO,wCAET6C,UAAW,CACTK,SAAU,+BAGdC,OAAQ,KAIJC,EAAOC,sBAAS,IAAMpB,EAAMO,MAAMY,MAGxCE,mBAAM,KAAM,IAAMd,EAAMI,OACtB,CAACW,EAAQC,KACHC,OAAOC,KAAKlB,EAAMO,UAAUY,OAAS,IACvCnB,EAAMO,SAAWZ,EAASK,EAAMI,KAAMJ,EAAMQ,MAAOR,EAAMS,aAK/D,MAAMW,EAAajB,4BACbkB,EAAqBC,IACzBtB,EAAMI,KAAKC,UAAYiB,GAEnBC,EAAmB,KACvBpC,EAAaqC,MAAMC,QACnBzB,EAAMI,KAAKC,UAAY,IAEnBqB,EAAkB,OAElBC,EAAY,KAEhB,GADA3B,EAAMO,SAAWZ,EAASK,EAAMI,KAAMJ,EAAMQ,MAAOR,EAAMS,UACd,IAAvCQ,OAAOC,KAAKlB,EAAMO,UAAUY,OAAc,CAC5CnB,EAAMW,OAAS,MACf,MAAMiB,EAAU,CACdC,WAAY7B,EAAMI,KAAK5C,MACvB,uBAAwBwC,EAAMI,KAAKC,WAErCd,EAAKuC,IAAOV,EAAF,aAA0B,CAClCW,OAAQH,IACPI,KAAKV,IACNtB,EAAMW,OAAS,GACS,MAApBW,EAASW,SACXzC,EAAM0C,QAAQ,qEACdpC,EAAiB,qEACbX,EAAaqC,OACfrC,EAAaqC,MAAMC,QAErBzB,EAAMI,KAAO,CACX5C,MAAO,GACP6C,UAAW,OAGd8B,MAAMC,IACPC,QAAQC,IAAIF,GACZ5C,EAAM4C,MAAM,yBACZpC,EAAMW,OAAS,GACXxB,EAAaqC,OACfrC,EAAaqC,MAAMC,QAErBzB,EAAMI,KAAKC,UAAY,OAIvBkC,EAAc,KAElB,GADAvC,EAAMO,SAAWZ,EAASK,EAAMI,KAAMJ,EAAMQ,MAAOR,EAAMS,UACd,IAAvCQ,OAAOC,KAAKlB,EAAMO,UAAUY,OAAc,CAC5CnB,EAAMW,OAAS,QACf,MAAMiB,EAAU,CACdY,aAAcxC,EAAMI,KAAK5C,MACzB,uBAAwBwC,EAAMI,KAAKC,WAErCd,EAAKuC,IAAOV,EAAF,aAA0B,CAClCW,OAAQH,IACPI,KAAKV,IACNtB,EAAMW,OAAS,GACS,MAApBW,EAASW,SACXzC,EAAM0C,QAAQ,qEACdpC,EAAiB,qEACjBX,EAAaqC,MAAMC,QACnBzB,EAAMI,KAAO,CACX5C,MAAO,GACP6C,UAAW,OAGd8B,MAAMC,IACPC,QAAQC,IAAIF,GACZ5C,EAAM4C,MAAM,yBACZpC,EAAMW,OAAS,GACfxB,EAAaqC,MAAMC,QACnBzB,EAAMI,KAAKC,UAAY,OAK7B,MAAO,CACLhB,eACGoD,oBAAOzC,GACVb,eACAyB,OACAhB,YACAyB,oBACAE,mBACAG,kBACAC,YACAY,iB,qBC9LN,MAAMvF,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"assets/js/newsletter.ec4098e0.js","sourcesContent":["<template>\r\n  <div class=\"p-4\">\r\n    <div class=\"max-w-7xl 3xl:max-w-8xl mx-auto\">\r\n      <div class=\"flex flex-col md:flex-row space-x-0 md:space-x-4\">\r\n        <div class=\"w-full mb-4 md:mb-0 bg-white dark:bg-gray-800 rounded shadow p-4\"\r\n          style=\"min-height: calc(100vh - 351px);\">\r\n          <slot/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CenteredLayout'\r\n}\r\n</script>\r\n\r\n<style scoped></style>\r\n","import { render } from \"./CenteredLayout.vue?vue&type=template&id=99072110\"\nimport script from \"./CenteredLayout.vue?vue&type=script&lang=js\"\nexport * from \"./CenteredLayout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <centered-layout>\r\n    <div class=\"card\">\r\n      <div class=\"title\">\r\n        <h5>{{ translate('newsletter.title') }}</h5>\r\n      </div>\r\n      <hr class=\"border-gray-300 dark:border-gray-600\"/>\r\n      <div class=\"body\">\r\n        <div class=\"grid grid-cols-2\">\r\n          <div class=\"col-span-2 lg:col-span-1\">\r\n            <form>\r\n              <div class=\"mb-2\">\r\n                <label>{{ translate('newsletter.email') }}</label>\r\n                <input v-model=\"form.email\" autocomplete=\"off\" class=\"form-input w-full\" type=\"email\"/>\r\n                <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'email') }}</div>\r\n              </div>\r\n              <div>\r\n                <vue-recaptcha ref=\"vueRecaptcha\" :siteKey=\"reCaptchaAPIKey\"\r\n                               :theme=\"mode\" size=\"normal\" @expire=\"recaptchaExpired\"\r\n                               @fail=\"recaptchaFailed\" @verify=\"recaptchaVerified\">\r\n                </vue-recaptcha>\r\n                <div class=\"text-red-500 text-sm\">{{ showError(errorBag, 'reCaptcha') }}</div>\r\n              </div>\r\n              <div class=\"mt-4 text-right\">\r\n                <j-button :disabled=\"loader !== ''\" class=\"mb-2 md:mb-0 mr-3\" type=\"button\"\r\n                          buttonStyle='danger' @click=\"unSubscribe()\">\r\n                  <div v-if=\"loader === 'unsub'\" class=\"mr-3\">\r\n                    <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n                  </div>\r\n                  <span>{{ translate('newsletter.un_subscribe') }}</span>\r\n                </j-button>\r\n                <j-button :disabled=\"loader !== ''\" type=\"button\" @click=\"subscribe()\">\r\n                  <div v-if=\"loader === 'sub'\" class=\"mr-3\">\r\n                    <icon :name=\"'spinner'\" classes=\"w-4 h-4 text-white\"></icon>\r\n                  </div>\r\n                  <span>{{ translate('newsletter.subscribe') }}</span>\r\n                </j-button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </centered-layout>\r\n</template>\r\n\r\n<script>\r\nimport CenteredLayout from '@/components/layouts/CenteredLayout'\r\nimport JButton from '@/templates/Button'\r\nimport Icon from '@/components/Icon'\r\nimport { inject, reactive, toRefs, computed, watch, ref } from 'vue'\r\nimport vueRecaptcha from 'vue3-recaptcha2'\r\nimport validator from '@/validator'\r\nimport compositionUtils from '@/compositionUtils'\r\nimport { useStore } from 'vuex'\r\n\r\nexport default {\r\n  name: 'Newsletter',\r\n  components: { CenteredLayout, JButton, Icon, vueRecaptcha },\r\n  setup () {\r\n    const vueRecaptcha = ref(null)\r\n\r\n    const translate = inject('translate')\r\n    const http = inject('http')\r\n    const toast = inject('toast')\r\n\r\n    const store = useStore()\r\n\r\n    const {\r\n      validate,\r\n      showError\r\n    } = validator()\r\n    const { saveNotification } = compositionUtils()\r\n    // State\r\n    const state = reactive({\r\n      reCaptchaAPIKey: process.env.VUE_APP_GOOGLE_reCAPTCHA_SITE_KEY,\r\n      form: {\r\n        email: '',\r\n        reCaptcha: '',\r\n        output: 'json'\r\n      },\r\n      errorBag: {},\r\n      rules: {\r\n        email: ['required', 'email'],\r\n        reCaptcha: ['required']\r\n      },\r\n      messages: {\r\n        email: {\r\n          required: 'Email address is required',\r\n          email: 'Please provide a valid email address'\r\n        },\r\n        reCaptcha: {\r\n          required: 'Verify you are not a robot'\r\n        }\r\n      },\r\n      loader: ''\r\n    })\r\n\r\n    // Computed\r\n    const mode = computed(() => store.state.mode)\r\n\r\n    // Watch\r\n    watch(() => ({ ...state.form }),\r\n      (newVal, oldVal) => {\r\n        if (Object.keys(state.errorBag).length > 0) {\r\n          state.errorBag = validate(state.form, state.rules, state.messages)\r\n        }\r\n      })\r\n\r\n    // Methods\r\n    const apiBaseUrl = process.env.VUE_APP_API_URL\r\n    const recaptchaVerified = (response) => {\r\n      state.form.reCaptcha = response\r\n    }\r\n    const recaptchaExpired = () => {\r\n      vueRecaptcha.value.reset()\r\n      state.form.reCaptcha = ''\r\n    }\r\n    const recaptchaFailed = () => {\r\n    }\r\n    const subscribe = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.loader = 'sub'\r\n        const payload = {\r\n          Subscriber: state.form.email,\r\n          'g-recaptcha-response': state.form.reCaptcha\r\n        }\r\n        http.get(`${apiBaseUrl}/Subscribe`, {\r\n          params: payload\r\n        }).then(response => {\r\n          state.loader = ''\r\n          if (response.status === 200) {\r\n            toast.success('Congratulations! You have subscribed to the Cointopay newsletter.')\r\n            saveNotification('Congratulations! You have subscribed to the Cointopay newsletter.')\r\n            if (vueRecaptcha.value) {\r\n              vueRecaptcha.value.reset()\r\n            }\r\n            state.form = {\r\n              email: '',\r\n              reCaptcha: ''\r\n            }\r\n          }\r\n        }).catch(error => {\r\n          console.log(error)\r\n          toast.error('Internal Server Error')\r\n          state.loader = ''\r\n          if (vueRecaptcha.value) {\r\n            vueRecaptcha.value.reset()\r\n          }\r\n          state.form.reCaptcha = ''\r\n        })\r\n      }\r\n    }\r\n    const unSubscribe = () => {\r\n      state.errorBag = validate(state.form, state.rules, state.messages)\r\n      if (Object.keys(state.errorBag).length === 0) {\r\n        state.loader = 'unsub'\r\n        const payload = {\r\n          Unsubscriber: state.form.email,\r\n          'g-recaptcha-response': state.form.reCaptcha\r\n        }\r\n        http.get(`${apiBaseUrl}/Subscribe`, {\r\n          params: payload\r\n        }).then(response => {\r\n          state.loader = ''\r\n          if (response.status === 200) {\r\n            toast.success('Congratulations! You have unsubscribed from Cointopay newsletter.')\r\n            saveNotification('Congratulations! You have unsubscribed from Cointopay newsletter.')\r\n            vueRecaptcha.value.reset()\r\n            state.form = {\r\n              email: '',\r\n              reCaptcha: ''\r\n            }\r\n          }\r\n        }).catch(error => {\r\n          console.log(error)\r\n          toast.error('Internal Server Error')\r\n          state.loader = ''\r\n          vueRecaptcha.value.reset()\r\n          state.form.reCaptcha = ''\r\n        })\r\n      }\r\n    }\r\n\r\n    return {\r\n      translate,\r\n      ...toRefs(state),\r\n      vueRecaptcha,\r\n      mode,\r\n      showError,\r\n      recaptchaVerified,\r\n      recaptchaExpired,\r\n      recaptchaFailed,\r\n      subscribe,\r\n      unSubscribe\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./Newsletter.vue?vue&type=template&id=717ffaa6\"\nimport script from \"./Newsletter.vue?vue&type=script&lang=js\"\nexport * from \"./Newsletter.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\zeesh\\\\OneDrive\\\\Desktop\\\\Cointopay\\\\cointopay.com.frontend.vuejs3.paymentfocus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}